var zA=Object.defineProperty;var GA=(t,s,a)=>s in t?zA(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var Yy=(t,s,a)=>GA(t,typeof s!="symbol"?s+"":s,a);function WA(t,s){for(var a=0;a<s.length;a++){const l=s[a];if(typeof l!="string"&&!Array.isArray(l)){for(const n in l)if(n!=="default"&&!(n in t)){const r=Object.getOwnPropertyDescriptor(l,n);r&&Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:()=>l[n]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function a(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=a(n);fetch(n.href,r)}})();function HA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Oi(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var a=function l(){return this instanceof l?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(t).forEach(function(l){var n=Object.getOwnPropertyDescriptor(t,l);Object.defineProperty(a,l,n.get?n:{enumerable:!0,get:function(){return t[l]}})}),a}var Jk={exports:{}},yh={},Zk={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xm=Symbol.for("react.element"),KA=Symbol.for("react.portal"),XA=Symbol.for("react.fragment"),YA=Symbol.for("react.strict_mode"),QA=Symbol.for("react.profiler"),JA=Symbol.for("react.provider"),ZA=Symbol.for("react.context"),e6=Symbol.for("react.forward_ref"),t6=Symbol.for("react.suspense"),s6=Symbol.for("react.memo"),a6=Symbol.for("react.lazy"),Qy=Symbol.iterator;function l6(t){return t===null||typeof t!="object"?null:(t=Qy&&t[Qy]||t["@@iterator"],typeof t=="function"?t:null)}var e4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t4=Object.assign,s4={};function dc(t,s,a){this.props=t,this.context=s,this.refs=s4,this.updater=a||e4}dc.prototype.isReactComponent={};dc.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};dc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a4(){}a4.prototype=dc.prototype;function Tb(t,s,a){this.props=t,this.context=s,this.refs=s4,this.updater=a||e4}var Rb=Tb.prototype=new a4;Rb.constructor=Tb;t4(Rb,dc.prototype);Rb.isPureReactComponent=!0;var Jy=Array.isArray,l4=Object.prototype.hasOwnProperty,Db={current:null},n4={key:!0,ref:!0,__self:!0,__source:!0};function r4(t,s,a){var l,n={},r=null,i=null;if(s!=null)for(l in s.ref!==void 0&&(i=s.ref),s.key!==void 0&&(r=""+s.key),s)l4.call(s,l)&&!n4.hasOwnProperty(l)&&(n[l]=s[l]);var o=arguments.length-2;if(o===1)n.children=a;else if(1<o){for(var d=Array(o),u=0;u<o;u++)d[u]=arguments[u+2];n.children=d}if(t&&t.defaultProps)for(l in o=t.defaultProps,o)n[l]===void 0&&(n[l]=o[l]);return{$$typeof:xm,type:t,key:r,ref:i,props:n,_owner:Db.current}}function n6(t,s){return{$$typeof:xm,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function Ob(t){return typeof t=="object"&&t!==null&&t.$$typeof===xm}function r6(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(a){return s[a]})}var Zy=/\/+/g;function R0(t,s){return typeof t=="object"&&t!==null&&t.key!=null?r6(""+t.key):s.toString(36)}function qx(t,s,a,l,n){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(r){case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case xm:case KA:i=!0}}if(i)return i=t,n=n(i),t=l===""?"."+R0(i,0):l,Jy(n)?(a="",t!=null&&(a=t.replace(Zy,"$&/")+"/"),qx(n,s,a,"",function(u){return u})):n!=null&&(Ob(n)&&(n=n6(n,a+(!n.key||i&&i.key===n.key?"":(""+n.key).replace(Zy,"$&/")+"/")+t)),s.push(n)),1;if(i=0,l=l===""?".":l+":",Jy(t))for(var o=0;o<t.length;o++){r=t[o];var d=l+R0(r,o);i+=qx(r,s,a,d,n)}else if(d=l6(t),typeof d=="function")for(t=d.call(t),o=0;!(r=t.next()).done;)r=r.value,d=l+R0(r,o++),i+=qx(r,s,a,d,n);else if(r==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return i}function Rm(t,s,a){if(t==null)return t;var l=[],n=0;return qx(t,l,"","",function(r){return s.call(a,r,n++)}),l}function i6(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(a){(t._status===0||t._status===-1)&&(t._status=1,t._result=a)},function(a){(t._status===0||t._status===-1)&&(t._status=2,t._result=a)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var nl={current:null},zx={transition:null},o6={ReactCurrentDispatcher:nl,ReactCurrentBatchConfig:zx,ReactCurrentOwner:Db};function i4(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:Rm,forEach:function(t,s,a){Rm(t,function(){s.apply(this,arguments)},a)},count:function(t){var s=0;return Rm(t,function(){s++}),s},toArray:function(t){return Rm(t,function(s){return s})||[]},only:function(t){if(!Ob(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Et.Component=dc;Et.Fragment=XA;Et.Profiler=QA;Et.PureComponent=Tb;Et.StrictMode=YA;Et.Suspense=t6;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o6;Et.act=i4;Et.cloneElement=function(t,s,a){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var l=t4({},t.props),n=t.key,r=t.ref,i=t._owner;if(s!=null){if(s.ref!==void 0&&(r=s.ref,i=Db.current),s.key!==void 0&&(n=""+s.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(d in s)l4.call(s,d)&&!n4.hasOwnProperty(d)&&(l[d]=s[d]===void 0&&o!==void 0?o[d]:s[d])}var d=arguments.length-2;if(d===1)l.children=a;else if(1<d){o=Array(d);for(var u=0;u<d;u++)o[u]=arguments[u+2];l.children=o}return{$$typeof:xm,type:t.type,key:n,ref:r,props:l,_owner:i}};Et.createContext=function(t){return t={$$typeof:ZA,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JA,_context:t},t.Consumer=t};Et.createElement=r4;Et.createFactory=function(t){var s=r4.bind(null,t);return s.type=t,s};Et.createRef=function(){return{current:null}};Et.forwardRef=function(t){return{$$typeof:e6,render:t}};Et.isValidElement=Ob;Et.lazy=function(t){return{$$typeof:a6,_payload:{_status:-1,_result:t},_init:i6}};Et.memo=function(t,s){return{$$typeof:s6,type:t,compare:s===void 0?null:s}};Et.startTransition=function(t){var s=zx.transition;zx.transition={};try{t()}finally{zx.transition=s}};Et.unstable_act=i4;Et.useCallback=function(t,s){return nl.current.useCallback(t,s)};Et.useContext=function(t){return nl.current.useContext(t)};Et.useDebugValue=function(){};Et.useDeferredValue=function(t){return nl.current.useDeferredValue(t)};Et.useEffect=function(t,s){return nl.current.useEffect(t,s)};Et.useId=function(){return nl.current.useId()};Et.useImperativeHandle=function(t,s,a){return nl.current.useImperativeHandle(t,s,a)};Et.useInsertionEffect=function(t,s){return nl.current.useInsertionEffect(t,s)};Et.useLayoutEffect=function(t,s){return nl.current.useLayoutEffect(t,s)};Et.useMemo=function(t,s){return nl.current.useMemo(t,s)};Et.useReducer=function(t,s,a){return nl.current.useReducer(t,s,a)};Et.useRef=function(t){return nl.current.useRef(t)};Et.useState=function(t){return nl.current.useState(t)};Et.useSyncExternalStore=function(t,s,a){return nl.current.useSyncExternalStore(t,s,a)};Et.useTransition=function(){return nl.current.useTransition()};Et.version="18.3.1";Zk.exports=Et;var c=Zk.exports;const ds=HA(c),hp=WA({__proto__:null,default:ds},[c]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d6=c,c6=Symbol.for("react.element"),u6=Symbol.for("react.fragment"),m6=Object.prototype.hasOwnProperty,x6=d6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p6={key:!0,ref:!0,__self:!0,__source:!0};function o4(t,s,a){var l,n={},r=null,i=null;a!==void 0&&(r=""+a),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(i=s.ref);for(l in s)m6.call(s,l)&&!p6.hasOwnProperty(l)&&(n[l]=s[l]);if(t&&t.defaultProps)for(l in s=t.defaultProps,s)n[l]===void 0&&(n[l]=s[l]);return{$$typeof:c6,type:t,key:r,ref:i,props:n,_owner:x6.current}}yh.Fragment=u6;yh.jsx=o4;yh.jsxs=o4;Jk.exports=yh;var e=Jk.exports,Kg={},d4={exports:{}},Il={},c4={exports:{}},u4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(L,M){var k=L.length;L.push(M);e:for(;0<k;){var P=k-1>>>1,Y=L[P];if(0<n(Y,M))L[P]=M,L[k]=Y,k=P;else break e}}function a(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var M=L[0],k=L.pop();if(k!==M){L[0]=k;e:for(var P=0,Y=L.length,F=Y>>>1;P<F;){var G=2*(P+1)-1,ve=L[G],Te=G+1,ye=L[Te];if(0>n(ve,k))Te<Y&&0>n(ye,ve)?(L[P]=ye,L[Te]=k,P=Te):(L[P]=ve,L[G]=k,P=G);else if(Te<Y&&0>n(ye,k))L[P]=ye,L[Te]=k,P=Te;else break e}}return M}function n(L,M){var k=L.sortIndex-M.sortIndex;return k!==0?k:L.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],u=[],x=1,p=null,h=3,j=!1,y=!1,f=!1,I=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(L){for(var M=a(u);M!==null;){if(M.callback===null)l(u);else if(M.startTime<=L)l(u),M.sortIndex=M.expirationTime,s(d,M);else break;M=a(u)}}function S(L){if(f=!1,C(L),!y)if(a(d)!==null)y=!0,re(z);else{var M=a(u);M!==null&&q(S,M.startTime-L)}}function z(L,M){y=!1,f&&(f=!1,A(W),W=-1),j=!0;var k=h;try{for(C(M),p=a(d);p!==null&&(!(p.expirationTime>M)||L&&!xe());){var P=p.callback;if(typeof P=="function"){p.callback=null,h=p.priorityLevel;var Y=P(p.expirationTime<=M);M=t.unstable_now(),typeof Y=="function"?p.callback=Y:p===a(d)&&l(d),C(M)}else l(d);p=a(d)}if(p!==null)var F=!0;else{var G=a(u);G!==null&&q(S,G.startTime-M),F=!1}return F}finally{p=null,h=k,j=!1}}var $=!1,D=null,W=-1,he=5,V=-1;function xe(){return!(t.unstable_now()-V<he)}function pe(){if(D!==null){var L=t.unstable_now();V=L;var M=!0;try{M=D(!0,L)}finally{M?be():($=!1,D=null)}}else $=!1}var be;if(typeof b=="function")be=function(){b(pe)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,K=fe.port2;fe.port1.onmessage=pe,be=function(){K.postMessage(null)}}else be=function(){I(pe,0)};function re(L){D=L,$||($=!0,be())}function q(L,M){W=I(function(){L(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){y||j||(y=!0,re(z))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return a(d)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var k=h;h=M;try{return L()}finally{h=k}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,M){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var k=h;h=L;try{return M()}finally{h=k}},t.unstable_scheduleCallback=function(L,M,k){var P=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?P+k:P):k=P,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=k+Y,L={id:x++,callback:M,priorityLevel:L,startTime:k,expirationTime:Y,sortIndex:-1},k>P?(L.sortIndex=k,s(u,L),a(d)===null&&L===a(u)&&(f?(A(W),W=-1):f=!0,q(S,k-P))):(L.sortIndex=Y,s(d,L),y||j||(y=!0,re(z))),L},t.unstable_shouldYield=xe,t.unstable_wrapCallback=function(L){var M=h;return function(){var k=h;h=M;try{return L.apply(this,arguments)}finally{h=k}}}})(u4);c4.exports=u4;var h6=c4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f6=c,Ol=h6;function Ge(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m4=new Set,Du={};function Oo(t,s){Yd(t,s),Yd(t+"Capture",s)}function Yd(t,s){for(Du[t]=s,t=0;t<s.length;t++)m4.add(s[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xg=Object.prototype.hasOwnProperty,g6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,eN={},tN={};function v6(t){return Xg.call(tN,t)?!0:Xg.call(eN,t)?!1:g6.test(t)?tN[t]=!0:(eN[t]=!0,!1)}function b6(t,s,a,l){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return l?!1:a!==null?!a.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j6(t,s,a,l){if(s===null||typeof s>"u"||b6(t,s,a,l))return!0;if(l)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function rl(t,s,a,l,n,r,i){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=l,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=t,this.type=s,this.sanitizeURL=r,this.removeEmptyString=i}var La={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){La[t]=new rl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];La[s]=new rl(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){La[t]=new rl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){La[t]=new rl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){La[t]=new rl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){La[t]=new rl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){La[t]=new rl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){La[t]=new rl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){La[t]=new rl(t,5,!1,t.toLowerCase(),null,!1,!1)});var $b=/[\-:]([a-z])/g;function Ib(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace($b,Ib);La[s]=new rl(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace($b,Ib);La[s]=new rl(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace($b,Ib);La[s]=new rl(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){La[t]=new rl(t,1,!1,t.toLowerCase(),null,!1,!1)});La.xlinkHref=new rl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){La[t]=new rl(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lb(t,s,a,l){var n=La.hasOwnProperty(s)?La[s]:null;(n!==null?n.type!==0:l||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(j6(s,a,n,l)&&(a=null),l||n===null?v6(s)&&(a===null?t.removeAttribute(s):t.setAttribute(s,""+a)):n.mustUseProperty?t[n.propertyName]=a===null?n.type===3?!1:"":a:(s=n.attributeName,l=n.attributeNamespace,a===null?t.removeAttribute(s):(n=n.type,a=n===3||n===4&&a===!0?"":""+a,l?t.setAttributeNS(l,s,a):t.setAttribute(s,a))))}var Ur=f6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Dm=Symbol.for("react.element"),bd=Symbol.for("react.portal"),jd=Symbol.for("react.fragment"),Fb=Symbol.for("react.strict_mode"),Yg=Symbol.for("react.profiler"),x4=Symbol.for("react.provider"),p4=Symbol.for("react.context"),_b=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),Jg=Symbol.for("react.suspense_list"),Vb=Symbol.for("react.memo"),ii=Symbol.for("react.lazy"),h4=Symbol.for("react.offscreen"),sN=Symbol.iterator;function jc(t){return t===null||typeof t!="object"?null:(t=sN&&t[sN]||t["@@iterator"],typeof t=="function"?t:null)}var Es=Object.assign,D0;function au(t){if(D0===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);D0=s&&s[1]||""}return`
`+D0+t}var O0=!1;function $0(t,s){if(!t||O0)return"";O0=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(u){var l=u}Reflect.construct(t,[],s)}else{try{s.call()}catch(u){l=u}t.call(s.prototype)}else{try{throw Error()}catch(u){l=u}t()}}catch(u){if(u&&l&&typeof u.stack=="string"){for(var n=u.stack.split(`
`),r=l.stack.split(`
`),i=n.length-1,o=r.length-1;1<=i&&0<=o&&n[i]!==r[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==r[o]){if(i!==1||o!==1)do if(i--,o--,0>o||n[i]!==r[o]){var d=`
`+n[i].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=i&&0<=o);break}}}finally{O0=!1,Error.prepareStackTrace=a}return(t=t?t.displayName||t.name:"")?au(t):""}function y6(t){switch(t.tag){case 5:return au(t.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return t=$0(t.type,!1),t;case 11:return t=$0(t.type.render,!1),t;case 1:return t=$0(t.type,!0),t;default:return""}}function Zg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jd:return"Fragment";case bd:return"Portal";case Yg:return"Profiler";case Fb:return"StrictMode";case Qg:return"Suspense";case Jg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case p4:return(t.displayName||"Context")+".Consumer";case x4:return(t._context.displayName||"Context")+".Provider";case _b:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Vb:return s=t.displayName||null,s!==null?s:Zg(t.type)||"Memo";case ii:s=t._payload,t=t._init;try{return Zg(t(s))}catch{}}return null}function N6(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zg(s);case 8:return s===Fb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Pi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function f4(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function w6(t){var s=f4(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),l=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,r=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return n.call(this)},set:function(i){l=""+i,r.call(this,i)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(i){l=""+i},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Om(t){t._valueTracker||(t._valueTracker=w6(t))}function g4(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=f4(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function fp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ev(t,s){var a=s.checked;return Es({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??t._wrapperState.initialChecked})}function aN(t,s){var a=s.defaultValue==null?"":s.defaultValue,l=s.checked!=null?s.checked:s.defaultChecked;a=Pi(s.value!=null?s.value:a),t._wrapperState={initialChecked:l,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function v4(t,s){s=s.checked,s!=null&&Lb(t,"checked",s,!1)}function tv(t,s){v4(t,s);var a=Pi(s.value),l=s.type;if(a!=null)l==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+a):t.value!==""+a&&(t.value=""+a);else if(l==="submit"||l==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?sv(t,s.type,a):s.hasOwnProperty("defaultValue")&&sv(t,s.type,Pi(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function lN(t,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var l=s.type;if(!(l!=="submit"&&l!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,a||s===t.value||(t.value=s),t.defaultValue=s}a=t.name,a!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,a!==""&&(t.name=a)}function sv(t,s,a){(s!=="number"||fp(t.ownerDocument)!==t)&&(a==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+a&&(t.defaultValue=""+a))}var lu=Array.isArray;function _d(t,s,a,l){if(t=t.options,s){s={};for(var n=0;n<a.length;n++)s["$"+a[n]]=!0;for(a=0;a<t.length;a++)n=s.hasOwnProperty("$"+t[a].value),t[a].selected!==n&&(t[a].selected=n),n&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Pi(a),s=null,n=0;n<t.length;n++){if(t[n].value===a){t[n].selected=!0,l&&(t[n].defaultSelected=!0);return}s!==null||t[n].disabled||(s=t[n])}s!==null&&(s.selected=!0)}}function av(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return Es({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function nN(t,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(Ge(92));if(lu(a)){if(1<a.length)throw Error(Ge(93));a=a[0]}s=a}s==null&&(s=""),a=s}t._wrapperState={initialValue:Pi(a)}}function b4(t,s){var a=Pi(s.value),l=Pi(s.defaultValue);a!=null&&(a=""+a,a!==t.value&&(t.value=a),s.defaultValue==null&&t.defaultValue!==a&&(t.defaultValue=a)),l!=null&&(t.defaultValue=""+l)}function rN(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function j4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lv(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?j4(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $m,y4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,l,n){MSApp.execUnsafeLocalFunction(function(){return t(s,a,l,n)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for($m=$m||document.createElement("div"),$m.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=$m.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function Ou(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var xu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k6=["Webkit","ms","Moz","O"];Object.keys(xu).forEach(function(t){k6.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),xu[s]=xu[t]})});function N4(t,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||xu.hasOwnProperty(t)&&xu[t]?(""+s).trim():s+"px"}function w4(t,s){t=t.style;for(var a in s)if(s.hasOwnProperty(a)){var l=a.indexOf("--")===0,n=N4(a,s[a],l);a==="float"&&(a="cssFloat"),l?t.setProperty(a,n):t[a]=n}}var C6=Es({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nv(t,s){if(s){if(C6[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Ge(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Ge(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Ge(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Ge(62))}}function rv(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iv=null;function Bb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ov=null,Vd=null,Bd=null;function iN(t){if(t=fm(t)){if(typeof ov!="function")throw Error(Ge(280));var s=t.stateNode;s&&(s=Sh(s),ov(t.stateNode,t.type,s))}}function k4(t){Vd?Bd?Bd.push(t):Bd=[t]:Vd=t}function C4(){if(Vd){var t=Vd,s=Bd;if(Bd=Vd=null,iN(t),s)for(t=0;t<s.length;t++)iN(s[t])}}function S4(t,s){return t(s)}function A4(){}var I0=!1;function E4(t,s,a){if(I0)return t(s,a);I0=!0;try{return S4(t,s,a)}finally{I0=!1,(Vd!==null||Bd!==null)&&(A4(),C4())}}function $u(t,s){var a=t.stateNode;if(a===null)return null;var l=Sh(a);if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(Ge(231,s,typeof a));return a}var dv=!1;if(Dr)try{var yc={};Object.defineProperty(yc,"passive",{get:function(){dv=!0}}),window.addEventListener("test",yc,yc),window.removeEventListener("test",yc,yc)}catch{dv=!1}function S6(t,s,a,l,n,r,i,o,d){var u=Array.prototype.slice.call(arguments,3);try{s.apply(a,u)}catch(x){this.onError(x)}}var pu=!1,gp=null,vp=!1,cv=null,A6={onError:function(t){pu=!0,gp=t}};function E6(t,s,a,l,n,r,i,o,d){pu=!1,gp=null,S6.apply(A6,arguments)}function P6(t,s,a,l,n,r,i,o,d){if(E6.apply(this,arguments),pu){if(pu){var u=gp;pu=!1,gp=null}else throw Error(Ge(198));vp||(vp=!0,cv=u)}}function $o(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function P4(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function oN(t){if($o(t)!==t)throw Error(Ge(188))}function M6(t){var s=t.alternate;if(!s){if(s=$o(t),s===null)throw Error(Ge(188));return s!==t?null:t}for(var a=t,l=s;;){var n=a.return;if(n===null)break;var r=n.alternate;if(r===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===r.child){for(r=n.child;r;){if(r===a)return oN(n),t;if(r===l)return oN(n),s;r=r.sibling}throw Error(Ge(188))}if(a.return!==l.return)a=n,l=r;else{for(var i=!1,o=n.child;o;){if(o===a){i=!0,a=n,l=r;break}if(o===l){i=!0,l=n,a=r;break}o=o.sibling}if(!i){for(o=r.child;o;){if(o===a){i=!0,a=r,l=n;break}if(o===l){i=!0,l=r,a=n;break}o=o.sibling}if(!i)throw Error(Ge(189))}}if(a.alternate!==l)throw Error(Ge(190))}if(a.tag!==3)throw Error(Ge(188));return a.stateNode.current===a?t:s}function M4(t){return t=M6(t),t!==null?T4(t):null}function T4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=T4(t);if(s!==null)return s;t=t.sibling}return null}var R4=Ol.unstable_scheduleCallback,dN=Ol.unstable_cancelCallback,T6=Ol.unstable_shouldYield,R6=Ol.unstable_requestPaint,Ws=Ol.unstable_now,D6=Ol.unstable_getCurrentPriorityLevel,Ub=Ol.unstable_ImmediatePriority,D4=Ol.unstable_UserBlockingPriority,bp=Ol.unstable_NormalPriority,O6=Ol.unstable_LowPriority,O4=Ol.unstable_IdlePriority,Nh=null,Zn=null;function $6(t){if(Zn&&typeof Zn.onCommitFiberRoot=="function")try{Zn.onCommitFiberRoot(Nh,t,void 0,(t.current.flags&128)===128)}catch{}}var Pn=Math.clz32?Math.clz32:F6,I6=Math.log,L6=Math.LN2;function F6(t){return t>>>=0,t===0?32:31-(I6(t)/L6|0)|0}var Im=64,Lm=4194304;function nu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jp(t,s){var a=t.pendingLanes;if(a===0)return 0;var l=0,n=t.suspendedLanes,r=t.pingedLanes,i=a&268435455;if(i!==0){var o=i&~n;o!==0?l=nu(o):(r&=i,r!==0&&(l=nu(r)))}else i=a&~n,i!==0?l=nu(i):r!==0&&(l=nu(r));if(l===0)return 0;if(s!==0&&s!==l&&!(s&n)&&(n=l&-l,r=s&-s,n>=r||n===16&&(r&4194240)!==0))return s;if(l&4&&(l|=a&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=l;0<s;)a=31-Pn(s),n=1<<a,l|=t[a],s&=~n;return l}function _6(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function V6(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,n=t.expirationTimes,r=t.pendingLanes;0<r;){var i=31-Pn(r),o=1<<i,d=n[i];d===-1?(!(o&a)||o&l)&&(n[i]=_6(o,s)):d<=s&&(t.expiredLanes|=o),r&=~o}}function uv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $4(){var t=Im;return Im<<=1,!(Im&4194240)&&(Im=64),t}function L0(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function pm(t,s,a){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Pn(s),t[s]=a}function B6(t,s){var a=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var l=t.eventTimes;for(t=t.expirationTimes;0<a;){var n=31-Pn(a),r=1<<n;s[n]=0,l[n]=-1,t[n]=-1,a&=~r}}function qb(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Pn(a),n=1<<l;n&s|t[l]&s&&(t[l]|=s),a&=~n}}var Gt=0;function I4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var L4,zb,F4,_4,V4,mv=!1,Fm=[],bi=null,ji=null,yi=null,Iu=new Map,Lu=new Map,di=[],U6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cN(t,s){switch(t){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":Iu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lu.delete(s.pointerId)}}function Nc(t,s,a,l,n,r){return t===null||t.nativeEvent!==r?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:r,targetContainers:[n]},s!==null&&(s=fm(s),s!==null&&zb(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,n!==null&&s.indexOf(n)===-1&&s.push(n),t)}function q6(t,s,a,l,n){switch(s){case"focusin":return bi=Nc(bi,t,s,a,l,n),!0;case"dragenter":return ji=Nc(ji,t,s,a,l,n),!0;case"mouseover":return yi=Nc(yi,t,s,a,l,n),!0;case"pointerover":var r=n.pointerId;return Iu.set(r,Nc(Iu.get(r)||null,t,s,a,l,n)),!0;case"gotpointercapture":return r=n.pointerId,Lu.set(r,Nc(Lu.get(r)||null,t,s,a,l,n)),!0}return!1}function B4(t){var s=uo(t.target);if(s!==null){var a=$o(s);if(a!==null){if(s=a.tag,s===13){if(s=P4(a),s!==null){t.blockedOn=s,V4(t.priority,function(){F4(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gx(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=xv(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);iv=l,a.target.dispatchEvent(l),iv=null}else return s=fm(a),s!==null&&zb(s),t.blockedOn=a,!1;s.shift()}return!0}function uN(t,s,a){Gx(t)&&a.delete(s)}function z6(){mv=!1,bi!==null&&Gx(bi)&&(bi=null),ji!==null&&Gx(ji)&&(ji=null),yi!==null&&Gx(yi)&&(yi=null),Iu.forEach(uN),Lu.forEach(uN)}function wc(t,s){t.blockedOn===s&&(t.blockedOn=null,mv||(mv=!0,Ol.unstable_scheduleCallback(Ol.unstable_NormalPriority,z6)))}function Fu(t){function s(n){return wc(n,t)}if(0<Fm.length){wc(Fm[0],t);for(var a=1;a<Fm.length;a++){var l=Fm[a];l.blockedOn===t&&(l.blockedOn=null)}}for(bi!==null&&wc(bi,t),ji!==null&&wc(ji,t),yi!==null&&wc(yi,t),Iu.forEach(s),Lu.forEach(s),a=0;a<di.length;a++)l=di[a],l.blockedOn===t&&(l.blockedOn=null);for(;0<di.length&&(a=di[0],a.blockedOn===null);)B4(a),a.blockedOn===null&&di.shift()}var Ud=Ur.ReactCurrentBatchConfig,yp=!0;function G6(t,s,a,l){var n=Gt,r=Ud.transition;Ud.transition=null;try{Gt=1,Gb(t,s,a,l)}finally{Gt=n,Ud.transition=r}}function W6(t,s,a,l){var n=Gt,r=Ud.transition;Ud.transition=null;try{Gt=4,Gb(t,s,a,l)}finally{Gt=n,Ud.transition=r}}function Gb(t,s,a,l){if(yp){var n=xv(t,s,a,l);if(n===null)H0(t,s,l,Np,a),cN(t,l);else if(q6(n,t,s,a,l))l.stopPropagation();else if(cN(t,l),s&4&&-1<U6.indexOf(t)){for(;n!==null;){var r=fm(n);if(r!==null&&L4(r),r=xv(t,s,a,l),r===null&&H0(t,s,l,Np,a),r===n)break;n=r}n!==null&&l.stopPropagation()}else H0(t,s,l,null,a)}}var Np=null;function xv(t,s,a,l){if(Np=null,t=Bb(l),t=uo(t),t!==null)if(s=$o(t),s===null)t=null;else if(a=s.tag,a===13){if(t=P4(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return Np=t,null}function U4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D6()){case Ub:return 1;case D4:return 4;case bp:case O6:return 16;case O4:return 536870912;default:return 16}default:return 16}}var pi=null,Wb=null,Wx=null;function q4(){if(Wx)return Wx;var t,s=Wb,a=s.length,l,n="value"in pi?pi.value:pi.textContent,r=n.length;for(t=0;t<a&&s[t]===n[t];t++);var i=a-t;for(l=1;l<=i&&s[a-l]===n[r-l];l++);return Wx=n.slice(t,1<l?1-l:void 0)}function Hx(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function _m(){return!0}function mN(){return!1}function Ll(t){function s(a,l,n,r,i){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=r,this.target=i,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(a=t[o],this[o]=a?a(r):r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?_m:mN,this.isPropagationStopped=mN,this}return Es(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=_m)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=_m)},persist:function(){},isPersistent:_m}),s}var cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hb=Ll(cc),hm=Es({},cc,{view:0,detail:0}),H6=Ll(hm),F0,_0,kc,wh=Es({},hm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Kb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kc&&(kc&&t.type==="mousemove"?(F0=t.screenX-kc.screenX,_0=t.screenY-kc.screenY):_0=F0=0,kc=t),F0)},movementY:function(t){return"movementY"in t?t.movementY:_0}}),xN=Ll(wh),K6=Es({},wh,{dataTransfer:0}),X6=Ll(K6),Y6=Es({},hm,{relatedTarget:0}),V0=Ll(Y6),Q6=Es({},cc,{animationName:0,elapsedTime:0,pseudoElement:0}),J6=Ll(Q6),Z6=Es({},cc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),eE=Ll(Z6),tE=Es({},cc,{data:0}),pN=Ll(tE),sE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nE(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=lE[t])?!!s[t]:!1}function Kb(){return nE}var rE=Es({},hm,{key:function(t){if(t.key){var s=sE[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Hx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Kb,charCode:function(t){return t.type==="keypress"?Hx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),iE=Ll(rE),oE=Es({},wh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hN=Ll(oE),dE=Es({},hm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Kb}),cE=Ll(dE),uE=Es({},cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),mE=Ll(uE),xE=Es({},wh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pE=Ll(xE),hE=[9,13,27,32],Xb=Dr&&"CompositionEvent"in window,hu=null;Dr&&"documentMode"in document&&(hu=document.documentMode);var fE=Dr&&"TextEvent"in window&&!hu,z4=Dr&&(!Xb||hu&&8<hu&&11>=hu),fN=" ",gN=!1;function G4(t,s){switch(t){case"keyup":return hE.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function W4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yd=!1;function gE(t,s){switch(t){case"compositionend":return W4(s);case"keypress":return s.which!==32?null:(gN=!0,fN);case"textInput":return t=s.data,t===fN&&gN?null:t;default:return null}}function vE(t,s){if(yd)return t==="compositionend"||!Xb&&G4(t,s)?(t=q4(),Wx=Wb=pi=null,yd=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return z4&&s.locale!=="ko"?null:s.data;default:return null}}var bE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vN(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!bE[t.type]:s==="textarea"}function H4(t,s,a,l){k4(l),s=wp(s,"onChange"),0<s.length&&(a=new Hb("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var fu=null,_u=null;function jE(t){l5(t,0)}function kh(t){var s=kd(t);if(g4(s))return t}function yE(t,s){if(t==="change")return s}var K4=!1;if(Dr){var B0;if(Dr){var U0="oninput"in document;if(!U0){var bN=document.createElement("div");bN.setAttribute("oninput","return;"),U0=typeof bN.oninput=="function"}B0=U0}else B0=!1;K4=B0&&(!document.documentMode||9<document.documentMode)}function jN(){fu&&(fu.detachEvent("onpropertychange",X4),_u=fu=null)}function X4(t){if(t.propertyName==="value"&&kh(_u)){var s=[];H4(s,_u,t,Bb(t)),E4(jE,s)}}function NE(t,s,a){t==="focusin"?(jN(),fu=s,_u=a,fu.attachEvent("onpropertychange",X4)):t==="focusout"&&jN()}function wE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kh(_u)}function kE(t,s){if(t==="click")return kh(s)}function CE(t,s){if(t==="input"||t==="change")return kh(s)}function SE(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var On=typeof Object.is=="function"?Object.is:SE;function Vu(t,s){if(On(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!Xg.call(s,n)||!On(t[n],s[n]))return!1}return!0}function yN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function NN(t,s){var a=yN(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yN(a)}}function Y4(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?Y4(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Q4(){for(var t=window,s=fp();s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=fp(t.document)}return s}function Yb(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function AE(t){var s=Q4(),a=t.focusedElem,l=t.selectionRange;if(s!==a&&a&&a.ownerDocument&&Y4(a.ownerDocument.documentElement,a)){if(l!==null&&Yb(a)){if(s=l.start,t=l.end,t===void 0&&(t=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(t,a.value.length);else if(t=(s=a.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var n=a.textContent.length,r=Math.min(l.start,n);l=l.end===void 0?r:Math.min(l.end,n),!t.extend&&r>l&&(n=l,l=r,r=n),n=NN(a,r);var i=NN(a,l);n&&i&&(t.rangeCount!==1||t.anchorNode!==n.node||t.anchorOffset!==n.offset||t.focusNode!==i.node||t.focusOffset!==i.offset)&&(s=s.createRange(),s.setStart(n.node,n.offset),t.removeAllRanges(),r>l?(t.addRange(s),t.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),t.addRange(s)))}}for(s=[],t=a;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)t=s[a],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EE=Dr&&"documentMode"in document&&11>=document.documentMode,Nd=null,pv=null,gu=null,hv=!1;function wN(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;hv||Nd==null||Nd!==fp(l)||(l=Nd,"selectionStart"in l&&Yb(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gu&&Vu(gu,l)||(gu=l,l=wp(pv,"onSelect"),0<l.length&&(s=new Hb("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=Nd)))}function Vm(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var wd={animationend:Vm("Animation","AnimationEnd"),animationiteration:Vm("Animation","AnimationIteration"),animationstart:Vm("Animation","AnimationStart"),transitionend:Vm("Transition","TransitionEnd")},q0={},J4={};Dr&&(J4=document.createElement("div").style,"AnimationEvent"in window||(delete wd.animationend.animation,delete wd.animationiteration.animation,delete wd.animationstart.animation),"TransitionEvent"in window||delete wd.transitionend.transition);function Ch(t){if(q0[t])return q0[t];if(!wd[t])return t;var s=wd[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in J4)return q0[t]=s[a];return t}var Z4=Ch("animationend"),e5=Ch("animationiteration"),t5=Ch("animationstart"),s5=Ch("transitionend"),a5=new Map,kN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $i(t,s){a5.set(t,s),Oo(s,[t])}for(var z0=0;z0<kN.length;z0++){var G0=kN[z0],PE=G0.toLowerCase(),ME=G0[0].toUpperCase()+G0.slice(1);$i(PE,"on"+ME)}$i(Z4,"onAnimationEnd");$i(e5,"onAnimationIteration");$i(t5,"onAnimationStart");$i("dblclick","onDoubleClick");$i("focusin","onFocus");$i("focusout","onBlur");$i(s5,"onTransitionEnd");Yd("onMouseEnter",["mouseout","mouseover"]);Yd("onMouseLeave",["mouseout","mouseover"]);Yd("onPointerEnter",["pointerout","pointerover"]);Yd("onPointerLeave",["pointerout","pointerover"]);Oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ru));function CN(t,s,a){var l=t.type||"unknown-event";t.currentTarget=a,P6(l,s,void 0,t),t.currentTarget=null}function l5(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],n=l.event;l=l.listeners;e:{var r=void 0;if(s)for(var i=l.length-1;0<=i;i--){var o=l[i],d=o.instance,u=o.currentTarget;if(o=o.listener,d!==r&&n.isPropagationStopped())break e;CN(n,o,u),r=d}else for(i=0;i<l.length;i++){if(o=l[i],d=o.instance,u=o.currentTarget,o=o.listener,d!==r&&n.isPropagationStopped())break e;CN(n,o,u),r=d}}}if(vp)throw t=cv,vp=!1,cv=null,t}function ls(t,s){var a=s[jv];a===void 0&&(a=s[jv]=new Set);var l=t+"__bubble";a.has(l)||(n5(s,t,2,!1),a.add(l))}function W0(t,s,a){var l=0;s&&(l|=4),n5(a,t,l,s)}var Bm="_reactListening"+Math.random().toString(36).slice(2);function Bu(t){if(!t[Bm]){t[Bm]=!0,m4.forEach(function(a){a!=="selectionchange"&&(TE.has(a)||W0(a,!1,t),W0(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Bm]||(s[Bm]=!0,W0("selectionchange",!1,s))}}function n5(t,s,a,l){switch(U4(s)){case 1:var n=G6;break;case 4:n=W6;break;default:n=Gb}a=n.bind(null,s,a,t),n=void 0,!dv||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(n=!0),l?n!==void 0?t.addEventListener(s,a,{capture:!0,passive:n}):t.addEventListener(s,a,!0):n!==void 0?t.addEventListener(s,a,{passive:n}):t.addEventListener(s,a,!1)}function H0(t,s,a,l,n){var r=l;if(!(s&1)&&!(s&2)&&l!==null)e:for(;;){if(l===null)return;var i=l.tag;if(i===3||i===4){var o=l.stateNode.containerInfo;if(o===n||o.nodeType===8&&o.parentNode===n)break;if(i===4)for(i=l.return;i!==null;){var d=i.tag;if((d===3||d===4)&&(d=i.stateNode.containerInfo,d===n||d.nodeType===8&&d.parentNode===n))return;i=i.return}for(;o!==null;){if(i=uo(o),i===null)return;if(d=i.tag,d===5||d===6){l=r=i;continue e}o=o.parentNode}}l=l.return}E4(function(){var u=r,x=Bb(a),p=[];e:{var h=a5.get(t);if(h!==void 0){var j=Hb,y=t;switch(t){case"keypress":if(Hx(a)===0)break e;case"keydown":case"keyup":j=iE;break;case"focusin":y="focus",j=V0;break;case"focusout":y="blur",j=V0;break;case"beforeblur":case"afterblur":j=V0;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=xN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=X6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=cE;break;case Z4:case e5:case t5:j=J6;break;case s5:j=mE;break;case"scroll":j=H6;break;case"wheel":j=pE;break;case"copy":case"cut":case"paste":j=eE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=hN}var f=(s&4)!==0,I=!f&&t==="scroll",A=f?h!==null?h+"Capture":null:h;f=[];for(var b=u,C;b!==null;){C=b;var S=C.stateNode;if(C.tag===5&&S!==null&&(C=S,A!==null&&(S=$u(b,A),S!=null&&f.push(Uu(b,S,C)))),I)break;b=b.return}0<f.length&&(h=new j(h,y,null,a,x),p.push({event:h,listeners:f}))}}if(!(s&7)){e:{if(h=t==="mouseover"||t==="pointerover",j=t==="mouseout"||t==="pointerout",h&&a!==iv&&(y=a.relatedTarget||a.fromElement)&&(uo(y)||y[Or]))break e;if((j||h)&&(h=x.window===x?x:(h=x.ownerDocument)?h.defaultView||h.parentWindow:window,j?(y=a.relatedTarget||a.toElement,j=u,y=y?uo(y):null,y!==null&&(I=$o(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(j=null,y=u),j!==y)){if(f=xN,S="onMouseLeave",A="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(f=hN,S="onPointerLeave",A="onPointerEnter",b="pointer"),I=j==null?h:kd(j),C=y==null?h:kd(y),h=new f(S,b+"leave",j,a,x),h.target=I,h.relatedTarget=C,S=null,uo(x)===u&&(f=new f(A,b+"enter",y,a,x),f.target=C,f.relatedTarget=I,S=f),I=S,j&&y)t:{for(f=j,A=y,b=0,C=f;C;C=Fo(C))b++;for(C=0,S=A;S;S=Fo(S))C++;for(;0<b-C;)f=Fo(f),b--;for(;0<C-b;)A=Fo(A),C--;for(;b--;){if(f===A||A!==null&&f===A.alternate)break t;f=Fo(f),A=Fo(A)}f=null}else f=null;j!==null&&SN(p,h,j,f,!1),y!==null&&I!==null&&SN(p,I,y,f,!0)}}e:{if(h=u?kd(u):window,j=h.nodeName&&h.nodeName.toLowerCase(),j==="select"||j==="input"&&h.type==="file")var z=yE;else if(vN(h))if(K4)z=CE;else{z=wE;var $=NE}else(j=h.nodeName)&&j.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(z=kE);if(z&&(z=z(t,u))){H4(p,z,a,x);break e}$&&$(t,h,u),t==="focusout"&&($=h._wrapperState)&&$.controlled&&h.type==="number"&&sv(h,"number",h.value)}switch($=u?kd(u):window,t){case"focusin":(vN($)||$.contentEditable==="true")&&(Nd=$,pv=u,gu=null);break;case"focusout":gu=pv=Nd=null;break;case"mousedown":hv=!0;break;case"contextmenu":case"mouseup":case"dragend":hv=!1,wN(p,a,x);break;case"selectionchange":if(EE)break;case"keydown":case"keyup":wN(p,a,x)}var D;if(Xb)e:{switch(t){case"compositionstart":var W="onCompositionStart";break e;case"compositionend":W="onCompositionEnd";break e;case"compositionupdate":W="onCompositionUpdate";break e}W=void 0}else yd?G4(t,a)&&(W="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(W="onCompositionStart");W&&(z4&&a.locale!=="ko"&&(yd||W!=="onCompositionStart"?W==="onCompositionEnd"&&yd&&(D=q4()):(pi=x,Wb="value"in pi?pi.value:pi.textContent,yd=!0)),$=wp(u,W),0<$.length&&(W=new pN(W,t,null,a,x),p.push({event:W,listeners:$}),D?W.data=D:(D=W4(a),D!==null&&(W.data=D)))),(D=fE?gE(t,a):vE(t,a))&&(u=wp(u,"onBeforeInput"),0<u.length&&(x=new pN("onBeforeInput","beforeinput",null,a,x),p.push({event:x,listeners:u}),x.data=D))}l5(p,s)})}function Uu(t,s,a){return{instance:t,listener:s,currentTarget:a}}function wp(t,s){for(var a=s+"Capture",l=[];t!==null;){var n=t,r=n.stateNode;n.tag===5&&r!==null&&(n=r,r=$u(t,a),r!=null&&l.unshift(Uu(t,r,n)),r=$u(t,s),r!=null&&l.push(Uu(t,r,n))),t=t.return}return l}function Fo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function SN(t,s,a,l,n){for(var r=s._reactName,i=[];a!==null&&a!==l;){var o=a,d=o.alternate,u=o.stateNode;if(d!==null&&d===l)break;o.tag===5&&u!==null&&(o=u,n?(d=$u(a,r),d!=null&&i.unshift(Uu(a,d,o))):n||(d=$u(a,r),d!=null&&i.push(Uu(a,d,o)))),a=a.return}i.length!==0&&t.push({event:s,listeners:i})}var RE=/\r\n?/g,DE=/\u0000|\uFFFD/g;function AN(t){return(typeof t=="string"?t:""+t).replace(RE,`
`).replace(DE,"")}function Um(t,s,a){if(s=AN(s),AN(t)!==s&&a)throw Error(Ge(425))}function kp(){}var fv=null,gv=null;function vv(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var bv=typeof setTimeout=="function"?setTimeout:void 0,OE=typeof clearTimeout=="function"?clearTimeout:void 0,EN=typeof Promise=="function"?Promise:void 0,$E=typeof queueMicrotask=="function"?queueMicrotask:typeof EN<"u"?function(t){return EN.resolve(null).then(t).catch(IE)}:bv;function IE(t){setTimeout(function(){throw t})}function K0(t,s){var a=s,l=0;do{var n=a.nextSibling;if(t.removeChild(a),n&&n.nodeType===8)if(a=n.data,a==="/$"){if(l===0){t.removeChild(n),Fu(s);return}l--}else a!=="$"&&a!=="$?"&&a!=="$!"||l++;a=n}while(a);Fu(s)}function Ni(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function PN(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}var uc=Math.random().toString(36).slice(2),Xn="__reactFiber$"+uc,qu="__reactProps$"+uc,Or="__reactContainer$"+uc,jv="__reactEvents$"+uc,LE="__reactListeners$"+uc,FE="__reactHandles$"+uc;function uo(t){var s=t[Xn];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Or]||a[Xn]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=PN(t);t!==null;){if(a=t[Xn])return a;t=PN(t)}return s}t=a,a=t.parentNode}return null}function fm(t){return t=t[Xn]||t[Or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kd(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ge(33))}function Sh(t){return t[qu]||null}var yv=[],Cd=-1;function Ii(t){return{current:t}}function cs(t){0>Cd||(t.current=yv[Cd],yv[Cd]=null,Cd--)}function ss(t,s){Cd++,yv[Cd]=t.current,t.current=s}var Mi={},Ka=Ii(Mi),gl=Ii(!1),ko=Mi;function Qd(t,s){var a=t.type.contextTypes;if(!a)return Mi;var l=t.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===s)return l.__reactInternalMemoizedMaskedChildContext;var n={},r;for(r in a)n[r]=s[r];return l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=n),n}function vl(t){return t=t.childContextTypes,t!=null}function Cp(){cs(gl),cs(Ka)}function MN(t,s,a){if(Ka.current!==Mi)throw Error(Ge(168));ss(Ka,s),ss(gl,a)}function r5(t,s,a){var l=t.stateNode;if(s=s.childContextTypes,typeof l.getChildContext!="function")return a;l=l.getChildContext();for(var n in l)if(!(n in s))throw Error(Ge(108,N6(t)||"Unknown",n));return Es({},a,l)}function Sp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ko=Ka.current,ss(Ka,t),ss(gl,gl.current),!0}function TN(t,s,a){var l=t.stateNode;if(!l)throw Error(Ge(169));a?(t=r5(t,s,ko),l.__reactInternalMemoizedMergedChildContext=t,cs(gl),cs(Ka),ss(Ka,t)):cs(gl),ss(gl,a)}var vr=null,Ah=!1,X0=!1;function i5(t){vr===null?vr=[t]:vr.push(t)}function _E(t){Ah=!0,i5(t)}function Li(){if(!X0&&vr!==null){X0=!0;var t=0,s=Gt;try{var a=vr;for(Gt=1;t<a.length;t++){var l=a[t];do l=l(!0);while(l!==null)}vr=null,Ah=!1}catch(n){throw vr!==null&&(vr=vr.slice(t+1)),R4(Ub,Li),n}finally{Gt=s,X0=!1}}return null}var Sd=[],Ad=0,Ap=null,Ep=0,Ql=[],Jl=0,Co=null,kr=1,Cr="";function lo(t,s){Sd[Ad++]=Ep,Sd[Ad++]=Ap,Ap=t,Ep=s}function o5(t,s,a){Ql[Jl++]=kr,Ql[Jl++]=Cr,Ql[Jl++]=Co,Co=t;var l=kr;t=Cr;var n=32-Pn(l)-1;l&=~(1<<n),a+=1;var r=32-Pn(s)+n;if(30<r){var i=n-n%5;r=(l&(1<<i)-1).toString(32),l>>=i,n-=i,kr=1<<32-Pn(s)+n|a<<n|l,Cr=r+t}else kr=1<<r|a<<n|l,Cr=t}function Qb(t){t.return!==null&&(lo(t,1),o5(t,1,0))}function Jb(t){for(;t===Ap;)Ap=Sd[--Ad],Sd[Ad]=null,Ep=Sd[--Ad],Sd[Ad]=null;for(;t===Co;)Co=Ql[--Jl],Ql[Jl]=null,Cr=Ql[--Jl],Ql[Jl]=null,kr=Ql[--Jl],Ql[Jl]=null}var Ml=null,Pl=null,vs=!1,wn=null;function d5(t,s){var a=en(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=t,s=t.deletions,s===null?(t.deletions=[a],t.flags|=16):s.push(a)}function RN(t,s){switch(t.tag){case 5:var a=t.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Ml=t,Pl=Ni(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Ml=t,Pl=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Co!==null?{id:kr,overflow:Cr}:null,t.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=en(18,null,null,0),a.stateNode=s,a.return=t,t.child=a,Ml=t,Pl=null,!0):!1;default:return!1}}function Nv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function wv(t){if(vs){var s=Pl;if(s){var a=s;if(!RN(t,s)){if(Nv(t))throw Error(Ge(418));s=Ni(a.nextSibling);var l=Ml;s&&RN(t,s)?d5(l,a):(t.flags=t.flags&-4097|2,vs=!1,Ml=t)}}else{if(Nv(t))throw Error(Ge(418));t.flags=t.flags&-4097|2,vs=!1,Ml=t}}}function DN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ml=t}function qm(t){if(t!==Ml)return!1;if(!vs)return DN(t),vs=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!vv(t.type,t.memoizedProps)),s&&(s=Pl)){if(Nv(t))throw c5(),Error(Ge(418));for(;s;)d5(t,s),s=Ni(s.nextSibling)}if(DN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ge(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"){if(s===0){Pl=Ni(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}t=t.nextSibling}Pl=null}}else Pl=Ml?Ni(t.stateNode.nextSibling):null;return!0}function c5(){for(var t=Pl;t;)t=Ni(t.nextSibling)}function Jd(){Pl=Ml=null,vs=!1}function Zb(t){wn===null?wn=[t]:wn.push(t)}var VE=Ur.ReactCurrentBatchConfig;function Cc(t,s,a){if(t=a.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(Ge(309));var l=a.stateNode}if(!l)throw Error(Ge(147,t));var n=l,r=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===r?s.ref:(s=function(i){var o=n.refs;i===null?delete o[r]:o[r]=i},s._stringRef=r,s)}if(typeof t!="string")throw Error(Ge(284));if(!a._owner)throw Error(Ge(290,t))}return t}function zm(t,s){throw t=Object.prototype.toString.call(s),Error(Ge(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ON(t){var s=t._init;return s(t._payload)}function u5(t){function s(A,b){if(t){var C=A.deletions;C===null?(A.deletions=[b],A.flags|=16):C.push(b)}}function a(A,b){if(!t)return null;for(;b!==null;)s(A,b),b=b.sibling;return null}function l(A,b){for(A=new Map;b!==null;)b.key!==null?A.set(b.key,b):A.set(b.index,b),b=b.sibling;return A}function n(A,b){return A=Si(A,b),A.index=0,A.sibling=null,A}function r(A,b,C){return A.index=C,t?(C=A.alternate,C!==null?(C=C.index,C<b?(A.flags|=2,b):C):(A.flags|=2,b)):(A.flags|=1048576,b)}function i(A){return t&&A.alternate===null&&(A.flags|=2),A}function o(A,b,C,S){return b===null||b.tag!==6?(b=sf(C,A.mode,S),b.return=A,b):(b=n(b,C),b.return=A,b)}function d(A,b,C,S){var z=C.type;return z===jd?x(A,b,C.props.children,S,C.key):b!==null&&(b.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ii&&ON(z)===b.type)?(S=n(b,C.props),S.ref=Cc(A,b,C),S.return=A,S):(S=ep(C.type,C.key,C.props,null,A.mode,S),S.ref=Cc(A,b,C),S.return=A,S)}function u(A,b,C,S){return b===null||b.tag!==4||b.stateNode.containerInfo!==C.containerInfo||b.stateNode.implementation!==C.implementation?(b=af(C,A.mode,S),b.return=A,b):(b=n(b,C.children||[]),b.return=A,b)}function x(A,b,C,S,z){return b===null||b.tag!==7?(b=yo(C,A.mode,S,z),b.return=A,b):(b=n(b,C),b.return=A,b)}function p(A,b,C){if(typeof b=="string"&&b!==""||typeof b=="number")return b=sf(""+b,A.mode,C),b.return=A,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Dm:return C=ep(b.type,b.key,b.props,null,A.mode,C),C.ref=Cc(A,null,b),C.return=A,C;case bd:return b=af(b,A.mode,C),b.return=A,b;case ii:var S=b._init;return p(A,S(b._payload),C)}if(lu(b)||jc(b))return b=yo(b,A.mode,C,null),b.return=A,b;zm(A,b)}return null}function h(A,b,C,S){var z=b!==null?b.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return z!==null?null:o(A,b,""+C,S);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Dm:return C.key===z?d(A,b,C,S):null;case bd:return C.key===z?u(A,b,C,S):null;case ii:return z=C._init,h(A,b,z(C._payload),S)}if(lu(C)||jc(C))return z!==null?null:x(A,b,C,S,null);zm(A,C)}return null}function j(A,b,C,S,z){if(typeof S=="string"&&S!==""||typeof S=="number")return A=A.get(C)||null,o(b,A,""+S,z);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Dm:return A=A.get(S.key===null?C:S.key)||null,d(b,A,S,z);case bd:return A=A.get(S.key===null?C:S.key)||null,u(b,A,S,z);case ii:var $=S._init;return j(A,b,C,$(S._payload),z)}if(lu(S)||jc(S))return A=A.get(C)||null,x(b,A,S,z,null);zm(b,S)}return null}function y(A,b,C,S){for(var z=null,$=null,D=b,W=b=0,he=null;D!==null&&W<C.length;W++){D.index>W?(he=D,D=null):he=D.sibling;var V=h(A,D,C[W],S);if(V===null){D===null&&(D=he);break}t&&D&&V.alternate===null&&s(A,D),b=r(V,b,W),$===null?z=V:$.sibling=V,$=V,D=he}if(W===C.length)return a(A,D),vs&&lo(A,W),z;if(D===null){for(;W<C.length;W++)D=p(A,C[W],S),D!==null&&(b=r(D,b,W),$===null?z=D:$.sibling=D,$=D);return vs&&lo(A,W),z}for(D=l(A,D);W<C.length;W++)he=j(D,A,W,C[W],S),he!==null&&(t&&he.alternate!==null&&D.delete(he.key===null?W:he.key),b=r(he,b,W),$===null?z=he:$.sibling=he,$=he);return t&&D.forEach(function(xe){return s(A,xe)}),vs&&lo(A,W),z}function f(A,b,C,S){var z=jc(C);if(typeof z!="function")throw Error(Ge(150));if(C=z.call(C),C==null)throw Error(Ge(151));for(var $=z=null,D=b,W=b=0,he=null,V=C.next();D!==null&&!V.done;W++,V=C.next()){D.index>W?(he=D,D=null):he=D.sibling;var xe=h(A,D,V.value,S);if(xe===null){D===null&&(D=he);break}t&&D&&xe.alternate===null&&s(A,D),b=r(xe,b,W),$===null?z=xe:$.sibling=xe,$=xe,D=he}if(V.done)return a(A,D),vs&&lo(A,W),z;if(D===null){for(;!V.done;W++,V=C.next())V=p(A,V.value,S),V!==null&&(b=r(V,b,W),$===null?z=V:$.sibling=V,$=V);return vs&&lo(A,W),z}for(D=l(A,D);!V.done;W++,V=C.next())V=j(D,A,W,V.value,S),V!==null&&(t&&V.alternate!==null&&D.delete(V.key===null?W:V.key),b=r(V,b,W),$===null?z=V:$.sibling=V,$=V);return t&&D.forEach(function(pe){return s(A,pe)}),vs&&lo(A,W),z}function I(A,b,C,S){if(typeof C=="object"&&C!==null&&C.type===jd&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Dm:e:{for(var z=C.key,$=b;$!==null;){if($.key===z){if(z=C.type,z===jd){if($.tag===7){a(A,$.sibling),b=n($,C.props.children),b.return=A,A=b;break e}}else if($.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===ii&&ON(z)===$.type){a(A,$.sibling),b=n($,C.props),b.ref=Cc(A,$,C),b.return=A,A=b;break e}a(A,$);break}else s(A,$);$=$.sibling}C.type===jd?(b=yo(C.props.children,A.mode,S,C.key),b.return=A,A=b):(S=ep(C.type,C.key,C.props,null,A.mode,S),S.ref=Cc(A,b,C),S.return=A,A=S)}return i(A);case bd:e:{for($=C.key;b!==null;){if(b.key===$)if(b.tag===4&&b.stateNode.containerInfo===C.containerInfo&&b.stateNode.implementation===C.implementation){a(A,b.sibling),b=n(b,C.children||[]),b.return=A,A=b;break e}else{a(A,b);break}else s(A,b);b=b.sibling}b=af(C,A.mode,S),b.return=A,A=b}return i(A);case ii:return $=C._init,I(A,b,$(C._payload),S)}if(lu(C))return y(A,b,C,S);if(jc(C))return f(A,b,C,S);zm(A,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,b!==null&&b.tag===6?(a(A,b.sibling),b=n(b,C),b.return=A,A=b):(a(A,b),b=sf(C,A.mode,S),b.return=A,A=b),i(A)):a(A,b)}return I}var Zd=u5(!0),m5=u5(!1),Pp=Ii(null),Mp=null,Ed=null,ej=null;function tj(){ej=Ed=Mp=null}function sj(t){var s=Pp.current;cs(Pp),t._currentValue=s}function kv(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function qd(t,s){Mp=t,ej=Ed=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(fl=!0),t.firstContext=null)}function sn(t){var s=t._currentValue;if(ej!==t)if(t={context:t,memoizedValue:s,next:null},Ed===null){if(Mp===null)throw Error(Ge(308));Ed=t,Mp.dependencies={lanes:0,firstContext:t}}else Ed=Ed.next=t;return s}var mo=null;function aj(t){mo===null?mo=[t]:mo.push(t)}function x5(t,s,a,l){var n=s.interleaved;return n===null?(a.next=a,aj(s)):(a.next=n.next,n.next=a),s.interleaved=a,$r(t,l)}function $r(t,s){t.lanes|=s;var a=t.alternate;for(a!==null&&(a.lanes|=s),a=t,t=t.return;t!==null;)t.childLanes|=s,a=t.alternate,a!==null&&(a.childLanes|=s),a=t,t=t.return;return a.tag===3?a.stateNode:null}var oi=!1;function lj(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function p5(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Er(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function wi(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,Dt&2){var n=l.pending;return n===null?s.next=s:(s.next=n.next,n.next=s),l.pending=s,$r(t,a)}return n=l.interleaved,n===null?(s.next=s,aj(l)):(s.next=n.next,n.next=s),l.interleaved=s,$r(t,a)}function Kx(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,qb(t,a)}}function $N(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,r=null;if(a=a.firstBaseUpdate,a!==null){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};r===null?n=r=i:r=r.next=i,a=a.next}while(a!==null);r===null?n=r=s:r=r.next=s}else n=r=s;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:l.shared,effects:l.effects},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}function Tp(t,s,a,l){var n=t.updateQueue;oi=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(o!==null){n.shared.pending=null;var d=o,u=d.next;d.next=null,i===null?r=u:i.next=u,i=d;var x=t.alternate;x!==null&&(x=x.updateQueue,o=x.lastBaseUpdate,o!==i&&(o===null?x.firstBaseUpdate=u:o.next=u,x.lastBaseUpdate=d))}if(r!==null){var p=n.baseState;i=0,x=u=d=null,o=r;do{var h=o.lane,j=o.eventTime;if((l&h)===h){x!==null&&(x=x.next={eventTime:j,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=t,f=o;switch(h=s,j=a,f.tag){case 1:if(y=f.payload,typeof y=="function"){p=y.call(j,p,h);break e}p=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=f.payload,h=typeof y=="function"?y.call(j,p,h):y,h==null)break e;p=Es({},p,h);break e;case 2:oi=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=n.effects,h===null?n.effects=[o]:h.push(o))}else j={eventTime:j,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},x===null?(u=x=j,d=p):x=x.next=j,i|=h;if(o=o.next,o===null){if(o=n.shared.pending,o===null)break;h=o,o=h.next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}while(!0);if(x===null&&(d=p),n.baseState=d,n.firstBaseUpdate=u,n.lastBaseUpdate=x,s=n.shared.interleaved,s!==null){n=s;do i|=n.lane,n=n.next;while(n!==s)}else r===null&&(n.shared.lanes=0);Ao|=i,t.lanes=i,t.memoizedState=p}}function IN(t,s,a){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var l=t[s],n=l.callback;if(n!==null){if(l.callback=null,l=a,typeof n!="function")throw Error(Ge(191,n));n.call(l)}}}var gm={},er=Ii(gm),zu=Ii(gm),Gu=Ii(gm);function xo(t){if(t===gm)throw Error(Ge(174));return t}function nj(t,s){switch(ss(Gu,s),ss(zu,t),ss(er,gm),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lv(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=lv(s,t)}cs(er),ss(er,s)}function ec(){cs(er),cs(zu),cs(Gu)}function h5(t){xo(Gu.current);var s=xo(er.current),a=lv(s,t.type);s!==a&&(ss(zu,t),ss(er,a))}function rj(t){zu.current===t&&(cs(er),cs(zu))}var ks=Ii(0);function Rp(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Y0=[];function ij(){for(var t=0;t<Y0.length;t++)Y0[t]._workInProgressVersionPrimary=null;Y0.length=0}var Xx=Ur.ReactCurrentDispatcher,Q0=Ur.ReactCurrentBatchConfig,So=0,As=null,xa=null,ka=null,Dp=!1,vu=!1,Wu=0,BE=0;function _a(){throw Error(Ge(321))}function oj(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!On(t[a],s[a]))return!1;return!0}function dj(t,s,a,l,n,r){if(So=r,As=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Xx.current=t===null||t.memoizedState===null?GE:WE,t=a(l,n),vu){r=0;do{if(vu=!1,Wu=0,25<=r)throw Error(Ge(301));r+=1,ka=xa=null,s.updateQueue=null,Xx.current=HE,t=a(l,n)}while(vu)}if(Xx.current=Op,s=xa!==null&&xa.next!==null,So=0,ka=xa=As=null,Dp=!1,s)throw Error(Ge(300));return t}function cj(){var t=Wu!==0;return Wu=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ka===null?As.memoizedState=ka=t:ka=ka.next=t,ka}function an(){if(xa===null){var t=As.alternate;t=t!==null?t.memoizedState:null}else t=xa.next;var s=ka===null?As.memoizedState:ka.next;if(s!==null)ka=s,xa=t;else{if(t===null)throw Error(Ge(310));xa=t,t={memoizedState:xa.memoizedState,baseState:xa.baseState,baseQueue:xa.baseQueue,queue:xa.queue,next:null},ka===null?As.memoizedState=ka=t:ka=ka.next=t}return ka}function Hu(t,s){return typeof s=="function"?s(t):s}function J0(t){var s=an(),a=s.queue;if(a===null)throw Error(Ge(311));a.lastRenderedReducer=t;var l=xa,n=l.baseQueue,r=a.pending;if(r!==null){if(n!==null){var i=n.next;n.next=r.next,r.next=i}l.baseQueue=n=r,a.pending=null}if(n!==null){r=n.next,l=l.baseState;var o=i=null,d=null,u=r;do{var x=u.lane;if((So&x)===x)d!==null&&(d=d.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),l=u.hasEagerState?u.eagerState:t(l,u.action);else{var p={lane:x,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};d===null?(o=d=p,i=l):d=d.next=p,As.lanes|=x,Ao|=x}u=u.next}while(u!==null&&u!==r);d===null?i=l:d.next=o,On(l,s.memoizedState)||(fl=!0),s.memoizedState=l,s.baseState=i,s.baseQueue=d,a.lastRenderedState=l}if(t=a.interleaved,t!==null){n=t;do r=n.lane,As.lanes|=r,Ao|=r,n=n.next;while(n!==t)}else n===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Z0(t){var s=an(),a=s.queue;if(a===null)throw Error(Ge(311));a.lastRenderedReducer=t;var l=a.dispatch,n=a.pending,r=s.memoizedState;if(n!==null){a.pending=null;var i=n=n.next;do r=t(r,i.action),i=i.next;while(i!==n);On(r,s.memoizedState)||(fl=!0),s.memoizedState=r,s.baseQueue===null&&(s.baseState=r),a.lastRenderedState=r}return[r,l]}function f5(){}function g5(t,s){var a=As,l=an(),n=s(),r=!On(l.memoizedState,n);if(r&&(l.memoizedState=n,fl=!0),l=l.queue,uj(j5.bind(null,a,l,t),[t]),l.getSnapshot!==s||r||ka!==null&&ka.memoizedState.tag&1){if(a.flags|=2048,Ku(9,b5.bind(null,a,l,n,s),void 0,null),Ca===null)throw Error(Ge(349));So&30||v5(a,s,n)}return n}function v5(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=As.updateQueue,s===null?(s={lastEffect:null,stores:null},As.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function b5(t,s,a,l){s.value=a,s.getSnapshot=l,y5(s)&&N5(t)}function j5(t,s,a){return a(function(){y5(s)&&N5(t)})}function y5(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!On(t,a)}catch{return!0}}function N5(t){var s=$r(t,1);s!==null&&Mn(s,t,1,-1)}function LN(t){var s=Gn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:t},s.queue=t,t=t.dispatch=zE.bind(null,As,t),[s.memoizedState,t]}function Ku(t,s,a,l){return t={tag:t,create:s,destroy:a,deps:l,next:null},s=As.updateQueue,s===null?(s={lastEffect:null,stores:null},As.updateQueue=s,s.lastEffect=t.next=t):(a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t)),t}function w5(){return an().memoizedState}function Yx(t,s,a,l){var n=Gn();As.flags|=t,n.memoizedState=Ku(1|s,a,void 0,l===void 0?null:l)}function Eh(t,s,a,l){var n=an();l=l===void 0?null:l;var r=void 0;if(xa!==null){var i=xa.memoizedState;if(r=i.destroy,l!==null&&oj(l,i.deps)){n.memoizedState=Ku(s,a,r,l);return}}As.flags|=t,n.memoizedState=Ku(1|s,a,r,l)}function FN(t,s){return Yx(8390656,8,t,s)}function uj(t,s){return Eh(2048,8,t,s)}function k5(t,s){return Eh(4,2,t,s)}function C5(t,s){return Eh(4,4,t,s)}function S5(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function A5(t,s,a){return a=a!=null?a.concat([t]):null,Eh(4,4,S5.bind(null,s,t),a)}function mj(){}function E5(t,s){var a=an();s=s===void 0?null:s;var l=a.memoizedState;return l!==null&&s!==null&&oj(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function P5(t,s){var a=an();s=s===void 0?null:s;var l=a.memoizedState;return l!==null&&s!==null&&oj(s,l[1])?l[0]:(t=t(),a.memoizedState=[t,s],t)}function M5(t,s,a){return So&21?(On(a,s)||(a=$4(),As.lanes|=a,Ao|=a,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,fl=!0),t.memoizedState=a)}function UE(t,s){var a=Gt;Gt=a!==0&&4>a?a:4,t(!0);var l=Q0.transition;Q0.transition={};try{t(!1),s()}finally{Gt=a,Q0.transition=l}}function T5(){return an().memoizedState}function qE(t,s,a){var l=Ci(t);if(a={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null},R5(t))D5(s,a);else if(a=x5(t,s,a,l),a!==null){var n=sl();Mn(a,t,l,n),O5(a,s,l)}}function zE(t,s,a){var l=Ci(t),n={lane:l,action:a,hasEagerState:!1,eagerState:null,next:null};if(R5(t))D5(s,n);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=s.lastRenderedReducer,r!==null))try{var i=s.lastRenderedState,o=r(i,a);if(n.hasEagerState=!0,n.eagerState=o,On(o,i)){var d=s.interleaved;d===null?(n.next=n,aj(s)):(n.next=d.next,d.next=n),s.interleaved=n;return}}catch{}finally{}a=x5(t,s,n,l),a!==null&&(n=sl(),Mn(a,t,l,n),O5(a,s,l))}}function R5(t){var s=t.alternate;return t===As||s!==null&&s===As}function D5(t,s){vu=Dp=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function O5(t,s,a){if(a&4194240){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,qb(t,a)}}var Op={readContext:sn,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},GE={readContext:sn,useCallback:function(t,s){return Gn().memoizedState=[t,s===void 0?null:s],t},useContext:sn,useEffect:FN,useImperativeHandle:function(t,s,a){return a=a!=null?a.concat([t]):null,Yx(4194308,4,S5.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Yx(4194308,4,t,s)},useInsertionEffect:function(t,s){return Yx(4,2,t,s)},useMemo:function(t,s){var a=Gn();return s=s===void 0?null:s,t=t(),a.memoizedState=[t,s],t},useReducer:function(t,s,a){var l=Gn();return s=a!==void 0?a(s):s,l.memoizedState=l.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},l.queue=t,t=t.dispatch=qE.bind(null,As,t),[l.memoizedState,t]},useRef:function(t){var s=Gn();return t={current:t},s.memoizedState=t},useState:LN,useDebugValue:mj,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=LN(!1),s=t[0];return t=UE.bind(null,t[1]),Gn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,a){var l=As,n=Gn();if(vs){if(a===void 0)throw Error(Ge(407));a=a()}else{if(a=s(),Ca===null)throw Error(Ge(349));So&30||v5(l,s,a)}n.memoizedState=a;var r={value:a,getSnapshot:s};return n.queue=r,FN(j5.bind(null,l,r,t),[t]),l.flags|=2048,Ku(9,b5.bind(null,l,r,a,s),void 0,null),a},useId:function(){var t=Gn(),s=Ca.identifierPrefix;if(vs){var a=Cr,l=kr;a=(l&~(1<<32-Pn(l)-1)).toString(32)+a,s=":"+s+"R"+a,a=Wu++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=BE++,s=":"+s+"r"+a.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},WE={readContext:sn,useCallback:E5,useContext:sn,useEffect:uj,useImperativeHandle:A5,useInsertionEffect:k5,useLayoutEffect:C5,useMemo:P5,useReducer:J0,useRef:w5,useState:function(){return J0(Hu)},useDebugValue:mj,useDeferredValue:function(t){var s=an();return M5(s,xa.memoizedState,t)},useTransition:function(){var t=J0(Hu)[0],s=an().memoizedState;return[t,s]},useMutableSource:f5,useSyncExternalStore:g5,useId:T5,unstable_isNewReconciler:!1},HE={readContext:sn,useCallback:E5,useContext:sn,useEffect:uj,useImperativeHandle:A5,useInsertionEffect:k5,useLayoutEffect:C5,useMemo:P5,useReducer:Z0,useRef:w5,useState:function(){return Z0(Hu)},useDebugValue:mj,useDeferredValue:function(t){var s=an();return xa===null?s.memoizedState=t:M5(s,xa.memoizedState,t)},useTransition:function(){var t=Z0(Hu)[0],s=an().memoizedState;return[t,s]},useMutableSource:f5,useSyncExternalStore:g5,useId:T5,unstable_isNewReconciler:!1};function jn(t,s){if(t&&t.defaultProps){s=Es({},s),t=t.defaultProps;for(var a in t)s[a]===void 0&&(s[a]=t[a]);return s}return s}function Cv(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:Es({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Ph={isMounted:function(t){return(t=t._reactInternals)?$o(t)===t:!1},enqueueSetState:function(t,s,a){t=t._reactInternals;var l=sl(),n=Ci(t),r=Er(l,n);r.payload=s,a!=null&&(r.callback=a),s=wi(t,r,n),s!==null&&(Mn(s,t,n,l),Kx(s,t,n))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=sl(),n=Ci(t),r=Er(l,n);r.tag=1,r.payload=s,a!=null&&(r.callback=a),s=wi(t,r,n),s!==null&&(Mn(s,t,n,l),Kx(s,t,n))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=sl(),l=Ci(t),n=Er(a,l);n.tag=2,s!=null&&(n.callback=s),s=wi(t,n,l),s!==null&&(Mn(s,t,l,a),Kx(s,t,l))}};function _N(t,s,a,l,n,r,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,r,i):s.prototype&&s.prototype.isPureReactComponent?!Vu(a,l)||!Vu(n,r):!0}function $5(t,s,a){var l=!1,n=Mi,r=s.contextType;return typeof r=="object"&&r!==null?r=sn(r):(n=vl(s)?ko:Ka.current,l=s.contextTypes,r=(l=l!=null)?Qd(t,n):Mi),s=new s(a,r),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Ph,t.stateNode=s,s._reactInternals=t,l&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=r),s}function VN(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Ph.enqueueReplaceState(s,s.state,null)}function Sv(t,s,a,l){var n=t.stateNode;n.props=a,n.state=t.memoizedState,n.refs={},lj(t);var r=s.contextType;typeof r=="object"&&r!==null?n.context=sn(r):(r=vl(s)?ko:Ka.current,n.context=Qd(t,r)),n.state=t.memoizedState,r=s.getDerivedStateFromProps,typeof r=="function"&&(Cv(t,s,r,a),n.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(s=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),s!==n.state&&Ph.enqueueReplaceState(n,n.state,null),Tp(t,a,n,l),n.state=t.memoizedState),typeof n.componentDidMount=="function"&&(t.flags|=4194308)}function tc(t,s){try{var a="",l=s;do a+=y6(l),l=l.return;while(l);var n=a}catch(r){n=`
Error generating stack: `+r.message+`
`+r.stack}return{value:t,source:s,stack:n,digest:null}}function ef(t,s,a){return{value:t,source:null,stack:a??null,digest:s??null}}function Av(t,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var KE=typeof WeakMap=="function"?WeakMap:Map;function I5(t,s,a){a=Er(-1,a),a.tag=3,a.payload={element:null};var l=s.value;return a.callback=function(){Ip||(Ip=!0,Lv=l),Av(t,s)},a}function L5(t,s,a){a=Er(-1,a),a.tag=3;var l=t.type.getDerivedStateFromError;if(typeof l=="function"){var n=s.value;a.payload=function(){return l(n)},a.callback=function(){Av(t,s)}}var r=t.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(a.callback=function(){Av(t,s),typeof l!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var i=s.stack;this.componentDidCatch(s.value,{componentStack:i!==null?i:""})}),a}function BN(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new KE;var n=new Set;l.set(s,n)}else n=l.get(s),n===void 0&&(n=new Set,l.set(s,n));n.has(a)||(n.add(a),t=oP.bind(null,t,s,a),s.then(t,t))}function UN(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function qN(t,s,a,l,n){return t.mode&1?(t.flags|=65536,t.lanes=n,t):(t===s?t.flags|=65536:(t.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=Er(-1,1),s.tag=2,wi(a,s,1))),a.lanes|=1),t)}var XE=Ur.ReactCurrentOwner,fl=!1;function Za(t,s,a,l){s.child=t===null?m5(s,null,a,l):Zd(s,t.child,a,l)}function zN(t,s,a,l,n){a=a.render;var r=s.ref;return qd(s,n),l=dj(t,s,a,l,r,n),a=cj(),t!==null&&!fl?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Ir(t,s,n)):(vs&&a&&Qb(s),s.flags|=1,Za(t,s,l,n),s.child)}function GN(t,s,a,l,n){if(t===null){var r=a.type;return typeof r=="function"&&!jj(r)&&r.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=r,F5(t,s,r,l,n)):(t=ep(a.type,null,l,s,s.mode,n),t.ref=s.ref,t.return=s,s.child=t)}if(r=t.child,!(t.lanes&n)){var i=r.memoizedProps;if(a=a.compare,a=a!==null?a:Vu,a(i,l)&&t.ref===s.ref)return Ir(t,s,n)}return s.flags|=1,t=Si(r,l),t.ref=s.ref,t.return=s,s.child=t}function F5(t,s,a,l,n){if(t!==null){var r=t.memoizedProps;if(Vu(r,l)&&t.ref===s.ref)if(fl=!1,s.pendingProps=l=r,(t.lanes&n)!==0)t.flags&131072&&(fl=!0);else return s.lanes=t.lanes,Ir(t,s,n)}return Ev(t,s,a,l,n)}function _5(t,s,a){var l=s.pendingProps,n=l.children,r=t!==null?t.memoizedState:null;if(l.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},ss(Md,Sl),Sl|=a;else{if(!(a&1073741824))return t=r!==null?r.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,ss(Md,Sl),Sl|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=r!==null?r.baseLanes:a,ss(Md,Sl),Sl|=l}else r!==null?(l=r.baseLanes|a,s.memoizedState=null):l=a,ss(Md,Sl),Sl|=l;return Za(t,s,n,a),s.child}function V5(t,s){var a=s.ref;(t===null&&a!==null||t!==null&&t.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function Ev(t,s,a,l,n){var r=vl(a)?ko:Ka.current;return r=Qd(s,r),qd(s,n),a=dj(t,s,a,l,r,n),l=cj(),t!==null&&!fl?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~n,Ir(t,s,n)):(vs&&l&&Qb(s),s.flags|=1,Za(t,s,a,n),s.child)}function WN(t,s,a,l,n){if(vl(a)){var r=!0;Sp(s)}else r=!1;if(qd(s,n),s.stateNode===null)Qx(t,s),$5(s,a,l),Sv(s,a,l,n),l=!0;else if(t===null){var i=s.stateNode,o=s.memoizedProps;i.props=o;var d=i.context,u=a.contextType;typeof u=="object"&&u!==null?u=sn(u):(u=vl(a)?ko:Ka.current,u=Qd(s,u));var x=a.getDerivedStateFromProps,p=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function";p||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==l||d!==u)&&VN(s,i,l,u),oi=!1;var h=s.memoizedState;i.state=h,Tp(s,l,i,n),d=s.memoizedState,o!==l||h!==d||gl.current||oi?(typeof x=="function"&&(Cv(s,a,x,l),d=s.memoizedState),(o=oi||_N(s,a,o,l,h,d,u))?(p||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(s.flags|=4194308)):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=d),i.props=l,i.state=d,i.context=u,l=o):(typeof i.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{i=s.stateNode,p5(t,s),o=s.memoizedProps,u=s.type===s.elementType?o:jn(s.type,o),i.props=u,p=s.pendingProps,h=i.context,d=a.contextType,typeof d=="object"&&d!==null?d=sn(d):(d=vl(a)?ko:Ka.current,d=Qd(s,d));var j=a.getDerivedStateFromProps;(x=typeof j=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==p||h!==d)&&VN(s,i,l,d),oi=!1,h=s.memoizedState,i.state=h,Tp(s,l,i,n);var y=s.memoizedState;o!==p||h!==y||gl.current||oi?(typeof j=="function"&&(Cv(s,a,j,l),y=s.memoizedState),(u=oi||_N(s,a,u,l,h,y,d)||!1)?(x||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(l,y,d),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(l,y,d)),typeof i.componentDidUpdate=="function"&&(s.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=y),i.props=l,i.state=y,i.context=d,l=u):(typeof i.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(s.flags|=1024),l=!1)}return Pv(t,s,a,l,r,n)}function Pv(t,s,a,l,n,r){V5(t,s);var i=(s.flags&128)!==0;if(!l&&!i)return n&&TN(s,a,!1),Ir(t,s,r);l=s.stateNode,XE.current=s;var o=i&&typeof a.getDerivedStateFromError!="function"?null:l.render();return s.flags|=1,t!==null&&i?(s.child=Zd(s,t.child,null,r),s.child=Zd(s,null,o,r)):Za(t,s,o,r),s.memoizedState=l.state,n&&TN(s,a,!0),s.child}function B5(t){var s=t.stateNode;s.pendingContext?MN(t,s.pendingContext,s.pendingContext!==s.context):s.context&&MN(t,s.context,!1),nj(t,s.containerInfo)}function HN(t,s,a,l,n){return Jd(),Zb(n),s.flags|=256,Za(t,s,a,l),s.child}var Mv={dehydrated:null,treeContext:null,retryLane:0};function Tv(t){return{baseLanes:t,cachePool:null,transitions:null}}function U5(t,s,a){var l=s.pendingProps,n=ks.current,r=!1,i=(s.flags&128)!==0,o;if((o=i)||(o=t!==null&&t.memoizedState===null?!1:(n&2)!==0),o?(r=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(n|=1),ss(ks,n&1),t===null)return wv(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(i=l.children,t=l.fallback,r?(l=s.mode,r=s.child,i={mode:"hidden",children:i},!(l&1)&&r!==null?(r.childLanes=0,r.pendingProps=i):r=Rh(i,l,0,null),t=yo(t,l,a,null),r.return=s,t.return=s,r.sibling=t,s.child=r,s.child.memoizedState=Tv(a),s.memoizedState=Mv,t):xj(s,i));if(n=t.memoizedState,n!==null&&(o=n.dehydrated,o!==null))return YE(t,s,i,l,o,n,a);if(r){r=l.fallback,i=s.mode,n=t.child,o=n.sibling;var d={mode:"hidden",children:l.children};return!(i&1)&&s.child!==n?(l=s.child,l.childLanes=0,l.pendingProps=d,s.deletions=null):(l=Si(n,d),l.subtreeFlags=n.subtreeFlags&14680064),o!==null?r=Si(o,r):(r=yo(r,i,a,null),r.flags|=2),r.return=s,l.return=s,l.sibling=r,s.child=l,l=r,r=s.child,i=t.child.memoizedState,i=i===null?Tv(a):{baseLanes:i.baseLanes|a,cachePool:null,transitions:i.transitions},r.memoizedState=i,r.childLanes=t.childLanes&~a,s.memoizedState=Mv,l}return r=t.child,t=r.sibling,l=Si(r,{mode:"visible",children:l.children}),!(s.mode&1)&&(l.lanes=a),l.return=s,l.sibling=null,t!==null&&(a=s.deletions,a===null?(s.deletions=[t],s.flags|=16):a.push(t)),s.child=l,s.memoizedState=null,l}function xj(t,s){return s=Rh({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Gm(t,s,a,l){return l!==null&&Zb(l),Zd(s,t.child,null,a),t=xj(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function YE(t,s,a,l,n,r,i){if(a)return s.flags&256?(s.flags&=-257,l=ef(Error(Ge(422))),Gm(t,s,i,l)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(r=l.fallback,n=s.mode,l=Rh({mode:"visible",children:l.children},n,0,null),r=yo(r,n,i,null),r.flags|=2,l.return=s,r.return=s,l.sibling=r,s.child=l,s.mode&1&&Zd(s,t.child,null,i),s.child.memoizedState=Tv(i),s.memoizedState=Mv,r);if(!(s.mode&1))return Gm(t,s,i,null);if(n.data==="$!"){if(l=n.nextSibling&&n.nextSibling.dataset,l)var o=l.dgst;return l=o,r=Error(Ge(419)),l=ef(r,l,void 0),Gm(t,s,i,l)}if(o=(i&t.childLanes)!==0,fl||o){if(l=Ca,l!==null){switch(i&-i){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(l.suspendedLanes|i)?0:n,n!==0&&n!==r.retryLane&&(r.retryLane=n,$r(t,n),Mn(l,t,n,-1))}return bj(),l=ef(Error(Ge(421))),Gm(t,s,i,l)}return n.data==="$?"?(s.flags|=128,s.child=t.child,s=dP.bind(null,t),n._reactRetry=s,null):(t=r.treeContext,Pl=Ni(n.nextSibling),Ml=s,vs=!0,wn=null,t!==null&&(Ql[Jl++]=kr,Ql[Jl++]=Cr,Ql[Jl++]=Co,kr=t.id,Cr=t.overflow,Co=s),s=xj(s,l.children),s.flags|=4096,s)}function KN(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),kv(t.return,s,a)}function tf(t,s,a,l,n){var r=t.memoizedState;r===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n}:(r.isBackwards=s,r.rendering=null,r.renderingStartTime=0,r.last=l,r.tail=a,r.tailMode=n)}function q5(t,s,a){var l=s.pendingProps,n=l.revealOrder,r=l.tail;if(Za(t,s,l.children,a),l=ks.current,l&2)l=l&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&KN(t,a,s);else if(t.tag===19)KN(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}if(ss(ks,l),!(s.mode&1))s.memoizedState=null;else switch(n){case"forwards":for(a=s.child,n=null;a!==null;)t=a.alternate,t!==null&&Rp(t)===null&&(n=a),a=a.sibling;a=n,a===null?(n=s.child,s.child=null):(n=a.sibling,a.sibling=null),tf(s,!1,n,a,r);break;case"backwards":for(a=null,n=s.child,s.child=null;n!==null;){if(t=n.alternate,t!==null&&Rp(t)===null){s.child=n;break}t=n.sibling,n.sibling=a,a=n,n=t}tf(s,!0,a,null,r);break;case"together":tf(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Qx(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Ir(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ao|=s.lanes,!(a&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Ge(153));if(s.child!==null){for(t=s.child,a=Si(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Si(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function QE(t,s,a){switch(s.tag){case 3:B5(s),Jd();break;case 5:h5(s);break;case 1:vl(s.type)&&Sp(s);break;case 4:nj(s,s.stateNode.containerInfo);break;case 10:var l=s.type._context,n=s.memoizedProps.value;ss(Pp,l._currentValue),l._currentValue=n;break;case 13:if(l=s.memoizedState,l!==null)return l.dehydrated!==null?(ss(ks,ks.current&1),s.flags|=128,null):a&s.child.childLanes?U5(t,s,a):(ss(ks,ks.current&1),t=Ir(t,s,a),t!==null?t.sibling:null);ss(ks,ks.current&1);break;case 19:if(l=(a&s.childLanes)!==0,t.flags&128){if(l)return q5(t,s,a);s.flags|=128}if(n=s.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ss(ks,ks.current),l)break;return null;case 22:case 23:return s.lanes=0,_5(t,s,a)}return Ir(t,s,a)}var z5,Rv,G5,W5;z5=function(t,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)t.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Rv=function(){};G5=function(t,s,a,l){var n=t.memoizedProps;if(n!==l){t=s.stateNode,xo(er.current);var r=null;switch(a){case"input":n=ev(t,n),l=ev(t,l),r=[];break;case"select":n=Es({},n,{value:void 0}),l=Es({},l,{value:void 0}),r=[];break;case"textarea":n=av(t,n),l=av(t,l),r=[];break;default:typeof n.onClick!="function"&&typeof l.onClick=="function"&&(t.onclick=kp)}nv(a,l);var i;a=null;for(u in n)if(!l.hasOwnProperty(u)&&n.hasOwnProperty(u)&&n[u]!=null)if(u==="style"){var o=n[u];for(i in o)o.hasOwnProperty(i)&&(a||(a={}),a[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Du.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in l){var d=l[u];if(o=n!=null?n[u]:void 0,l.hasOwnProperty(u)&&d!==o&&(d!=null||o!=null))if(u==="style")if(o){for(i in o)!o.hasOwnProperty(i)||d&&d.hasOwnProperty(i)||(a||(a={}),a[i]="");for(i in d)d.hasOwnProperty(i)&&o[i]!==d[i]&&(a||(a={}),a[i]=d[i])}else a||(r||(r=[]),r.push(u,a)),a=d;else u==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,o=o?o.__html:void 0,d!=null&&o!==d&&(r=r||[]).push(u,d)):u==="children"?typeof d!="string"&&typeof d!="number"||(r=r||[]).push(u,""+d):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Du.hasOwnProperty(u)?(d!=null&&u==="onScroll"&&ls("scroll",t),r||o===d||(r=[])):(r=r||[]).push(u,d))}a&&(r=r||[]).push("style",a);var u=r;(s.updateQueue=u)&&(s.flags|=4)}};W5=function(t,s,a,l){a!==l&&(s.flags|=4)};function Sc(t,s){if(!vs)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Va(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var n=t.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&14680064,l|=n.flags&14680064,n.return=t,n=n.sibling;else for(n=t.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=t,n=n.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function JE(t,s,a){var l=s.pendingProps;switch(Jb(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Va(s),null;case 1:return vl(s.type)&&Cp(),Va(s),null;case 3:return l=s.stateNode,ec(),cs(gl),cs(Ka),ij(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(qm(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,wn!==null&&(Vv(wn),wn=null))),Rv(t,s),Va(s),null;case 5:rj(s);var n=xo(Gu.current);if(a=s.type,t!==null&&s.stateNode!=null)G5(t,s,a,l,n),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!l){if(s.stateNode===null)throw Error(Ge(166));return Va(s),null}if(t=xo(er.current),qm(s)){l=s.stateNode,a=s.type;var r=s.memoizedProps;switch(l[Xn]=s,l[qu]=r,t=(s.mode&1)!==0,a){case"dialog":ls("cancel",l),ls("close",l);break;case"iframe":case"object":case"embed":ls("load",l);break;case"video":case"audio":for(n=0;n<ru.length;n++)ls(ru[n],l);break;case"source":ls("error",l);break;case"img":case"image":case"link":ls("error",l),ls("load",l);break;case"details":ls("toggle",l);break;case"input":aN(l,r),ls("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!r.multiple},ls("invalid",l);break;case"textarea":nN(l,r),ls("invalid",l)}nv(a,r),n=null;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];i==="children"?typeof o=="string"?l.textContent!==o&&(r.suppressHydrationWarning!==!0&&Um(l.textContent,o,t),n=["children",o]):typeof o=="number"&&l.textContent!==""+o&&(r.suppressHydrationWarning!==!0&&Um(l.textContent,o,t),n=["children",""+o]):Du.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&ls("scroll",l)}switch(a){case"input":Om(l),lN(l,r,!0);break;case"textarea":Om(l),rN(l);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(l.onclick=kp)}l=n,s.updateQueue=l,l!==null&&(s.flags|=4)}else{i=n.nodeType===9?n:n.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=j4(a)),t==="http://www.w3.org/1999/xhtml"?a==="script"?(t=i.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof l.is=="string"?t=i.createElement(a,{is:l.is}):(t=i.createElement(a),a==="select"&&(i=t,l.multiple?i.multiple=!0:l.size&&(i.size=l.size))):t=i.createElementNS(t,a),t[Xn]=s,t[qu]=l,z5(t,s,!1,!1),s.stateNode=t;e:{switch(i=rv(a,l),a){case"dialog":ls("cancel",t),ls("close",t),n=l;break;case"iframe":case"object":case"embed":ls("load",t),n=l;break;case"video":case"audio":for(n=0;n<ru.length;n++)ls(ru[n],t);n=l;break;case"source":ls("error",t),n=l;break;case"img":case"image":case"link":ls("error",t),ls("load",t),n=l;break;case"details":ls("toggle",t),n=l;break;case"input":aN(t,l),n=ev(t,l),ls("invalid",t);break;case"option":n=l;break;case"select":t._wrapperState={wasMultiple:!!l.multiple},n=Es({},l,{value:void 0}),ls("invalid",t);break;case"textarea":nN(t,l),n=av(t,l),ls("invalid",t);break;default:n=l}nv(a,n),o=n;for(r in o)if(o.hasOwnProperty(r)){var d=o[r];r==="style"?w4(t,d):r==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&y4(t,d)):r==="children"?typeof d=="string"?(a!=="textarea"||d!=="")&&Ou(t,d):typeof d=="number"&&Ou(t,""+d):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(Du.hasOwnProperty(r)?d!=null&&r==="onScroll"&&ls("scroll",t):d!=null&&Lb(t,r,d,i))}switch(a){case"input":Om(t),lN(t,l,!1);break;case"textarea":Om(t),rN(t);break;case"option":l.value!=null&&t.setAttribute("value",""+Pi(l.value));break;case"select":t.multiple=!!l.multiple,r=l.value,r!=null?_d(t,!!l.multiple,r,!1):l.defaultValue!=null&&_d(t,!!l.multiple,l.defaultValue,!0);break;default:typeof n.onClick=="function"&&(t.onclick=kp)}switch(a){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Va(s),null;case 6:if(t&&s.stateNode!=null)W5(t,s,t.memoizedProps,l);else{if(typeof l!="string"&&s.stateNode===null)throw Error(Ge(166));if(a=xo(Gu.current),xo(er.current),qm(s)){if(l=s.stateNode,a=s.memoizedProps,l[Xn]=s,(r=l.nodeValue!==a)&&(t=Ml,t!==null))switch(t.tag){case 3:Um(l.nodeValue,a,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Um(l.nodeValue,a,(t.mode&1)!==0)}r&&(s.flags|=4)}else l=(a.nodeType===9?a:a.ownerDocument).createTextNode(l),l[Xn]=s,s.stateNode=l}return Va(s),null;case 13:if(cs(ks),l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vs&&Pl!==null&&s.mode&1&&!(s.flags&128))c5(),Jd(),s.flags|=98560,r=!1;else if(r=qm(s),l!==null&&l.dehydrated!==null){if(t===null){if(!r)throw Error(Ge(318));if(r=s.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(Ge(317));r[Xn]=s}else Jd(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;Va(s),r=!1}else wn!==null&&(Vv(wn),wn=null),r=!0;if(!r)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(l=l!==null,l!==(t!==null&&t.memoizedState!==null)&&l&&(s.child.flags|=8192,s.mode&1&&(t===null||ks.current&1?ha===0&&(ha=3):bj())),s.updateQueue!==null&&(s.flags|=4),Va(s),null);case 4:return ec(),Rv(t,s),t===null&&Bu(s.stateNode.containerInfo),Va(s),null;case 10:return sj(s.type._context),Va(s),null;case 17:return vl(s.type)&&Cp(),Va(s),null;case 19:if(cs(ks),r=s.memoizedState,r===null)return Va(s),null;if(l=(s.flags&128)!==0,i=r.rendering,i===null)if(l)Sc(r,!1);else{if(ha!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(i=Rp(t),i!==null){for(s.flags|=128,Sc(r,!1),l=i.updateQueue,l!==null&&(s.updateQueue=l,s.flags|=4),s.subtreeFlags=0,l=a,a=s.child;a!==null;)r=a,t=l,r.flags&=14680066,i=r.alternate,i===null?(r.childLanes=0,r.lanes=t,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=i.childLanes,r.lanes=i.lanes,r.child=i.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=i.memoizedProps,r.memoizedState=i.memoizedState,r.updateQueue=i.updateQueue,r.type=i.type,t=i.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),a=a.sibling;return ss(ks,ks.current&1|2),s.child}t=t.sibling}r.tail!==null&&Ws()>sc&&(s.flags|=128,l=!0,Sc(r,!1),s.lanes=4194304)}else{if(!l)if(t=Rp(i),t!==null){if(s.flags|=128,l=!0,a=t.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Sc(r,!0),r.tail===null&&r.tailMode==="hidden"&&!i.alternate&&!vs)return Va(s),null}else 2*Ws()-r.renderingStartTime>sc&&a!==1073741824&&(s.flags|=128,l=!0,Sc(r,!1),s.lanes=4194304);r.isBackwards?(i.sibling=s.child,s.child=i):(a=r.last,a!==null?a.sibling=i:s.child=i,r.last=i)}return r.tail!==null?(s=r.tail,r.rendering=s,r.tail=s.sibling,r.renderingStartTime=Ws(),s.sibling=null,a=ks.current,ss(ks,l?a&1|2:a&1),s):(Va(s),null);case 22:case 23:return vj(),l=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==l&&(s.flags|=8192),l&&s.mode&1?Sl&1073741824&&(Va(s),s.subtreeFlags&6&&(s.flags|=8192)):Va(s),null;case 24:return null;case 25:return null}throw Error(Ge(156,s.tag))}function ZE(t,s){switch(Jb(s),s.tag){case 1:return vl(s.type)&&Cp(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ec(),cs(gl),cs(Ka),ij(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return rj(s),null;case 13:if(cs(ks),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Ge(340));Jd()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return cs(ks),null;case 4:return ec(),null;case 10:return sj(s.type._context),null;case 22:case 23:return vj(),null;case 24:return null;default:return null}}var Wm=!1,Wa=!1,eP=typeof WeakSet=="function"?WeakSet:Set,st=null;function Pd(t,s){var a=t.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(l){Ls(t,s,l)}else a.current=null}function Dv(t,s,a){try{a()}catch(l){Ls(t,s,l)}}var XN=!1;function tP(t,s){if(fv=yp,t=Q4(),Yb(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,r=l.focusNode;l=l.focusOffset;try{a.nodeType,r.nodeType}catch{a=null;break e}var i=0,o=-1,d=-1,u=0,x=0,p=t,h=null;t:for(;;){for(var j;p!==a||n!==0&&p.nodeType!==3||(o=i+n),p!==r||l!==0&&p.nodeType!==3||(d=i+l),p.nodeType===3&&(i+=p.nodeValue.length),(j=p.firstChild)!==null;)h=p,p=j;for(;;){if(p===t)break t;if(h===a&&++u===n&&(o=i),h===r&&++x===l&&(d=i),(j=p.nextSibling)!==null)break;p=h,h=p.parentNode}p=j}a=o===-1||d===-1?null:{start:o,end:d}}else a=null}a=a||{start:0,end:0}}else a=null;for(gv={focusedElem:t,selectionRange:a},yp=!1,st=s;st!==null;)if(s=st,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,st=t;else for(;st!==null;){s=st;try{var y=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var f=y.memoizedProps,I=y.memoizedState,A=s.stateNode,b=A.getSnapshotBeforeUpdate(s.elementType===s.type?f:jn(s.type,f),I);A.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var C=s.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(S){Ls(s,s.return,S)}if(t=s.sibling,t!==null){t.return=s.return,st=t;break}st=s.return}return y=XN,XN=!1,y}function bu(t,s,a){var l=s.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var n=l=l.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,r!==void 0&&Dv(s,a,r)}n=n.next}while(n!==l)}}function Mh(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&t)===t){var l=a.create;a.destroy=l()}a=a.next}while(a!==s)}}function Ov(t){var s=t.ref;if(s!==null){var a=t.stateNode;switch(t.tag){case 5:t=a;break;default:t=a}typeof s=="function"?s(t):s.current=t}}function H5(t){var s=t.alternate;s!==null&&(t.alternate=null,H5(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Xn],delete s[qu],delete s[jv],delete s[LE],delete s[FE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function K5(t){return t.tag===5||t.tag===3||t.tag===4}function YN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||K5(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $v(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(t,s):a.insertBefore(t,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(t,a)):(s=a,s.appendChild(t)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=kp));else if(l!==4&&(t=t.child,t!==null))for($v(t,s,a),t=t.sibling;t!==null;)$v(t,s,a),t=t.sibling}function Iv(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(t=t.child,t!==null))for(Iv(t,s,a),t=t.sibling;t!==null;)Iv(t,s,a),t=t.sibling}var Pa=null,Nn=!1;function Wr(t,s,a){for(a=a.child;a!==null;)X5(t,s,a),a=a.sibling}function X5(t,s,a){if(Zn&&typeof Zn.onCommitFiberUnmount=="function")try{Zn.onCommitFiberUnmount(Nh,a)}catch{}switch(a.tag){case 5:Wa||Pd(a,s);case 6:var l=Pa,n=Nn;Pa=null,Wr(t,s,a),Pa=l,Nn=n,Pa!==null&&(Nn?(t=Pa,a=a.stateNode,t.nodeType===8?t.parentNode.removeChild(a):t.removeChild(a)):Pa.removeChild(a.stateNode));break;case 18:Pa!==null&&(Nn?(t=Pa,a=a.stateNode,t.nodeType===8?K0(t.parentNode,a):t.nodeType===1&&K0(t,a),Fu(t)):K0(Pa,a.stateNode));break;case 4:l=Pa,n=Nn,Pa=a.stateNode.containerInfo,Nn=!0,Wr(t,s,a),Pa=l,Nn=n;break;case 0:case 11:case 14:case 15:if(!Wa&&(l=a.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){n=l=l.next;do{var r=n,i=r.destroy;r=r.tag,i!==void 0&&(r&2||r&4)&&Dv(a,s,i),n=n.next}while(n!==l)}Wr(t,s,a);break;case 1:if(!Wa&&(Pd(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=a.memoizedProps,l.state=a.memoizedState,l.componentWillUnmount()}catch(o){Ls(a,s,o)}Wr(t,s,a);break;case 21:Wr(t,s,a);break;case 22:a.mode&1?(Wa=(l=Wa)||a.memoizedState!==null,Wr(t,s,a),Wa=l):Wr(t,s,a);break;default:Wr(t,s,a)}}function QN(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var a=t.stateNode;a===null&&(a=t.stateNode=new eP),s.forEach(function(l){var n=cP.bind(null,t,l);a.has(l)||(a.add(l),l.then(n,n))})}}function un(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l];try{var r=t,i=s,o=i;e:for(;o!==null;){switch(o.tag){case 5:Pa=o.stateNode,Nn=!1;break e;case 3:Pa=o.stateNode.containerInfo,Nn=!0;break e;case 4:Pa=o.stateNode.containerInfo,Nn=!0;break e}o=o.return}if(Pa===null)throw Error(Ge(160));X5(r,i,n),Pa=null,Nn=!1;var d=n.alternate;d!==null&&(d.return=null),n.return=null}catch(u){Ls(n,s,u)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Y5(s,t),s=s.sibling}function Y5(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(s,t),$n(t),l&4){try{bu(3,t,t.return),Mh(3,t)}catch(f){Ls(t,t.return,f)}try{bu(5,t,t.return)}catch(f){Ls(t,t.return,f)}}break;case 1:un(s,t),$n(t),l&512&&a!==null&&Pd(a,a.return);break;case 5:if(un(s,t),$n(t),l&512&&a!==null&&Pd(a,a.return),t.flags&32){var n=t.stateNode;try{Ou(n,"")}catch(f){Ls(t,t.return,f)}}if(l&4&&(n=t.stateNode,n!=null)){var r=t.memoizedProps,i=a!==null?a.memoizedProps:r,o=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{o==="input"&&r.type==="radio"&&r.name!=null&&v4(n,r),rv(o,i);var u=rv(o,r);for(i=0;i<d.length;i+=2){var x=d[i],p=d[i+1];x==="style"?w4(n,p):x==="dangerouslySetInnerHTML"?y4(n,p):x==="children"?Ou(n,p):Lb(n,x,p,u)}switch(o){case"input":tv(n,r);break;case"textarea":b4(n,r);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!r.multiple;var j=r.value;j!=null?_d(n,!!r.multiple,j,!1):h!==!!r.multiple&&(r.defaultValue!=null?_d(n,!!r.multiple,r.defaultValue,!0):_d(n,!!r.multiple,r.multiple?[]:"",!1))}n[qu]=r}catch(f){Ls(t,t.return,f)}}break;case 6:if(un(s,t),$n(t),l&4){if(t.stateNode===null)throw Error(Ge(162));n=t.stateNode,r=t.memoizedProps;try{n.nodeValue=r}catch(f){Ls(t,t.return,f)}}break;case 3:if(un(s,t),$n(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Fu(s.containerInfo)}catch(f){Ls(t,t.return,f)}break;case 4:un(s,t),$n(t);break;case 13:un(s,t),$n(t),n=t.child,n.flags&8192&&(r=n.memoizedState!==null,n.stateNode.isHidden=r,!r||n.alternate!==null&&n.alternate.memoizedState!==null||(fj=Ws())),l&4&&QN(t);break;case 22:if(x=a!==null&&a.memoizedState!==null,t.mode&1?(Wa=(u=Wa)||x,un(s,t),Wa=u):un(s,t),$n(t),l&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!x&&t.mode&1)for(st=t,x=t.child;x!==null;){for(p=st=x;st!==null;){switch(h=st,j=h.child,h.tag){case 0:case 11:case 14:case 15:bu(4,h,h.return);break;case 1:Pd(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){l=h,a=h.return;try{s=l,y.props=s.memoizedProps,y.state=s.memoizedState,y.componentWillUnmount()}catch(f){Ls(l,a,f)}}break;case 5:Pd(h,h.return);break;case 22:if(h.memoizedState!==null){ZN(p);continue}}j!==null?(j.return=h,st=j):ZN(p)}x=x.sibling}e:for(x=null,p=t;;){if(p.tag===5){if(x===null){x=p;try{n=p.stateNode,u?(r=n.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(o=p.stateNode,d=p.memoizedProps.style,i=d!=null&&d.hasOwnProperty("display")?d.display:null,o.style.display=N4("display",i))}catch(f){Ls(t,t.return,f)}}}else if(p.tag===6){if(x===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(f){Ls(t,t.return,f)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;x===p&&(x=null),p=p.return}x===p&&(x=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:un(s,t),$n(t),l&4&&QN(t);break;case 21:break;default:un(s,t),$n(t)}}function $n(t){var s=t.flags;if(s&2){try{e:{for(var a=t.return;a!==null;){if(K5(a)){var l=a;break e}a=a.return}throw Error(Ge(160))}switch(l.tag){case 5:var n=l.stateNode;l.flags&32&&(Ou(n,""),l.flags&=-33);var r=YN(t);Iv(t,r,n);break;case 3:case 4:var i=l.stateNode.containerInfo,o=YN(t);$v(t,o,i);break;default:throw Error(Ge(161))}}catch(d){Ls(t,t.return,d)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function sP(t,s,a){st=t,Q5(t)}function Q5(t,s,a){for(var l=(t.mode&1)!==0;st!==null;){var n=st,r=n.child;if(n.tag===22&&l){var i=n.memoizedState!==null||Wm;if(!i){var o=n.alternate,d=o!==null&&o.memoizedState!==null||Wa;o=Wm;var u=Wa;if(Wm=i,(Wa=d)&&!u)for(st=n;st!==null;)i=st,d=i.child,i.tag===22&&i.memoizedState!==null?ew(n):d!==null?(d.return=i,st=d):ew(n);for(;r!==null;)st=r,Q5(r),r=r.sibling;st=n,Wm=o,Wa=u}JN(t)}else n.subtreeFlags&8772&&r!==null?(r.return=n,st=r):JN(t)}}function JN(t){for(;st!==null;){var s=st;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:Wa||Mh(5,s);break;case 1:var l=s.stateNode;if(s.flags&4&&!Wa)if(a===null)l.componentDidMount();else{var n=s.elementType===s.type?a.memoizedProps:jn(s.type,a.memoizedProps);l.componentDidUpdate(n,a.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var r=s.updateQueue;r!==null&&IN(s,r,l);break;case 3:var i=s.updateQueue;if(i!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}IN(s,i,a)}break;case 5:var o=s.stateNode;if(a===null&&s.flags&4){a=o;var d=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&a.focus();break;case"img":d.src&&(a.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var u=s.alternate;if(u!==null){var x=u.memoizedState;if(x!==null){var p=x.dehydrated;p!==null&&Fu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}Wa||s.flags&512&&Ov(s)}catch(h){Ls(s,s.return,h)}}if(s===t){st=null;break}if(a=s.sibling,a!==null){a.return=s.return,st=a;break}st=s.return}}function ZN(t){for(;st!==null;){var s=st;if(s===t){st=null;break}var a=s.sibling;if(a!==null){a.return=s.return,st=a;break}st=s.return}}function ew(t){for(;st!==null;){var s=st;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Mh(4,s)}catch(d){Ls(s,a,d)}break;case 1:var l=s.stateNode;if(typeof l.componentDidMount=="function"){var n=s.return;try{l.componentDidMount()}catch(d){Ls(s,n,d)}}var r=s.return;try{Ov(s)}catch(d){Ls(s,r,d)}break;case 5:var i=s.return;try{Ov(s)}catch(d){Ls(s,i,d)}}}catch(d){Ls(s,s.return,d)}if(s===t){st=null;break}var o=s.sibling;if(o!==null){o.return=s.return,st=o;break}st=s.return}}var aP=Math.ceil,$p=Ur.ReactCurrentDispatcher,pj=Ur.ReactCurrentOwner,tn=Ur.ReactCurrentBatchConfig,Dt=0,Ca=null,la=null,$a=0,Sl=0,Md=Ii(0),ha=0,Xu=null,Ao=0,Th=0,hj=0,ju=null,xl=null,fj=0,sc=1/0,gr=null,Ip=!1,Lv=null,ki=null,Hm=!1,hi=null,Lp=0,yu=0,Fv=null,Jx=-1,Zx=0;function sl(){return Dt&6?Ws():Jx!==-1?Jx:Jx=Ws()}function Ci(t){return t.mode&1?Dt&2&&$a!==0?$a&-$a:VE.transition!==null?(Zx===0&&(Zx=$4()),Zx):(t=Gt,t!==0||(t=window.event,t=t===void 0?16:U4(t.type)),t):1}function Mn(t,s,a,l){if(50<yu)throw yu=0,Fv=null,Error(Ge(185));pm(t,a,l),(!(Dt&2)||t!==Ca)&&(t===Ca&&(!(Dt&2)&&(Th|=a),ha===4&&ci(t,$a)),bl(t,l),a===1&&Dt===0&&!(s.mode&1)&&(sc=Ws()+500,Ah&&Li()))}function bl(t,s){var a=t.callbackNode;V6(t,s);var l=jp(t,t===Ca?$a:0);if(l===0)a!==null&&dN(a),t.callbackNode=null,t.callbackPriority=0;else if(s=l&-l,t.callbackPriority!==s){if(a!=null&&dN(a),s===1)t.tag===0?_E(tw.bind(null,t)):i5(tw.bind(null,t)),$E(function(){!(Dt&6)&&Li()}),a=null;else{switch(I4(l)){case 1:a=Ub;break;case 4:a=D4;break;case 16:a=bp;break;case 536870912:a=O4;break;default:a=bp}a=nC(a,J5.bind(null,t))}t.callbackPriority=s,t.callbackNode=a}}function J5(t,s){if(Jx=-1,Zx=0,Dt&6)throw Error(Ge(327));var a=t.callbackNode;if(zd()&&t.callbackNode!==a)return null;var l=jp(t,t===Ca?$a:0);if(l===0)return null;if(l&30||l&t.expiredLanes||s)s=Fp(t,l);else{s=l;var n=Dt;Dt|=2;var r=eC();(Ca!==t||$a!==s)&&(gr=null,sc=Ws()+500,jo(t,s));do try{rP();break}catch(o){Z5(t,o)}while(!0);tj(),$p.current=r,Dt=n,la!==null?s=0:(Ca=null,$a=0,s=ha)}if(s!==0){if(s===2&&(n=uv(t),n!==0&&(l=n,s=_v(t,n))),s===1)throw a=Xu,jo(t,0),ci(t,l),bl(t,Ws()),a;if(s===6)ci(t,l);else{if(n=t.current.alternate,!(l&30)&&!lP(n)&&(s=Fp(t,l),s===2&&(r=uv(t),r!==0&&(l=r,s=_v(t,r))),s===1))throw a=Xu,jo(t,0),ci(t,l),bl(t,Ws()),a;switch(t.finishedWork=n,t.finishedLanes=l,s){case 0:case 1:throw Error(Ge(345));case 2:no(t,xl,gr);break;case 3:if(ci(t,l),(l&130023424)===l&&(s=fj+500-Ws(),10<s)){if(jp(t,0)!==0)break;if(n=t.suspendedLanes,(n&l)!==l){sl(),t.pingedLanes|=t.suspendedLanes&n;break}t.timeoutHandle=bv(no.bind(null,t,xl,gr),s);break}no(t,xl,gr);break;case 4:if(ci(t,l),(l&4194240)===l)break;for(s=t.eventTimes,n=-1;0<l;){var i=31-Pn(l);r=1<<i,i=s[i],i>n&&(n=i),l&=~r}if(l=n,l=Ws()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*aP(l/1960))-l,10<l){t.timeoutHandle=bv(no.bind(null,t,xl,gr),l);break}no(t,xl,gr);break;case 5:no(t,xl,gr);break;default:throw Error(Ge(329))}}}return bl(t,Ws()),t.callbackNode===a?J5.bind(null,t):null}function _v(t,s){var a=ju;return t.current.memoizedState.isDehydrated&&(jo(t,s).flags|=256),t=Fp(t,s),t!==2&&(s=xl,xl=a,s!==null&&Vv(s)),t}function Vv(t){xl===null?xl=t:xl.push.apply(xl,t)}function lP(t){for(var s=t;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var l=0;l<a.length;l++){var n=a[l],r=n.getSnapshot;n=n.value;try{if(!On(r(),n))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ci(t,s){for(s&=~hj,s&=~Th,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var a=31-Pn(s),l=1<<a;t[a]=-1,s&=~l}}function tw(t){if(Dt&6)throw Error(Ge(327));zd();var s=jp(t,0);if(!(s&1))return bl(t,Ws()),null;var a=Fp(t,s);if(t.tag!==0&&a===2){var l=uv(t);l!==0&&(s=l,a=_v(t,l))}if(a===1)throw a=Xu,jo(t,0),ci(t,s),bl(t,Ws()),a;if(a===6)throw Error(Ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,no(t,xl,gr),bl(t,Ws()),null}function gj(t,s){var a=Dt;Dt|=1;try{return t(s)}finally{Dt=a,Dt===0&&(sc=Ws()+500,Ah&&Li())}}function Eo(t){hi!==null&&hi.tag===0&&!(Dt&6)&&zd();var s=Dt;Dt|=1;var a=tn.transition,l=Gt;try{if(tn.transition=null,Gt=1,t)return t()}finally{Gt=l,tn.transition=a,Dt=s,!(Dt&6)&&Li()}}function vj(){Sl=Md.current,cs(Md)}function jo(t,s){t.finishedWork=null,t.finishedLanes=0;var a=t.timeoutHandle;if(a!==-1&&(t.timeoutHandle=-1,OE(a)),la!==null)for(a=la.return;a!==null;){var l=a;switch(Jb(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&Cp();break;case 3:ec(),cs(gl),cs(Ka),ij();break;case 5:rj(l);break;case 4:ec();break;case 13:cs(ks);break;case 19:cs(ks);break;case 10:sj(l.type._context);break;case 22:case 23:vj()}a=a.return}if(Ca=t,la=t=Si(t.current,null),$a=Sl=s,ha=0,Xu=null,hj=Th=Ao=0,xl=ju=null,mo!==null){for(s=0;s<mo.length;s++)if(a=mo[s],l=a.interleaved,l!==null){a.interleaved=null;var n=l.next,r=a.pending;if(r!==null){var i=r.next;r.next=n,l.next=i}a.pending=l}mo=null}return t}function Z5(t,s){do{var a=la;try{if(tj(),Xx.current=Op,Dp){for(var l=As.memoizedState;l!==null;){var n=l.queue;n!==null&&(n.pending=null),l=l.next}Dp=!1}if(So=0,ka=xa=As=null,vu=!1,Wu=0,pj.current=null,a===null||a.return===null){ha=1,Xu=s,la=null;break}e:{var r=t,i=a.return,o=a,d=s;if(s=$a,o.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var u=d,x=o,p=x.tag;if(!(x.mode&1)&&(p===0||p===11||p===15)){var h=x.alternate;h?(x.updateQueue=h.updateQueue,x.memoizedState=h.memoizedState,x.lanes=h.lanes):(x.updateQueue=null,x.memoizedState=null)}var j=UN(i);if(j!==null){j.flags&=-257,qN(j,i,o,r,s),j.mode&1&&BN(r,u,s),s=j,d=u;var y=s.updateQueue;if(y===null){var f=new Set;f.add(d),s.updateQueue=f}else y.add(d);break e}else{if(!(s&1)){BN(r,u,s),bj();break e}d=Error(Ge(426))}}else if(vs&&o.mode&1){var I=UN(i);if(I!==null){!(I.flags&65536)&&(I.flags|=256),qN(I,i,o,r,s),Zb(tc(d,o));break e}}r=d=tc(d,o),ha!==4&&(ha=2),ju===null?ju=[r]:ju.push(r),r=i;do{switch(r.tag){case 3:r.flags|=65536,s&=-s,r.lanes|=s;var A=I5(r,d,s);$N(r,A);break e;case 1:o=d;var b=r.type,C=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ki===null||!ki.has(C)))){r.flags|=65536,s&=-s,r.lanes|=s;var S=L5(r,o,s);$N(r,S);break e}}r=r.return}while(r!==null)}sC(a)}catch(z){s=z,la===a&&a!==null&&(la=a=a.return);continue}break}while(!0)}function eC(){var t=$p.current;return $p.current=Op,t===null?Op:t}function bj(){(ha===0||ha===3||ha===2)&&(ha=4),Ca===null||!(Ao&268435455)&&!(Th&268435455)||ci(Ca,$a)}function Fp(t,s){var a=Dt;Dt|=2;var l=eC();(Ca!==t||$a!==s)&&(gr=null,jo(t,s));do try{nP();break}catch(n){Z5(t,n)}while(!0);if(tj(),Dt=a,$p.current=l,la!==null)throw Error(Ge(261));return Ca=null,$a=0,ha}function nP(){for(;la!==null;)tC(la)}function rP(){for(;la!==null&&!T6();)tC(la)}function tC(t){var s=lC(t.alternate,t,Sl);t.memoizedProps=t.pendingProps,s===null?sC(t):la=s,pj.current=null}function sC(t){var s=t;do{var a=s.alternate;if(t=s.return,s.flags&32768){if(a=ZE(a,s),a!==null){a.flags&=32767,la=a;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ha=6,la=null;return}}else if(a=JE(a,s,Sl),a!==null){la=a;return}if(s=s.sibling,s!==null){la=s;return}la=s=t}while(s!==null);ha===0&&(ha=5)}function no(t,s,a){var l=Gt,n=tn.transition;try{tn.transition=null,Gt=1,iP(t,s,a,l)}finally{tn.transition=n,Gt=l}return null}function iP(t,s,a,l){do zd();while(hi!==null);if(Dt&6)throw Error(Ge(327));a=t.finishedWork;var n=t.finishedLanes;if(a===null)return null;if(t.finishedWork=null,t.finishedLanes=0,a===t.current)throw Error(Ge(177));t.callbackNode=null,t.callbackPriority=0;var r=a.lanes|a.childLanes;if(B6(t,r),t===Ca&&(la=Ca=null,$a=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||Hm||(Hm=!0,nC(bp,function(){return zd(),null})),r=(a.flags&15990)!==0,a.subtreeFlags&15990||r){r=tn.transition,tn.transition=null;var i=Gt;Gt=1;var o=Dt;Dt|=4,pj.current=null,tP(t,a),Y5(a,t),AE(gv),yp=!!fv,gv=fv=null,t.current=a,sP(a),R6(),Dt=o,Gt=i,tn.transition=r}else t.current=a;if(Hm&&(Hm=!1,hi=t,Lp=n),r=t.pendingLanes,r===0&&(ki=null),$6(a.stateNode),bl(t,Ws()),s!==null)for(l=t.onRecoverableError,a=0;a<s.length;a++)n=s[a],l(n.value,{componentStack:n.stack,digest:n.digest});if(Ip)throw Ip=!1,t=Lv,Lv=null,t;return Lp&1&&t.tag!==0&&zd(),r=t.pendingLanes,r&1?t===Fv?yu++:(yu=0,Fv=t):yu=0,Li(),null}function zd(){if(hi!==null){var t=I4(Lp),s=tn.transition,a=Gt;try{if(tn.transition=null,Gt=16>t?16:t,hi===null)var l=!1;else{if(t=hi,hi=null,Lp=0,Dt&6)throw Error(Ge(331));var n=Dt;for(Dt|=4,st=t.current;st!==null;){var r=st,i=r.child;if(st.flags&16){var o=r.deletions;if(o!==null){for(var d=0;d<o.length;d++){var u=o[d];for(st=u;st!==null;){var x=st;switch(x.tag){case 0:case 11:case 15:bu(8,x,r)}var p=x.child;if(p!==null)p.return=x,st=p;else for(;st!==null;){x=st;var h=x.sibling,j=x.return;if(H5(x),x===u){st=null;break}if(h!==null){h.return=j,st=h;break}st=j}}}var y=r.alternate;if(y!==null){var f=y.child;if(f!==null){y.child=null;do{var I=f.sibling;f.sibling=null,f=I}while(f!==null)}}st=r}}if(r.subtreeFlags&2064&&i!==null)i.return=r,st=i;else e:for(;st!==null;){if(r=st,r.flags&2048)switch(r.tag){case 0:case 11:case 15:bu(9,r,r.return)}var A=r.sibling;if(A!==null){A.return=r.return,st=A;break e}st=r.return}}var b=t.current;for(st=b;st!==null;){i=st;var C=i.child;if(i.subtreeFlags&2064&&C!==null)C.return=i,st=C;else e:for(i=b;st!==null;){if(o=st,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Mh(9,o)}}catch(z){Ls(o,o.return,z)}if(o===i){st=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,st=S;break e}st=o.return}}if(Dt=n,Li(),Zn&&typeof Zn.onPostCommitFiberRoot=="function")try{Zn.onPostCommitFiberRoot(Nh,t)}catch{}l=!0}return l}finally{Gt=a,tn.transition=s}}return!1}function sw(t,s,a){s=tc(a,s),s=I5(t,s,1),t=wi(t,s,1),s=sl(),t!==null&&(pm(t,1,s),bl(t,s))}function Ls(t,s,a){if(t.tag===3)sw(t,t,a);else for(;s!==null;){if(s.tag===3){sw(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ki===null||!ki.has(l))){t=tc(a,t),t=L5(s,t,1),s=wi(s,t,1),t=sl(),s!==null&&(pm(s,1,t),bl(s,t));break}}s=s.return}}function oP(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),s=sl(),t.pingedLanes|=t.suspendedLanes&a,Ca===t&&($a&a)===a&&(ha===4||ha===3&&($a&130023424)===$a&&500>Ws()-fj?jo(t,0):hj|=a),bl(t,s)}function aC(t,s){s===0&&(t.mode&1?(s=Lm,Lm<<=1,!(Lm&130023424)&&(Lm=4194304)):s=1);var a=sl();t=$r(t,s),t!==null&&(pm(t,s,a),bl(t,a))}function dP(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),aC(t,a)}function cP(t,s){var a=0;switch(t.tag){case 13:var l=t.stateNode,n=t.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=t.stateNode;break;default:throw Error(Ge(314))}l!==null&&l.delete(s),aC(t,a)}var lC;lC=function(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps||gl.current)fl=!0;else{if(!(t.lanes&a)&&!(s.flags&128))return fl=!1,QE(t,s,a);fl=!!(t.flags&131072)}else fl=!1,vs&&s.flags&1048576&&o5(s,Ep,s.index);switch(s.lanes=0,s.tag){case 2:var l=s.type;Qx(t,s),t=s.pendingProps;var n=Qd(s,Ka.current);qd(s,a),n=dj(null,s,l,t,n,a);var r=cj();return s.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,vl(l)?(r=!0,Sp(s)):r=!1,s.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,lj(s),n.updater=Ph,s.stateNode=n,n._reactInternals=s,Sv(s,l,t,a),s=Pv(null,s,l,!0,r,a)):(s.tag=0,vs&&r&&Qb(s),Za(null,s,n,a),s=s.child),s;case 16:l=s.elementType;e:{switch(Qx(t,s),t=s.pendingProps,n=l._init,l=n(l._payload),s.type=l,n=s.tag=mP(l),t=jn(l,t),n){case 0:s=Ev(null,s,l,t,a);break e;case 1:s=WN(null,s,l,t,a);break e;case 11:s=zN(null,s,l,t,a);break e;case 14:s=GN(null,s,l,jn(l.type,t),a);break e}throw Error(Ge(306,l,""))}return s;case 0:return l=s.type,n=s.pendingProps,n=s.elementType===l?n:jn(l,n),Ev(t,s,l,n,a);case 1:return l=s.type,n=s.pendingProps,n=s.elementType===l?n:jn(l,n),WN(t,s,l,n,a);case 3:e:{if(B5(s),t===null)throw Error(Ge(387));l=s.pendingProps,r=s.memoizedState,n=r.element,p5(t,s),Tp(s,l,null,a);var i=s.memoizedState;if(l=i.element,r.isDehydrated)if(r={element:l,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},s.updateQueue.baseState=r,s.memoizedState=r,s.flags&256){n=tc(Error(Ge(423)),s),s=HN(t,s,l,a,n);break e}else if(l!==n){n=tc(Error(Ge(424)),s),s=HN(t,s,l,a,n);break e}else for(Pl=Ni(s.stateNode.containerInfo.firstChild),Ml=s,vs=!0,wn=null,a=m5(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Jd(),l===n){s=Ir(t,s,a);break e}Za(t,s,l,a)}s=s.child}return s;case 5:return h5(s),t===null&&wv(s),l=s.type,n=s.pendingProps,r=t!==null?t.memoizedProps:null,i=n.children,vv(l,n)?i=null:r!==null&&vv(l,r)&&(s.flags|=32),V5(t,s),Za(t,s,i,a),s.child;case 6:return t===null&&wv(s),null;case 13:return U5(t,s,a);case 4:return nj(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Zd(s,null,l,a):Za(t,s,l,a),s.child;case 11:return l=s.type,n=s.pendingProps,n=s.elementType===l?n:jn(l,n),zN(t,s,l,n,a);case 7:return Za(t,s,s.pendingProps,a),s.child;case 8:return Za(t,s,s.pendingProps.children,a),s.child;case 12:return Za(t,s,s.pendingProps.children,a),s.child;case 10:e:{if(l=s.type._context,n=s.pendingProps,r=s.memoizedProps,i=n.value,ss(Pp,l._currentValue),l._currentValue=i,r!==null)if(On(r.value,i)){if(r.children===n.children&&!gl.current){s=Ir(t,s,a);break e}}else for(r=s.child,r!==null&&(r.return=s);r!==null;){var o=r.dependencies;if(o!==null){i=r.child;for(var d=o.firstContext;d!==null;){if(d.context===l){if(r.tag===1){d=Er(-1,a&-a),d.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var x=u.pending;x===null?d.next=d:(d.next=x.next,x.next=d),u.pending=d}}r.lanes|=a,d=r.alternate,d!==null&&(d.lanes|=a),kv(r.return,a,s),o.lanes|=a;break}d=d.next}}else if(r.tag===10)i=r.type===s.type?null:r.child;else if(r.tag===18){if(i=r.return,i===null)throw Error(Ge(341));i.lanes|=a,o=i.alternate,o!==null&&(o.lanes|=a),kv(i,a,s),i=r.sibling}else i=r.child;if(i!==null)i.return=r;else for(i=r;i!==null;){if(i===s){i=null;break}if(r=i.sibling,r!==null){r.return=i.return,i=r;break}i=i.return}r=i}Za(t,s,n.children,a),s=s.child}return s;case 9:return n=s.type,l=s.pendingProps.children,qd(s,a),n=sn(n),l=l(n),s.flags|=1,Za(t,s,l,a),s.child;case 14:return l=s.type,n=jn(l,s.pendingProps),n=jn(l.type,n),GN(t,s,l,n,a);case 15:return F5(t,s,s.type,s.pendingProps,a);case 17:return l=s.type,n=s.pendingProps,n=s.elementType===l?n:jn(l,n),Qx(t,s),s.tag=1,vl(l)?(t=!0,Sp(s)):t=!1,qd(s,a),$5(s,l,n),Sv(s,l,n,a),Pv(null,s,l,!0,t,a);case 19:return q5(t,s,a);case 22:return _5(t,s,a)}throw Error(Ge(156,s.tag))};function nC(t,s){return R4(t,s)}function uP(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,s,a,l){return new uP(t,s,a,l)}function jj(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mP(t){if(typeof t=="function")return jj(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_b)return 11;if(t===Vb)return 14}return 2}function Si(t,s){var a=t.alternate;return a===null?(a=en(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&14680064,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a}function ep(t,s,a,l,n,r){var i=2;if(l=t,typeof t=="function")jj(t)&&(i=1);else if(typeof t=="string")i=5;else e:switch(t){case jd:return yo(a.children,n,r,s);case Fb:i=8,n|=8;break;case Yg:return t=en(12,a,s,n|2),t.elementType=Yg,t.lanes=r,t;case Qg:return t=en(13,a,s,n),t.elementType=Qg,t.lanes=r,t;case Jg:return t=en(19,a,s,n),t.elementType=Jg,t.lanes=r,t;case h4:return Rh(a,n,r,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x4:i=10;break e;case p4:i=9;break e;case _b:i=11;break e;case Vb:i=14;break e;case ii:i=16,l=null;break e}throw Error(Ge(130,t==null?t:typeof t,""))}return s=en(i,a,s,n),s.elementType=t,s.type=l,s.lanes=r,s}function yo(t,s,a,l){return t=en(7,t,l,s),t.lanes=a,t}function Rh(t,s,a,l){return t=en(22,t,l,s),t.elementType=h4,t.lanes=a,t.stateNode={isHidden:!1},t}function sf(t,s,a){return t=en(6,t,null,s),t.lanes=a,t}function af(t,s,a){return s=en(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function xP(t,s,a,l,n){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L0(0),this.expirationTimes=L0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L0(0),this.identifierPrefix=l,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function yj(t,s,a,l,n,r,i,o,d){return t=new xP(t,s,a,o,d),s===1?(s=1,r===!0&&(s|=8)):s=0,r=en(3,null,null,s),t.current=r,r.stateNode=t,r.memoizedState={element:l,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},lj(r),t}function pP(t,s,a){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bd,key:l==null?null:""+l,children:t,containerInfo:s,implementation:a}}function rC(t){if(!t)return Mi;t=t._reactInternals;e:{if($o(t)!==t||t.tag!==1)throw Error(Ge(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(vl(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Ge(171))}if(t.tag===1){var a=t.type;if(vl(a))return r5(t,a,s)}return s}function iC(t,s,a,l,n,r,i,o,d){return t=yj(a,l,!0,t,n,r,i,o,d),t.context=rC(null),a=t.current,l=sl(),n=Ci(a),r=Er(l,n),r.callback=s??null,wi(a,r,n),t.current.lanes=n,pm(t,n,l),bl(t,l),t}function Dh(t,s,a,l){var n=s.current,r=sl(),i=Ci(n);return a=rC(a),s.context===null?s.context=a:s.pendingContext=a,s=Er(r,i),s.payload={element:t},l=l===void 0?null:l,l!==null&&(s.callback=l),t=wi(n,s,i),t!==null&&(Mn(t,n,i,r),Kx(t,n,i)),i}function _p(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function aw(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Nj(t,s){aw(t,s),(t=t.alternate)&&aw(t,s)}function hP(){return null}var oC=typeof reportError=="function"?reportError:function(t){console.error(t)};function wj(t){this._internalRoot=t}Oh.prototype.render=wj.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Ge(409));Dh(t,s,null,null)};Oh.prototype.unmount=wj.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Eo(function(){Dh(null,t,null,null)}),s[Or]=null}};function Oh(t){this._internalRoot=t}Oh.prototype.unstable_scheduleHydration=function(t){if(t){var s=_4();t={blockedOn:null,target:t,priority:s};for(var a=0;a<di.length&&s!==0&&s<di[a].priority;a++);di.splice(a,0,t),a===0&&B4(t)}};function kj(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $h(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lw(){}function fP(t,s,a,l,n){if(n){if(typeof l=="function"){var r=l;l=function(){var u=_p(i);r.call(u)}}var i=iC(s,l,t,0,null,!1,!1,"",lw);return t._reactRootContainer=i,t[Or]=i.current,Bu(t.nodeType===8?t.parentNode:t),Eo(),i}for(;n=t.lastChild;)t.removeChild(n);if(typeof l=="function"){var o=l;l=function(){var u=_p(d);o.call(u)}}var d=yj(t,0,!1,null,null,!1,!1,"",lw);return t._reactRootContainer=d,t[Or]=d.current,Bu(t.nodeType===8?t.parentNode:t),Eo(function(){Dh(s,d,a,l)}),d}function Ih(t,s,a,l,n){var r=a._reactRootContainer;if(r){var i=r;if(typeof n=="function"){var o=n;n=function(){var d=_p(i);o.call(d)}}Dh(s,i,t,n)}else i=fP(a,s,t,n,l);return _p(i)}L4=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var a=nu(s.pendingLanes);a!==0&&(qb(s,a|1),bl(s,Ws()),!(Dt&6)&&(sc=Ws()+500,Li()))}break;case 13:Eo(function(){var l=$r(t,1);if(l!==null){var n=sl();Mn(l,t,1,n)}}),Nj(t,1)}};zb=function(t){if(t.tag===13){var s=$r(t,134217728);if(s!==null){var a=sl();Mn(s,t,134217728,a)}Nj(t,134217728)}};F4=function(t){if(t.tag===13){var s=Ci(t),a=$r(t,s);if(a!==null){var l=sl();Mn(a,t,s,l)}Nj(t,s)}};_4=function(){return Gt};V4=function(t,s){var a=Gt;try{return Gt=t,s()}finally{Gt=a}};ov=function(t,s,a){switch(s){case"input":if(tv(t,a),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var n=Sh(l);if(!n)throw Error(Ge(90));g4(l),tv(l,n)}}}break;case"textarea":b4(t,a);break;case"select":s=a.value,s!=null&&_d(t,!!a.multiple,s,!1)}};S4=gj;A4=Eo;var gP={usingClientEntryPoint:!1,Events:[fm,kd,Sh,k4,C4,gj]},Ac={findFiberByHostInstance:uo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vP={bundleType:Ac.bundleType,version:Ac.version,rendererPackageName:Ac.rendererPackageName,rendererConfig:Ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=M4(t),t===null?null:t.stateNode},findFiberByHostInstance:Ac.findFiberByHostInstance||hP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Km=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Km.isDisabled&&Km.supportsFiber)try{Nh=Km.inject(vP),Zn=Km}catch{}}Il.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gP;Il.createPortal=function(t,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kj(s))throw Error(Ge(200));return pP(t,s,null,a)};Il.createRoot=function(t,s){if(!kj(t))throw Error(Ge(299));var a=!1,l="",n=oC;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(n=s.onRecoverableError)),s=yj(t,1,!1,null,null,a,!1,l,n),t[Or]=s.current,Bu(t.nodeType===8?t.parentNode:t),new wj(s)};Il.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Ge(188)):(t=Object.keys(t).join(","),Error(Ge(268,t)));return t=M4(s),t=t===null?null:t.stateNode,t};Il.flushSync=function(t){return Eo(t)};Il.hydrate=function(t,s,a){if(!$h(s))throw Error(Ge(200));return Ih(null,t,s,!0,a)};Il.hydrateRoot=function(t,s,a){if(!kj(t))throw Error(Ge(405));var l=a!=null&&a.hydratedSources||null,n=!1,r="",i=oC;if(a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(r=a.identifierPrefix),a.onRecoverableError!==void 0&&(i=a.onRecoverableError)),s=iC(s,null,t,1,a??null,n,!1,r,i),t[Or]=s.current,Bu(t),l)for(t=0;t<l.length;t++)a=l[t],n=a._getVersion,n=n(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,n]:s.mutableSourceEagerHydrationData.push(a,n);return new Oh(s)};Il.render=function(t,s,a){if(!$h(s))throw Error(Ge(200));return Ih(null,t,s,!1,a)};Il.unmountComponentAtNode=function(t){if(!$h(t))throw Error(Ge(40));return t._reactRootContainer?(Eo(function(){Ih(null,null,t,!1,function(){t._reactRootContainer=null,t[Or]=null})}),!0):!1};Il.unstable_batchedUpdates=gj;Il.unstable_renderSubtreeIntoContainer=function(t,s,a,l){if(!$h(a))throw Error(Ge(200));if(t==null||t._reactInternals===void 0)throw Error(Ge(38));return Ih(t,s,a,!1,l)};Il.version="18.3.1-next-f1338f8080-20240426";function dC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dC)}catch(t){console.error(t)}}dC(),d4.exports=Il;var Cj=d4.exports,nw=Cj;Kg.createRoot=nw.createRoot,Kg.hydrateRoot=nw.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},Yu.apply(this,arguments)}var fi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fi||(fi={}));const rw="popstate";function bP(t){t===void 0&&(t={});function s(l,n){let{pathname:r,search:i,hash:o}=l.location;return Bv("",{pathname:r,search:i,hash:o},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function a(l,n){return typeof n=="string"?n:Vp(n)}return yP(s,a,null,t)}function Ks(t,s){if(t===!1||t===null||typeof t>"u")throw new Error(s)}function Sj(t,s){if(!t){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function jP(){return Math.random().toString(36).substr(2,8)}function iw(t,s){return{usr:t.state,key:t.key,idx:s}}function Bv(t,s,a,l){return a===void 0&&(a=null),Yu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof s=="string"?mc(s):s,{state:a,key:s&&s.key||l||jP()})}function Vp(t){let{pathname:s="/",search:a="",hash:l=""}=t;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),l&&l!=="#"&&(s+=l.charAt(0)==="#"?l:"#"+l),s}function mc(t){let s={};if(t){let a=t.indexOf("#");a>=0&&(s.hash=t.substr(a),t=t.substr(0,a));let l=t.indexOf("?");l>=0&&(s.search=t.substr(l),t=t.substr(0,l)),t&&(s.pathname=t)}return s}function yP(t,s,a,l){l===void 0&&(l={});let{window:n=document.defaultView,v5Compat:r=!1}=l,i=n.history,o=fi.Pop,d=null,u=x();u==null&&(u=0,i.replaceState(Yu({},i.state,{idx:u}),""));function x(){return(i.state||{idx:null}).idx}function p(){o=fi.Pop;let I=x(),A=I==null?null:I-u;u=I,d&&d({action:o,location:f.location,delta:A})}function h(I,A){o=fi.Push;let b=Bv(f.location,I,A);u=x()+1;let C=iw(b,u),S=f.createHref(b);try{i.pushState(C,"",S)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;n.location.assign(S)}r&&d&&d({action:o,location:f.location,delta:1})}function j(I,A){o=fi.Replace;let b=Bv(f.location,I,A);u=x();let C=iw(b,u),S=f.createHref(b);i.replaceState(C,"",S),r&&d&&d({action:o,location:f.location,delta:0})}function y(I){let A=n.location.origin!=="null"?n.location.origin:n.location.href,b=typeof I=="string"?I:Vp(I);return b=b.replace(/ $/,"%20"),Ks(A,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,A)}let f={get action(){return o},get location(){return t(n,i)},listen(I){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(rw,p),d=I,()=>{n.removeEventListener(rw,p),d=null}},createHref(I){return s(n,I)},createURL:y,encodeLocation(I){let A=y(I);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:h,replace:j,go(I){return i.go(I)}};return f}var ow;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ow||(ow={}));function NP(t,s,a){return a===void 0&&(a="/"),wP(t,s,a)}function wP(t,s,a,l){let n=typeof s=="string"?mc(s):s,r=Aj(n.pathname||"/",a);if(r==null)return null;let i=cC(t);kP(i);let o=null;for(let d=0;o==null&&d<i.length;++d){let u=IP(r);o=DP(i[d],u)}return o}function cC(t,s,a,l){s===void 0&&(s=[]),a===void 0&&(a=[]),l===void 0&&(l="");let n=(r,i,o)=>{let d={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:i,route:r};d.relativePath.startsWith("/")&&(Ks(d.relativePath.startsWith(l),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(l.length));let u=Ai([l,d.relativePath]),x=a.concat(d);r.children&&r.children.length>0&&(Ks(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),cC(r.children,s,x,u)),!(r.path==null&&!r.index)&&s.push({path:u,score:TP(u,r.index),routesMeta:x})};return t.forEach((r,i)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))n(r,i);else for(let d of uC(r.path))n(r,i,d)}),s}function uC(t){let s=t.split("/");if(s.length===0)return[];let[a,...l]=s,n=a.endsWith("?"),r=a.replace(/\?$/,"");if(l.length===0)return n?[r,""]:[r];let i=uC(l.join("/")),o=[];return o.push(...i.map(d=>d===""?r:[r,d].join("/"))),n&&o.push(...i),o.map(d=>t.startsWith("/")&&d===""?"/":d)}function kP(t){t.sort((s,a)=>s.score!==a.score?a.score-s.score:RP(s.routesMeta.map(l=>l.childrenIndex),a.routesMeta.map(l=>l.childrenIndex)))}const CP=/^:[\w-]+$/,SP=3,AP=2,EP=1,PP=10,MP=-2,dw=t=>t==="*";function TP(t,s){let a=t.split("/"),l=a.length;return a.some(dw)&&(l+=MP),s&&(l+=AP),a.filter(n=>!dw(n)).reduce((n,r)=>n+(CP.test(r)?SP:r===""?EP:PP),l)}function RP(t,s){return t.length===s.length&&t.slice(0,-1).every((l,n)=>l===s[n])?t[t.length-1]-s[s.length-1]:0}function DP(t,s,a){let{routesMeta:l}=t,n={},r="/",i=[];for(let o=0;o<l.length;++o){let d=l[o],u=o===l.length-1,x=r==="/"?s:s.slice(r.length)||"/",p=OP({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},x),h=d.route;if(!p)return null;Object.assign(n,p.params),i.push({params:n,pathname:Ai([r,p.pathname]),pathnameBase:BP(Ai([r,p.pathnameBase])),route:h}),p.pathnameBase!=="/"&&(r=Ai([r,p.pathnameBase]))}return i}function OP(t,s){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,l]=$P(t.path,t.caseSensitive,t.end),n=s.match(a);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:l.reduce((u,x,p)=>{let{paramName:h,isOptional:j}=x;if(h==="*"){let f=o[p]||"";i=r.slice(0,r.length-f.length).replace(/(.)\/+$/,"$1")}const y=o[p];return j&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:r,pathnameBase:i,pattern:t}}function $P(t,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),Sj(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let l=[],n="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,d)=>(l.push({paramName:o,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(l.push({paramName:"*"}),n+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":t!==""&&t!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,s?void 0:"i"),l]}function IP(t){try{return t.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Sj(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),t}}function Aj(t,s){if(s==="/")return t;if(!t.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,l=t.charAt(a);return l&&l!=="/"?null:t.slice(a)||"/"}const LP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FP=t=>LP.test(t);function _P(t,s){s===void 0&&(s="/");let{pathname:a,search:l="",hash:n=""}=typeof t=="string"?mc(t):t,r;if(a)if(FP(a))r=a;else{if(a.includes("//")){let i=a;a=a.replace(/\/\/+/g,"/"),Sj(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+a))}a.startsWith("/")?r=cw(a.substring(1),"/"):r=cw(a,s)}else r=s;return{pathname:r,search:UP(l),hash:qP(n)}}function cw(t,s){let a=s.replace(/\/+$/,"").split("/");return t.split("/").forEach(n=>{n===".."?a.length>1&&a.pop():n!=="."&&a.push(n)}),a.length>1?a.join("/"):"/"}function lf(t,s,a,l){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VP(t){return t.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function Ej(t,s){let a=VP(t);return s?a.map((l,n)=>n===a.length-1?l.pathname:l.pathnameBase):a.map(l=>l.pathnameBase)}function Pj(t,s,a,l){l===void 0&&(l=!1);let n;typeof t=="string"?n=mc(t):(n=Yu({},t),Ks(!n.pathname||!n.pathname.includes("?"),lf("?","pathname","search",n)),Ks(!n.pathname||!n.pathname.includes("#"),lf("#","pathname","hash",n)),Ks(!n.search||!n.search.includes("#"),lf("#","search","hash",n)));let r=t===""||n.pathname==="",i=r?"/":n.pathname,o;if(i==null)o=a;else{let p=s.length-1;if(!l&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),p-=1;n.pathname=h.join("/")}o=p>=0?s[p]:"/"}let d=_P(n,o),u=i&&i!=="/"&&i.endsWith("/"),x=(r||i===".")&&a.endsWith("/");return!d.pathname.endsWith("/")&&(u||x)&&(d.pathname+="/"),d}const Ai=t=>t.join("/").replace(/\/\/+/g,"/"),BP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function zP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const mC=["post","put","patch","delete"];new Set(mC);const GP=["get",...mC];new Set(GP);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qu(){return Qu=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},Qu.apply(this,arguments)}const Mj=c.createContext(null),WP=c.createContext(null),Fi=c.createContext(null),Lh=c.createContext(null),qr=c.createContext({outlet:null,matches:[],isDataRoute:!1}),xC=c.createContext(null);function HP(t,s){let{relative:a}=s===void 0?{}:s;xc()||Ks(!1);let{basename:l,navigator:n}=c.useContext(Fi),{hash:r,pathname:i,search:o}=hC(t,{relative:a}),d=i;return l!=="/"&&(d=i==="/"?l:Ai([l,i])),n.createHref({pathname:d,search:o,hash:r})}function xc(){return c.useContext(Lh)!=null}function _i(){return xc()||Ks(!1),c.useContext(Lh).location}function pC(t){c.useContext(Fi).static||c.useLayoutEffect(t)}function ot(){let{isDataRoute:t}=c.useContext(qr);return t?rM():KP()}function KP(){xc()||Ks(!1);let t=c.useContext(Mj),{basename:s,future:a,navigator:l}=c.useContext(Fi),{matches:n}=c.useContext(qr),{pathname:r}=_i(),i=JSON.stringify(Ej(n,a.v7_relativeSplatPath)),o=c.useRef(!1);return pC(()=>{o.current=!0}),c.useCallback(function(u,x){if(x===void 0&&(x={}),!o.current)return;if(typeof u=="number"){l.go(u);return}let p=Pj(u,JSON.parse(i),r,x.relative==="path");t==null&&s!=="/"&&(p.pathname=p.pathname==="/"?s:Ai([s,p.pathname])),(x.replace?l.replace:l.push)(p,x.state,x)},[s,l,i,r,t])}function na(){let{matches:t}=c.useContext(qr),s=t[t.length-1];return s?s.params:{}}function hC(t,s){let{relative:a}=s===void 0?{}:s,{future:l}=c.useContext(Fi),{matches:n}=c.useContext(qr),{pathname:r}=_i(),i=JSON.stringify(Ej(n,l.v7_relativeSplatPath));return c.useMemo(()=>Pj(t,JSON.parse(i),r,a==="path"),[t,i,r,a])}function XP(t,s){return YP(t,s)}function YP(t,s,a,l){xc()||Ks(!1);let{navigator:n}=c.useContext(Fi),{matches:r}=c.useContext(qr),i=r[r.length-1],o=i?i.params:{};i&&i.pathname;let d=i?i.pathnameBase:"/";i&&i.route;let u=_i(),x;if(s){var p;let I=typeof s=="string"?mc(s):s;d==="/"||(p=I.pathname)!=null&&p.startsWith(d)||Ks(!1),x=I}else x=u;let h=x.pathname||"/",j=h;if(d!=="/"){let I=d.replace(/^\//,"").split("/");j="/"+h.replace(/^\//,"").split("/").slice(I.length).join("/")}let y=NP(t,{pathname:j}),f=tM(y&&y.map(I=>Object.assign({},I,{params:Object.assign({},o,I.params),pathname:Ai([d,n.encodeLocation?n.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:Ai([d,n.encodeLocation?n.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),r,a,l);return s&&f?c.createElement(Lh.Provider,{value:{location:Qu({pathname:"/",search:"",hash:"",state:null,key:"default"},x),navigationType:fi.Pop}},f):f}function QP(){let t=nM(),s=zP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return c.createElement(c.Fragment,null,c.createElement("h2",null,"Unexpected Application Error!"),c.createElement("h3",{style:{fontStyle:"italic"}},s),a?c.createElement("pre",{style:n},a):null,null)}const JP=c.createElement(QP,null);class ZP extends c.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location||a.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:a.error,location:a.location,revalidation:s.revalidation||a.revalidation}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error!==void 0?c.createElement(qr.Provider,{value:this.props.routeContext},c.createElement(xC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eM(t){let{routeContext:s,match:a,children:l}=t,n=c.useContext(Mj);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),c.createElement(qr.Provider,{value:s},l)}function tM(t,s,a,l){var n;if(s===void 0&&(s=[]),a===void 0&&(a=null),l===void 0&&(l=null),t==null){var r;if(!a)return null;if(a.errors)t=a.matches;else if((r=l)!=null&&r.v7_partialHydration&&s.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let i=t,o=(n=a)==null?void 0:n.errors;if(o!=null){let x=i.findIndex(p=>p.route.id&&(o==null?void 0:o[p.route.id])!==void 0);x>=0||Ks(!1),i=i.slice(0,Math.min(i.length,x+1))}let d=!1,u=-1;if(a&&l&&l.v7_partialHydration)for(let x=0;x<i.length;x++){let p=i[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=x),p.route.id){let{loaderData:h,errors:j}=a,y=p.route.loader&&h[p.route.id]===void 0&&(!j||j[p.route.id]===void 0);if(p.route.lazy||y){d=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((x,p,h)=>{let j,y=!1,f=null,I=null;a&&(j=o&&p.route.id?o[p.route.id]:void 0,f=p.route.errorElement||JP,d&&(u<0&&h===0?(iM("route-fallback"),y=!0,I=null):u===h&&(y=!0,I=p.route.hydrateFallbackElement||null)));let A=s.concat(i.slice(0,h+1)),b=()=>{let C;return j?C=f:y?C=I:p.route.Component?C=c.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=x,c.createElement(eM,{match:p,routeContext:{outlet:x,matches:A,isDataRoute:a!=null},children:C})};return a&&(p.route.ErrorBoundary||p.route.errorElement||h===0)?c.createElement(ZP,{location:a.location,revalidation:a.revalidation,component:f,error:j,children:b(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):b()},null)}var fC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fC||{}),gC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gC||{});function sM(t){let s=c.useContext(Mj);return s||Ks(!1),s}function aM(t){let s=c.useContext(WP);return s||Ks(!1),s}function lM(t){let s=c.useContext(qr);return s||Ks(!1),s}function vC(t){let s=lM(),a=s.matches[s.matches.length-1];return a.route.id||Ks(!1),a.route.id}function nM(){var t;let s=c.useContext(xC),a=aM(),l=vC();return s!==void 0?s:(t=a.errors)==null?void 0:t[l]}function rM(){let{router:t}=sM(fC.UseNavigateStable),s=vC(gC.UseNavigateStable),a=c.useRef(!1);return pC(()=>{a.current=!0}),c.useCallback(function(n,r){r===void 0&&(r={}),a.current&&(typeof n=="number"?t.navigate(n):t.navigate(n,Qu({fromRouteId:s},r)))},[t,s])}const uw={};function iM(t,s,a){uw[t]||(uw[t]=!0)}function oM(t,s){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function bC(t){let{to:s,replace:a,state:l,relative:n}=t;xc()||Ks(!1);let{future:r,static:i}=c.useContext(Fi),{matches:o}=c.useContext(qr),{pathname:d}=_i(),u=ot(),x=Pj(s,Ej(o,r.v7_relativeSplatPath),d,n==="path"),p=JSON.stringify(x);return c.useEffect(()=>u(JSON.parse(p),{replace:a,state:l,relative:n}),[u,p,n,a,l]),null}function gd(t){Ks(!1)}function dM(t){let{basename:s="/",children:a=null,location:l,navigationType:n=fi.Pop,navigator:r,static:i=!1,future:o}=t;xc()&&Ks(!1);let d=s.replace(/^\/*/,"/"),u=c.useMemo(()=>({basename:d,navigator:r,static:i,future:Qu({v7_relativeSplatPath:!1},o)}),[d,o,r,i]);typeof l=="string"&&(l=mc(l));let{pathname:x="/",search:p="",hash:h="",state:j=null,key:y="default"}=l,f=c.useMemo(()=>{let I=Aj(x,d);return I==null?null:{location:{pathname:I,search:p,hash:h,state:j,key:y},navigationType:n}},[d,x,p,h,j,y,n]);return f==null?null:c.createElement(Fi.Provider,{value:u},c.createElement(Lh.Provider,{children:a,value:f}))}function cM(t){let{children:s,location:a}=t;return XP(Uv(s),a)}new Promise(()=>{});function Uv(t,s){s===void 0&&(s=[]);let a=[];return c.Children.forEach(t,(l,n)=>{if(!c.isValidElement(l))return;let r=[...s,n];if(l.type===c.Fragment){a.push.apply(a,Uv(l.props.children,r));return}l.type!==gd&&Ks(!1),!l.props.index||!l.props.children||Ks(!1);let i={id:l.props.id||r.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(i.children=Uv(l.props.children,r)),a.push(i)}),a}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qv(){return qv=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},qv.apply(this,arguments)}function uM(t,s){if(t==null)return{};var a={},l=Object.keys(t),n,r;for(r=0;r<l.length;r++)n=l[r],!(s.indexOf(n)>=0)&&(a[n]=t[n]);return a}function mM(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xM(t,s){return t.button===0&&(!s||s==="_self")&&!mM(t)}function zv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((s,a)=>{let l=t[a];return s.concat(Array.isArray(l)?l.map(n=>[a,n]):[[a,l]])},[]))}function pM(t,s){let a=zv(t);return s&&s.forEach((l,n)=>{a.has(n)||s.getAll(n).forEach(r=>{a.append(n,r)})}),a}const hM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fM="6";try{window.__reactRouterVersion=fM}catch{}const gM="startTransition",mw=hp[gM];function vM(t){let{basename:s,children:a,future:l,window:n}=t,r=c.useRef();r.current==null&&(r.current=bP({window:n,v5Compat:!0}));let i=r.current,[o,d]=c.useState({action:i.action,location:i.location}),{v7_startTransition:u}=l||{},x=c.useCallback(p=>{u&&mw?mw(()=>d(p)):d(p)},[d,u]);return c.useLayoutEffect(()=>i.listen(x),[i,x]),c.useEffect(()=>oM(l),[l]),c.createElement(dM,{basename:s,children:a,location:o.location,navigationType:o.action,navigator:i,future:l})}const bM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xm=c.forwardRef(function(s,a){let{onClick:l,relative:n,reloadDocument:r,replace:i,state:o,target:d,to:u,preventScrollReset:x,viewTransition:p}=s,h=uM(s,hM),{basename:j}=c.useContext(Fi),y,f=!1;if(typeof u=="string"&&jM.test(u)&&(y=u,bM))try{let C=new URL(window.location.href),S=u.startsWith("//")?new URL(C.protocol+u):new URL(u),z=Aj(S.pathname,j);S.origin===C.origin&&z!=null?u=z+S.search+S.hash:f=!0}catch{}let I=HP(u,{relative:n}),A=yM(u,{replace:i,state:o,target:d,preventScrollReset:x,relative:n,viewTransition:p});function b(C){l&&l(C),C.defaultPrevented||A(C)}return c.createElement("a",qv({},h,{href:y||I,onClick:f||r?l:b,ref:a,target:d}))});var xw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xw||(xw={}));var pw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(pw||(pw={}));function yM(t,s){let{target:a,replace:l,state:n,preventScrollReset:r,relative:i,viewTransition:o}=s===void 0?{}:s,d=ot(),u=_i(),x=hC(t,{relative:i});return c.useCallback(p=>{if(xM(p,a)){p.preventDefault();let h=l!==void 0?l:Vp(u)===Vp(x);d(t,{replace:h,state:n,preventScrollReset:r,relative:i,viewTransition:o})}},[u,d,x,l,n,a,t,r,i,o])}function Tj(t){let s=c.useRef(zv(t)),a=c.useRef(!1),l=_i(),n=c.useMemo(()=>pM(l.search,a.current?null:s.current),[l.search]),r=ot(),i=c.useCallback((o,d)=>{const u=zv(typeof o=="function"?o(n):o);a.current=!0,r("?"+u,d)},[r,n]);return[n,i]}const Ju={black:"#000",white:"#fff"},_o={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Vo={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Bo={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Uo={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},Ec={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},NM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ac(t){let s="https://mui.com/production-error/?code="+t;for(let a=1;a<arguments.length;a+=1)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified MUI error #"+t+"; visit "+s+" for the full message."}const wM=Object.freeze(Object.defineProperty({__proto__:null,default:ac},Symbol.toStringTag,{value:"Module"})),Bp="$$material";function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)({}).hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},ze.apply(null,arguments)}function _s(t,s){if(t==null)return{};var a={};for(var l in t)if({}.hasOwnProperty.call(t,l)){if(s.indexOf(l)!==-1)continue;a[l]=t[l]}return a}function kM(t){if(t.sheet)return t.sheet;for(var s=0;s<document.styleSheets.length;s++)if(document.styleSheets[s].ownerNode===t)return document.styleSheets[s]}function CM(t){var s=document.createElement("style");return s.setAttribute("data-emotion",t.key),t.nonce!==void 0&&s.setAttribute("nonce",t.nonce),s.appendChild(document.createTextNode("")),s.setAttribute("data-s",""),s}var SM=function(){function t(a){var l=this;this._insertTag=function(n){var r;l.tags.length===0?l.insertionPoint?r=l.insertionPoint.nextSibling:l.prepend?r=l.container.firstChild:r=l.before:r=l.tags[l.tags.length-1].nextSibling,l.container.insertBefore(n,r),l.tags.push(n)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var s=t.prototype;return s.hydrate=function(l){l.forEach(this._insertTag)},s.insert=function(l){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(CM(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var r=kM(n);try{r.insertRule(l,r.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(l));this.ctr++},s.flush=function(){this.tags.forEach(function(l){var n;return(n=l.parentNode)==null?void 0:n.removeChild(l)}),this.tags=[],this.ctr=0},t}(),qa="-ms-",Up="-moz-",Ft="-webkit-",jC="comm",Rj="rule",Dj="decl",AM="@import",yC="@keyframes",EM="@layer",PM=Math.abs,Fh=String.fromCharCode,MM=Object.assign;function TM(t,s){return Ta(t,0)^45?(((s<<2^Ta(t,0))<<2^Ta(t,1))<<2^Ta(t,2))<<2^Ta(t,3):0}function NC(t){return t.trim()}function RM(t,s){return(t=s.exec(t))?t[0]:t}function _t(t,s,a){return t.replace(s,a)}function Gv(t,s){return t.indexOf(s)}function Ta(t,s){return t.charCodeAt(s)|0}function Zu(t,s,a){return t.slice(s,a)}function Wn(t){return t.length}function Oj(t){return t.length}function Ym(t,s){return s.push(t),t}function DM(t,s){return t.map(s).join("")}var _h=1,lc=1,wC=0,yl=0,aa=0,pc="";function Vh(t,s,a,l,n,r,i){return{value:t,root:s,parent:a,type:l,props:n,children:r,line:_h,column:lc,length:i,return:""}}function Pc(t,s){return MM(Vh("",null,null,"",null,null,0),t,{length:-t.length},s)}function OM(){return aa}function $M(){return aa=yl>0?Ta(pc,--yl):0,lc--,aa===10&&(lc=1,_h--),aa}function Tl(){return aa=yl<wC?Ta(pc,yl++):0,lc++,aa===10&&(lc=1,_h++),aa}function tr(){return Ta(pc,yl)}function tp(){return yl}function vm(t,s){return Zu(pc,t,s)}function em(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kC(t){return _h=lc=1,wC=Wn(pc=t),yl=0,[]}function CC(t){return pc="",t}function sp(t){return NC(vm(yl-1,Wv(t===91?t+2:t===40?t+1:t)))}function IM(t){for(;(aa=tr())&&aa<33;)Tl();return em(t)>2||em(aa)>3?"":" "}function LM(t,s){for(;--s&&Tl()&&!(aa<48||aa>102||aa>57&&aa<65||aa>70&&aa<97););return vm(t,tp()+(s<6&&tr()==32&&Tl()==32))}function Wv(t){for(;Tl();)switch(aa){case t:return yl;case 34:case 39:t!==34&&t!==39&&Wv(aa);break;case 40:t===41&&Wv(t);break;case 92:Tl();break}return yl}function FM(t,s){for(;Tl()&&t+aa!==57;)if(t+aa===84&&tr()===47)break;return"/*"+vm(s,yl-1)+"*"+Fh(t===47?t:Tl())}function _M(t){for(;!em(tr());)Tl();return vm(t,yl)}function VM(t){return CC(ap("",null,null,null,[""],t=kC(t),0,[0],t))}function ap(t,s,a,l,n,r,i,o,d){for(var u=0,x=0,p=i,h=0,j=0,y=0,f=1,I=1,A=1,b=0,C="",S=n,z=r,$=l,D=C;I;)switch(y=b,b=Tl()){case 40:if(y!=108&&Ta(D,p-1)==58){Gv(D+=_t(sp(b),"&","&\f"),"&\f")!=-1&&(A=-1);break}case 34:case 39:case 91:D+=sp(b);break;case 9:case 10:case 13:case 32:D+=IM(y);break;case 92:D+=LM(tp()-1,7);continue;case 47:switch(tr()){case 42:case 47:Ym(BM(FM(Tl(),tp()),s,a),d);break;default:D+="/"}break;case 123*f:o[u++]=Wn(D)*A;case 125*f:case 59:case 0:switch(b){case 0:case 125:I=0;case 59+x:A==-1&&(D=_t(D,/\f/g,"")),j>0&&Wn(D)-p&&Ym(j>32?fw(D+";",l,a,p-1):fw(_t(D," ","")+";",l,a,p-2),d);break;case 59:D+=";";default:if(Ym($=hw(D,s,a,u,x,n,o,C,S=[],z=[],p),r),b===123)if(x===0)ap(D,s,$,$,S,r,p,o,z);else switch(h===99&&Ta(D,3)===110?100:h){case 100:case 108:case 109:case 115:ap(t,$,$,l&&Ym(hw(t,$,$,0,0,n,o,C,n,S=[],p),z),n,z,p,o,l?S:z);break;default:ap(D,$,$,$,[""],z,0,o,z)}}u=x=j=0,f=A=1,C=D="",p=i;break;case 58:p=1+Wn(D),j=y;default:if(f<1){if(b==123)--f;else if(b==125&&f++==0&&$M()==125)continue}switch(D+=Fh(b),b*f){case 38:A=x>0?1:(D+="\f",-1);break;case 44:o[u++]=(Wn(D)-1)*A,A=1;break;case 64:tr()===45&&(D+=sp(Tl())),h=tr(),x=p=Wn(C=D+=_M(tp())),b++;break;case 45:y===45&&Wn(D)==2&&(f=0)}}return r}function hw(t,s,a,l,n,r,i,o,d,u,x){for(var p=n-1,h=n===0?r:[""],j=Oj(h),y=0,f=0,I=0;y<l;++y)for(var A=0,b=Zu(t,p+1,p=PM(f=i[y])),C=t;A<j;++A)(C=NC(f>0?h[A]+" "+b:_t(b,/&\f/g,h[A])))&&(d[I++]=C);return Vh(t,s,a,n===0?Rj:o,d,u,x)}function BM(t,s,a){return Vh(t,s,a,jC,Fh(OM()),Zu(t,2,-2),0)}function fw(t,s,a,l){return Vh(t,s,a,Dj,Zu(t,0,l),Zu(t,l+1,-1),l)}function Gd(t,s){for(var a="",l=Oj(t),n=0;n<l;n++)a+=s(t[n],n,t,s)||"";return a}function UM(t,s,a,l){switch(t.type){case EM:if(t.children.length)break;case AM:case Dj:return t.return=t.return||t.value;case jC:return"";case yC:return t.return=t.value+"{"+Gd(t.children,l)+"}";case Rj:t.value=t.props.join(",")}return Wn(a=Gd(t.children,l))?t.return=t.value+"{"+a+"}":""}function qM(t){var s=Oj(t);return function(a,l,n,r){for(var i="",o=0;o<s;o++)i+=t[o](a,l,n,r)||"";return i}}function zM(t){return function(s){s.root||(s=s.return)&&t(s)}}function SC(t){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=t(a)),s[a]}}var GM=function(s,a,l){for(var n=0,r=0;n=r,r=tr(),n===38&&r===12&&(a[l]=1),!em(r);)Tl();return vm(s,yl)},WM=function(s,a){var l=-1,n=44;do switch(em(n)){case 0:n===38&&tr()===12&&(a[l]=1),s[l]+=GM(yl-1,a,l);break;case 2:s[l]+=sp(n);break;case 4:if(n===44){s[++l]=tr()===58?"&\f":"",a[l]=s[l].length;break}default:s[l]+=Fh(n)}while(n=Tl());return s},HM=function(s,a){return CC(WM(kC(s),a))},gw=new WeakMap,KM=function(s){if(!(s.type!=="rule"||!s.parent||s.length<1)){for(var a=s.value,l=s.parent,n=s.column===l.column&&s.line===l.line;l.type!=="rule";)if(l=l.parent,!l)return;if(!(s.props.length===1&&a.charCodeAt(0)!==58&&!gw.get(l))&&!n){gw.set(s,!0);for(var r=[],i=HM(a,r),o=l.props,d=0,u=0;d<i.length;d++)for(var x=0;x<o.length;x++,u++)s.props[u]=r[d]?i[d].replace(/&\f/g,o[x]):o[x]+" "+i[d]}}},XM=function(s){if(s.type==="decl"){var a=s.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(s.return="",s.value="")}};function AC(t,s){switch(TM(t,s)){case 5103:return Ft+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ft+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ft+t+Up+t+qa+t+t;case 6828:case 4268:return Ft+t+qa+t+t;case 6165:return Ft+t+qa+"flex-"+t+t;case 5187:return Ft+t+_t(t,/(\w+).+(:[^]+)/,Ft+"box-$1$2"+qa+"flex-$1$2")+t;case 5443:return Ft+t+qa+"flex-item-"+_t(t,/flex-|-self/,"")+t;case 4675:return Ft+t+qa+"flex-line-pack"+_t(t,/align-content|flex-|-self/,"")+t;case 5548:return Ft+t+qa+_t(t,"shrink","negative")+t;case 5292:return Ft+t+qa+_t(t,"basis","preferred-size")+t;case 6060:return Ft+"box-"+_t(t,"-grow","")+Ft+t+qa+_t(t,"grow","positive")+t;case 4554:return Ft+_t(t,/([^-])(transform)/g,"$1"+Ft+"$2")+t;case 6187:return _t(_t(_t(t,/(zoom-|grab)/,Ft+"$1"),/(image-set)/,Ft+"$1"),t,"")+t;case 5495:case 3959:return _t(t,/(image-set\([^]*)/,Ft+"$1$`$1");case 4968:return _t(_t(t,/(.+:)(flex-)?(.*)/,Ft+"box-pack:$3"+qa+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ft+t+t;case 4095:case 3583:case 4068:case 2532:return _t(t,/(.+)-inline(.+)/,Ft+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wn(t)-1-s>6)switch(Ta(t,s+1)){case 109:if(Ta(t,s+4)!==45)break;case 102:return _t(t,/(.+:)(.+)-([^]+)/,"$1"+Ft+"$2-$3$1"+Up+(Ta(t,s+3)==108?"$3":"$2-$3"))+t;case 115:return~Gv(t,"stretch")?AC(_t(t,"stretch","fill-available"),s)+t:t}break;case 4949:if(Ta(t,s+1)!==115)break;case 6444:switch(Ta(t,Wn(t)-3-(~Gv(t,"!important")&&10))){case 107:return _t(t,":",":"+Ft)+t;case 101:return _t(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ft+(Ta(t,14)===45?"inline-":"")+"box$3$1"+Ft+"$2$3$1"+qa+"$2box$3")+t}break;case 5936:switch(Ta(t,s+11)){case 114:return Ft+t+qa+_t(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ft+t+qa+_t(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ft+t+qa+_t(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ft+t+qa+t+t}return t}var YM=function(s,a,l,n){if(s.length>-1&&!s.return)switch(s.type){case Dj:s.return=AC(s.value,s.length);break;case yC:return Gd([Pc(s,{value:_t(s.value,"@","@"+Ft)})],n);case Rj:if(s.length)return DM(s.props,function(r){switch(RM(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Gd([Pc(s,{props:[_t(r,/:(read-\w+)/,":"+Up+"$1")]})],n);case"::placeholder":return Gd([Pc(s,{props:[_t(r,/:(plac\w+)/,":"+Ft+"input-$1")]}),Pc(s,{props:[_t(r,/:(plac\w+)/,":"+Up+"$1")]}),Pc(s,{props:[_t(r,/:(plac\w+)/,qa+"input-$1")]})],n)}return""})}},QM=[YM],EC=function(s){var a=s.key;if(a==="css"){var l=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(l,function(f){var I=f.getAttribute("data-emotion");I.indexOf(" ")!==-1&&(document.head.appendChild(f),f.setAttribute("data-s",""))})}var n=s.stylisPlugins||QM,r={},i,o=[];i=s.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(f){for(var I=f.getAttribute("data-emotion").split(" "),A=1;A<I.length;A++)r[I[A]]=!0;o.push(f)});var d,u=[KM,XM];{var x,p=[UM,zM(function(f){x.insert(f)})],h=qM(u.concat(n,p)),j=function(I){return Gd(VM(I),h)};d=function(I,A,b,C){x=b,j(I?I+"{"+A.styles+"}":A.styles),C&&(y.inserted[A.name]=!0)}}var y={key:a,sheet:new SM({key:a,container:i,nonce:s.nonce,speedy:s.speedy,prepend:s.prepend,insertionPoint:s.insertionPoint}),nonce:s.nonce,inserted:r,registered:{},insert:d};return y.sheet.hydrate(o),y},PC={exports:{}},Wt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=typeof Symbol=="function"&&Symbol.for,$j=Sa?Symbol.for("react.element"):60103,Ij=Sa?Symbol.for("react.portal"):60106,Bh=Sa?Symbol.for("react.fragment"):60107,Uh=Sa?Symbol.for("react.strict_mode"):60108,qh=Sa?Symbol.for("react.profiler"):60114,zh=Sa?Symbol.for("react.provider"):60109,Gh=Sa?Symbol.for("react.context"):60110,Lj=Sa?Symbol.for("react.async_mode"):60111,Wh=Sa?Symbol.for("react.concurrent_mode"):60111,Hh=Sa?Symbol.for("react.forward_ref"):60112,Kh=Sa?Symbol.for("react.suspense"):60113,JM=Sa?Symbol.for("react.suspense_list"):60120,Xh=Sa?Symbol.for("react.memo"):60115,Yh=Sa?Symbol.for("react.lazy"):60116,ZM=Sa?Symbol.for("react.block"):60121,eT=Sa?Symbol.for("react.fundamental"):60117,tT=Sa?Symbol.for("react.responder"):60118,sT=Sa?Symbol.for("react.scope"):60119;function Fl(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case $j:switch(t=t.type,t){case Lj:case Wh:case Bh:case qh:case Uh:case Kh:return t;default:switch(t=t&&t.$$typeof,t){case Gh:case Hh:case Yh:case Xh:case zh:return t;default:return s}}case Ij:return s}}}function MC(t){return Fl(t)===Wh}Wt.AsyncMode=Lj;Wt.ConcurrentMode=Wh;Wt.ContextConsumer=Gh;Wt.ContextProvider=zh;Wt.Element=$j;Wt.ForwardRef=Hh;Wt.Fragment=Bh;Wt.Lazy=Yh;Wt.Memo=Xh;Wt.Portal=Ij;Wt.Profiler=qh;Wt.StrictMode=Uh;Wt.Suspense=Kh;Wt.isAsyncMode=function(t){return MC(t)||Fl(t)===Lj};Wt.isConcurrentMode=MC;Wt.isContextConsumer=function(t){return Fl(t)===Gh};Wt.isContextProvider=function(t){return Fl(t)===zh};Wt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===$j};Wt.isForwardRef=function(t){return Fl(t)===Hh};Wt.isFragment=function(t){return Fl(t)===Bh};Wt.isLazy=function(t){return Fl(t)===Yh};Wt.isMemo=function(t){return Fl(t)===Xh};Wt.isPortal=function(t){return Fl(t)===Ij};Wt.isProfiler=function(t){return Fl(t)===qh};Wt.isStrictMode=function(t){return Fl(t)===Uh};Wt.isSuspense=function(t){return Fl(t)===Kh};Wt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Bh||t===Wh||t===qh||t===Uh||t===Kh||t===JM||typeof t=="object"&&t!==null&&(t.$$typeof===Yh||t.$$typeof===Xh||t.$$typeof===zh||t.$$typeof===Gh||t.$$typeof===Hh||t.$$typeof===eT||t.$$typeof===tT||t.$$typeof===sT||t.$$typeof===ZM)};Wt.typeOf=Fl;PC.exports=Wt;var aT=PC.exports,TC=aT,lT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},nT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},RC={};RC[TC.ForwardRef]=lT;RC[TC.Memo]=nT;var rT=!0;function DC(t,s,a){var l="";return a.split(" ").forEach(function(n){t[n]!==void 0?s.push(t[n]+";"):n&&(l+=n+" ")}),l}var Fj=function(s,a,l){var n=s.key+"-"+a.name;(l===!1||rT===!1)&&s.registered[n]===void 0&&(s.registered[n]=a.styles)},_j=function(s,a,l){Fj(s,a,l);var n=s.key+"-"+a.name;if(s.inserted[a.name]===void 0){var r=a;do s.insert(a===r?"."+n:"",r,s.sheet,!0),r=r.next;while(r!==void 0)}};function iT(t){for(var s=0,a,l=0,n=t.length;n>=4;++l,n-=4)a=t.charCodeAt(l)&255|(t.charCodeAt(++l)&255)<<8|(t.charCodeAt(++l)&255)<<16|(t.charCodeAt(++l)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,s=(a&65535)*1540483477+((a>>>16)*59797<<16)^(s&65535)*1540483477+((s>>>16)*59797<<16);switch(n){case 3:s^=(t.charCodeAt(l+2)&255)<<16;case 2:s^=(t.charCodeAt(l+1)&255)<<8;case 1:s^=t.charCodeAt(l)&255,s=(s&65535)*1540483477+((s>>>16)*59797<<16)}return s^=s>>>13,s=(s&65535)*1540483477+((s>>>16)*59797<<16),((s^s>>>15)>>>0).toString(36)}var oT={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},dT=/[A-Z]|^ms/g,cT=/_EMO_([^_]+?)_([^]*?)_EMO_/g,OC=function(s){return s.charCodeAt(1)===45},vw=function(s){return s!=null&&typeof s!="boolean"},nf=SC(function(t){return OC(t)?t:t.replace(dT,"-$&").toLowerCase()}),bw=function(s,a){switch(s){case"animation":case"animationName":if(typeof a=="string")return a.replace(cT,function(l,n,r){return Hn={name:n,styles:r,next:Hn},n})}return oT[s]!==1&&!OC(s)&&typeof a=="number"&&a!==0?a+"px":a};function tm(t,s,a){if(a==null)return"";var l=a;if(l.__emotion_styles!==void 0)return l;switch(typeof a){case"boolean":return"";case"object":{var n=a;if(n.anim===1)return Hn={name:n.name,styles:n.styles,next:Hn},n.name;var r=a;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)Hn={name:i.name,styles:i.styles,next:Hn},i=i.next;var o=r.styles+";";return o}return uT(t,s,a)}case"function":{if(t!==void 0){var d=Hn,u=a(t);return Hn=d,tm(t,s,u)}break}}var x=a;if(s==null)return x;var p=s[x];return p!==void 0?p:x}function uT(t,s,a){var l="";if(Array.isArray(a))for(var n=0;n<a.length;n++)l+=tm(t,s,a[n])+";";else for(var r in a){var i=a[r];if(typeof i!="object"){var o=i;s!=null&&s[o]!==void 0?l+=r+"{"+s[o]+"}":vw(o)&&(l+=nf(r)+":"+bw(r,o)+";")}else if(Array.isArray(i)&&typeof i[0]=="string"&&(s==null||s[i[0]]===void 0))for(var d=0;d<i.length;d++)vw(i[d])&&(l+=nf(r)+":"+bw(r,i[d])+";");else{var u=tm(t,s,i);switch(r){case"animation":case"animationName":{l+=nf(r)+":"+u+";";break}default:l+=r+"{"+u+"}"}}}return l}var jw=/label:\s*([^\s;{]+)\s*(;|$)/g,Hn;function bm(t,s,a){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var l=!0,n="";Hn=void 0;var r=t[0];if(r==null||r.raw===void 0)l=!1,n+=tm(a,s,r);else{var i=r;n+=i[0]}for(var o=1;o<t.length;o++)if(n+=tm(a,s,t[o]),l){var d=r;n+=d[o]}jw.lastIndex=0;for(var u="",x;(x=jw.exec(n))!==null;)u+="-"+x[1];var p=iT(n)+u;return{name:p,styles:n,next:Hn}}var mT=function(s){return s()},$C=hp.useInsertionEffect?hp.useInsertionEffect:!1,IC=$C||mT,yw=$C||c.useLayoutEffect,LC=c.createContext(typeof HTMLElement<"u"?EC({key:"css"}):null),xT=LC.Provider,Vj=function(s){return c.forwardRef(function(a,l){var n=c.useContext(LC);return s(a,n,l)})},hc=c.createContext({}),Bj={}.hasOwnProperty,Hv="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",pT=function(s,a){var l={};for(var n in a)Bj.call(a,n)&&(l[n]=a[n]);return l[Hv]=s,l},hT=function(s){var a=s.cache,l=s.serialized,n=s.isStringTag;return Fj(a,l,n),IC(function(){return _j(a,l,n)}),null},fT=Vj(function(t,s,a){var l=t.css;typeof l=="string"&&s.registered[l]!==void 0&&(l=s.registered[l]);var n=t[Hv],r=[l],i="";typeof t.className=="string"?i=DC(s.registered,r,t.className):t.className!=null&&(i=t.className+" ");var o=bm(r,void 0,c.useContext(hc));i+=s.key+"-"+o.name;var d={};for(var u in t)Bj.call(t,u)&&u!=="css"&&u!==Hv&&(d[u]=t[u]);return d.className=i,a&&(d.ref=a),c.createElement(c.Fragment,null,c.createElement(hT,{cache:s,serialized:o,isStringTag:typeof n=="string"}),c.createElement(n,d))}),gT=fT,rf={exports:{}},Nw;function FC(){return Nw||(Nw=1,function(t){function s(){return t.exports=s=Object.assign?Object.assign.bind():function(a){for(var l=1;l<arguments.length;l++){var n=arguments[l];for(var r in n)({}).hasOwnProperty.call(n,r)&&(a[r]=n[r])}return a},t.exports.__esModule=!0,t.exports.default=t.exports,s.apply(null,arguments)}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(rf)),rf.exports}FC();var ww=function(s,a){var l=arguments;if(a==null||!Bj.call(a,"css"))return c.createElement.apply(void 0,l);var n=l.length,r=new Array(n);r[0]=gT,r[1]=pT(s,a);for(var i=2;i<n;i++)r[i]=l[i];return c.createElement.apply(null,r)};(function(t){var s;s||(s=t.JSX||(t.JSX={}))})(ww||(ww={}));var vT=Vj(function(t,s){var a=t.styles,l=bm([a],void 0,c.useContext(hc)),n=c.useRef();return yw(function(){var r=s.key+"-global",i=new s.sheet.constructor({key:r,nonce:s.sheet.nonce,container:s.sheet.container,speedy:s.sheet.isSpeedy}),o=!1,d=document.querySelector('style[data-emotion="'+r+" "+l.name+'"]');return s.sheet.tags.length&&(i.before=s.sheet.tags[0]),d!==null&&(o=!0,d.setAttribute("data-emotion",r),i.hydrate([d])),n.current=[i,o],function(){i.flush()}},[s]),yw(function(){var r=n.current,i=r[0],o=r[1];if(o){r[1]=!1;return}if(l.next!==void 0&&_j(s,l.next,!0),i.tags.length){var d=i.tags[i.tags.length-1].nextElementSibling;i.before=d,i.flush()}s.insert("",l,i,!1)},[s,l.name]),null});function _C(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];return bm(s)}function Qh(){var t=_C.apply(void 0,arguments),s="animation-"+t.name;return{name:s,styles:"@keyframes "+s+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var bT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,jT=SC(function(t){return bT.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),yT=jT,NT=function(s){return s!=="theme"},kw=function(s){return typeof s=="string"&&s.charCodeAt(0)>96?yT:NT},Cw=function(s,a,l){var n;if(a){var r=a.shouldForwardProp;n=s.__emotion_forwardProp&&r?function(i){return s.__emotion_forwardProp(i)&&r(i)}:r}return typeof n!="function"&&l&&(n=s.__emotion_forwardProp),n},wT=function(s){var a=s.cache,l=s.serialized,n=s.isStringTag;return Fj(a,l,n),IC(function(){return _j(a,l,n)}),null},kT=function t(s,a){var l=s.__emotion_real===s,n=l&&s.__emotion_base||s,r,i;a!==void 0&&(r=a.label,i=a.target);var o=Cw(s,a,l),d=o||kw(n),u=!d("as");return function(){var x=arguments,p=l&&s.__emotion_styles!==void 0?s.__emotion_styles.slice(0):[];if(r!==void 0&&p.push("label:"+r+";"),x[0]==null||x[0].raw===void 0)p.push.apply(p,x);else{var h=x[0];p.push(h[0]);for(var j=x.length,y=1;y<j;y++)p.push(x[y],h[y])}var f=Vj(function(I,A,b){var C=u&&I.as||n,S="",z=[],$=I;if(I.theme==null){$={};for(var D in I)$[D]=I[D];$.theme=c.useContext(hc)}typeof I.className=="string"?S=DC(A.registered,z,I.className):I.className!=null&&(S=I.className+" ");var W=bm(p.concat(z),A.registered,$);S+=A.key+"-"+W.name,i!==void 0&&(S+=" "+i);var he=u&&o===void 0?kw(C):d,V={};for(var xe in I)u&&xe==="as"||he(xe)&&(V[xe]=I[xe]);return V.className=S,b&&(V.ref=b),c.createElement(c.Fragment,null,c.createElement(wT,{cache:A,serialized:W,isStringTag:typeof C=="string"}),c.createElement(C,V))});return f.displayName=r!==void 0?r:"Styled("+(typeof n=="string"?n:n.displayName||n.name||"Component")+")",f.defaultProps=s.defaultProps,f.__emotion_real=f,f.__emotion_base=n,f.__emotion_styles=p,f.__emotion_forwardProp=o,Object.defineProperty(f,"toString",{value:function(){return"."+i}}),f.withComponent=function(I,A){var b=t(I,ze({},a,A,{shouldForwardProp:Cw(f,A,!0)}));return b.apply(void 0,p)},f}},CT=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Kv=kT.bind(null);CT.forEach(function(t){Kv[t]=Kv(t)});function ST(t,s){const a=EC({key:"css",prepend:t});if(s){const l=a.insert;a.insert=(...n)=>(n[1].styles.match(/^@layer\s+[^{]*$/)||(n[1].styles=`@layer mui {${n[1].styles}}`),l(...n))}return a}const of=new Map;function VC(t){const{injectFirst:s,enableCssLayer:a,children:l}=t,n=c.useMemo(()=>{const r=`${s}-${a}`;if(typeof document=="object"&&of.has(r))return of.get(r);const i=ST(s,a);return of.set(r,i),i},[s,a]);return s||a?e.jsx(xT,{value:n,children:l}):l}function AT(t){return t==null||Object.keys(t).length===0}function BC(t){const{styles:s,defaultTheme:a={}}=t,l=typeof s=="function"?n=>s(AT(n)?a:n):s;return e.jsx(vT,{styles:l})}function ET(t,s){return Kv(t,s)}const PT=(t,s)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=s(t.__emotion_styles))},Sw=[];function UC(t){return Sw[0]=t,bm(Sw)}const MT=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:BC,StyledEngineProvider:VC,ThemeContext:hc,css:_C,default:ET,internal_processStyles:PT,internal_serializeStyles:UC,keyframes:Qh},Symbol.toStringTag,{value:"Module"}));function ui(t){if(typeof t!="object"||t===null)return!1;const s=Object.getPrototypeOf(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function qC(t){if(c.isValidElement(t)||!ui(t))return t;const s={};return Object.keys(t).forEach(a=>{s[a]=qC(t[a])}),s}function sr(t,s,a={clone:!0}){const l=a.clone?ze({},t):t;return ui(t)&&ui(s)&&Object.keys(s).forEach(n=>{c.isValidElement(s[n])?l[n]=s[n]:ui(s[n])&&Object.prototype.hasOwnProperty.call(t,n)&&ui(t[n])?l[n]=sr(t[n],s[n],a):a.clone?l[n]=ui(s[n])?qC(s[n]):s[n]:l[n]=s[n]}),l}const TT=Object.freeze(Object.defineProperty({__proto__:null,default:sr,isPlainObject:ui},Symbol.toStringTag,{value:"Module"})),RT=["values","unit","step"],DT=t=>{const s=Object.keys(t).map(a=>({key:a,val:t[a]}))||[];return s.sort((a,l)=>a.val-l.val),s.reduce((a,l)=>ze({},a,{[l.key]:l.val}),{})};function zC(t){const{values:s={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:l=5}=t,n=_s(t,RT),r=DT(s),i=Object.keys(r);function o(h){return`@media (min-width:${typeof s[h]=="number"?s[h]:h}${a})`}function d(h){return`@media (max-width:${(typeof s[h]=="number"?s[h]:h)-l/100}${a})`}function u(h,j){const y=i.indexOf(j);return`@media (min-width:${typeof s[h]=="number"?s[h]:h}${a}) and (max-width:${(y!==-1&&typeof s[i[y]]=="number"?s[i[y]]:j)-l/100}${a})`}function x(h){return i.indexOf(h)+1<i.length?u(h,i[i.indexOf(h)+1]):o(h)}function p(h){const j=i.indexOf(h);return j===0?o(i[1]):j===i.length-1?d(i[j]):u(h,i[i.indexOf(h)+1]).replace("@media","@media not all and")}return ze({keys:i,values:r,up:o,down:d,between:u,only:x,not:p,unit:a},n)}const OT={borderRadius:4};function Nu(t,s){return s?sr(t,s,{clone:!1}):t}const Uj={xs:0,sm:600,md:900,lg:1200,xl:1536},Aw={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${Uj[t]}px)`};function Lr(t,s,a){const l=t.theme||{};if(Array.isArray(s)){const r=l.breakpoints||Aw;return s.reduce((i,o,d)=>(i[r.up(r.keys[d])]=a(s[d]),i),{})}if(typeof s=="object"){const r=l.breakpoints||Aw;return Object.keys(s).reduce((i,o)=>{if(Object.keys(r.values||Uj).indexOf(o)!==-1){const d=r.up(o);i[d]=a(s[o],o)}else{const d=o;i[d]=s[d]}return i},{})}return a(s)}function $T(t={}){var s;return((s=t.keys)==null?void 0:s.reduce((l,n)=>{const r=t.up(n);return l[r]={},l},{}))||{}}function Ew(t,s){return t.reduce((a,l)=>{const n=a[l];return(!n||Object.keys(n).length===0)&&delete a[l],a},s)}function zt(t){if(typeof t!="string")throw new Error(ac(7));return t.charAt(0).toUpperCase()+t.slice(1)}const IT=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"}));function Jh(t,s,a=!0){if(!s||typeof s!="string")return null;if(t&&t.vars&&a){const l=`vars.${s}`.split(".").reduce((n,r)=>n&&n[r]?n[r]:null,t);if(l!=null)return l}return s.split(".").reduce((l,n)=>l&&l[n]!=null?l[n]:null,t)}function qp(t,s,a,l=a){let n;return typeof t=="function"?n=t(a):Array.isArray(t)?n=t[a]||l:n=Jh(t,a)||l,s&&(n=s(n,l,t)),n}function Xs(t){const{prop:s,cssProperty:a=t.prop,themeKey:l,transform:n}=t,r=i=>{if(i[s]==null)return null;const o=i[s],d=i.theme,u=Jh(d,l)||{};return Lr(i,o,p=>{let h=qp(u,n,p);return p===h&&typeof p=="string"&&(h=qp(u,n,`${s}${p==="default"?"":zt(p)}`,p)),a===!1?h:{[a]:h}})};return r.propTypes={},r.filterProps=[s],r}function LT(t){const s={};return a=>(s[a]===void 0&&(s[a]=t(a)),s[a])}const FT={m:"margin",p:"padding"},_T={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Pw={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},VT=LT(t=>{if(t.length>2)if(Pw[t])t=Pw[t];else return[t];const[s,a]=t.split(""),l=FT[s],n=_T[a]||"";return Array.isArray(n)?n.map(r=>l+r):[l+n]}),qj=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],zj=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...qj,...zj];function jm(t,s,a,l){var n;const r=(n=Jh(t,s,!1))!=null?n:a;return typeof r=="number"?i=>typeof i=="string"?i:r*i:Array.isArray(r)?i=>typeof i=="string"?i:r[i]:typeof r=="function"?r:()=>{}}function GC(t){return jm(t,"spacing",8)}function ym(t,s){if(typeof s=="string"||s==null)return s;const a=Math.abs(s),l=t(a);return s>=0?l:typeof l=="number"?-l:`-${l}`}function BT(t,s){return a=>t.reduce((l,n)=>(l[n]=ym(s,a),l),{})}function UT(t,s,a,l){if(s.indexOf(a)===-1)return null;const n=VT(a),r=BT(n,l),i=t[a];return Lr(t,i,r)}function WC(t,s){const a=GC(t.theme);return Object.keys(t).map(l=>UT(t,s,l,a)).reduce(Nu,{})}function Ds(t){return WC(t,qj)}Ds.propTypes={};Ds.filterProps=qj;function Os(t){return WC(t,zj)}Os.propTypes={};Os.filterProps=zj;function qT(t=8){if(t.mui)return t;const s=GC({spacing:t}),a=(...l)=>(l.length===0?[1]:l).map(r=>{const i=s(r);return typeof i=="number"?`${i}px`:i}).join(" ");return a.mui=!0,a}function Zh(...t){const s=t.reduce((l,n)=>(n.filterProps.forEach(r=>{l[r]=n}),l),{}),a=l=>Object.keys(l).reduce((n,r)=>s[r]?Nu(n,s[r](l)):n,{});return a.propTypes={},a.filterProps=t.reduce((l,n)=>l.concat(n.filterProps),[]),a}function Zl(t){return typeof t!="number"?t:`${t}px solid`}function rn(t,s){return Xs({prop:t,themeKey:"borders",transform:s})}const zT=rn("border",Zl),GT=rn("borderTop",Zl),WT=rn("borderRight",Zl),HT=rn("borderBottom",Zl),KT=rn("borderLeft",Zl),XT=rn("borderColor"),YT=rn("borderTopColor"),QT=rn("borderRightColor"),JT=rn("borderBottomColor"),ZT=rn("borderLeftColor"),e9=rn("outline",Zl),t9=rn("outlineColor"),e0=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const s=jm(t.theme,"shape.borderRadius",4),a=l=>({borderRadius:ym(s,l)});return Lr(t,t.borderRadius,a)}return null};e0.propTypes={};e0.filterProps=["borderRadius"];Zh(zT,GT,WT,HT,KT,XT,YT,QT,JT,ZT,e0,e9,t9);const t0=t=>{if(t.gap!==void 0&&t.gap!==null){const s=jm(t.theme,"spacing",8),a=l=>({gap:ym(s,l)});return Lr(t,t.gap,a)}return null};t0.propTypes={};t0.filterProps=["gap"];const s0=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const s=jm(t.theme,"spacing",8),a=l=>({columnGap:ym(s,l)});return Lr(t,t.columnGap,a)}return null};s0.propTypes={};s0.filterProps=["columnGap"];const a0=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const s=jm(t.theme,"spacing",8),a=l=>({rowGap:ym(s,l)});return Lr(t,t.rowGap,a)}return null};a0.propTypes={};a0.filterProps=["rowGap"];const s9=Xs({prop:"gridColumn"}),a9=Xs({prop:"gridRow"}),l9=Xs({prop:"gridAutoFlow"}),n9=Xs({prop:"gridAutoColumns"}),r9=Xs({prop:"gridAutoRows"}),i9=Xs({prop:"gridTemplateColumns"}),o9=Xs({prop:"gridTemplateRows"}),d9=Xs({prop:"gridTemplateAreas"}),c9=Xs({prop:"gridArea"});Zh(t0,s0,a0,s9,a9,l9,n9,r9,i9,o9,d9,c9);function Wd(t,s){return s==="grey"?s:t}const u9=Xs({prop:"color",themeKey:"palette",transform:Wd}),m9=Xs({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Wd}),x9=Xs({prop:"backgroundColor",themeKey:"palette",transform:Wd});Zh(u9,m9,x9);function El(t){return t<=1&&t!==0?`${t*100}%`:t}const p9=Xs({prop:"width",transform:El}),Gj=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const s=a=>{var l,n;const r=((l=t.theme)==null||(l=l.breakpoints)==null||(l=l.values)==null?void 0:l[a])||Uj[a];return r?((n=t.theme)==null||(n=n.breakpoints)==null?void 0:n.unit)!=="px"?{maxWidth:`${r}${t.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:El(a)}};return Lr(t,t.maxWidth,s)}return null};Gj.filterProps=["maxWidth"];const h9=Xs({prop:"minWidth",transform:El}),f9=Xs({prop:"height",transform:El}),g9=Xs({prop:"maxHeight",transform:El}),v9=Xs({prop:"minHeight",transform:El});Xs({prop:"size",cssProperty:"width",transform:El});Xs({prop:"size",cssProperty:"height",transform:El});const b9=Xs({prop:"boxSizing"});Zh(p9,Gj,h9,f9,g9,v9,b9);const Nm={border:{themeKey:"borders",transform:Zl},borderTop:{themeKey:"borders",transform:Zl},borderRight:{themeKey:"borders",transform:Zl},borderBottom:{themeKey:"borders",transform:Zl},borderLeft:{themeKey:"borders",transform:Zl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Zl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:e0},color:{themeKey:"palette",transform:Wd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Wd},backgroundColor:{themeKey:"palette",transform:Wd},p:{style:Os},pt:{style:Os},pr:{style:Os},pb:{style:Os},pl:{style:Os},px:{style:Os},py:{style:Os},padding:{style:Os},paddingTop:{style:Os},paddingRight:{style:Os},paddingBottom:{style:Os},paddingLeft:{style:Os},paddingX:{style:Os},paddingY:{style:Os},paddingInline:{style:Os},paddingInlineStart:{style:Os},paddingInlineEnd:{style:Os},paddingBlock:{style:Os},paddingBlockStart:{style:Os},paddingBlockEnd:{style:Os},m:{style:Ds},mt:{style:Ds},mr:{style:Ds},mb:{style:Ds},ml:{style:Ds},mx:{style:Ds},my:{style:Ds},margin:{style:Ds},marginTop:{style:Ds},marginRight:{style:Ds},marginBottom:{style:Ds},marginLeft:{style:Ds},marginX:{style:Ds},marginY:{style:Ds},marginInline:{style:Ds},marginInlineStart:{style:Ds},marginInlineEnd:{style:Ds},marginBlock:{style:Ds},marginBlockStart:{style:Ds},marginBlockEnd:{style:Ds},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:t0},rowGap:{style:a0},columnGap:{style:s0},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:El},maxWidth:{style:Gj},minWidth:{transform:El},height:{transform:El},maxHeight:{transform:El},minHeight:{transform:El},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function j9(...t){const s=t.reduce((l,n)=>l.concat(Object.keys(n)),[]),a=new Set(s);return t.every(l=>a.size===Object.keys(l).length)}function y9(t,s){return typeof t=="function"?t(s):t}function HC(){function t(a,l,n,r){const i={[a]:l,theme:n},o=r[a];if(!o)return{[a]:l};const{cssProperty:d=a,themeKey:u,transform:x,style:p}=o;if(l==null)return null;if(u==="typography"&&l==="inherit")return{[a]:l};const h=Jh(n,u)||{};return p?p(i):Lr(i,l,y=>{let f=qp(h,x,y);return y===f&&typeof y=="string"&&(f=qp(h,x,`${a}${y==="default"?"":zt(y)}`,y)),d===!1?f:{[d]:f}})}function s(a){var l;const{sx:n,theme:r={},nested:i}=a||{};if(!n)return null;const o=(l=r.unstable_sxConfig)!=null?l:Nm;function d(u){let x=u;if(typeof u=="function")x=u(r);else if(typeof u!="object")return u;if(!x)return null;const p=$T(r.breakpoints),h=Object.keys(p);let j=p;return Object.keys(x).forEach(y=>{const f=y9(x[y],r);if(f!=null)if(typeof f=="object")if(o[y])j=Nu(j,t(y,f,r,o));else{const I=Lr({theme:r},f,A=>({[y]:A}));j9(I,f)?j[y]=s({sx:f,theme:r,nested:!0}):j=Nu(j,I)}else j=Nu(j,t(y,f,r,o))}),!i&&r.modularCssLayers?{"@layer sx":Ew(h,j)}:Ew(h,j)}return Array.isArray(n)?n.map(d):d(n)}return s}const l0=HC();l0.filterProps=["sx"];function KC(t,s){const a=this;return a.vars&&typeof a.getColorSchemeSelector=="function"?{[a.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:s}:a.palette.mode===t?s:{}}const N9=["breakpoints","palette","spacing","shape"];function Wj(t={},...s){const{breakpoints:a={},palette:l={},spacing:n,shape:r={}}=t,i=_s(t,N9),o=zC(a),d=qT(n);let u=sr({breakpoints:o,direction:"ltr",components:{},palette:ze({mode:"light"},l),spacing:d,shape:ze({},OT,r)},i);return u.applyStyles=KC,u=s.reduce((x,p)=>sr(x,p),u),u.unstable_sxConfig=ze({},Nm,i==null?void 0:i.unstable_sxConfig),u.unstable_sx=function(p){return l0({sx:p,theme:this})},u}const w9=Object.freeze(Object.defineProperty({__proto__:null,default:Wj,private_createBreakpoints:zC,unstable_applyStyles:KC},Symbol.toStringTag,{value:"Module"}));function k9(t){return Object.keys(t).length===0}function Hj(t=null){const s=c.useContext(hc);return!s||k9(s)?t:s}const C9=Wj();function S9(t=C9){return Hj(t)}function df(t){const s=UC(t);return t!==s&&s.styles?(s.styles.match(/^@layer\s+[^{]*$/)||(s.styles=`@layer global{${s.styles}}`),s):t}function XC({styles:t,themeId:s,defaultTheme:a={}}){const l=S9(a),n=s&&l[s]||l;let r=typeof t=="function"?t(n):t;return n.modularCssLayers&&(Array.isArray(r)?r=r.map(i=>df(typeof i=="function"?i(n):i)):r=df(r)),e.jsx(BC,{styles:r})}const A9=["sx"],E9=t=>{var s,a;const l={systemProps:{},otherProps:{}},n=(s=t==null||(a=t.theme)==null?void 0:a.unstable_sxConfig)!=null?s:Nm;return Object.keys(t).forEach(r=>{n[r]?l.systemProps[r]=t[r]:l.otherProps[r]=t[r]}),l};function YC(t){const{sx:s}=t,a=_s(t,A9),{systemProps:l,otherProps:n}=E9(a);let r;return Array.isArray(s)?r=[l,...s]:typeof s=="function"?r=(...i)=>{const o=s(...i);return ui(o)?ze({},l,o):l}:r=ze({},l,s),ze({},n,{sx:r})}const P9=Object.freeze(Object.defineProperty({__proto__:null,default:l0,extendSxProp:YC,unstable_createStyleFunctionSx:HC,unstable_defaultSxConfig:Nm},Symbol.toStringTag,{value:"Module"})),Mw=t=>t,M9=()=>{let t=Mw;return{configure(s){t=s},generate(s){return t(s)},reset(){t=Mw}}},T9=M9();function QC(t){var s,a,l="";if(typeof t=="string"||typeof t=="number")l+=t;else if(typeof t=="object")if(Array.isArray(t)){var n=t.length;for(s=0;s<n;s++)t[s]&&(a=QC(t[s]))&&(l&&(l+=" "),l+=a)}else for(a in t)t[a]&&(l&&(l+=" "),l+=a);return l}function sa(){for(var t,s,a=0,l="",n=arguments.length;a<n;a++)(t=arguments[a])&&(s=QC(t))&&(l&&(l+=" "),l+=s);return l}const R9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function zr(t,s,a="Mui"){const l=R9[s];return l?`${a}-${l}`:`${T9.generate(t)}-${s}`}function Gr(t,s,a="Mui"){const l={};return s.forEach(n=>{l[n]=zr(t,n,a)}),l}var JC={exports:{}},Zt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kj=Symbol.for("react.transitional.element"),Xj=Symbol.for("react.portal"),n0=Symbol.for("react.fragment"),r0=Symbol.for("react.strict_mode"),i0=Symbol.for("react.profiler"),o0=Symbol.for("react.consumer"),d0=Symbol.for("react.context"),c0=Symbol.for("react.forward_ref"),u0=Symbol.for("react.suspense"),m0=Symbol.for("react.suspense_list"),x0=Symbol.for("react.memo"),p0=Symbol.for("react.lazy"),D9=Symbol.for("react.view_transition"),O9=Symbol.for("react.client.reference");function on(t){if(typeof t=="object"&&t!==null){var s=t.$$typeof;switch(s){case Kj:switch(t=t.type,t){case n0:case i0:case r0:case u0:case m0:case D9:return t;default:switch(t=t&&t.$$typeof,t){case d0:case c0:case p0:case x0:return t;case o0:return t;default:return s}}case Xj:return s}}}Zt.ContextConsumer=o0;Zt.ContextProvider=d0;Zt.Element=Kj;Zt.ForwardRef=c0;Zt.Fragment=n0;Zt.Lazy=p0;Zt.Memo=x0;Zt.Portal=Xj;Zt.Profiler=i0;Zt.StrictMode=r0;Zt.Suspense=u0;Zt.SuspenseList=m0;Zt.isContextConsumer=function(t){return on(t)===o0};Zt.isContextProvider=function(t){return on(t)===d0};Zt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kj};Zt.isForwardRef=function(t){return on(t)===c0};Zt.isFragment=function(t){return on(t)===n0};Zt.isLazy=function(t){return on(t)===p0};Zt.isMemo=function(t){return on(t)===x0};Zt.isPortal=function(t){return on(t)===Xj};Zt.isProfiler=function(t){return on(t)===i0};Zt.isStrictMode=function(t){return on(t)===r0};Zt.isSuspense=function(t){return on(t)===u0};Zt.isSuspenseList=function(t){return on(t)===m0};Zt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===n0||t===i0||t===r0||t===u0||t===m0||typeof t=="object"&&t!==null&&(t.$$typeof===p0||t.$$typeof===x0||t.$$typeof===d0||t.$$typeof===o0||t.$$typeof===c0||t.$$typeof===O9||t.getModuleId!==void 0)};Zt.typeOf=on;JC.exports=Zt;var Tw=JC.exports;const $9=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function ZC(t){const s=`${t}`.match($9);return s&&s[1]||""}function e3(t,s=""){return t.displayName||t.name||ZC(t)||s}function Rw(t,s,a){const l=e3(s);return t.displayName||(l!==""?`${a}(${l})`:a)}function I9(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return e3(t,"Component");if(typeof t=="object")switch(t.$$typeof){case Tw.ForwardRef:return Rw(t,t.render,"ForwardRef");case Tw.Memo:return Rw(t,t.type,"memo");default:return}}}const L9=Object.freeze(Object.defineProperty({__proto__:null,default:I9,getFunctionName:ZC},Symbol.toStringTag,{value:"Module"}));function zp(t,s){const a=ze({},s);return Object.keys(t).forEach(l=>{if(l.toString().match(/^(components|slots)$/))a[l]=ze({},t[l],a[l]);else if(l.toString().match(/^(componentsProps|slotProps)$/)){const n=t[l]||{},r=s[l];a[l]={},!r||!Object.keys(r)?a[l]=n:!n||!Object.keys(n)?a[l]=r:(a[l]=ze({},r),Object.keys(n).forEach(i=>{a[l][i]=zp(n[i],r[i])}))}else a[l]===void 0&&(a[l]=t[l])}),a}const t3=typeof window<"u"?c.useLayoutEffect:c.useEffect;function F9(t,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(s,Math.min(t,a))}const _9=Object.freeze(Object.defineProperty({__proto__:null,default:F9},Symbol.toStringTag,{value:"Module"}));function V9(t,s){typeof t=="function"?t(s):t&&(t.current=s)}let Dw=0;function B9(t){const[s,a]=c.useState(t),l=t||s;return c.useEffect(()=>{s==null&&(Dw+=1,a(`mui-${Dw}`))},[s]),l}const Ow=hp.useId;function U9(t){return Ow!==void 0?Ow():B9(t)}function Qm(t){const s=c.useRef(t);return t3(()=>{s.current=t}),c.useRef((...a)=>(0,s.current)(...a)).current}function Xv(...t){return c.useMemo(()=>t.every(s=>s==null)?null:s=>{t.forEach(a=>{V9(a,s)})},t)}const $w={};function q9(t,s){const a=c.useRef($w);return a.current===$w&&(a.current=t(s)),a}const z9=[];function G9(t){c.useEffect(t,z9)}class h0{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new h0}start(s,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},s)}}function W9(){const t=q9(h0.create).current;return G9(t.disposeEffect),t}let f0=!0,Yv=!1;const H9=new h0,K9={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function X9(t){const{type:s,tagName:a}=t;return!!(a==="INPUT"&&K9[s]&&!t.readOnly||a==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Y9(t){t.metaKey||t.altKey||t.ctrlKey||(f0=!0)}function cf(){f0=!1}function Q9(){this.visibilityState==="hidden"&&Yv&&(f0=!0)}function J9(t){t.addEventListener("keydown",Y9,!0),t.addEventListener("mousedown",cf,!0),t.addEventListener("pointerdown",cf,!0),t.addEventListener("touchstart",cf,!0),t.addEventListener("visibilitychange",Q9,!0)}function Z9(t){const{target:s}=t;try{return s.matches(":focus-visible")}catch{}return f0||X9(s)}function eR(){const t=c.useCallback(n=>{n!=null&&J9(n.ownerDocument)},[]),s=c.useRef(!1);function a(){return s.current?(Yv=!0,H9.start(100,()=>{Yv=!1}),s.current=!1,!0):!1}function l(n){return Z9(n)?(s.current=!0,!0):!1}return{isFocusVisibleRef:s,onFocus:l,onBlur:a,ref:t}}function Vi(t,s,a=void 0){const l={};return Object.keys(t).forEach(n=>{l[n]=t[n].reduce((r,i)=>{if(i){const o=s(i);o!==""&&r.push(o),a&&a[i]&&r.push(a[i])}return r},[]).join(" ")}),l}function tR(t){return typeof t=="string"}function sR(t,s,a){return t===void 0||tR(t)?s:ze({},s,{ownerState:ze({},s.ownerState,a)})}function aR(t,s=[]){if(t===void 0)return{};const a={};return Object.keys(t).filter(l=>l.match(/^on[A-Z]/)&&typeof t[l]=="function"&&!s.includes(l)).forEach(l=>{a[l]=t[l]}),a}function Iw(t){if(t===void 0)return{};const s={};return Object.keys(t).filter(a=>!(a.match(/^on[A-Z]/)&&typeof t[a]=="function")).forEach(a=>{s[a]=t[a]}),s}function lR(t){const{getSlotProps:s,additionalProps:a,externalSlotProps:l,externalForwardedProps:n,className:r}=t;if(!s){const j=sa(a==null?void 0:a.className,r,n==null?void 0:n.className,l==null?void 0:l.className),y=ze({},a==null?void 0:a.style,n==null?void 0:n.style,l==null?void 0:l.style),f=ze({},a,n,l);return j.length>0&&(f.className=j),Object.keys(y).length>0&&(f.style=y),{props:f,internalRef:void 0}}const i=aR(ze({},n,l)),o=Iw(l),d=Iw(n),u=s(i),x=sa(u==null?void 0:u.className,a==null?void 0:a.className,r,n==null?void 0:n.className,l==null?void 0:l.className),p=ze({},u==null?void 0:u.style,a==null?void 0:a.style,n==null?void 0:n.style,l==null?void 0:l.style),h=ze({},u,a,d,o);return x.length>0&&(h.className=x),Object.keys(p).length>0&&(h.style=p),{props:h,internalRef:u.ref}}function nR(t,s,a){return typeof t=="function"?t(s,a):t}const s3=c.createContext(null);function a3(){return c.useContext(s3)}const rR=typeof Symbol=="function"&&Symbol.for,iR=rR?Symbol.for("mui.nested"):"__THEME_NESTED__";function oR(t,s){return typeof s=="function"?s(t):ze({},t,s)}function dR(t){const{children:s,theme:a}=t,l=a3(),n=c.useMemo(()=>{const r=l===null?a:oR(l,a);return r!=null&&(r[iR]=l!==null),r},[a,l]);return e.jsx(s3.Provider,{value:n,children:s})}const cR=["value"],uR=c.createContext();function mR(t){let{value:s}=t,a=_s(t,cR);return e.jsx(uR.Provider,ze({value:s??!0},a))}const l3=c.createContext(void 0);function xR({value:t,children:s}){return e.jsx(l3.Provider,{value:t,children:s})}function pR(t){const{theme:s,name:a,props:l}=t;if(!s||!s.components||!s.components[a])return l;const n=s.components[a];return n.defaultProps?zp(n.defaultProps,l):!n.styleOverrides&&!n.variants?zp(n,l):l}function hR({props:t,name:s}){const a=c.useContext(l3);return pR({props:t,name:s,theme:{components:a}})}function fR(t){const s=Hj(),a=U9()||"",{modularCssLayers:l}=t;let n="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!l||s!==null?n="":typeof l=="string"?n=l.replace(/mui(?!\.)/g,n):n=`@layer ${n};`,t3(()=>{const r=document.querySelector("head");if(!r)return;const i=r.firstChild;if(n){var o;if(i&&(o=i.hasAttribute)!=null&&o.call(i,"data-mui-layer-order")&&i.getAttribute("data-mui-layer-order")===a)return;const u=document.createElement("style");u.setAttribute("data-mui-layer-order",a),u.textContent=n,r.prepend(u)}else{var d;(d=r.querySelector(`style[data-mui-layer-order="${a}"]`))==null||d.remove()}},[n,a]),n?e.jsx(XC,{styles:n}):null}const Lw={};function Fw(t,s,a,l=!1){return c.useMemo(()=>{const n=t&&s[t]||s;if(typeof a=="function"){const r=a(n),i=t?ze({},s,{[t]:r}):r;return l?()=>i:i}return t?ze({},s,{[t]:a}):ze({},s,a)},[t,s,a,l])}function gR(t){const{children:s,theme:a,themeId:l}=t,n=Hj(Lw),r=a3()||Lw,i=Fw(l,n,a),o=Fw(l,r,a,!0),d=i.direction==="rtl",u=fR(i);return e.jsx(dR,{theme:o,children:e.jsx(hc.Provider,{value:i,children:e.jsx(mR,{value:d,children:e.jsxs(xR,{value:i==null?void 0:i.components,children:[u,s]})})})})}function vR(t,s){return ze({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},s)}var Ys={},n3={exports:{}};(function(t){function s(a){return a&&a.__esModule?a:{default:a}}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports})(n3);var r3=n3.exports;const bR=Oi(wM),jR=Oi(_9);var i3=r3;Object.defineProperty(Ys,"__esModule",{value:!0});var gi=Ys.alpha=u3;Ys.blend=TR;Ys.colorChannel=void 0;var Qv=Ys.darken=Qj;Ys.decomposeColor=ln;Ys.emphasize=m3;var yR=Ys.getContrastRatio=SR;Ys.getLuminance=Gp;Ys.hexToRgb=o3;Ys.hslToRgb=c3;var Jv=Ys.lighten=Jj;Ys.private_safeAlpha=AR;Ys.private_safeColorChannel=void 0;Ys.private_safeDarken=ER;Ys.private_safeEmphasize=MR;Ys.private_safeLighten=PR;Ys.recomposeColor=fc;Ys.rgbToHex=CR;var _w=i3(bR),NR=i3(jR);function Yj(t,s=0,a=1){return(0,NR.default)(t,s,a)}function o3(t){t=t.slice(1);const s=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let a=t.match(s);return a&&a[0].length===1&&(a=a.map(l=>l+l)),a?`rgb${a.length===4?"a":""}(${a.map((l,n)=>n<3?parseInt(l,16):Math.round(parseInt(l,16)/255*1e3)/1e3).join(", ")})`:""}function wR(t){const s=t.toString(16);return s.length===1?`0${s}`:s}function ln(t){if(t.type)return t;if(t.charAt(0)==="#")return ln(o3(t));const s=t.indexOf("("),a=t.substring(0,s);if(["rgb","rgba","hsl","hsla","color"].indexOf(a)===-1)throw new Error((0,_w.default)(9,t));let l=t.substring(s+1,t.length-1),n;if(a==="color"){if(l=l.split(" "),n=l.shift(),l.length===4&&l[3].charAt(0)==="/"&&(l[3]=l[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n)===-1)throw new Error((0,_w.default)(10,n))}else l=l.split(",");return l=l.map(r=>parseFloat(r)),{type:a,values:l,colorSpace:n}}const d3=t=>{const s=ln(t);return s.values.slice(0,3).map((a,l)=>s.type.indexOf("hsl")!==-1&&l!==0?`${a}%`:a).join(" ")};Ys.colorChannel=d3;const kR=(t,s)=>{try{return d3(t)}catch{return t}};Ys.private_safeColorChannel=kR;function fc(t){const{type:s,colorSpace:a}=t;let{values:l}=t;return s.indexOf("rgb")!==-1?l=l.map((n,r)=>r<3?parseInt(n,10):n):s.indexOf("hsl")!==-1&&(l[1]=`${l[1]}%`,l[2]=`${l[2]}%`),s.indexOf("color")!==-1?l=`${a} ${l.join(" ")}`:l=`${l.join(", ")}`,`${s}(${l})`}function CR(t){if(t.indexOf("#")===0)return t;const{values:s}=ln(t);return`#${s.map((a,l)=>wR(l===3?Math.round(255*a):a)).join("")}`}function c3(t){t=ln(t);const{values:s}=t,a=s[0],l=s[1]/100,n=s[2]/100,r=l*Math.min(n,1-n),i=(u,x=(u+a/30)%12)=>n-r*Math.max(Math.min(x-3,9-x,1),-1);let o="rgb";const d=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return t.type==="hsla"&&(o+="a",d.push(s[3])),fc({type:o,values:d})}function Gp(t){t=ln(t);let s=t.type==="hsl"||t.type==="hsla"?ln(c3(t)).values:t.values;return s=s.map(a=>(t.type!=="color"&&(a/=255),a<=.03928?a/12.92:((a+.055)/1.055)**2.4)),Number((.2126*s[0]+.7152*s[1]+.0722*s[2]).toFixed(3))}function SR(t,s){const a=Gp(t),l=Gp(s);return(Math.max(a,l)+.05)/(Math.min(a,l)+.05)}function u3(t,s){return t=ln(t),s=Yj(s),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${s}`:t.values[3]=s,fc(t)}function AR(t,s,a){try{return u3(t,s)}catch{return t}}function Qj(t,s){if(t=ln(t),s=Yj(s),t.type.indexOf("hsl")!==-1)t.values[2]*=1-s;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)t.values[a]*=1-s;return fc(t)}function ER(t,s,a){try{return Qj(t,s)}catch{return t}}function Jj(t,s){if(t=ln(t),s=Yj(s),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*s;else if(t.type.indexOf("rgb")!==-1)for(let a=0;a<3;a+=1)t.values[a]+=(255-t.values[a])*s;else if(t.type.indexOf("color")!==-1)for(let a=0;a<3;a+=1)t.values[a]+=(1-t.values[a])*s;return fc(t)}function PR(t,s,a){try{return Jj(t,s)}catch{return t}}function m3(t,s=.15){return Gp(t)>.5?Qj(t,s):Jj(t,s)}function MR(t,s,a){try{return m3(t,s)}catch{return t}}function TR(t,s,a,l=1){const n=(d,u)=>Math.round((d**(1/l)*(1-a)+u**(1/l)*a)**l),r=ln(t),i=ln(s),o=[n(r.values[0],i.values[0]),n(r.values[1],i.values[1]),n(r.values[2],i.values[2])];return fc({type:"rgb",values:o})}const RR=["mode","contrastThreshold","tonalOffset"],Vw={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ju.white,default:Ju.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},uf={text:{primary:Ju.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ju.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Bw(t,s,a,l){const n=l.light||l,r=l.dark||l*1.5;t[s]||(t.hasOwnProperty(a)?t[s]=t[a]:s==="light"?t.light=Jv(t.main,n):s==="dark"&&(t.dark=Qv(t.main,r)))}function DR(t="light"){return t==="dark"?{main:Bo[200],light:Bo[50],dark:Bo[400]}:{main:Bo[700],light:Bo[400],dark:Bo[800]}}function OR(t="light"){return t==="dark"?{main:Vo[200],light:Vo[50],dark:Vo[400]}:{main:Vo[500],light:Vo[300],dark:Vo[700]}}function $R(t="light"){return t==="dark"?{main:_o[500],light:_o[300],dark:_o[700]}:{main:_o[700],light:_o[400],dark:_o[800]}}function IR(t="light"){return t==="dark"?{main:Uo[400],light:Uo[300],dark:Uo[700]}:{main:Uo[700],light:Uo[500],dark:Uo[900]}}function LR(t="light"){return t==="dark"?{main:qo[400],light:qo[300],dark:qo[700]}:{main:qo[800],light:qo[500],dark:qo[900]}}function FR(t="light"){return t==="dark"?{main:Ec[400],light:Ec[300],dark:Ec[700]}:{main:"#ed6c02",light:Ec[500],dark:Ec[900]}}function _R(t){const{mode:s="light",contrastThreshold:a=3,tonalOffset:l=.2}=t,n=_s(t,RR),r=t.primary||DR(s),i=t.secondary||OR(s),o=t.error||$R(s),d=t.info||IR(s),u=t.success||LR(s),x=t.warning||FR(s);function p(f){return yR(f,uf.text.primary)>=a?uf.text.primary:Vw.text.primary}const h=({color:f,name:I,mainShade:A=500,lightShade:b=300,darkShade:C=700})=>{if(f=ze({},f),!f.main&&f[A]&&(f.main=f[A]),!f.hasOwnProperty("main"))throw new Error(ac(11,I?` (${I})`:"",A));if(typeof f.main!="string")throw new Error(ac(12,I?` (${I})`:"",JSON.stringify(f.main)));return Bw(f,"light",b,l),Bw(f,"dark",C,l),f.contrastText||(f.contrastText=p(f.main)),f},j={dark:uf,light:Vw};return sr(ze({common:ze({},Ju),mode:s,primary:h({color:r,name:"primary"}),secondary:h({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:o,name:"error"}),warning:h({color:x,name:"warning"}),info:h({color:d,name:"info"}),success:h({color:u,name:"success"}),grey:NM,contrastThreshold:a,getContrastText:p,augmentColor:h,tonalOffset:l},j[s]),n)}const VR=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function BR(t){return Math.round(t*1e5)/1e5}const Uw={textTransform:"uppercase"},qw='"Roboto", "Helvetica", "Arial", sans-serif';function UR(t,s){const a=typeof s=="function"?s(t):s,{fontFamily:l=qw,fontSize:n=14,fontWeightLight:r=300,fontWeightRegular:i=400,fontWeightMedium:o=500,fontWeightBold:d=700,htmlFontSize:u=16,allVariants:x,pxToRem:p}=a,h=_s(a,VR),j=n/14,y=p||(A=>`${A/u*j}rem`),f=(A,b,C,S,z)=>ze({fontFamily:l,fontWeight:A,fontSize:y(b),lineHeight:C},l===qw?{letterSpacing:`${BR(S/b)}em`}:{},z,x),I={h1:f(r,96,1.167,-1.5),h2:f(r,60,1.2,-.5),h3:f(i,48,1.167,0),h4:f(i,34,1.235,.25),h5:f(i,24,1.334,0),h6:f(o,20,1.6,.15),subtitle1:f(i,16,1.75,.15),subtitle2:f(o,14,1.57,.1),body1:f(i,16,1.5,.15),body2:f(i,14,1.43,.15),button:f(o,14,1.75,.4,Uw),caption:f(i,12,1.66,.4),overline:f(i,12,2.66,1,Uw),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sr(ze({htmlFontSize:u,pxToRem:y,fontFamily:l,fontSize:n,fontWeightLight:r,fontWeightRegular:i,fontWeightMedium:o,fontWeightBold:d},I),h,{clone:!1})}const qR=.2,zR=.14,GR=.12;function ms(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${qR})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${zR})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${GR})`].join(",")}const WR=["none",ms(0,2,1,-1,0,1,1,0,0,1,3,0),ms(0,3,1,-2,0,2,2,0,0,1,5,0),ms(0,3,3,-2,0,3,4,0,0,1,8,0),ms(0,2,4,-1,0,4,5,0,0,1,10,0),ms(0,3,5,-1,0,5,8,0,0,1,14,0),ms(0,3,5,-1,0,6,10,0,0,1,18,0),ms(0,4,5,-2,0,7,10,1,0,2,16,1),ms(0,5,5,-3,0,8,10,1,0,3,14,2),ms(0,5,6,-3,0,9,12,1,0,3,16,2),ms(0,6,6,-3,0,10,14,1,0,4,18,3),ms(0,6,7,-4,0,11,15,1,0,4,20,3),ms(0,7,8,-4,0,12,17,2,0,5,22,4),ms(0,7,8,-4,0,13,19,2,0,5,24,4),ms(0,7,9,-4,0,14,21,2,0,5,26,4),ms(0,8,9,-5,0,15,22,2,0,6,28,5),ms(0,8,10,-5,0,16,24,2,0,6,30,5),ms(0,8,11,-5,0,17,26,2,0,6,32,5),ms(0,9,11,-5,0,18,28,2,0,7,34,6),ms(0,9,12,-6,0,19,29,2,0,7,36,6),ms(0,10,13,-6,0,20,31,3,0,8,38,7),ms(0,10,13,-6,0,21,33,3,0,8,40,7),ms(0,10,14,-6,0,22,35,3,0,8,42,7),ms(0,11,14,-7,0,23,36,3,0,9,44,8),ms(0,11,15,-7,0,24,38,3,0,9,46,8)],HR=["duration","easing","delay"],KR={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},XR={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function zw(t){return`${Math.round(t)}ms`}function YR(t){if(!t)return 0;const s=t/36;return Math.round((4+15*s**.25+s/5)*10)}function QR(t){const s=ze({},KR,t.easing),a=ze({},XR,t.duration);return ze({getAutoHeightDuration:YR,create:(n=["all"],r={})=>{const{duration:i=a.standard,easing:o=s.easeInOut,delay:d=0}=r;return _s(r,HR),(Array.isArray(n)?n:[n]).map(u=>`${u} ${typeof i=="string"?i:zw(i)} ${o} ${typeof d=="string"?d:zw(d)}`).join(",")}},t,{easing:s,duration:a})}const JR={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},ZR=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function x3(t={},...s){const{mixins:a={},palette:l={},transitions:n={},typography:r={}}=t,i=_s(t,ZR);if(t.vars&&t.generateCssVars===void 0)throw new Error(ac(18));const o=_R(l),d=Wj(t);let u=sr(d,{mixins:vR(d.breakpoints,a),palette:o,shadows:WR.slice(),typography:UR(o,r),transitions:QR(n),zIndex:ze({},JR)});return u=sr(u,i),u=s.reduce((x,p)=>sr(x,p),u),u.unstable_sxConfig=ze({},Nm,i==null?void 0:i.unstable_sxConfig),u.unstable_sx=function(p){return l0({sx:p,theme:this})},u}function Gw(t){return String(parseFloat(t)).length===String(t).length}function eD(t){return String(t).match(/[\d.\-+]*\s*(.*)/)[1]||""}function qi(t){return parseFloat(t)}function tD(t){return(s,a)=>{const l=eD(s);if(l===a)return s;let n=qi(s);l!=="px"&&(l==="em"||l==="rem")&&(n=qi(s)*qi(t));let r=n;if(a!=="px")if(a==="em")r=n/qi(t);else if(a==="rem")r=n/qi(t);else return s;return parseFloat(r.toFixed(5))+a}}function sD({size:t,grid:s}){const a=t-t%s,l=a+s;return t-a<l-t?a:l}function aD({lineHeight:t,pixels:s,htmlFontSize:a}){return s/(t*a)}function lD({cssProperty:t,min:s,max:a,unit:l="rem",breakpoints:n=[600,900,1200],transform:r=null}){const i={[t]:`${s}${l}`},o=(a-s)/n[n.length-1];return n.forEach(d=>{let u=s+o*d;r!==null&&(u=r(u)),i[`@media (min-width:${d}px)`]={[t]:`${Math.round(u*1e4)/1e4}${l}`}}),i}function nD(t,s={}){const{breakpoints:a=["sm","md","lg"],disableAlign:l=!1,factor:n=2,variants:r=["h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","caption","button","overline"]}=s,i=ze({},t);i.typography=ze({},i.typography);const o=i.typography,d=tD(o.htmlFontSize),u=a.map(x=>i.breakpoints.values[x]);return r.forEach(x=>{const p=o[x];if(!p)return;const h=parseFloat(d(p.fontSize,"rem"));if(h<=1)return;const j=h,y=1+(j-1)/n;let{lineHeight:f}=p;if(!Gw(f)&&!l)throw new Error(ac(6));Gw(f)||(f=parseFloat(d(f,"rem"))/parseFloat(h));let I=null;l||(I=A=>sD({size:A,grid:aD({pixels:4,lineHeight:f,htmlFontSize:o.htmlFontSize})})),o[x]=ze({},p,lD({cssProperty:"fontSize",min:y,max:j,unit:"rem",breakpoints:u,transform:I}))}),i}const p3=x3();var wm={},mf={exports:{}},Ww;function rD(){return Ww||(Ww=1,function(t){function s(a,l){if(a==null)return{};var n={};for(var r in a)if({}.hasOwnProperty.call(a,r)){if(l.indexOf(r)!==-1)continue;n[r]=a[r]}return n}t.exports=s,t.exports.__esModule=!0,t.exports.default=t.exports}(mf)),mf.exports}const iD=Oi(MT),oD=Oi(TT),dD=Oi(IT),cD=Oi(L9),uD=Oi(w9),mD=Oi(P9);var gc=r3;Object.defineProperty(wm,"__esModule",{value:!0});var xD=wm.default=SD;wm.shouldForwardProp=lp;wm.systemDefaultTheme=void 0;var Xl=gc(FC()),Zv=gc(rD()),Wp=jD(iD),pD=oD;gc(dD);gc(cD);var hD=gc(uD),fD=gc(mD);const gD=["ownerState"],vD=["variants"],bD=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function h3(t){if(typeof WeakMap!="function")return null;var s=new WeakMap,a=new WeakMap;return(h3=function(l){return l?a:s})(t)}function jD(t,s){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var a=h3(s);if(a&&a.has(t))return a.get(t);var l={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)){var i=n?Object.getOwnPropertyDescriptor(t,r):null;i&&(i.get||i.set)?Object.defineProperty(l,r,i):l[r]=t[r]}return l.default=t,a&&a.set(t,l),l}function yD(t){return Object.keys(t).length===0}function ND(t){return typeof t=="string"&&t.charCodeAt(0)>96}function lp(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function Hw(t,s){return s&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${s}{${String(t.styles)}}`),t}const wD=wm.systemDefaultTheme=(0,hD.default)(),kD=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Jm({defaultTheme:t,theme:s,themeId:a}){return yD(s)?t:s[a]||s}function CD(t){return t?(s,a)=>a[t]:null}function np(t,s,a){let{ownerState:l}=s,n=(0,Zv.default)(s,gD);const r=typeof t=="function"?t((0,Xl.default)({ownerState:l},n)):t;if(Array.isArray(r))return r.flatMap(i=>np(i,(0,Xl.default)({ownerState:l},n),a));if(r&&typeof r=="object"&&Array.isArray(r.variants)){const{variants:i=[]}=r;let d=(0,Zv.default)(r,vD);return i.forEach(u=>{let x=!0;if(typeof u.props=="function"?x=u.props((0,Xl.default)({ownerState:l},n,l)):Object.keys(u.props).forEach(p=>{(l==null?void 0:l[p])!==u.props[p]&&n[p]!==u.props[p]&&(x=!1)}),x){Array.isArray(d)||(d=[d]);const p=typeof u.style=="function"?u.style((0,Xl.default)({ownerState:l},n,l)):u.style;d.push(a?Hw((0,Wp.internal_serializeStyles)(p),a):p)}}),d}return a?Hw((0,Wp.internal_serializeStyles)(r),a):r}function SD(t={}){const{themeId:s,defaultTheme:a=wD,rootShouldForwardProp:l=lp,slotShouldForwardProp:n=lp}=t,r=i=>(0,fD.default)((0,Xl.default)({},i,{theme:Jm((0,Xl.default)({},i,{defaultTheme:a,themeId:s}))}));return r.__mui_systemSx=!0,(i,o={})=>{(0,Wp.internal_processStyles)(i,$=>$.filter(D=>!(D!=null&&D.__mui_systemSx)));const{name:d,slot:u,skipVariantsResolver:x,skipSx:p,overridesResolver:h=CD(kD(u))}=o,j=(0,Zv.default)(o,bD),y=d&&d.startsWith("Mui")||u?"components":"custom",f=x!==void 0?x:u&&u!=="Root"&&u!=="root"||!1,I=p||!1;let A,b=lp;u==="Root"||u==="root"?b=l:u?b=n:ND(i)&&(b=void 0);const C=(0,Wp.default)(i,(0,Xl.default)({shouldForwardProp:b,label:A},j)),S=$=>typeof $=="function"&&$.__emotion_real!==$||(0,pD.isPlainObject)($)?D=>{const W=Jm({theme:D.theme,defaultTheme:a,themeId:s});return np($,(0,Xl.default)({},D,{theme:W}),W.modularCssLayers?y:void 0)}:$,z=($,...D)=>{let W=S($);const he=D?D.map(S):[];d&&h&&he.push(pe=>{const be=Jm((0,Xl.default)({},pe,{defaultTheme:a,themeId:s}));if(!be.components||!be.components[d]||!be.components[d].styleOverrides)return null;const fe=be.components[d].styleOverrides,K={};return Object.entries(fe).forEach(([re,q])=>{K[re]=np(q,(0,Xl.default)({},pe,{theme:be}),be.modularCssLayers?"theme":void 0)}),h(pe,K)}),d&&!f&&he.push(pe=>{var be;const fe=Jm((0,Xl.default)({},pe,{defaultTheme:a,themeId:s})),K=fe==null||(be=fe.components)==null||(be=be[d])==null?void 0:be.variants;return np({variants:K},(0,Xl.default)({},pe,{theme:fe}),fe.modularCssLayers?"theme":void 0)}),I||he.push(r);const V=he.length-D.length;if(Array.isArray($)&&V>0){const pe=new Array(V).fill("");W=[...$,...pe],W.raw=[...$.raw,...pe]}const xe=C(W,...he);return i.muiName&&(xe.muiName=i.muiName),xe};return C.withConfig&&(z.withConfig=C.withConfig),z}}function AD(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const f3=t=>AD(t)&&t!=="classes",il=xD({themeId:Bp,defaultTheme:p3,rootShouldForwardProp:f3}),ED=["theme"];function PD(t){let{theme:s}=t,a=_s(t,ED);const l=s[Bp];let n=l||s;return typeof s!="function"&&(l&&!l.vars?n=ze({},l,{vars:null}):s&&!s.vars&&(n=ze({},s,{vars:null}))),e.jsx(gR,ze({},a,{themeId:l?Bp:void 0,theme:n}))}const Kw=t=>{let s;return t<1?s=5.11916*t**2:s=4.5*Math.log(t+1)+2,(s/100).toFixed(2)};function dr(t){return hR(t)}function MD(t){return zr("MuiSvgIcon",t)}Gr("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const TD=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],RD=t=>{const{color:s,fontSize:a,classes:l}=t,n={root:["root",s!=="inherit"&&`color${zt(s)}`,`fontSize${zt(a)}`]};return Vi(n,MD,l)},DD=il("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.color!=="inherit"&&s[`color${zt(a.color)}`],s[`fontSize${zt(a.fontSize)}`]]}})(({theme:t,ownerState:s})=>{var a,l,n,r,i,o,d,u,x,p,h,j,y;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:s.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(a=t.transitions)==null||(l=a.create)==null?void 0:l.call(a,"fill",{duration:(n=t.transitions)==null||(n=n.duration)==null?void 0:n.shorter}),fontSize:{inherit:"inherit",small:((r=t.typography)==null||(i=r.pxToRem)==null?void 0:i.call(r,20))||"1.25rem",medium:((o=t.typography)==null||(d=o.pxToRem)==null?void 0:d.call(o,24))||"1.5rem",large:((u=t.typography)==null||(x=u.pxToRem)==null?void 0:x.call(u,35))||"2.1875rem"}[s.fontSize],color:(p=(h=(t.vars||t).palette)==null||(h=h[s.color])==null?void 0:h.main)!=null?p:{action:(j=(t.vars||t).palette)==null||(j=j.action)==null?void 0:j.active,disabled:(y=(t.vars||t).palette)==null||(y=y.action)==null?void 0:y.disabled,inherit:void 0}[s.color]}}),eb=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiSvgIcon"}),{children:n,className:r,color:i="inherit",component:o="svg",fontSize:d="medium",htmlColor:u,inheritViewBox:x=!1,titleAccess:p,viewBox:h="0 0 24 24"}=l,j=_s(l,TD),y=c.isValidElement(n)&&n.type==="svg",f=ze({},l,{color:i,component:o,fontSize:d,instanceFontSize:s.fontSize,inheritViewBox:x,viewBox:h,hasSvgAsChild:y}),I={};x||(I.viewBox=h);const A=RD(f);return e.jsxs(DD,ze({as:o,className:sa(A.root,r),focusable:"false",color:u,"aria-hidden":p?void 0:!0,role:p?"img":void 0,ref:a},I,j,y&&n.props,{ownerState:f,children:[y?n.props.children:n,p?e.jsx("title",{children:p}):null]}))});eb.muiName="SvgIcon";function km(t,s){function a(l,n){return e.jsx(eb,ze({"data-testid":`${s}Icon`,ref:n},l,{children:t}))}return a.muiName=eb.muiName,c.memo(c.forwardRef(a))}function tb(t,s){return tb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,l){return a.__proto__=l,a},tb(t,s)}function OD(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,tb(t,s)}const Xw=ds.createContext(null);function $D(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zj(t,s){var a=function(r){return s&&c.isValidElement(r)?s(r):r},l=Object.create(null);return t&&c.Children.map(t,function(n){return n}).forEach(function(n){l[n.key]=a(n)}),l}function ID(t,s){t=t||{},s=s||{};function a(x){return x in s?s[x]:t[x]}var l=Object.create(null),n=[];for(var r in t)r in s?n.length&&(l[r]=n,n=[]):n.push(r);var i,o={};for(var d in s){if(l[d])for(i=0;i<l[d].length;i++){var u=l[d][i];o[l[d][i]]=a(u)}o[d]=a(d)}for(i=0;i<n.length;i++)o[n[i]]=a(n[i]);return o}function po(t,s,a){return a[s]!=null?a[s]:t.props[s]}function LD(t,s){return Zj(t.children,function(a){return c.cloneElement(a,{onExited:s.bind(null,a),in:!0,appear:po(a,"appear",t),enter:po(a,"enter",t),exit:po(a,"exit",t)})})}function FD(t,s,a){var l=Zj(t.children),n=ID(s,l);return Object.keys(n).forEach(function(r){var i=n[r];if(c.isValidElement(i)){var o=r in s,d=r in l,u=s[r],x=c.isValidElement(u)&&!u.props.in;d&&(!o||x)?n[r]=c.cloneElement(i,{onExited:a.bind(null,i),in:!0,exit:po(i,"exit",t),enter:po(i,"enter",t)}):!d&&o&&!x?n[r]=c.cloneElement(i,{in:!1}):d&&o&&c.isValidElement(u)&&(n[r]=c.cloneElement(i,{onExited:a.bind(null,i),in:u.props.in,exit:po(i,"exit",t),enter:po(i,"enter",t)}))}}),n}var _D=Object.values||function(t){return Object.keys(t).map(function(s){return t[s]})},VD={component:"div",childFactory:function(s){return s}},ey=function(t){OD(s,t);function s(l,n){var r;r=t.call(this,l,n)||this;var i=r.handleExited.bind($D(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}var a=s.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(n,r){var i=r.children,o=r.handleExited,d=r.firstRender;return{children:d?LD(n,o):FD(n,i,o),firstRender:!1}},a.handleExited=function(n,r){var i=Zj(this.props.children);n.key in i||(n.props.onExited&&n.props.onExited(r),this.mounted&&this.setState(function(o){var d=ze({},o.children);return delete d[n.key],{children:d}}))},a.render=function(){var n=this.props,r=n.component,i=n.childFactory,o=_s(n,["component","childFactory"]),d=this.state.contextValue,u=_D(this.state.children).map(i);return delete o.appear,delete o.enter,delete o.exit,r===null?ds.createElement(Xw.Provider,{value:d},u):ds.createElement(Xw.Provider,{value:d},ds.createElement(r,o,u))},s}(ds.Component);ey.propTypes={};ey.defaultProps=VD;function BD(t){return zr("MuiPaper",t)}Gr("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const UD=["className","component","elevation","square","variant"],qD=t=>{const{square:s,elevation:a,variant:l,classes:n}=t,r={root:["root",l,!s&&"rounded",l==="elevation"&&`elevation${a}`]};return Vi(r,BD,n)},zD=il("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],!a.square&&s.rounded,a.variant==="elevation"&&s[`elevation${a.elevation}`]]}})(({theme:t,ownerState:s})=>{var a;return ze({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!s.square&&{borderRadius:t.shape.borderRadius},s.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},s.variant==="elevation"&&ze({boxShadow:(t.vars||t).shadows[s.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${gi("#fff",Kw(s.elevation))}, ${gi("#fff",Kw(s.elevation))})`},t.vars&&{backgroundImage:(a=t.vars.overlays)==null?void 0:a[s.elevation]}))}),GD=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiPaper"}),{className:n,component:r="div",elevation:i=1,square:o=!1,variant:d="elevation"}=l,u=_s(l,UD),x=ze({},l,{component:r,elevation:i,square:o,variant:d}),p=qD(x);return e.jsx(zD,ze({as:r,ownerState:x,className:sa(p.root,n),ref:a},u))}),WD=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],HD=["component","slots","slotProps"],KD=["component"];function Yw(t,s){const{className:a,elementType:l,ownerState:n,externalForwardedProps:r,getSlotOwnerState:i,internalForwardedProps:o}=s,d=_s(s,WD),{component:u,slots:x={[t]:void 0},slotProps:p={[t]:void 0}}=r,h=_s(r,HD),j=x[t]||l,y=nR(p[t],n),f=lR(ze({className:a},d,{externalForwardedProps:t==="root"?h:void 0,externalSlotProps:y})),{props:{component:I},internalRef:A}=f,b=_s(f.props,KD),C=Xv(A,y==null?void 0:y.ref,s.ref),S=i?i(b):{},z=ze({},n,S),$=t==="root"?I||u:I,D=sR(j,ze({},t==="root"&&!u&&!x[t]&&o,t!=="root"&&!x[t]&&o,b,$&&{as:$},{ref:C}),z);return Object.keys(S).forEach(W=>{delete D[W]}),[j,D]}function XD(t){const{className:s,classes:a,pulsate:l=!1,rippleX:n,rippleY:r,rippleSize:i,in:o,onExited:d,timeout:u}=t,[x,p]=c.useState(!1),h=sa(s,a.ripple,a.rippleVisible,l&&a.ripplePulsate),j={width:i,height:i,top:-(i/2)+r,left:-(i/2)+n},y=sa(a.child,x&&a.childLeaving,l&&a.childPulsate);return!o&&!x&&p(!0),c.useEffect(()=>{if(!o&&d!=null){const f=setTimeout(d,u);return()=>{clearTimeout(f)}}},[d,o,u]),e.jsx("span",{className:h,style:j,children:e.jsx("span",{className:y})})}const Yl=Gr("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),YD=["center","classes","className"];let g0=t=>t,Qw,Jw,Zw,e2;const sb=550,QD=80,JD=Qh(Qw||(Qw=g0`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),ZD=Qh(Jw||(Jw=g0`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),eO=Qh(Zw||(Zw=g0`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),tO=il("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),sO=il(XD,{name:"MuiTouchRipple",slot:"Ripple"})(e2||(e2=g0`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Yl.rippleVisible,JD,sb,({theme:t})=>t.transitions.easing.easeInOut,Yl.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Yl.child,Yl.childLeaving,ZD,sb,({theme:t})=>t.transitions.easing.easeInOut,Yl.childPulsate,eO,({theme:t})=>t.transitions.easing.easeInOut),aO=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiTouchRipple"}),{center:n=!1,classes:r={},className:i}=l,o=_s(l,YD),[d,u]=c.useState([]),x=c.useRef(0),p=c.useRef(null);c.useEffect(()=>{p.current&&(p.current(),p.current=null)},[d]);const h=c.useRef(!1),j=W9(),y=c.useRef(null),f=c.useRef(null),I=c.useCallback(S=>{const{pulsate:z,rippleX:$,rippleY:D,rippleSize:W,cb:he}=S;u(V=>[...V,e.jsx(sO,{classes:{ripple:sa(r.ripple,Yl.ripple),rippleVisible:sa(r.rippleVisible,Yl.rippleVisible),ripplePulsate:sa(r.ripplePulsate,Yl.ripplePulsate),child:sa(r.child,Yl.child),childLeaving:sa(r.childLeaving,Yl.childLeaving),childPulsate:sa(r.childPulsate,Yl.childPulsate)},timeout:sb,pulsate:z,rippleX:$,rippleY:D,rippleSize:W},x.current)]),x.current+=1,p.current=he},[r]),A=c.useCallback((S={},z={},$=()=>{})=>{const{pulsate:D=!1,center:W=n||z.pulsate,fakeElement:he=!1}=z;if((S==null?void 0:S.type)==="mousedown"&&h.current){h.current=!1;return}(S==null?void 0:S.type)==="touchstart"&&(h.current=!0);const V=he?null:f.current,xe=V?V.getBoundingClientRect():{width:0,height:0,left:0,top:0};let pe,be,fe;if(W||S===void 0||S.clientX===0&&S.clientY===0||!S.clientX&&!S.touches)pe=Math.round(xe.width/2),be=Math.round(xe.height/2);else{const{clientX:K,clientY:re}=S.touches&&S.touches.length>0?S.touches[0]:S;pe=Math.round(K-xe.left),be=Math.round(re-xe.top)}if(W)fe=Math.sqrt((2*xe.width**2+xe.height**2)/3),fe%2===0&&(fe+=1);else{const K=Math.max(Math.abs((V?V.clientWidth:0)-pe),pe)*2+2,re=Math.max(Math.abs((V?V.clientHeight:0)-be),be)*2+2;fe=Math.sqrt(K**2+re**2)}S!=null&&S.touches?y.current===null&&(y.current=()=>{I({pulsate:D,rippleX:pe,rippleY:be,rippleSize:fe,cb:$})},j.start(QD,()=>{y.current&&(y.current(),y.current=null)})):I({pulsate:D,rippleX:pe,rippleY:be,rippleSize:fe,cb:$})},[n,I,j]),b=c.useCallback(()=>{A({},{pulsate:!0})},[A]),C=c.useCallback((S,z)=>{if(j.clear(),(S==null?void 0:S.type)==="touchend"&&y.current){y.current(),y.current=null,j.start(0,()=>{C(S,z)});return}y.current=null,u($=>$.length>0?$.slice(1):$),p.current=z},[j]);return c.useImperativeHandle(a,()=>({pulsate:b,start:A,stop:C}),[b,A,C]),e.jsx(tO,ze({className:sa(Yl.root,r.root,i),ref:f},o,{children:e.jsx(ey,{component:null,exit:!0,children:d})}))});function lO(t){return zr("MuiButtonBase",t)}const nO=Gr("MuiButtonBase",["root","disabled","focusVisible"]),rO=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],iO=t=>{const{disabled:s,focusVisible:a,focusVisibleClassName:l,classes:n}=t,i=Vi({root:["root",s&&"disabled",a&&"focusVisible"]},lO,n);return a&&l&&(i.root+=` ${l}`),i},oO=il("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,s)=>s.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nO.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),g3=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiButtonBase"}),{action:n,centerRipple:r=!1,children:i,className:o,component:d="button",disabled:u=!1,disableRipple:x=!1,disableTouchRipple:p=!1,focusRipple:h=!1,LinkComponent:j="a",onBlur:y,onClick:f,onContextMenu:I,onDragLeave:A,onFocus:b,onFocusVisible:C,onKeyDown:S,onKeyUp:z,onMouseDown:$,onMouseLeave:D,onMouseUp:W,onTouchEnd:he,onTouchMove:V,onTouchStart:xe,tabIndex:pe=0,TouchRippleProps:be,touchRippleRef:fe,type:K}=l,re=_s(l,rO),q=c.useRef(null),L=c.useRef(null),M=Xv(L,fe),{isFocusVisibleRef:k,onFocus:P,onBlur:Y,ref:F}=eR(),[G,ve]=c.useState(!1);u&&G&&ve(!1),c.useImperativeHandle(n,()=>({focusVisible:()=>{ve(!0),q.current.focus()}}),[]);const[Te,ye]=c.useState(!1);c.useEffect(()=>{ye(!0)},[]);const ie=Te&&!x&&!u;c.useEffect(()=>{G&&h&&!x&&Te&&L.current.pulsate()},[x,h,G,Te]);function Oe(ge,Le,ae=p){return Qm(le=>(Le&&Le(le),!ae&&L.current&&L.current[ge](le),!0))}const Ae=Oe("start",$),ee=Oe("stop",I),Ne=Oe("stop",A),Ce=Oe("stop",W),Ee=Oe("stop",ge=>{G&&ge.preventDefault(),D&&D(ge)}),Ue=Oe("start",xe),Ye=Oe("stop",he),De=Oe("stop",V),Be=Oe("stop",ge=>{Y(ge),k.current===!1&&ve(!1),y&&y(ge)},!1),$e=Qm(ge=>{q.current||(q.current=ge.currentTarget),P(ge),k.current===!0&&(ve(!0),C&&C(ge)),b&&b(ge)}),_=()=>{const ge=q.current;return d&&d!=="button"&&!(ge.tagName==="A"&&ge.href)},te=c.useRef(!1),Re=Qm(ge=>{h&&!te.current&&G&&L.current&&ge.key===" "&&(te.current=!0,L.current.stop(ge,()=>{L.current.start(ge)})),ge.target===ge.currentTarget&&_()&&ge.key===" "&&ge.preventDefault(),S&&S(ge),ge.target===ge.currentTarget&&_()&&ge.key==="Enter"&&!u&&(ge.preventDefault(),f&&f(ge))}),Fe=Qm(ge=>{h&&ge.key===" "&&L.current&&G&&!ge.defaultPrevented&&(te.current=!1,L.current.stop(ge,()=>{L.current.pulsate(ge)})),z&&z(ge),f&&ge.target===ge.currentTarget&&_()&&ge.key===" "&&!ge.defaultPrevented&&f(ge)});let T=d;T==="button"&&(re.href||re.to)&&(T=j);const Z={};T==="button"?(Z.type=K===void 0?"button":K,Z.disabled=u):(!re.href&&!re.to&&(Z.role="button"),u&&(Z["aria-disabled"]=u));const B=Xv(a,F,q),ne=ze({},l,{centerRipple:r,component:d,disabled:u,disableRipple:x,disableTouchRipple:p,focusRipple:h,tabIndex:pe,focusVisible:G}),X=iO(ne);return e.jsxs(oO,ze({as:T,className:sa(X.root,o),ownerState:ne,onBlur:Be,onClick:f,onContextMenu:ee,onFocus:$e,onKeyDown:Re,onKeyUp:Fe,onMouseDown:Ae,onMouseLeave:Ee,onMouseUp:Ce,onDragLeave:Ne,onTouchEnd:Ye,onTouchMove:De,onTouchStart:Ue,ref:B,tabIndex:u?-1:pe,type:K},Z,re,{children:[i,ie?e.jsx(aO,ze({ref:M,center:r},be)):null]}))});function dO(t){return zr("MuiAlert",t)}const t2=Gr("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function cO(t){return zr("MuiIconButton",t)}const uO=Gr("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),mO=["edge","children","className","color","disabled","disableFocusRipple","size"],xO=t=>{const{classes:s,disabled:a,color:l,edge:n,size:r}=t,i={root:["root",a&&"disabled",l!=="default"&&`color${zt(l)}`,n&&`edge${zt(n)}`,`size${zt(r)}`]};return Vi(i,cO,s)},pO=il(g3,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.color!=="default"&&s[`color${zt(a.color)}`],a.edge&&s[`edge${zt(a.edge)}`],s[`size${zt(a.size)}`]]}})(({theme:t,ownerState:s})=>ze({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!s.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:gi(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.edge==="start"&&{marginLeft:s.size==="small"?-3:-12},s.edge==="end"&&{marginRight:s.size==="small"?-3:-12}),({theme:t,ownerState:s})=>{var a;const l=(a=(t.vars||t).palette)==null?void 0:a[s.color];return ze({},s.color==="inherit"&&{color:"inherit"},s.color!=="inherit"&&s.color!=="default"&&ze({color:l==null?void 0:l.main},!s.disableRipple&&{"&:hover":ze({},l&&{backgroundColor:t.vars?`rgba(${l.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:gi(l.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),s.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},s.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${uO.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),hO=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiIconButton"}),{edge:n=!1,children:r,className:i,color:o="default",disabled:d=!1,disableFocusRipple:u=!1,size:x="medium"}=l,p=_s(l,mO),h=ze({},l,{edge:n,color:o,disabled:d,disableFocusRipple:u,size:x}),j=xO(h);return e.jsx(pO,ze({className:sa(j.root,i),centerRipple:!0,focusRipple:!u,disabled:d,ref:a},p,{ownerState:h,children:r}))}),fO=km(e.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),gO=km(e.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),vO=km(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),bO=km(e.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),jO=km(e.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),yO=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],NO=t=>{const{variant:s,color:a,severity:l,classes:n}=t,r={root:["root",`color${zt(a||l)}`,`${s}${zt(a||l)}`,`${s}`],icon:["icon"],message:["message"],action:["action"]};return Vi(r,dO,n)},wO=il(GD,{name:"MuiAlert",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`${a.variant}${zt(a.color||a.severity)}`]]}})(({theme:t})=>{const s=t.palette.mode==="light"?Qv:Jv,a=t.palette.mode==="light"?Jv:Qv;return ze({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(t.palette).filter(([,l])=>l.main&&l.light).map(([l])=>({props:{colorSeverity:l,variant:"standard"},style:{color:t.vars?t.vars.palette.Alert[`${l}Color`]:s(t.palette[l].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${l}StandardBg`]:a(t.palette[l].light,.9),[`& .${t2.icon}`]:t.vars?{color:t.vars.palette.Alert[`${l}IconColor`]}:{color:t.palette[l].main}}})),...Object.entries(t.palette).filter(([,l])=>l.main&&l.light).map(([l])=>({props:{colorSeverity:l,variant:"outlined"},style:{color:t.vars?t.vars.palette.Alert[`${l}Color`]:s(t.palette[l].light,.6),border:`1px solid ${(t.vars||t).palette[l].light}`,[`& .${t2.icon}`]:t.vars?{color:t.vars.palette.Alert[`${l}IconColor`]}:{color:t.palette[l].main}}})),...Object.entries(t.palette).filter(([,l])=>l.main&&l.dark).map(([l])=>({props:{colorSeverity:l,variant:"filled"},style:ze({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${l}FilledColor`],backgroundColor:t.vars.palette.Alert[`${l}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[l].dark:t.palette[l].main,color:t.palette.getContrastText(t.palette[l].main)})}))]})}),kO=il("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,s)=>s.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),CO=il("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,s)=>s.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),s2=il("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,s)=>s.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),a2={success:e.jsx(fO,{fontSize:"inherit"}),warning:e.jsx(gO,{fontSize:"inherit"}),error:e.jsx(vO,{fontSize:"inherit"}),info:e.jsx(bO,{fontSize:"inherit"})},SO=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiAlert"}),{action:n,children:r,className:i,closeText:o="Close",color:d,components:u={},componentsProps:x={},icon:p,iconMapping:h=a2,onClose:j,role:y="alert",severity:f="success",slotProps:I={},slots:A={},variant:b="standard"}=l,C=_s(l,yO),S=ze({},l,{color:d,severity:f,variant:b,colorSeverity:d||f}),z=NO(S),$={slots:ze({closeButton:u.CloseButton,closeIcon:u.CloseIcon},A),slotProps:ze({},x,I)},[D,W]=Yw("closeButton",{elementType:hO,externalForwardedProps:$,ownerState:S}),[he,V]=Yw("closeIcon",{elementType:jO,externalForwardedProps:$,ownerState:S});return e.jsxs(wO,ze({role:y,elevation:0,ownerState:S,className:sa(z.root,i),ref:a},C,{children:[p!==!1?e.jsx(kO,{ownerState:S,className:z.icon,children:p||h[f]||a2[f]}):null,e.jsx(CO,{ownerState:S,className:z.message,children:r}),n!=null?e.jsx(s2,{ownerState:S,className:z.action,children:n}):null,n==null&&j?e.jsx(s2,{ownerState:S,className:z.action,children:e.jsx(D,ze({size:"small","aria-label":o,title:o,color:"inherit",onClick:j},W,{children:e.jsx(he,ze({fontSize:"small"},V))}))}):null]}))});function AO(t){return zr("MuiTypography",t)}Gr("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const EO=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],PO=t=>{const{align:s,gutterBottom:a,noWrap:l,paragraph:n,variant:r,classes:i}=t,o={root:["root",r,t.align!=="inherit"&&`align${zt(s)}`,a&&"gutterBottom",l&&"noWrap",n&&"paragraph"]};return Vi(o,AO,i)},MO=il("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,a.variant&&s[a.variant],a.align!=="inherit"&&s[`align${zt(a.align)}`],a.noWrap&&s.noWrap,a.gutterBottom&&s.gutterBottom,a.paragraph&&s.paragraph]}})(({theme:t,ownerState:s})=>ze({margin:0},s.variant==="inherit"&&{font:"inherit"},s.variant!=="inherit"&&t.typography[s.variant],s.align!=="inherit"&&{textAlign:s.align},s.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},s.gutterBottom&&{marginBottom:"0.35em"},s.paragraph&&{marginBottom:16})),l2={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},TO={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},RO=t=>TO[t]||t,DO=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiTypography"}),n=RO(l.color),r=YC(ze({},l,{color:n})),{align:i="inherit",className:o,component:d,gutterBottom:u=!1,noWrap:x=!1,paragraph:p=!1,variant:h="body1",variantMapping:j=l2}=r,y=_s(r,EO),f=ze({},r,{align:i,color:n,className:o,component:d,gutterBottom:u,noWrap:x,paragraph:p,variant:h,variantMapping:j}),I=d||(p?"p":j[h]||l2[h])||"span",A=PO(f);return e.jsx(MO,ze({as:I,ref:a,ownerState:f,className:sa(A.root,o)},y))});function OO(t){return zr("MuiAlertTitle",t)}Gr("MuiAlertTitle",["root"]);const $O=["className"],IO=t=>{const{classes:s}=t;return Vi({root:["root"]},OO,s)},LO=il(DO,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,s)=>s.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),FO=c.forwardRef(function(s,a){const l=dr({props:s,name:"MuiAlertTitle"}),{className:n}=l,r=_s(l,$O),i=l,o=IO(i);return e.jsx(LO,ze({gutterBottom:!0,component:"div",ownerState:i,ref:a,className:sa(o.root,n)},r))});function _O(t){return e.jsx(XC,ze({},t,{defaultTheme:p3,themeId:Bp}))}function VO(t){return zr("MuiButton",t)}const Zm=Gr("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),BO=c.createContext({}),UO=c.createContext(void 0),qO=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],zO=t=>{const{color:s,disableElevation:a,fullWidth:l,size:n,variant:r,classes:i}=t,o={root:["root",r,`${r}${zt(s)}`,`size${zt(n)}`,`${r}Size${zt(n)}`,`color${zt(s)}`,a&&"disableElevation",l&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${zt(n)}`],endIcon:["icon","endIcon",`iconSize${zt(n)}`]},d=Vi(o,VO,i);return ze({},i,d)},v3=t=>ze({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),GO=il(g3,{shouldForwardProp:t=>f3(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.root,s[a.variant],s[`${a.variant}${zt(a.color)}`],s[`size${zt(a.size)}`],s[`${a.variant}Size${zt(a.size)}`],a.color==="inherit"&&s.colorInherit,a.disableElevation&&s.disableElevation,a.fullWidth&&s.fullWidth]}})(({theme:t,ownerState:s})=>{var a,l;const n=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],r=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return ze({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":ze({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:gi(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},s.variant==="text"&&s.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[s.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:gi(t.palette[s.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},s.variant==="outlined"&&s.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[s.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[s.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:gi(t.palette[s.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},s.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:r,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},s.variant==="contained"&&s.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[s.color].main}}),"&:active":ze({},s.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${Zm.focusVisible}`]:ze({},s.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${Zm.disabled}`]:ze({color:(t.vars||t).palette.action.disabled},s.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},s.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},s.variant==="text"&&{padding:"6px 8px"},s.variant==="text"&&s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main},s.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},s.variant==="outlined"&&s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[s.color].mainChannel} / 0.5)`:`1px solid ${gi(t.palette[s.color].main,.5)}`},s.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(a=(l=t.palette).getContrastText)==null?void 0:a.call(l,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:n,boxShadow:(t.vars||t).shadows[2]},s.variant==="contained"&&s.color!=="inherit"&&{color:(t.vars||t).palette[s.color].contrastText,backgroundColor:(t.vars||t).palette[s.color].main},s.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},s.size==="small"&&s.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},s.size==="large"&&s.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},s.size==="small"&&s.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},s.size==="large"&&s.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},s.size==="small"&&s.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},s.size==="large"&&s.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},s.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Zm.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Zm.disabled}`]:{boxShadow:"none"}}),WO=il("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.startIcon,s[`iconSize${zt(a.size)}`]]}})(({ownerState:t})=>ze({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},v3(t))),HO=il("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,s)=>{const{ownerState:a}=t;return[s.endIcon,s[`iconSize${zt(a.size)}`]]}})(({ownerState:t})=>ze({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},v3(t))),n2=c.forwardRef(function(s,a){const l=c.useContext(BO),n=c.useContext(UO),r=zp(l,s),i=dr({props:r,name:"MuiButton"}),{children:o,color:d="primary",component:u="button",className:x,disabled:p=!1,disableElevation:h=!1,disableFocusRipple:j=!1,endIcon:y,focusVisibleClassName:f,fullWidth:I=!1,size:A="medium",startIcon:b,type:C,variant:S="text"}=i,z=_s(i,qO),$=ze({},i,{color:d,component:u,disabled:p,disableElevation:h,disableFocusRipple:j,fullWidth:I,size:A,type:C,variant:S}),D=zO($),W=b&&e.jsx(WO,{className:D.startIcon,ownerState:$,children:b}),he=y&&e.jsx(HO,{className:D.endIcon,ownerState:$,children:y}),V=n||"";return e.jsxs(GO,ze({ownerState:$,className:sa(l.className,D.root,x,V),component:u,disabled:p,focusRipple:!j,focusVisibleClassName:sa(D.focusVisible,f),ref:a,type:C},z,{classes:D,children:[W,o,he]}))}),KO=(t,s)=>ze({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},s&&!t.vars&&{colorScheme:t.palette.mode}),XO=t=>ze({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),YO=(t,s=!1)=>{var a;const l={};s&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([i,o])=>{var d;l[t.getColorSchemeSelector(i).replace(/\s*&/,"")]={colorScheme:(d=o.palette)==null?void 0:d.mode}});let n=ze({html:KO(t,s),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:ze({margin:0},XO(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},l);const r=(a=t.components)==null||(a=a.MuiCssBaseline)==null?void 0:a.styleOverrides;return r&&(n=[n,r]),n};function QO(t){const s=dr({props:t,name:"MuiCssBaseline"}),{children:a,enableColorScheme:l=!1}=s;return e.jsxs(c.Fragment,{children:[e.jsx(_O,{styles:n=>YO(n,l)}),a]})}const Mt={HOME:"/",SIGNIN:"/signin",AUTH:{LOGIN:"/auth/login",MFA:"/auth/mfa",INVITE:"/auth/invite",INVITE_TOKEN:"/auth/invite/:token"},CONSOLE:{ROOT:"/console",DASHBOARD:"/console/dashboard"},PAGES_PREVIEW:"/pages/:id"},ty=c.createContext({});function sy(t){const s=c.useRef(null);return s.current===null&&(s.current=t()),s.current}const v0=c.createContext(null),ay=c.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class JO extends c.Component{getSnapshotBeforeUpdate(s){const a=this.props.childRef.current;if(a&&s.isPresent&&!this.props.isPresent){const l=this.props.sizeRef.current;l.height=a.offsetHeight||0,l.width=a.offsetWidth||0,l.top=a.offsetTop,l.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function ZO({children:t,isPresent:s}){const a=c.useId(),l=c.useRef(null),n=c.useRef({width:0,height:0,top:0,left:0}),{nonce:r}=c.useContext(ay);return c.useInsertionEffect(()=>{const{width:i,height:o,top:d,left:u}=n.current;if(s||!l.current||!i||!o)return;l.current.dataset.motionPopId=a;const x=document.createElement("style");return r&&(x.nonce=r),document.head.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${d}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(x)}},[s]),e.jsx(JO,{isPresent:s,childRef:l,sizeRef:n,children:c.cloneElement(t,{ref:l})})}const e$=({children:t,initial:s,isPresent:a,onExitComplete:l,custom:n,presenceAffectsLayout:r,mode:i})=>{const o=sy(t$),d=c.useId(),u=c.useCallback(p=>{o.set(p,!0);for(const h of o.values())if(!h)return;l&&l()},[o,l]),x=c.useMemo(()=>({id:d,initial:s,isPresent:a,custom:n,onExitComplete:u,register:p=>(o.set(p,!1),()=>o.delete(p))}),r?[Math.random(),u]:[a,u]);return c.useMemo(()=>{o.forEach((p,h)=>o.set(h,!1))},[a]),c.useEffect(()=>{!a&&!o.size&&l&&l()},[a]),i==="popLayout"&&(t=e.jsx(ZO,{isPresent:a,children:t})),e.jsx(v0.Provider,{value:x,children:t})};function t$(){return new Map}function b3(t=!0){const s=c.useContext(v0);if(s===null)return[!0,null];const{isPresent:a,onExitComplete:l,register:n}=s,r=c.useId();c.useEffect(()=>{t&&n(r)},[t]);const i=c.useCallback(()=>t&&l&&l(r),[r,l,t]);return!a&&l?[!1,i]:[!0]}const ex=t=>t.key||"";function r2(t){const s=[];return c.Children.forEach(t,a=>{c.isValidElement(a)&&s.push(a)}),s}const ly=typeof window<"u",j3=ly?c.useLayoutEffect:c.useEffect,qe=({children:t,custom:s,initial:a=!0,onExitComplete:l,presenceAffectsLayout:n=!0,mode:r="sync",propagate:i=!1})=>{const[o,d]=b3(i),u=c.useMemo(()=>r2(t),[t]),x=i&&!o?[]:u.map(ex),p=c.useRef(!0),h=c.useRef(u),j=sy(()=>new Map),[y,f]=c.useState(u),[I,A]=c.useState(u);j3(()=>{p.current=!1,h.current=u;for(let S=0;S<I.length;S++){const z=ex(I[S]);x.includes(z)?j.delete(z):j.get(z)!==!0&&j.set(z,!1)}},[I,x.length,x.join("-")]);const b=[];if(u!==y){let S=[...u];for(let z=0;z<I.length;z++){const $=I[z],D=ex($);x.includes(D)||(S.splice(z,0,$),b.push($))}r==="wait"&&b.length&&(S=b),A(r2(S)),f(u);return}const{forceRender:C}=c.useContext(ty);return e.jsx(e.Fragment,{children:I.map(S=>{const z=ex(S),$=i&&!o?!1:u===I||x.includes(z),D=()=>{if(j.has(z))j.set(z,!0);else return;let W=!0;j.forEach(he=>{he||(W=!1)}),W&&(C==null||C(),A(h.current),i&&(d==null||d()),l&&l())};return e.jsx(e$,{isPresent:$,initial:!p.current||a?void 0:!1,custom:$?void 0:s,presenceAffectsLayout:n,mode:r,onExitComplete:$?void 0:D,children:S},z)})})},Rl=t=>t;let y3=Rl;function ny(t){let s;return()=>(s===void 0&&(s=t()),s)}const nc=(t,s,a)=>{const l=s-t;return l===0?1:(a-t)/l},Pr=t=>t*1e3,Mr=t=>t/1e3,s$={useManualTiming:!1};function a$(t){let s=new Set,a=new Set,l=!1,n=!1;const r=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function o(u){r.has(u)&&(d.schedule(u),t()),u(i)}const d={schedule:(u,x=!1,p=!1)=>{const j=p&&l?s:a;return x&&r.add(u),j.has(u)||j.add(u),u},cancel:u=>{a.delete(u),r.delete(u)},process:u=>{if(i=u,l){n=!0;return}l=!0,[s,a]=[a,s],s.forEach(o),s.clear(),l=!1,n&&(n=!1,d.process(u))}};return d}const tx=["read","resolveKeyframes","update","preRender","render","postRender"],l$=40;function N3(t,s){let a=!1,l=!0;const n={delta:0,timestamp:0,isProcessing:!1},r=()=>a=!0,i=tx.reduce((A,b)=>(A[b]=a$(r),A),{}),{read:o,resolveKeyframes:d,update:u,preRender:x,render:p,postRender:h}=i,j=()=>{const A=performance.now();a=!1,n.delta=l?1e3/60:Math.max(Math.min(A-n.timestamp,l$),1),n.timestamp=A,n.isProcessing=!0,o.process(n),d.process(n),u.process(n),x.process(n),p.process(n),h.process(n),n.isProcessing=!1,a&&s&&(l=!1,t(j))},y=()=>{a=!0,l=!0,n.isProcessing||t(j)};return{schedule:tx.reduce((A,b)=>{const C=i[b];return A[b]=(S,z=!1,$=!1)=>(a||y(),C.schedule(S,z,$)),A},{}),cancel:A=>{for(let b=0;b<tx.length;b++)i[tx[b]].cancel(A)},state:n,steps:i}}const{schedule:us,cancel:Ti,state:Ma,steps:xf}=N3(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rl,!0),w3=c.createContext({strict:!1}),i2={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rc={};for(const t in i2)rc[t]={isEnabled:s=>i2[t].some(a=>!!s[a])};function n$(t){for(const s in t)rc[s]={...rc[s],...t[s]}}const r$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Hp(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||r$.has(t)}let k3=t=>!Hp(t);function i$(t){t&&(k3=s=>s.startsWith("on")?!Hp(s):t(s))}try{i$(require("@emotion/is-prop-valid").default)}catch{}function o$(t,s,a){const l={};for(const n in t)n==="values"&&typeof t.values=="object"||(k3(n)||a===!0&&Hp(n)||!s&&!Hp(n)||t.draggable&&n.startsWith("onDrag"))&&(l[n]=t[n]);return l}function d$(t){if(typeof Proxy>"u")return t;const s=new Map,a=(...l)=>t(...l);return new Proxy(a,{get:(l,n)=>n==="create"?t:(s.has(n)||s.set(n,t(n)),s.get(n))})}const b0=c.createContext({});function sm(t){return typeof t=="string"||Array.isArray(t)}function j0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ry=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iy=["initial",...ry];function y0(t){return j0(t.animate)||iy.some(s=>sm(t[s]))}function C3(t){return!!(y0(t)||t.variants)}function c$(t,s){if(y0(t)){const{initial:a,animate:l}=t;return{initial:a===!1||sm(a)?a:void 0,animate:sm(l)?l:void 0}}return t.inherit!==!1?s:{}}function u$(t){const{initial:s,animate:a}=c$(t,c.useContext(b0));return c.useMemo(()=>({initial:s,animate:a}),[o2(s),o2(a)])}function o2(t){return Array.isArray(t)?t.join(" "):t}const m$=Symbol.for("motionComponentSymbol");function Td(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function x$(t,s,a){return c.useCallback(l=>{l&&t.onMount&&t.onMount(l),s&&(l?s.mount(l):s.unmount()),a&&(typeof a=="function"?a(l):Td(a)&&(a.current=l))},[s])}const oy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),p$="framerAppearId",S3="data-"+oy(p$),{schedule:dy}=N3(queueMicrotask,!1),A3=c.createContext({});function h$(t,s,a,l,n){var r,i;const{visualElement:o}=c.useContext(b0),d=c.useContext(w3),u=c.useContext(v0),x=c.useContext(ay).reducedMotion,p=c.useRef(null);l=l||d.renderer,!p.current&&l&&(p.current=l(t,{visualState:s,parent:o,props:a,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:x}));const h=p.current,j=c.useContext(A3);h&&!h.projection&&n&&(h.type==="html"||h.type==="svg")&&f$(p.current,a,n,j);const y=c.useRef(!1);c.useInsertionEffect(()=>{h&&y.current&&h.update(a,u)});const f=a[S3],I=c.useRef(!!f&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,f))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,f)));return j3(()=>{h&&(y.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),dy.render(h.render),I.current&&h.animationState&&h.animationState.animateChanges())}),c.useEffect(()=>{h&&(!I.current&&h.animationState&&h.animationState.animateChanges(),I.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,f)}),I.current=!1))}),h}function f$(t,s,a,l){const{layoutId:n,layout:r,drag:i,dragConstraints:o,layoutScroll:d,layoutRoot:u}=s;t.projection=new a(t.latestValues,s["data-framer-portal-id"]?void 0:E3(t.parent)),t.projection.setOptions({layoutId:n,layout:r,alwaysMeasureLayout:!!i||o&&Td(o),visualElement:t,animationType:typeof r=="string"?r:"both",initialPromotionConfig:l,layoutScroll:d,layoutRoot:u})}function E3(t){if(t)return t.options.allowProjection!==!1?t.projection:E3(t.parent)}function g$({preloadedFeatures:t,createVisualElement:s,useRender:a,useVisualState:l,Component:n}){var r,i;t&&n$(t);function o(u,x){let p;const h={...c.useContext(ay),...u,layoutId:v$(u)},{isStatic:j}=h,y=u$(u),f=l(u,j);if(!j&&ly){b$();const I=j$(h);p=I.MeasureLayout,y.visualElement=h$(n,f,h,s,I.ProjectionNode)}return e.jsxs(b0.Provider,{value:y,children:[p&&y.visualElement?e.jsx(p,{visualElement:y.visualElement,...h}):null,a(n,u,x$(f,y.visualElement,x),f,j,y.visualElement)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${(i=(r=n.displayName)!==null&&r!==void 0?r:n.name)!==null&&i!==void 0?i:""})`}`;const d=c.forwardRef(o);return d[m$]=n,d}function v$({layoutId:t}){const s=c.useContext(ty).id;return s&&t!==void 0?s+"-"+t:t}function b$(t,s){c.useContext(w3).strict}function j$(t){const{drag:s,layout:a}=rc;if(!s&&!a)return{};const l={...s,...a};return{MeasureLayout:s!=null&&s.isEnabled(t)||a!=null&&a.isEnabled(t)?l.MeasureLayout:void 0,ProjectionNode:l.ProjectionNode}}const y$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function cy(t){return typeof t!="string"||t.includes("-")?!1:!!(y$.indexOf(t)>-1||/[A-Z]/u.test(t))}function d2(t){const s=[{},{}];return t==null||t.values.forEach((a,l)=>{s[0][l]=a.get(),s[1][l]=a.getVelocity()}),s}function uy(t,s,a,l){if(typeof s=="function"){const[n,r]=d2(l);s=s(a!==void 0?a:t.custom,n,r)}if(typeof s=="string"&&(s=t.variants&&t.variants[s]),typeof s=="function"){const[n,r]=d2(l);s=s(a!==void 0?a:t.custom,n,r)}return s}const ab=t=>Array.isArray(t),N$=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),w$=t=>ab(t)?t[t.length-1]||0:t,Ha=t=>!!(t&&t.getVelocity);function rp(t){const s=Ha(t)?t.get():t;return N$(s)?s.toValue():s}function k$({scrapeMotionValuesFromProps:t,createRenderState:s,onUpdate:a},l,n,r){const i={latestValues:C$(l,n,r,t),renderState:s()};return a&&(i.onMount=o=>a({props:l,current:o,...i}),i.onUpdate=o=>a(o)),i}const P3=t=>(s,a)=>{const l=c.useContext(b0),n=c.useContext(v0),r=()=>k$(t,s,l,n);return a?r():sy(r)};function C$(t,s,a,l){const n={},r=l(t,{});for(const h in r)n[h]=rp(r[h]);let{initial:i,animate:o}=t;const d=y0(t),u=C3(t);s&&u&&!d&&t.inherit!==!1&&(i===void 0&&(i=s.initial),o===void 0&&(o=s.animate));let x=a?a.initial===!1:!1;x=x||i===!1;const p=x?o:i;if(p&&typeof p!="boolean"&&!j0(p)){const h=Array.isArray(p)?p:[p];for(let j=0;j<h.length;j++){const y=uy(t,h[j]);if(y){const{transitionEnd:f,transition:I,...A}=y;for(const b in A){let C=A[b];if(Array.isArray(C)){const S=x?C.length-1:0;C=C[S]}C!==null&&(n[b]=C)}for(const b in f)n[b]=f[b]}}}return n}const vc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Io=new Set(vc),M3=t=>s=>typeof s=="string"&&s.startsWith(t),T3=M3("--"),S$=M3("var(--"),my=t=>S$(t)?A$.test(t.split("/*")[0].trim()):!1,A$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,R3=(t,s)=>s&&typeof t=="number"?s.transform(t):t,Fr=(t,s,a)=>a>s?s:a<t?t:a,bc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},am={...bc,transform:t=>Fr(0,1,t)},sx={...bc,default:1},Cm=t=>({test:s=>typeof s=="string"&&s.endsWith(t)&&s.split(" ").length===1,parse:parseFloat,transform:s=>`${s}${t}`}),ri=Cm("deg"),ar=Cm("%"),dt=Cm("px"),E$=Cm("vh"),P$=Cm("vw"),c2={...ar,parse:t=>ar.parse(t)/100,transform:t=>ar.transform(t*100)},M$={borderWidth:dt,borderTopWidth:dt,borderRightWidth:dt,borderBottomWidth:dt,borderLeftWidth:dt,borderRadius:dt,radius:dt,borderTopLeftRadius:dt,borderTopRightRadius:dt,borderBottomRightRadius:dt,borderBottomLeftRadius:dt,width:dt,maxWidth:dt,height:dt,maxHeight:dt,top:dt,right:dt,bottom:dt,left:dt,padding:dt,paddingTop:dt,paddingRight:dt,paddingBottom:dt,paddingLeft:dt,margin:dt,marginTop:dt,marginRight:dt,marginBottom:dt,marginLeft:dt,backgroundPositionX:dt,backgroundPositionY:dt},T$={rotate:ri,rotateX:ri,rotateY:ri,rotateZ:ri,scale:sx,scaleX:sx,scaleY:sx,scaleZ:sx,skew:ri,skewX:ri,skewY:ri,distance:dt,translateX:dt,translateY:dt,translateZ:dt,x:dt,y:dt,z:dt,perspective:dt,transformPerspective:dt,opacity:am,originX:c2,originY:c2,originZ:dt},u2={...bc,transform:Math.round},xy={...M$,...T$,zIndex:u2,size:dt,fillOpacity:am,strokeOpacity:am,numOctaves:u2},R$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},D$=vc.length;function O$(t,s,a){let l="",n=!0;for(let r=0;r<D$;r++){const i=vc[r],o=t[i];if(o===void 0)continue;let d=!0;if(typeof o=="number"?d=o===(i.startsWith("scale")?1:0):d=parseFloat(o)===0,!d||a){const u=R3(o,xy[i]);if(!d){n=!1;const x=R$[i]||i;l+=`${x}(${u}) `}a&&(s[i]=u)}}return l=l.trim(),a?l=a(s,n?"":l):n&&(l="none"),l}function py(t,s,a){const{style:l,vars:n,transformOrigin:r}=t;let i=!1,o=!1;for(const d in s){const u=s[d];if(Io.has(d)){i=!0;continue}else if(T3(d)){n[d]=u;continue}else{const x=R3(u,xy[d]);d.startsWith("origin")?(o=!0,r[d]=x):l[d]=x}}if(s.transform||(i||a?l.transform=O$(s,t.transform,a):l.transform&&(l.transform="none")),o){const{originX:d="50%",originY:u="50%",originZ:x=0}=r;l.transformOrigin=`${d} ${u} ${x}`}}const $$={offset:"stroke-dashoffset",array:"stroke-dasharray"},I$={offset:"strokeDashoffset",array:"strokeDasharray"};function L$(t,s,a=1,l=0,n=!0){t.pathLength=1;const r=n?$$:I$;t[r.offset]=dt.transform(-l);const i=dt.transform(s),o=dt.transform(a);t[r.array]=`${i} ${o}`}function m2(t,s,a){return typeof t=="string"?t:dt.transform(s+a*t)}function F$(t,s,a){const l=m2(s,t.x,t.width),n=m2(a,t.y,t.height);return`${l} ${n}`}function hy(t,{attrX:s,attrY:a,attrScale:l,originX:n,originY:r,pathLength:i,pathSpacing:o=1,pathOffset:d=0,...u},x,p){if(py(t,u,p),x){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:j,dimensions:y}=t;h.transform&&(y&&(j.transform=h.transform),delete h.transform),y&&(n!==void 0||r!==void 0||j.transform)&&(j.transformOrigin=F$(y,n!==void 0?n:.5,r!==void 0?r:.5)),s!==void 0&&(h.x=s),a!==void 0&&(h.y=a),l!==void 0&&(h.scale=l),i!==void 0&&L$(h,i,o,d,!1)}const fy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),D3=()=>({...fy(),attrs:{}}),gy=t=>typeof t=="string"&&t.toLowerCase()==="svg";function O3(t,{style:s,vars:a},l,n){Object.assign(t.style,s,n&&n.getProjectionStyles(l));for(const r in a)t.style.setProperty(r,a[r])}const $3=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I3(t,s,a,l){O3(t,s,void 0,l);for(const n in s.attrs)t.setAttribute($3.has(n)?n:oy(n),s.attrs[n])}const Kp={};function _$(t){Object.assign(Kp,t)}function L3(t,{layout:s,layoutId:a}){return Io.has(t)||t.startsWith("origin")||(s||a!==void 0)&&(!!Kp[t]||t==="opacity")}function vy(t,s,a){var l;const{style:n}=t,r={};for(const i in n)(Ha(n[i])||s.style&&Ha(s.style[i])||L3(i,t)||((l=a==null?void 0:a.getValue(i))===null||l===void 0?void 0:l.liveStyle)!==void 0)&&(r[i]=n[i]);return r}function F3(t,s,a){const l=vy(t,s,a);for(const n in t)if(Ha(t[n])||Ha(s[n])){const r=vc.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;l[r]=t[n]}return l}function V$(t,s){try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}const x2=["x","y","width","height","cx","cy","r"],B$={useVisualState:P3({scrapeMotionValuesFromProps:F3,createRenderState:D3,onUpdate:({props:t,prevProps:s,current:a,renderState:l,latestValues:n})=>{if(!a)return;let r=!!t.drag;if(!r){for(const o in n)if(Io.has(o)){r=!0;break}}if(!r)return;let i=!s;if(s)for(let o=0;o<x2.length;o++){const d=x2[o];t[d]!==s[d]&&(i=!0)}i&&us.read(()=>{V$(a,l),us.render(()=>{hy(l,n,gy(a.tagName),t.transformTemplate),I3(a,l)})})}})},U$={useVisualState:P3({scrapeMotionValuesFromProps:vy,createRenderState:fy})};function _3(t,s,a){for(const l in s)!Ha(s[l])&&!L3(l,a)&&(t[l]=s[l])}function q$({transformTemplate:t},s){return c.useMemo(()=>{const a=fy();return py(a,s,t),Object.assign({},a.vars,a.style)},[s])}function z$(t,s){const a=t.style||{},l={};return _3(l,a,t),Object.assign(l,q$(t,s)),l}function G$(t,s){const a={},l=z$(t,s);return t.drag&&t.dragListener!==!1&&(a.draggable=!1,l.userSelect=l.WebkitUserSelect=l.WebkitTouchCallout="none",l.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(a.tabIndex=0),a.style=l,a}function W$(t,s,a,l){const n=c.useMemo(()=>{const r=D3();return hy(r,s,gy(l),t.transformTemplate),{...r.attrs,style:{...r.style}}},[s]);if(t.style){const r={};_3(r,t.style,t),n.style={...r,...n.style}}return n}function H$(t=!1){return(a,l,n,{latestValues:r},i)=>{const d=(cy(a)?W$:G$)(l,r,i,a),u=o$(l,typeof a=="string",t),x=a!==c.Fragment?{...u,...d,ref:n}:{},{children:p}=l,h=c.useMemo(()=>Ha(p)?p.get():p,[p]);return c.createElement(a,{...x,children:h})}}function K$(t,s){return function(l,{forwardMotionProps:n}={forwardMotionProps:!1}){const i={...cy(l)?B$:U$,preloadedFeatures:t,useRender:H$(n),createVisualElement:s,Component:l};return g$(i)}}function V3(t,s){if(!Array.isArray(s))return!1;const a=s.length;if(a!==t.length)return!1;for(let l=0;l<a;l++)if(s[l]!==t[l])return!1;return!0}function N0(t,s,a){const l=t.getProps();return uy(l,s,a!==void 0?a:l.custom,t)}const X$=ny(()=>window.ScrollTimeline!==void 0);class Y${constructor(s){this.stop=()=>this.runAll("stop"),this.animations=s.filter(Boolean)}get finished(){return Promise.all(this.animations.map(s=>"finished"in s?s.finished:s))}getAll(s){return this.animations[0][s]}setAll(s,a){for(let l=0;l<this.animations.length;l++)this.animations[l][s]=a}attachTimeline(s,a){const l=this.animations.map(n=>{if(X$()&&n.attachTimeline)return n.attachTimeline(s);if(typeof a=="function")return a(n)});return()=>{l.forEach((n,r)=>{n&&n(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(s){this.setAll("time",s)}get speed(){return this.getAll("speed")}set speed(s){this.setAll("speed",s)}get startTime(){return this.getAll("startTime")}get duration(){let s=0;for(let a=0;a<this.animations.length;a++)s=Math.max(s,this.animations[a].duration);return s}runAll(s){this.animations.forEach(a=>a[s]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Q$ extends Y${then(s,a){return Promise.all(this.animations).then(s).catch(a)}}function by(t,s){return t?t[s]||t.default||t:void 0}const lb=2e4;function B3(t){let s=0;const a=50;let l=t.next(s);for(;!l.done&&s<lb;)s+=a,l=t.next(s);return s>=lb?1/0:s}function jy(t){return typeof t=="function"}function p2(t,s){t.timeline=s,t.onfinish=null}const yy=t=>Array.isArray(t)&&typeof t[0]=="number",J$={linearEasing:void 0};function Z$(t,s){const a=ny(t);return()=>{var l;return(l=J$[s])!==null&&l!==void 0?l:a()}}const Xp=Z$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),U3=(t,s,a=10)=>{let l="";const n=Math.max(Math.round(s/a),2);for(let r=0;r<n;r++)l+=t(nc(0,n-1,r))+", ";return`linear(${l.substring(0,l.length-2)})`};function q3(t){return!!(typeof t=="function"&&Xp()||!t||typeof t=="string"&&(t in nb||Xp())||yy(t)||Array.isArray(t)&&t.every(q3))}const iu=([t,s,a,l])=>`cubic-bezier(${t}, ${s}, ${a}, ${l})`,nb={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iu([0,.65,.55,1]),circOut:iu([.55,0,1,.45]),backIn:iu([.31,.01,.66,-.59]),backOut:iu([.33,1.53,.69,.99])};function z3(t,s){if(t)return typeof t=="function"&&Xp()?U3(t,s):yy(t)?iu(t):Array.isArray(t)?t.map(a=>z3(a,s)||nb.easeOut):nb[t]}const vn={x:!1,y:!1};function G3(){return vn.x||vn.y}function eI(t,s,a){var l;if(t instanceof Element)return[t];if(typeof t=="string"){let n=document;const r=(l=void 0)!==null&&l!==void 0?l:n.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}function W3(t,s){const a=eI(t),l=new AbortController,n={passive:!0,...s,signal:l.signal};return[a,n,()=>l.abort()]}function h2(t){return s=>{s.pointerType==="touch"||G3()||t(s)}}function tI(t,s,a={}){const[l,n,r]=W3(t,a),i=h2(o=>{const{target:d}=o,u=s(o);if(typeof u!="function"||!d)return;const x=h2(p=>{u(p),d.removeEventListener("pointerleave",x)});d.addEventListener("pointerleave",x,n)});return l.forEach(o=>{o.addEventListener("pointerenter",i,n)}),r}const H3=(t,s)=>s?t===s?!0:H3(t,s.parentElement):!1,Ny=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,sI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aI(t){return sI.has(t.tagName)||t.tabIndex!==-1}const ou=new WeakSet;function f2(t){return s=>{s.key==="Enter"&&t(s)}}function pf(t,s){t.dispatchEvent(new PointerEvent("pointer"+s,{isPrimary:!0,bubbles:!0}))}const lI=(t,s)=>{const a=t.currentTarget;if(!a)return;const l=f2(()=>{if(ou.has(a))return;pf(a,"down");const n=f2(()=>{pf(a,"up")}),r=()=>pf(a,"cancel");a.addEventListener("keyup",n,s),a.addEventListener("blur",r,s)});a.addEventListener("keydown",l,s),a.addEventListener("blur",()=>a.removeEventListener("keydown",l),s)};function g2(t){return Ny(t)&&!G3()}function nI(t,s,a={}){const[l,n,r]=W3(t,a),i=o=>{const d=o.currentTarget;if(!g2(o)||ou.has(d))return;ou.add(d);const u=s(o),x=(j,y)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",h),!(!g2(j)||!ou.has(d))&&(ou.delete(d),typeof u=="function"&&u(j,{success:y}))},p=j=>{x(j,a.useGlobalTarget||H3(d,j.target))},h=j=>{x(j,!1)};window.addEventListener("pointerup",p,n),window.addEventListener("pointercancel",h,n)};return l.forEach(o=>{!aI(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(a.useGlobalTarget?window:o).addEventListener("pointerdown",i,n),o.addEventListener("focus",u=>lI(u,n),n)}),r}function rI(t){return t==="x"||t==="y"?vn[t]?null:(vn[t]=!0,()=>{vn[t]=!1}):vn.x||vn.y?null:(vn.x=vn.y=!0,()=>{vn.x=vn.y=!1})}const K3=new Set(["width","height","top","left","right","bottom",...vc]);let ip;function iI(){ip=void 0}const lr={now:()=>(ip===void 0&&lr.set(Ma.isProcessing||s$.useManualTiming?Ma.timestamp:performance.now()),ip),set:t=>{ip=t,queueMicrotask(iI)}};function wy(t,s){t.indexOf(s)===-1&&t.push(s)}function ky(t,s){const a=t.indexOf(s);a>-1&&t.splice(a,1)}class Cy{constructor(){this.subscriptions=[]}add(s){return wy(this.subscriptions,s),()=>ky(this.subscriptions,s)}notify(s,a,l){const n=this.subscriptions.length;if(n)if(n===1)this.subscriptions[0](s,a,l);else for(let r=0;r<n;r++){const i=this.subscriptions[r];i&&i(s,a,l)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function X3(t,s){return s?t*(1e3/s):0}const v2=30,oI=t=>!isNaN(parseFloat(t));class dI{constructor(s,a={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(l,n=!0)=>{const r=lr.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(l),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),n&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(s),this.owner=a.owner}setCurrent(s){this.current=s,this.updatedAt=lr.now(),this.canTrackVelocity===null&&s!==void 0&&(this.canTrackVelocity=oI(this.current))}setPrevFrameValue(s=this.current){this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt}onChange(s){return this.on("change",s)}on(s,a){this.events[s]||(this.events[s]=new Cy);const l=this.events[s].add(a);return s==="change"?()=>{l(),us.read(()=>{this.events.change.getSize()||this.stop()})}:l}clearListeners(){for(const s in this.events)this.events[s].clear()}attach(s,a){this.passiveEffect=s,this.stopPassiveEffect=a}set(s,a=!0){!a||!this.passiveEffect?this.updateAndNotify(s,a):this.passiveEffect(s,this.updateAndNotify)}setWithVelocity(s,a,l){this.set(a),this.prev=void 0,this.prevFrameValue=s,this.prevUpdatedAt=this.updatedAt-l}jump(s,a=!0){this.updateAndNotify(s),this.prev=s,this.prevUpdatedAt=this.prevFrameValue=void 0,a&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const s=lr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||s-this.updatedAt>v2)return 0;const a=Math.min(this.updatedAt-this.prevUpdatedAt,v2);return X3(parseFloat(this.current)-parseFloat(this.prevFrameValue),a)}start(s){return this.stop(),new Promise(a=>{this.hasAnimated=!0,this.animation=s(a),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function lm(t,s){return new dI(t,s)}function cI(t,s,a){t.hasValue(s)?t.getValue(s).set(a):t.addValue(s,lm(a))}function uI(t,s){const a=N0(t,s);let{transitionEnd:l={},transition:n={},...r}=a||{};r={...r,...l};for(const i in r){const o=w$(r[i]);cI(t,i,o)}}function mI(t){return!!(Ha(t)&&t.add)}function rb(t,s){const a=t.getValue("willChange");if(mI(a))return a.add(s)}function Y3(t){return t.props[S3]}const Q3=(t,s,a)=>(((1-3*a+3*s)*t+(3*a-6*s))*t+3*s)*t,xI=1e-7,pI=12;function hI(t,s,a,l,n){let r,i,o=0;do i=s+(a-s)/2,r=Q3(i,l,n)-t,r>0?a=i:s=i;while(Math.abs(r)>xI&&++o<pI);return i}function Sm(t,s,a,l){if(t===s&&a===l)return Rl;const n=r=>hI(r,0,1,t,a);return r=>r===0||r===1?r:Q3(n(r),s,l)}const J3=t=>s=>s<=.5?t(2*s)/2:(2-t(2*(1-s)))/2,Z3=t=>s=>1-t(1-s),eS=Sm(.33,1.53,.69,.99),Sy=Z3(eS),tS=J3(Sy),sS=t=>(t*=2)<1?.5*Sy(t):.5*(2-Math.pow(2,-10*(t-1))),Ay=t=>1-Math.sin(Math.acos(t)),aS=Z3(Ay),lS=J3(Ay),nS=t=>/^0[^.\s]+$/u.test(t);function fI(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nS(t):!0}const wu=t=>Math.round(t*1e5)/1e5,Ey=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function gI(t){return t==null}const vI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Py=(t,s)=>a=>!!(typeof a=="string"&&vI.test(a)&&a.startsWith(t)||s&&!gI(a)&&Object.prototype.hasOwnProperty.call(a,s)),rS=(t,s,a)=>l=>{if(typeof l!="string")return l;const[n,r,i,o]=l.match(Ey);return{[t]:parseFloat(n),[s]:parseFloat(r),[a]:parseFloat(i),alpha:o!==void 0?parseFloat(o):1}},bI=t=>Fr(0,255,t),hf={...bc,transform:t=>Math.round(bI(t))},ho={test:Py("rgb","red"),parse:rS("red","green","blue"),transform:({red:t,green:s,blue:a,alpha:l=1})=>"rgba("+hf.transform(t)+", "+hf.transform(s)+", "+hf.transform(a)+", "+wu(am.transform(l))+")"};function jI(t){let s="",a="",l="",n="";return t.length>5?(s=t.substring(1,3),a=t.substring(3,5),l=t.substring(5,7),n=t.substring(7,9)):(s=t.substring(1,2),a=t.substring(2,3),l=t.substring(3,4),n=t.substring(4,5),s+=s,a+=a,l+=l,n+=n),{red:parseInt(s,16),green:parseInt(a,16),blue:parseInt(l,16),alpha:n?parseInt(n,16)/255:1}}const ib={test:Py("#"),parse:jI,transform:ho.transform},Rd={test:Py("hsl","hue"),parse:rS("hue","saturation","lightness"),transform:({hue:t,saturation:s,lightness:a,alpha:l=1})=>"hsla("+Math.round(t)+", "+ar.transform(wu(s))+", "+ar.transform(wu(a))+", "+wu(am.transform(l))+")"},za={test:t=>ho.test(t)||ib.test(t)||Rd.test(t),parse:t=>ho.test(t)?ho.parse(t):Rd.test(t)?Rd.parse(t):ib.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ho.transform(t):Rd.transform(t)},yI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function NI(t){var s,a;return isNaN(t)&&typeof t=="string"&&(((s=t.match(Ey))===null||s===void 0?void 0:s.length)||0)+(((a=t.match(yI))===null||a===void 0?void 0:a.length)||0)>0}const iS="number",oS="color",wI="var",kI="var(",b2="${}",CI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function nm(t){const s=t.toString(),a=[],l={color:[],number:[],var:[]},n=[];let r=0;const o=s.replace(CI,d=>(za.test(d)?(l.color.push(r),n.push(oS),a.push(za.parse(d))):d.startsWith(kI)?(l.var.push(r),n.push(wI),a.push(d)):(l.number.push(r),n.push(iS),a.push(parseFloat(d))),++r,b2)).split(b2);return{values:a,split:o,indexes:l,types:n}}function dS(t){return nm(t).values}function cS(t){const{split:s,types:a}=nm(t),l=s.length;return n=>{let r="";for(let i=0;i<l;i++)if(r+=s[i],n[i]!==void 0){const o=a[i];o===iS?r+=wu(n[i]):o===oS?r+=za.transform(n[i]):r+=n[i]}return r}}const SI=t=>typeof t=="number"?0:t;function AI(t){const s=dS(t);return cS(t)(s.map(SI))}const Ri={test:NI,parse:dS,createTransformer:cS,getAnimatableNone:AI},EI=new Set(["brightness","contrast","saturate","opacity"]);function PI(t){const[s,a]=t.slice(0,-1).split("(");if(s==="drop-shadow")return t;const[l]=a.match(Ey)||[];if(!l)return t;const n=a.replace(l,"");let r=EI.has(s)?1:0;return l!==a&&(r*=100),s+"("+r+n+")"}const MI=/\b([a-z-]*)\(.*?\)/gu,ob={...Ri,getAnimatableNone:t=>{const s=t.match(MI);return s?s.map(PI).join(" "):t}},TI={...xy,color:za,backgroundColor:za,outlineColor:za,fill:za,stroke:za,borderColor:za,borderTopColor:za,borderRightColor:za,borderBottomColor:za,borderLeftColor:za,filter:ob,WebkitFilter:ob},My=t=>TI[t];function uS(t,s){let a=My(t);return a!==ob&&(a=Ri),a.getAnimatableNone?a.getAnimatableNone(s):void 0}const RI=new Set(["auto","none","0"]);function DI(t,s,a){let l=0,n;for(;l<t.length&&!n;){const r=t[l];typeof r=="string"&&!RI.has(r)&&nm(r).values.length&&(n=t[l]),l++}if(n&&a)for(const r of s)t[r]=uS(a,n)}const j2=t=>t===bc||t===dt,y2=(t,s)=>parseFloat(t.split(", ")[s]),N2=(t,s)=>(a,{transform:l})=>{if(l==="none"||!l)return 0;const n=l.match(/^matrix3d\((.+)\)$/u);if(n)return y2(n[1],s);{const r=l.match(/^matrix\((.+)\)$/u);return r?y2(r[1],t):0}},OI=new Set(["x","y","z"]),$I=vc.filter(t=>!OI.has(t));function II(t){const s=[];return $I.forEach(a=>{const l=t.getValue(a);l!==void 0&&(s.push([a,l.get()]),l.set(a.startsWith("scale")?1:0))}),s}const ic={width:({x:t},{paddingLeft:s="0",paddingRight:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),height:({y:t},{paddingTop:s="0",paddingBottom:a="0"})=>t.max-t.min-parseFloat(s)-parseFloat(a),top:(t,{top:s})=>parseFloat(s),left:(t,{left:s})=>parseFloat(s),bottom:({y:t},{top:s})=>parseFloat(s)+(t.max-t.min),right:({x:t},{left:s})=>parseFloat(s)+(t.max-t.min),x:N2(4,13),y:N2(5,14)};ic.translateX=ic.x;ic.translateY=ic.y;const No=new Set;let db=!1,cb=!1;function mS(){if(cb){const t=Array.from(No).filter(l=>l.needsMeasurement),s=new Set(t.map(l=>l.element)),a=new Map;s.forEach(l=>{const n=II(l);n.length&&(a.set(l,n),l.render())}),t.forEach(l=>l.measureInitialState()),s.forEach(l=>{l.render();const n=a.get(l);n&&n.forEach(([r,i])=>{var o;(o=l.getValue(r))===null||o===void 0||o.set(i)})}),t.forEach(l=>l.measureEndState()),t.forEach(l=>{l.suspendedScrollY!==void 0&&window.scrollTo(0,l.suspendedScrollY)})}cb=!1,db=!1,No.forEach(t=>t.complete()),No.clear()}function xS(){No.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(cb=!0)})}function LI(){xS(),mS()}class Ty{constructor(s,a,l,n,r,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...s],this.onComplete=a,this.name=l,this.motionValue=n,this.element=r,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(No.add(this),db||(db=!0,us.read(xS),us.resolveKeyframes(mS))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:s,name:a,element:l,motionValue:n}=this;for(let r=0;r<s.length;r++)if(s[r]===null)if(r===0){const i=n==null?void 0:n.get(),o=s[s.length-1];if(i!==void 0)s[0]=i;else if(l&&a){const d=l.readValue(a,o);d!=null&&(s[0]=d)}s[0]===void 0&&(s[0]=o),n&&i===void 0&&n.set(s[0])}else s[r]=s[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),No.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,No.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const pS=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),FI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _I(t){const s=FI.exec(t);if(!s)return[,];const[,a,l,n]=s;return[`--${a??l}`,n]}function hS(t,s,a=1){const[l,n]=_I(t);if(!l)return;const r=window.getComputedStyle(s).getPropertyValue(l);if(r){const i=r.trim();return pS(i)?parseFloat(i):i}return my(n)?hS(n,s,a+1):n}const fS=t=>s=>s.test(t),VI={test:t=>t==="auto",parse:t=>t},gS=[bc,dt,ar,ri,P$,E$,VI],w2=t=>gS.find(fS(t));class vS extends Ty{constructor(s,a,l,n,r){super(s,a,l,n,r,!0)}readKeyframes(){const{unresolvedKeyframes:s,element:a,name:l}=this;if(!a||!a.current)return;super.readKeyframes();for(let d=0;d<s.length;d++){let u=s[d];if(typeof u=="string"&&(u=u.trim(),my(u))){const x=hS(u,a.current);x!==void 0&&(s[d]=x),d===s.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!K3.has(l)||s.length!==2)return;const[n,r]=s,i=w2(n),o=w2(r);if(i!==o)if(j2(i)&&j2(o))for(let d=0;d<s.length;d++){const u=s[d];typeof u=="string"&&(s[d]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:s,name:a}=this,l=[];for(let n=0;n<s.length;n++)fI(s[n])&&l.push(n);l.length&&DI(s,l,a)}measureInitialState(){const{element:s,unresolvedKeyframes:a,name:l}=this;if(!s||!s.current)return;l==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ic[l](s.measureViewportBox(),window.getComputedStyle(s.current)),a[0]=this.measuredOrigin;const n=a[a.length-1];n!==void 0&&s.getValue(l,n).jump(n,!1)}measureEndState(){var s;const{element:a,name:l,unresolvedKeyframes:n}=this;if(!a||!a.current)return;const r=a.getValue(l);r&&r.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=ic[l](a.measureViewportBox(),window.getComputedStyle(a.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((s=this.removedTransforms)===null||s===void 0)&&s.length&&this.removedTransforms.forEach(([d,u])=>{a.getValue(d).set(u)}),this.resolveNoneKeyframes()}}const k2=(t,s)=>s==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ri.test(t)||t==="0")&&!t.startsWith("url("));function BI(t){const s=t[0];if(t.length===1)return!0;for(let a=0;a<t.length;a++)if(t[a]!==s)return!0}function UI(t,s,a,l){const n=t[0];if(n===null)return!1;if(s==="display"||s==="visibility")return!0;const r=t[t.length-1],i=k2(n,s),o=k2(r,s);return!i||!o?!1:BI(t)||(a==="spring"||jy(a))&&l}const qI=t=>t!==null;function w0(t,{repeat:s,repeatType:a="loop"},l){const n=t.filter(qI),r=s&&a!=="loop"&&s%2===1?0:n.length-1;return!r||l===void 0?n[r]:l}const zI=40;class bS{constructor({autoplay:s=!0,delay:a=0,type:l="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:i="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=lr.now(),this.options={autoplay:s,delay:a,type:l,repeat:n,repeatDelay:r,repeatType:i,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>zI?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&LI(),this._resolved}onKeyframesResolved(s,a){this.resolvedAt=lr.now(),this.hasAttemptedResolve=!0;const{name:l,type:n,velocity:r,delay:i,onComplete:o,onUpdate:d,isGenerator:u}=this.options;if(!u&&!UI(s,l,n,r))if(i)this.options.duration=0;else{d&&d(w0(s,this.options,a)),o&&o(),this.resolveFinishedPromise();return}const x=this.initPlayback(s,a);x!==!1&&(this._resolved={keyframes:s,finalKeyframe:a,...x},this.onPostResolved())}onPostResolved(){}then(s,a){return this.currentFinishedPromise.then(s,a)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(s=>{this.resolveFinishedPromise=s})}}const Ss=(t,s,a)=>t+(s-t)*a;function ff(t,s,a){return a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+(s-t)*6*a:a<1/2?s:a<2/3?t+(s-t)*(2/3-a)*6:t}function GI({hue:t,saturation:s,lightness:a,alpha:l}){t/=360,s/=100,a/=100;let n=0,r=0,i=0;if(!s)n=r=i=a;else{const o=a<.5?a*(1+s):a+s-a*s,d=2*a-o;n=ff(d,o,t+1/3),r=ff(d,o,t),i=ff(d,o,t-1/3)}return{red:Math.round(n*255),green:Math.round(r*255),blue:Math.round(i*255),alpha:l}}function Yp(t,s){return a=>a>0?s:t}const gf=(t,s,a)=>{const l=t*t,n=a*(s*s-l)+l;return n<0?0:Math.sqrt(n)},WI=[ib,ho,Rd],HI=t=>WI.find(s=>s.test(t));function C2(t){const s=HI(t);if(!s)return!1;let a=s.parse(t);return s===Rd&&(a=GI(a)),a}const S2=(t,s)=>{const a=C2(t),l=C2(s);if(!a||!l)return Yp(t,s);const n={...a};return r=>(n.red=gf(a.red,l.red,r),n.green=gf(a.green,l.green,r),n.blue=gf(a.blue,l.blue,r),n.alpha=Ss(a.alpha,l.alpha,r),ho.transform(n))},KI=(t,s)=>a=>s(t(a)),Am=(...t)=>t.reduce(KI),ub=new Set(["none","hidden"]);function XI(t,s){return ub.has(t)?a=>a<=0?t:s:a=>a>=1?s:t}function YI(t,s){return a=>Ss(t,s,a)}function Ry(t){return typeof t=="number"?YI:typeof t=="string"?my(t)?Yp:za.test(t)?S2:ZI:Array.isArray(t)?jS:typeof t=="object"?za.test(t)?S2:QI:Yp}function jS(t,s){const a=[...t],l=a.length,n=t.map((r,i)=>Ry(r)(r,s[i]));return r=>{for(let i=0;i<l;i++)a[i]=n[i](r);return a}}function QI(t,s){const a={...t,...s},l={};for(const n in a)t[n]!==void 0&&s[n]!==void 0&&(l[n]=Ry(t[n])(t[n],s[n]));return n=>{for(const r in l)a[r]=l[r](n);return a}}function JI(t,s){var a;const l=[],n={color:0,var:0,number:0};for(let r=0;r<s.values.length;r++){const i=s.types[r],o=t.indexes[i][n[i]],d=(a=t.values[o])!==null&&a!==void 0?a:0;l[r]=d,n[i]++}return l}const ZI=(t,s)=>{const a=Ri.createTransformer(s),l=nm(t),n=nm(s);return l.indexes.var.length===n.indexes.var.length&&l.indexes.color.length===n.indexes.color.length&&l.indexes.number.length>=n.indexes.number.length?ub.has(t)&&!n.values.length||ub.has(s)&&!l.values.length?XI(t,s):Am(jS(JI(l,n),n.values),a):Yp(t,s)};function yS(t,s,a){return typeof t=="number"&&typeof s=="number"&&typeof a=="number"?Ss(t,s,a):Ry(t)(t,s)}const e8=5;function NS(t,s,a){const l=Math.max(s-e8,0);return X3(a-t(l),s-l)}const $s={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},vf=.001;function t8({duration:t=$s.duration,bounce:s=$s.bounce,velocity:a=$s.velocity,mass:l=$s.mass}){let n,r,i=1-s;i=Fr($s.minDamping,$s.maxDamping,i),t=Fr($s.minDuration,$s.maxDuration,Mr(t)),i<1?(n=u=>{const x=u*i,p=x*t,h=x-a,j=mb(u,i),y=Math.exp(-p);return vf-h/j*y},r=u=>{const p=u*i*t,h=p*a+a,j=Math.pow(i,2)*Math.pow(u,2)*t,y=Math.exp(-p),f=mb(Math.pow(u,2),i);return(-n(u)+vf>0?-1:1)*((h-j)*y)/f}):(n=u=>{const x=Math.exp(-u*t),p=(u-a)*t+1;return-vf+x*p},r=u=>{const x=Math.exp(-u*t),p=(a-u)*(t*t);return x*p});const o=5/t,d=a8(n,r,o);if(t=Pr(t),isNaN(d))return{stiffness:$s.stiffness,damping:$s.damping,duration:t};{const u=Math.pow(d,2)*l;return{stiffness:u,damping:i*2*Math.sqrt(l*u),duration:t}}}const s8=12;function a8(t,s,a){let l=a;for(let n=1;n<s8;n++)l=l-t(l)/s(l);return l}function mb(t,s){return t*Math.sqrt(1-s*s)}const l8=["duration","bounce"],n8=["stiffness","damping","mass"];function A2(t,s){return s.some(a=>t[a]!==void 0)}function r8(t){let s={velocity:$s.velocity,stiffness:$s.stiffness,damping:$s.damping,mass:$s.mass,isResolvedFromDuration:!1,...t};if(!A2(t,n8)&&A2(t,l8))if(t.visualDuration){const a=t.visualDuration,l=2*Math.PI/(a*1.2),n=l*l,r=2*Fr(.05,1,1-(t.bounce||0))*Math.sqrt(n);s={...s,mass:$s.mass,stiffness:n,damping:r}}else{const a=t8(t);s={...s,...a,mass:$s.mass},s.isResolvedFromDuration=!0}return s}function wS(t=$s.visualDuration,s=$s.bounce){const a=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:s}:t;let{restSpeed:l,restDelta:n}=a;const r=a.keyframes[0],i=a.keyframes[a.keyframes.length-1],o={done:!1,value:r},{stiffness:d,damping:u,mass:x,duration:p,velocity:h,isResolvedFromDuration:j}=r8({...a,velocity:-Mr(a.velocity||0)}),y=h||0,f=u/(2*Math.sqrt(d*x)),I=i-r,A=Mr(Math.sqrt(d/x)),b=Math.abs(I)<5;l||(l=b?$s.restSpeed.granular:$s.restSpeed.default),n||(n=b?$s.restDelta.granular:$s.restDelta.default);let C;if(f<1){const z=mb(A,f);C=$=>{const D=Math.exp(-f*A*$);return i-D*((y+f*A*I)/z*Math.sin(z*$)+I*Math.cos(z*$))}}else if(f===1)C=z=>i-Math.exp(-A*z)*(I+(y+A*I)*z);else{const z=A*Math.sqrt(f*f-1);C=$=>{const D=Math.exp(-f*A*$),W=Math.min(z*$,300);return i-D*((y+f*A*I)*Math.sinh(W)+z*I*Math.cosh(W))/z}}const S={calculatedDuration:j&&p||null,next:z=>{const $=C(z);if(j)o.done=z>=p;else{let D=0;f<1&&(D=z===0?Pr(y):NS(C,z,$));const W=Math.abs(D)<=l,he=Math.abs(i-$)<=n;o.done=W&&he}return o.value=o.done?i:$,o},toString:()=>{const z=Math.min(B3(S),lb),$=U3(D=>S.next(z*D).value,z,30);return z+"ms "+$}};return S}function E2({keyframes:t,velocity:s=0,power:a=.8,timeConstant:l=325,bounceDamping:n=10,bounceStiffness:r=500,modifyTarget:i,min:o,max:d,restDelta:u=.5,restSpeed:x}){const p=t[0],h={done:!1,value:p},j=W=>o!==void 0&&W<o||d!==void 0&&W>d,y=W=>o===void 0?d:d===void 0||Math.abs(o-W)<Math.abs(d-W)?o:d;let f=a*s;const I=p+f,A=i===void 0?I:i(I);A!==I&&(f=A-p);const b=W=>-f*Math.exp(-W/l),C=W=>A+b(W),S=W=>{const he=b(W),V=C(W);h.done=Math.abs(he)<=u,h.value=h.done?A:V};let z,$;const D=W=>{j(h.value)&&(z=W,$=wS({keyframes:[h.value,y(h.value)],velocity:NS(C,W,h.value),damping:n,stiffness:r,restDelta:u,restSpeed:x}))};return D(0),{calculatedDuration:null,next:W=>{let he=!1;return!$&&z===void 0&&(he=!0,S(W),D(W)),z!==void 0&&W>=z?$.next(W-z):(!he&&S(W),h)}}}const i8=Sm(.42,0,1,1),o8=Sm(0,0,.58,1),kS=Sm(.42,0,.58,1),d8=t=>Array.isArray(t)&&typeof t[0]!="number",c8={linear:Rl,easeIn:i8,easeInOut:kS,easeOut:o8,circIn:Ay,circInOut:lS,circOut:aS,backIn:Sy,backInOut:tS,backOut:eS,anticipate:sS},P2=t=>{if(yy(t)){y3(t.length===4);const[s,a,l,n]=t;return Sm(s,a,l,n)}else if(typeof t=="string")return c8[t];return t};function u8(t,s,a){const l=[],n=a||yS,r=t.length-1;for(let i=0;i<r;i++){let o=n(t[i],t[i+1]);if(s){const d=Array.isArray(s)?s[i]||Rl:s;o=Am(d,o)}l.push(o)}return l}function m8(t,s,{clamp:a=!0,ease:l,mixer:n}={}){const r=t.length;if(y3(r===s.length),r===1)return()=>s[0];if(r===2&&s[0]===s[1])return()=>s[1];const i=t[0]===t[1];t[0]>t[r-1]&&(t=[...t].reverse(),s=[...s].reverse());const o=u8(s,l,n),d=o.length,u=x=>{if(i&&x<t[0])return s[0];let p=0;if(d>1)for(;p<t.length-2&&!(x<t[p+1]);p++);const h=nc(t[p],t[p+1],x);return o[p](h)};return a?x=>u(Fr(t[0],t[r-1],x)):u}function x8(t,s){const a=t[t.length-1];for(let l=1;l<=s;l++){const n=nc(0,s,l);t.push(Ss(a,1,n))}}function p8(t){const s=[0];return x8(s,t.length-1),s}function h8(t,s){return t.map(a=>a*s)}function f8(t,s){return t.map(()=>s||kS).splice(0,t.length-1)}function Qp({duration:t=300,keyframes:s,times:a,ease:l="easeInOut"}){const n=d8(l)?l.map(P2):P2(l),r={done:!1,value:s[0]},i=h8(a&&a.length===s.length?a:p8(s),t),o=m8(i,s,{ease:Array.isArray(n)?n:f8(s,n)});return{calculatedDuration:t,next:d=>(r.value=o(d),r.done=d>=t,r)}}const g8=t=>{const s=({timestamp:a})=>t(a);return{start:()=>us.update(s,!0),stop:()=>Ti(s),now:()=>Ma.isProcessing?Ma.timestamp:lr.now()}},v8={decay:E2,inertia:E2,tween:Qp,keyframes:Qp,spring:wS},b8=t=>t/100;class Dy extends bS{constructor(s){super(s),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:d}=this.options;d&&d()};const{name:a,motionValue:l,element:n,keyframes:r}=this.options,i=(n==null?void 0:n.KeyframeResolver)||Ty,o=(d,u)=>this.onKeyframesResolved(d,u);this.resolver=new i(r,o,a,l,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(s){const{type:a="keyframes",repeat:l=0,repeatDelay:n=0,repeatType:r,velocity:i=0}=this.options,o=jy(a)?a:v8[a]||Qp;let d,u;o!==Qp&&typeof s[0]!="number"&&(d=Am(b8,yS(s[0],s[1])),s=[0,100]);const x=o({...this.options,keyframes:s});r==="mirror"&&(u=o({...this.options,keyframes:[...s].reverse(),velocity:-i})),x.calculatedDuration===null&&(x.calculatedDuration=B3(x));const{calculatedDuration:p}=x,h=p+n,j=h*(l+1)-n;return{generator:x,mirroredGenerator:u,mapPercentToKeyframes:d,calculatedDuration:p,resolvedDuration:h,totalDuration:j}}onPostResolved(){const{autoplay:s=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!s?this.pause():this.state=this.pendingPlayState}tick(s,a=!1){const{resolved:l}=this;if(!l){const{keyframes:W}=this.options;return{done:!0,value:W[W.length-1]}}const{finalKeyframe:n,generator:r,mirroredGenerator:i,mapPercentToKeyframes:o,keyframes:d,calculatedDuration:u,totalDuration:x,resolvedDuration:p}=l;if(this.startTime===null)return r.next(0);const{delay:h,repeat:j,repeatType:y,repeatDelay:f,onUpdate:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,s):this.speed<0&&(this.startTime=Math.min(s-x/this.speed,this.startTime)),a?this.currentTime=s:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(s-this.startTime)*this.speed;const A=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?A<0:A>x;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=x);let C=this.currentTime,S=r;if(j){const W=Math.min(this.currentTime,x)/p;let he=Math.floor(W),V=W%1;!V&&W>=1&&(V=1),V===1&&he--,he=Math.min(he,j+1),!!(he%2)&&(y==="reverse"?(V=1-V,f&&(V-=f/p)):y==="mirror"&&(S=i)),C=Fr(0,1,V)*p}const z=b?{done:!1,value:d[0]}:S.next(C);o&&(z.value=o(z.value));let{done:$}=z;!b&&u!==null&&($=this.speed>=0?this.currentTime>=x:this.currentTime<=0);const D=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return D&&n!==void 0&&(z.value=w0(d,this.options,n)),I&&I(z.value),D&&this.finish(),z}get duration(){const{resolved:s}=this;return s?Mr(s.calculatedDuration):0}get time(){return Mr(this.currentTime)}set time(s){s=Pr(s),this.currentTime=s,this.holdTime!==null||this.speed===0?this.holdTime=s:this.driver&&(this.startTime=this.driver.now()-s/this.speed)}get speed(){return this.playbackSpeed}set speed(s){const a=this.playbackSpeed!==s;this.playbackSpeed=s,a&&(this.time=Mr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:s=g8,onPlay:a,startTime:l}=this.options;this.driver||(this.driver=s(r=>this.tick(r))),a&&a();const n=this.driver.now();this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=n):this.startTime=l??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var s;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(s=this.currentTime)!==null&&s!==void 0?s:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:s}=this.options;s&&s()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(s){return this.startTime=0,this.tick(s,!0)}}const j8=new Set(["opacity","clipPath","filter","transform"]);function y8(t,s,a,{delay:l=0,duration:n=300,repeat:r=0,repeatType:i="loop",ease:o="easeInOut",times:d}={}){const u={[s]:a};d&&(u.offset=d);const x=z3(o,n);return Array.isArray(x)&&(u.easing=x),t.animate(u,{delay:l,duration:n,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:r+1,direction:i==="reverse"?"alternate":"normal"})}const N8=ny(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Jp=10,w8=2e4;function k8(t){return jy(t.type)||t.type==="spring"||!q3(t.ease)}function C8(t,s){const a=new Dy({...s,keyframes:t,repeat:0,delay:0,isGenerator:!0});let l={done:!1,value:t[0]};const n=[];let r=0;for(;!l.done&&r<w8;)l=a.sample(r),n.push(l.value),r+=Jp;return{times:void 0,keyframes:n,duration:r-Jp,ease:"linear"}}const CS={anticipate:sS,backInOut:tS,circInOut:lS};function S8(t){return t in CS}class M2 extends bS{constructor(s){super(s);const{name:a,motionValue:l,element:n,keyframes:r}=this.options;this.resolver=new vS(r,(i,o)=>this.onKeyframesResolved(i,o),a,l,n),this.resolver.scheduleResolve()}initPlayback(s,a){let{duration:l=300,times:n,ease:r,type:i,motionValue:o,name:d,startTime:u}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof r=="string"&&Xp()&&S8(r)&&(r=CS[r]),k8(this.options)){const{onComplete:p,onUpdate:h,motionValue:j,element:y,...f}=this.options,I=C8(s,f);s=I.keyframes,s.length===1&&(s[1]=s[0]),l=I.duration,n=I.times,r=I.ease,i="keyframes"}const x=y8(o.owner.current,d,s,{...this.options,duration:l,times:n,ease:r});return x.startTime=u??this.calcStartTime(),this.pendingTimeline?(p2(x,this.pendingTimeline),this.pendingTimeline=void 0):x.onfinish=()=>{const{onComplete:p}=this.options;o.set(w0(s,this.options,a)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:x,duration:l,times:n,type:i,ease:r,keyframes:s}}get duration(){const{resolved:s}=this;if(!s)return 0;const{duration:a}=s;return Mr(a)}get time(){const{resolved:s}=this;if(!s)return 0;const{animation:a}=s;return Mr(a.currentTime||0)}set time(s){const{resolved:a}=this;if(!a)return;const{animation:l}=a;l.currentTime=Pr(s)}get speed(){const{resolved:s}=this;if(!s)return 1;const{animation:a}=s;return a.playbackRate}set speed(s){const{resolved:a}=this;if(!a)return;const{animation:l}=a;l.playbackRate=s}get state(){const{resolved:s}=this;if(!s)return"idle";const{animation:a}=s;return a.playState}get startTime(){const{resolved:s}=this;if(!s)return null;const{animation:a}=s;return a.startTime}attachTimeline(s){if(!this._resolved)this.pendingTimeline=s;else{const{resolved:a}=this;if(!a)return Rl;const{animation:l}=a;p2(l,s)}return Rl}play(){if(this.isStopped)return;const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.playState==="finished"&&this.updateFinishedPromise(),a.play()}pause(){const{resolved:s}=this;if(!s)return;const{animation:a}=s;a.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:s}=this;if(!s)return;const{animation:a,keyframes:l,duration:n,type:r,ease:i,times:o}=s;if(a.playState==="idle"||a.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:x,onComplete:p,element:h,...j}=this.options,y=new Dy({...j,keyframes:l,duration:n,type:r,ease:i,times:o,isGenerator:!0}),f=Pr(this.time);u.setWithVelocity(y.sample(f-Jp).value,y.sample(f).value,Jp)}const{onStop:d}=this.options;d&&d(),this.cancel()}complete(){const{resolved:s}=this;s&&s.animation.finish()}cancel(){const{resolved:s}=this;s&&s.animation.cancel()}static supports(s){const{motionValue:a,name:l,repeatDelay:n,repeatType:r,damping:i,type:o}=s;if(!a||!a.owner||!(a.owner.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:u}=a.owner.getProps();return N8()&&l&&j8.has(l)&&!d&&!u&&!n&&r!=="mirror"&&i!==0&&o!=="inertia"}}const A8={type:"spring",stiffness:500,damping:25,restSpeed:10},E8=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),P8={type:"keyframes",duration:.8},M8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},T8=(t,{keyframes:s})=>s.length>2?P8:Io.has(t)?t.startsWith("scale")?E8(s[1]):A8:M8;function R8({when:t,delay:s,delayChildren:a,staggerChildren:l,staggerDirection:n,repeat:r,repeatType:i,repeatDelay:o,from:d,elapsed:u,...x}){return!!Object.keys(x).length}const Oy=(t,s,a,l={},n,r)=>i=>{const o=by(l,t)||{},d=o.delay||l.delay||0;let{elapsed:u=0}=l;u=u-Pr(d);let x={keyframes:Array.isArray(a)?a:[null,a],ease:"easeOut",velocity:s.getVelocity(),...o,delay:-u,onUpdate:h=>{s.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{i(),o.onComplete&&o.onComplete()},name:t,motionValue:s,element:r?void 0:n};R8(o)||(x={...x,...T8(t,x)}),x.duration&&(x.duration=Pr(x.duration)),x.repeatDelay&&(x.repeatDelay=Pr(x.repeatDelay)),x.from!==void 0&&(x.keyframes[0]=x.from);let p=!1;if((x.type===!1||x.duration===0&&!x.repeatDelay)&&(x.duration=0,x.delay===0&&(p=!0)),p&&!r&&s.get()!==void 0){const h=w0(x.keyframes,o);if(h!==void 0)return us.update(()=>{x.onUpdate(h),x.onComplete()}),new Q$([])}return!r&&M2.supports(x)?new M2(x):new Dy(x)};function D8({protectedKeys:t,needsAnimating:s},a){const l=t.hasOwnProperty(a)&&s[a]!==!0;return s[a]=!1,l}function SS(t,s,{delay:a=0,transitionOverride:l,type:n}={}){var r;let{transition:i=t.getDefaultTransition(),transitionEnd:o,...d}=s;l&&(i=l);const u=[],x=n&&t.animationState&&t.animationState.getState()[n];for(const p in d){const h=t.getValue(p,(r=t.latestValues[p])!==null&&r!==void 0?r:null),j=d[p];if(j===void 0||x&&D8(x,p))continue;const y={delay:a,...by(i||{},p)};let f=!1;if(window.MotionHandoffAnimation){const A=Y3(t);if(A){const b=window.MotionHandoffAnimation(A,p,us);b!==null&&(y.startTime=b,f=!0)}}rb(t,p),h.start(Oy(p,h,j,t.shouldReduceMotion&&K3.has(p)?{type:!1}:y,t,f));const I=h.animation;I&&u.push(I)}return o&&Promise.all(u).then(()=>{us.update(()=>{o&&uI(t,o)})}),u}function xb(t,s,a={}){var l;const n=N0(t,s,a.type==="exit"?(l=t.presenceContext)===null||l===void 0?void 0:l.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=n||{};a.transitionOverride&&(r=a.transitionOverride);const i=n?()=>Promise.all(SS(t,n,a)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:x=0,staggerChildren:p,staggerDirection:h}=r;return O8(t,s,x+u,p,h,a)}:()=>Promise.resolve(),{when:d}=r;if(d){const[u,x]=d==="beforeChildren"?[i,o]:[o,i];return u().then(()=>x())}else return Promise.all([i(),o(a.delay)])}function O8(t,s,a=0,l=0,n=1,r){const i=[],o=(t.variantChildren.size-1)*l,d=n===1?(u=0)=>u*l:(u=0)=>o-u*l;return Array.from(t.variantChildren).sort($8).forEach((u,x)=>{u.notify("AnimationStart",s),i.push(xb(u,s,{...r,delay:a+d(x)}).then(()=>u.notify("AnimationComplete",s)))}),Promise.all(i)}function $8(t,s){return t.sortNodePosition(s)}function I8(t,s,a={}){t.notify("AnimationStart",s);let l;if(Array.isArray(s)){const n=s.map(r=>xb(t,r,a));l=Promise.all(n)}else if(typeof s=="string")l=xb(t,s,a);else{const n=typeof s=="function"?N0(t,s,a.custom):s;l=Promise.all(SS(t,n,a))}return l.then(()=>{t.notify("AnimationComplete",s)})}const L8=iy.length;function AS(t){if(!t)return;if(!t.isControllingVariants){const a=t.parent?AS(t.parent)||{}:{};return t.props.initial!==void 0&&(a.initial=t.props.initial),a}const s={};for(let a=0;a<L8;a++){const l=iy[a],n=t.props[l];(sm(n)||n===!1)&&(s[l]=n)}return s}const F8=[...ry].reverse(),_8=ry.length;function V8(t){return s=>Promise.all(s.map(({animation:a,options:l})=>I8(t,a,l)))}function B8(t){let s=V8(t),a=T2(),l=!0;const n=d=>(u,x)=>{var p;const h=N0(t,x,d==="exit"?(p=t.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(h){const{transition:j,transitionEnd:y,...f}=h;u={...u,...f,...y}}return u};function r(d){s=d(t)}function i(d){const{props:u}=t,x=AS(t.parent)||{},p=[],h=new Set;let j={},y=1/0;for(let I=0;I<_8;I++){const A=F8[I],b=a[A],C=u[A]!==void 0?u[A]:x[A],S=sm(C),z=A===d?b.isActive:null;z===!1&&(y=I);let $=C===x[A]&&C!==u[A]&&S;if($&&l&&t.manuallyAnimateOnMount&&($=!1),b.protectedKeys={...j},!b.isActive&&z===null||!C&&!b.prevProp||j0(C)||typeof C=="boolean")continue;const D=U8(b.prevProp,C);let W=D||A===d&&b.isActive&&!$&&S||I>y&&S,he=!1;const V=Array.isArray(C)?C:[C];let xe=V.reduce(n(A),{});z===!1&&(xe={});const{prevResolvedValues:pe={}}=b,be={...pe,...xe},fe=q=>{W=!0,h.has(q)&&(he=!0,h.delete(q)),b.needsAnimating[q]=!0;const L=t.getValue(q);L&&(L.liveStyle=!1)};for(const q in be){const L=xe[q],M=pe[q];if(j.hasOwnProperty(q))continue;let k=!1;ab(L)&&ab(M)?k=!V3(L,M):k=L!==M,k?L!=null?fe(q):h.add(q):L!==void 0&&h.has(q)?fe(q):b.protectedKeys[q]=!0}b.prevProp=C,b.prevResolvedValues=xe,b.isActive&&(j={...j,...xe}),l&&t.blockInitialAnimation&&(W=!1),W&&(!($&&D)||he)&&p.push(...V.map(q=>({animation:q,options:{type:A}})))}if(h.size){const I={};h.forEach(A=>{const b=t.getBaseTarget(A),C=t.getValue(A);C&&(C.liveStyle=!0),I[A]=b??null}),p.push({animation:I})}let f=!!p.length;return l&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(f=!1),l=!1,f?s(p):Promise.resolve()}function o(d,u){var x;if(a[d].isActive===u)return Promise.resolve();(x=t.variantChildren)===null||x===void 0||x.forEach(h=>{var j;return(j=h.animationState)===null||j===void 0?void 0:j.setActive(d,u)}),a[d].isActive=u;const p=i(d);for(const h in a)a[h].protectedKeys={};return p}return{animateChanges:i,setActive:o,setAnimateFunction:r,getState:()=>a,reset:()=>{a=T2(),l=!0}}}function U8(t,s){return typeof s=="string"?s!==t:Array.isArray(s)?!V3(s,t):!1}function zi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function T2(){return{animate:zi(!0),whileInView:zi(),whileHover:zi(),whileTap:zi(),whileDrag:zi(),whileFocus:zi(),exit:zi()}}class Bi{constructor(s){this.isMounted=!1,this.node=s}update(){}}class q8 extends Bi{constructor(s){super(s),s.animationState||(s.animationState=B8(s))}updateAnimationControlsSubscription(){const{animate:s}=this.node.getProps();j0(s)&&(this.unmountControls=s.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:s}=this.node.getProps(),{animate:a}=this.node.prevProps||{};s!==a&&this.updateAnimationControlsSubscription()}unmount(){var s;this.node.animationState.reset(),(s=this.unmountControls)===null||s===void 0||s.call(this)}}let z8=0;class G8 extends Bi{constructor(){super(...arguments),this.id=z8++}update(){if(!this.node.presenceContext)return;const{isPresent:s,onExitComplete:a}=this.node.presenceContext,{isPresent:l}=this.node.prevPresenceContext||{};if(!this.node.animationState||s===l)return;const n=this.node.animationState.setActive("exit",!s);a&&!s&&n.then(()=>a(this.id))}mount(){const{register:s}=this.node.presenceContext||{};s&&(this.unmount=s(this.id))}unmount(){}}const W8={animation:{Feature:q8},exit:{Feature:G8}};function rm(t,s,a,l={passive:!0}){return t.addEventListener(s,a,l),()=>t.removeEventListener(s,a)}function Em(t){return{point:{x:t.pageX,y:t.pageY}}}const H8=t=>s=>Ny(s)&&t(s,Em(s));function ku(t,s,a,l){return rm(t,s,H8(a),l)}const R2=(t,s)=>Math.abs(t-s);function K8(t,s){const a=R2(t.x,s.x),l=R2(t.y,s.y);return Math.sqrt(a**2+l**2)}class ES{constructor(s,a,{transformPagePoint:l,contextWindow:n,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=jf(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,j=K8(p.offset,{x:0,y:0})>=3;if(!h&&!j)return;const{point:y}=p,{timestamp:f}=Ma;this.history.push({...y,timestamp:f});const{onStart:I,onMove:A}=this.handlers;h||(I&&I(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,p)},this.handlePointerMove=(p,h)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=bf(h,this.transformPagePoint),us.update(this.updatePoint,!0)},this.handlePointerUp=(p,h)=>{this.end();const{onEnd:j,onSessionEnd:y,resumeAnimation:f}=this.handlers;if(this.dragSnapToOrigin&&f&&f(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=jf(p.type==="pointercancel"?this.lastMoveEventInfo:bf(h,this.transformPagePoint),this.history);this.startEvent&&j&&j(p,I),y&&y(p,I)},!Ny(s))return;this.dragSnapToOrigin=r,this.handlers=a,this.transformPagePoint=l,this.contextWindow=n||window;const i=Em(s),o=bf(i,this.transformPagePoint),{point:d}=o,{timestamp:u}=Ma;this.history=[{...d,timestamp:u}];const{onSessionStart:x}=a;x&&x(s,jf(o,this.history)),this.removeListeners=Am(ku(this.contextWindow,"pointermove",this.handlePointerMove),ku(this.contextWindow,"pointerup",this.handlePointerUp),ku(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(s){this.handlers=s}end(){this.removeListeners&&this.removeListeners(),Ti(this.updatePoint)}}function bf(t,s){return s?{point:s(t.point)}:t}function D2(t,s){return{x:t.x-s.x,y:t.y-s.y}}function jf({point:t},s){return{point:t,delta:D2(t,PS(s)),offset:D2(t,X8(s)),velocity:Y8(s,.1)}}function X8(t){return t[0]}function PS(t){return t[t.length-1]}function Y8(t,s){if(t.length<2)return{x:0,y:0};let a=t.length-1,l=null;const n=PS(t);for(;a>=0&&(l=t[a],!(n.timestamp-l.timestamp>Pr(s)));)a--;if(!l)return{x:0,y:0};const r=Mr(n.timestamp-l.timestamp);if(r===0)return{x:0,y:0};const i={x:(n.x-l.x)/r,y:(n.y-l.y)/r};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const MS=1e-4,Q8=1-MS,J8=1+MS,TS=.01,Z8=0-TS,e7=0+TS;function $l(t){return t.max-t.min}function t7(t,s,a){return Math.abs(t-s)<=a}function O2(t,s,a,l=.5){t.origin=l,t.originPoint=Ss(s.min,s.max,t.origin),t.scale=$l(a)/$l(s),t.translate=Ss(a.min,a.max,t.origin)-t.originPoint,(t.scale>=Q8&&t.scale<=J8||isNaN(t.scale))&&(t.scale=1),(t.translate>=Z8&&t.translate<=e7||isNaN(t.translate))&&(t.translate=0)}function Cu(t,s,a,l){O2(t.x,s.x,a.x,l?l.originX:void 0),O2(t.y,s.y,a.y,l?l.originY:void 0)}function $2(t,s,a){t.min=a.min+s.min,t.max=t.min+$l(s)}function s7(t,s,a){$2(t.x,s.x,a.x),$2(t.y,s.y,a.y)}function I2(t,s,a){t.min=s.min-a.min,t.max=t.min+$l(s)}function Su(t,s,a){I2(t.x,s.x,a.x),I2(t.y,s.y,a.y)}function a7(t,{min:s,max:a},l){return s!==void 0&&t<s?t=l?Ss(s,t,l.min):Math.max(t,s):a!==void 0&&t>a&&(t=l?Ss(a,t,l.max):Math.min(t,a)),t}function L2(t,s,a){return{min:s!==void 0?t.min+s:void 0,max:a!==void 0?t.max+a-(t.max-t.min):void 0}}function l7(t,{top:s,left:a,bottom:l,right:n}){return{x:L2(t.x,a,n),y:L2(t.y,s,l)}}function F2(t,s){let a=s.min-t.min,l=s.max-t.max;return s.max-s.min<t.max-t.min&&([a,l]=[l,a]),{min:a,max:l}}function n7(t,s){return{x:F2(t.x,s.x),y:F2(t.y,s.y)}}function r7(t,s){let a=.5;const l=$l(t),n=$l(s);return n>l?a=nc(s.min,s.max-l,t.min):l>n&&(a=nc(t.min,t.max-n,s.min)),Fr(0,1,a)}function i7(t,s){const a={};return s.min!==void 0&&(a.min=s.min-t.min),s.max!==void 0&&(a.max=s.max-t.min),a}const pb=.35;function o7(t=pb){return t===!1?t=0:t===!0&&(t=pb),{x:_2(t,"left","right"),y:_2(t,"top","bottom")}}function _2(t,s,a){return{min:V2(t,s),max:V2(t,a)}}function V2(t,s){return typeof t=="number"?t:t[s]||0}const B2=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dd=()=>({x:B2(),y:B2()}),U2=()=>({min:0,max:0}),zs=()=>({x:U2(),y:U2()});function Kl(t){return[t("x"),t("y")]}function RS({top:t,left:s,right:a,bottom:l}){return{x:{min:s,max:a},y:{min:t,max:l}}}function d7({x:t,y:s}){return{top:s.min,right:t.max,bottom:s.max,left:t.min}}function c7(t,s){if(!s)return t;const a=s({x:t.left,y:t.top}),l=s({x:t.right,y:t.bottom});return{top:a.y,left:a.x,bottom:l.y,right:l.x}}function yf(t){return t===void 0||t===1}function hb({scale:t,scaleX:s,scaleY:a}){return!yf(t)||!yf(s)||!yf(a)}function ro(t){return hb(t)||DS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function DS(t){return q2(t.x)||q2(t.y)}function q2(t){return t&&t!=="0%"}function Zp(t,s,a){const l=t-a,n=s*l;return a+n}function z2(t,s,a,l,n){return n!==void 0&&(t=Zp(t,n,l)),Zp(t,a,l)+s}function fb(t,s=0,a=1,l,n){t.min=z2(t.min,s,a,l,n),t.max=z2(t.max,s,a,l,n)}function OS(t,{x:s,y:a}){fb(t.x,s.translate,s.scale,s.originPoint),fb(t.y,a.translate,a.scale,a.originPoint)}const G2=.999999999999,W2=1.0000000000001;function u7(t,s,a,l=!1){const n=a.length;if(!n)return;s.x=s.y=1;let r,i;for(let o=0;o<n;o++){r=a[o],i=r.projectionDelta;const{visualElement:d}=r.options;d&&d.props.style&&d.props.style.display==="contents"||(l&&r.options.layoutScroll&&r.scroll&&r!==r.root&&$d(t,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),i&&(s.x*=i.x.scale,s.y*=i.y.scale,OS(t,i)),l&&ro(r.latestValues)&&$d(t,r.latestValues))}s.x<W2&&s.x>G2&&(s.x=1),s.y<W2&&s.y>G2&&(s.y=1)}function Od(t,s){t.min=t.min+s,t.max=t.max+s}function H2(t,s,a,l,n=.5){const r=Ss(t.min,t.max,n);fb(t,s,a,r,l)}function $d(t,s){H2(t.x,s.x,s.scaleX,s.scale,s.originX),H2(t.y,s.y,s.scaleY,s.scale,s.originY)}function $S(t,s){return RS(c7(t.getBoundingClientRect(),s))}function m7(t,s,a){const l=$S(t,a),{scroll:n}=s;return n&&(Od(l.x,n.offset.x),Od(l.y,n.offset.y)),l}const IS=({current:t})=>t?t.ownerDocument.defaultView:null,x7=new WeakMap;class p7{constructor(s){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=zs(),this.visualElement=s}start(s,{snapToCursor:a=!1}={}){const{presenceContext:l}=this.visualElement;if(l&&l.isPresent===!1)return;const n=x=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),a&&this.snapToCursor(Em(x).point)},r=(x,p)=>{const{drag:h,dragPropagation:j,onDragStart:y}=this.getProps();if(h&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rI(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kl(I=>{let A=this.getAxisMotionValue(I).get()||0;if(ar.test(A)){const{projection:b}=this.visualElement;if(b&&b.layout){const C=b.layout.layoutBox[I];C&&(A=$l(C)*(parseFloat(A)/100))}}this.originPoint[I]=A}),y&&us.postRender(()=>y(x,p)),rb(this.visualElement,"transform");const{animationState:f}=this.visualElement;f&&f.setActive("whileDrag",!0)},i=(x,p)=>{const{dragPropagation:h,dragDirectionLock:j,onDirectionLock:y,onDrag:f}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:I}=p;if(j&&this.currentDirection===null){this.currentDirection=h7(I),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,I),this.updateAxis("y",p.point,I),this.visualElement.render(),f&&f(x,p)},o=(x,p)=>this.stop(x,p),d=()=>Kl(x=>{var p;return this.getAnimationState(x)==="paused"&&((p=this.getAxisMotionValue(x).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new ES(s,{onSessionStart:n,onStart:r,onMove:i,onSessionEnd:o,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:IS(this.visualElement)})}stop(s,a){const l=this.isDragging;if(this.cancel(),!l)return;const{velocity:n}=a;this.startAnimation(n);const{onDragEnd:r}=this.getProps();r&&us.postRender(()=>r(s,a))}cancel(){this.isDragging=!1;const{projection:s,animationState:a}=this.visualElement;s&&(s.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:l}=this.getProps();!l&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),a&&a.setActive("whileDrag",!1)}updateAxis(s,a,l){const{drag:n}=this.getProps();if(!l||!ax(s,n,this.currentDirection))return;const r=this.getAxisMotionValue(s);let i=this.originPoint[s]+l[s];this.constraints&&this.constraints[s]&&(i=a7(i,this.constraints[s],this.elastic[s])),r.set(i)}resolveConstraints(){var s;const{dragConstraints:a,dragElastic:l}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)===null||s===void 0?void 0:s.layout,r=this.constraints;a&&Td(a)?this.constraints||(this.constraints=this.resolveRefConstraints()):a&&n?this.constraints=l7(n.layoutBox,a):this.constraints=!1,this.elastic=o7(l),r!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Kl(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=i7(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:s,onMeasureDragConstraints:a}=this.getProps();if(!s||!Td(s))return!1;const l=s.current,{projection:n}=this.visualElement;if(!n||!n.layout)return!1;const r=m7(l,n.root,this.visualElement.getTransformPagePoint());let i=n7(n.layout.layoutBox,r);if(a){const o=a(d7(i));this.hasMutatedConstraints=!!o,o&&(i=RS(o))}return i}startAnimation(s){const{drag:a,dragMomentum:l,dragElastic:n,dragTransition:r,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),d=this.constraints||{},u=Kl(x=>{if(!ax(x,a,this.currentDirection))return;let p=d&&d[x]||{};i&&(p={min:0,max:0});const h=n?200:1e6,j=n?40:1e7,y={type:"inertia",velocity:l?s[x]:0,bounceStiffness:h,bounceDamping:j,timeConstant:750,restDelta:1,restSpeed:10,...r,...p};return this.startAxisValueAnimation(x,y)});return Promise.all(u).then(o)}startAxisValueAnimation(s,a){const l=this.getAxisMotionValue(s);return rb(this.visualElement,s),l.start(Oy(s,l,0,a,this.visualElement,!1))}stopAnimation(){Kl(s=>this.getAxisMotionValue(s).stop())}pauseAnimation(){Kl(s=>{var a;return(a=this.getAxisMotionValue(s).animation)===null||a===void 0?void 0:a.pause()})}getAnimationState(s){var a;return(a=this.getAxisMotionValue(s).animation)===null||a===void 0?void 0:a.state}getAxisMotionValue(s){const a=`_drag${s.toUpperCase()}`,l=this.visualElement.getProps(),n=l[a];return n||this.visualElement.getValue(s,(l.initial?l.initial[s]:void 0)||0)}snapToCursor(s){Kl(a=>{const{drag:l}=this.getProps();if(!ax(a,l,this.currentDirection))return;const{projection:n}=this.visualElement,r=this.getAxisMotionValue(a);if(n&&n.layout){const{min:i,max:o}=n.layout.layoutBox[a];r.set(s[a]-Ss(i,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:s,dragConstraints:a}=this.getProps(),{projection:l}=this.visualElement;if(!Td(a)||!l||!this.constraints)return;this.stopAnimation();const n={x:0,y:0};Kl(i=>{const o=this.getAxisMotionValue(i);if(o&&this.constraints!==!1){const d=o.get();n[i]=r7({min:d,max:d},this.constraints[i])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",l.root&&l.root.updateScroll(),l.updateLayout(),this.resolveConstraints(),Kl(i=>{if(!ax(i,s,null))return;const o=this.getAxisMotionValue(i),{min:d,max:u}=this.constraints[i];o.set(Ss(d,u,n[i]))})}addListeners(){if(!this.visualElement.current)return;x7.set(this.visualElement,this);const s=this.visualElement.current,a=ku(s,"pointerdown",d=>{const{drag:u,dragListener:x=!0}=this.getProps();u&&x&&this.start(d)}),l=()=>{const{dragConstraints:d}=this.getProps();Td(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",l);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),us.read(l);const i=rm(window,"resize",()=>this.scalePositionWithinConstraints()),o=n.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u})=>{this.isDragging&&u&&(Kl(x=>{const p=this.getAxisMotionValue(x);p&&(this.originPoint[x]+=d[x].translate,p.set(p.get()+d[x].translate))}),this.visualElement.render())});return()=>{i(),a(),r(),o&&o()}}getProps(){const s=this.visualElement.getProps(),{drag:a=!1,dragDirectionLock:l=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:i=pb,dragMomentum:o=!0}=s;return{...s,drag:a,dragDirectionLock:l,dragPropagation:n,dragConstraints:r,dragElastic:i,dragMomentum:o}}}function ax(t,s,a){return(s===!0||s===t)&&(a===null||a===t)}function h7(t,s=10){let a=null;return Math.abs(t.y)>s?a="y":Math.abs(t.x)>s&&(a="x"),a}class f7 extends Bi{constructor(s){super(s),this.removeGroupControls=Rl,this.removeListeners=Rl,this.controls=new p7(s)}mount(){const{dragControls:s}=this.node.getProps();s&&(this.removeGroupControls=s.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rl}unmount(){this.removeGroupControls(),this.removeListeners()}}const K2=t=>(s,a)=>{t&&us.postRender(()=>t(s,a))};class g7 extends Bi{constructor(){super(...arguments),this.removePointerDownListener=Rl}onPointerDown(s){this.session=new ES(s,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:IS(this.node)})}createPanHandlers(){const{onPanSessionStart:s,onPanStart:a,onPan:l,onPanEnd:n}=this.node.getProps();return{onSessionStart:K2(s),onStart:K2(a),onMove:l,onEnd:(r,i)=>{delete this.session,n&&us.postRender(()=>n(r,i))}}}mount(){this.removePointerDownListener=ku(this.node.current,"pointerdown",s=>this.onPointerDown(s))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const op={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function X2(t,s){return s.max===s.min?0:t/(s.max-s.min)*100}const Mc={correct:(t,s)=>{if(!s.target)return t;if(typeof t=="string")if(dt.test(t))t=parseFloat(t);else return t;const a=X2(t,s.target.x),l=X2(t,s.target.y);return`${a}% ${l}%`}},v7={correct:(t,{treeScale:s,projectionDelta:a})=>{const l=t,n=Ri.parse(t);if(n.length>5)return l;const r=Ri.createTransformer(t),i=typeof n[0]!="number"?1:0,o=a.x.scale*s.x,d=a.y.scale*s.y;n[0+i]/=o,n[1+i]/=d;const u=Ss(o,d,.5);return typeof n[2+i]=="number"&&(n[2+i]/=u),typeof n[3+i]=="number"&&(n[3+i]/=u),r(n)}};class b7 extends c.Component{componentDidMount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:l,layoutId:n}=this.props,{projection:r}=s;_$(j7),r&&(a.group&&a.group.add(r),l&&l.register&&n&&l.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),op.hasEverUpdated=!0}getSnapshotBeforeUpdate(s){const{layoutDependency:a,visualElement:l,drag:n,isPresent:r}=this.props,i=l.projection;return i&&(i.isPresent=r,n||s.layoutDependency!==a||a===void 0?i.willUpdate():this.safeToRemove(),s.isPresent!==r&&(r?i.promote():i.relegate()||us.postRender(()=>{const o=i.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:s}=this.props.visualElement;s&&(s.root.didUpdate(),dy.postRender(()=>{!s.currentAnimation&&s.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:s,layoutGroup:a,switchLayoutGroup:l}=this.props,{projection:n}=s;n&&(n.scheduleCheckAfterUnmount(),a&&a.group&&a.group.remove(n),l&&l.deregister&&l.deregister(n))}safeToRemove(){const{safeToRemove:s}=this.props;s&&s()}render(){return null}}function LS(t){const[s,a]=b3(),l=c.useContext(ty);return e.jsx(b7,{...t,layoutGroup:l,switchLayoutGroup:c.useContext(A3),isPresent:s,safeToRemove:a})}const j7={borderRadius:{...Mc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mc,borderTopRightRadius:Mc,borderBottomLeftRadius:Mc,borderBottomRightRadius:Mc,boxShadow:v7};function y7(t,s,a){const l=Ha(t)?t:lm(t);return l.start(Oy("",l,s,a)),l.animation}function N7(t){return t instanceof SVGElement&&t.tagName!=="svg"}const w7=(t,s)=>t.depth-s.depth;class k7{constructor(){this.children=[],this.isDirty=!1}add(s){wy(this.children,s),this.isDirty=!0}remove(s){ky(this.children,s),this.isDirty=!0}forEach(s){this.isDirty&&this.children.sort(w7),this.isDirty=!1,this.children.forEach(s)}}function C7(t,s){const a=lr.now(),l=({timestamp:n})=>{const r=n-a;r>=s&&(Ti(l),t(r-s))};return us.read(l,!0),()=>Ti(l)}const FS=["TopLeft","TopRight","BottomLeft","BottomRight"],S7=FS.length,Y2=t=>typeof t=="string"?parseFloat(t):t,Q2=t=>typeof t=="number"||dt.test(t);function A7(t,s,a,l,n,r){n?(t.opacity=Ss(0,a.opacity!==void 0?a.opacity:1,E7(l)),t.opacityExit=Ss(s.opacity!==void 0?s.opacity:1,0,P7(l))):r&&(t.opacity=Ss(s.opacity!==void 0?s.opacity:1,a.opacity!==void 0?a.opacity:1,l));for(let i=0;i<S7;i++){const o=`border${FS[i]}Radius`;let d=J2(s,o),u=J2(a,o);if(d===void 0&&u===void 0)continue;d||(d=0),u||(u=0),d===0||u===0||Q2(d)===Q2(u)?(t[o]=Math.max(Ss(Y2(d),Y2(u),l),0),(ar.test(u)||ar.test(d))&&(t[o]+="%")):t[o]=u}(s.rotate||a.rotate)&&(t.rotate=Ss(s.rotate||0,a.rotate||0,l))}function J2(t,s){return t[s]!==void 0?t[s]:t.borderRadius}const E7=_S(0,.5,aS),P7=_S(.5,.95,Rl);function _S(t,s,a){return l=>l<t?0:l>s?1:a(nc(t,s,l))}function Z2(t,s){t.min=s.min,t.max=s.max}function _l(t,s){Z2(t.x,s.x),Z2(t.y,s.y)}function e1(t,s){t.translate=s.translate,t.scale=s.scale,t.originPoint=s.originPoint,t.origin=s.origin}function t1(t,s,a,l,n){return t-=s,t=Zp(t,1/a,l),n!==void 0&&(t=Zp(t,1/n,l)),t}function M7(t,s=0,a=1,l=.5,n,r=t,i=t){if(ar.test(s)&&(s=parseFloat(s),s=Ss(i.min,i.max,s/100)-i.min),typeof s!="number")return;let o=Ss(r.min,r.max,l);t===r&&(o-=s),t.min=t1(t.min,s,a,o,n),t.max=t1(t.max,s,a,o,n)}function s1(t,s,[a,l,n],r,i){M7(t,s[a],s[l],s[n],s.scale,r,i)}const T7=["x","scaleX","originX"],R7=["y","scaleY","originY"];function a1(t,s,a,l){s1(t.x,s,T7,a?a.x:void 0,l?l.x:void 0),s1(t.y,s,R7,a?a.y:void 0,l?l.y:void 0)}function l1(t){return t.translate===0&&t.scale===1}function VS(t){return l1(t.x)&&l1(t.y)}function n1(t,s){return t.min===s.min&&t.max===s.max}function D7(t,s){return n1(t.x,s.x)&&n1(t.y,s.y)}function r1(t,s){return Math.round(t.min)===Math.round(s.min)&&Math.round(t.max)===Math.round(s.max)}function BS(t,s){return r1(t.x,s.x)&&r1(t.y,s.y)}function i1(t){return $l(t.x)/$l(t.y)}function o1(t,s){return t.translate===s.translate&&t.scale===s.scale&&t.originPoint===s.originPoint}class O7{constructor(){this.members=[]}add(s){wy(this.members,s),s.scheduleRender()}remove(s){if(ky(this.members,s),s===this.prevLead&&(this.prevLead=void 0),s===this.lead){const a=this.members[this.members.length-1];a&&this.promote(a)}}relegate(s){const a=this.members.findIndex(n=>s===n);if(a===0)return!1;let l;for(let n=a;n>=0;n--){const r=this.members[n];if(r.isPresent!==!1){l=r;break}}return l?(this.promote(l),!0):!1}promote(s,a){const l=this.lead;if(s!==l&&(this.prevLead=l,this.lead=s,s.show(),l)){l.instance&&l.scheduleRender(),s.scheduleRender(),s.resumeFrom=l,a&&(s.resumeFrom.preserveOpacity=!0),l.snapshot&&(s.snapshot=l.snapshot,s.snapshot.latestValues=l.animationValues||l.latestValues),s.root&&s.root.isUpdating&&(s.isLayoutDirty=!0);const{crossfade:n}=s.options;n===!1&&l.hide()}}exitAnimationComplete(){this.members.forEach(s=>{const{options:a,resumingFrom:l}=s;a.onExitComplete&&a.onExitComplete(),l&&l.options.onExitComplete&&l.options.onExitComplete()})}scheduleRender(){this.members.forEach(s=>{s.instance&&s.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function $7(t,s,a){let l="";const n=t.x.translate/s.x,r=t.y.translate/s.y,i=(a==null?void 0:a.z)||0;if((n||r||i)&&(l=`translate3d(${n}px, ${r}px, ${i}px) `),(s.x!==1||s.y!==1)&&(l+=`scale(${1/s.x}, ${1/s.y}) `),a){const{transformPerspective:u,rotate:x,rotateX:p,rotateY:h,skewX:j,skewY:y}=a;u&&(l=`perspective(${u}px) ${l}`),x&&(l+=`rotate(${x}deg) `),p&&(l+=`rotateX(${p}deg) `),h&&(l+=`rotateY(${h}deg) `),j&&(l+=`skewX(${j}deg) `),y&&(l+=`skewY(${y}deg) `)}const o=t.x.scale*s.x,d=t.y.scale*s.y;return(o!==1||d!==1)&&(l+=`scale(${o}, ${d})`),l||"none"}const io={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},du=typeof window<"u"&&window.MotionDebug!==void 0,Nf=["","X","Y","Z"],I7={visibility:"hidden"},d1=1e3;let L7=0;function wf(t,s,a,l){const{latestValues:n}=s;n[t]&&(a[t]=n[t],s.setStaticValue(t,0),l&&(l[t]=0))}function US(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:s}=t.options;if(!s)return;const a=Y3(s);if(window.MotionHasOptimisedAnimation(a,"transform")){const{layout:n,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(a,"transform",us,!(n||r))}const{parent:l}=t;l&&!l.hasCheckedOptimisedAppear&&US(l)}function qS({attachResizeListener:t,defaultParent:s,measureScroll:a,checkIsScrollRoot:l,resetTransform:n}){return class{constructor(i={},o=s==null?void 0:s()){this.id=L7++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,du&&(io.totalNodes=io.resolvedTargetDeltas=io.recalculatedProjection=0),this.nodes.forEach(V7),this.nodes.forEach(G7),this.nodes.forEach(W7),this.nodes.forEach(B7),du&&window.MotionDebug.record(io)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new k7)}addEventListener(i,o){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new Cy),this.eventHandlers.get(i).add(o)}notifyListeners(i,...o){const d=this.eventHandlers.get(i);d&&d.notify(...o)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=N7(i),this.instance=i;const{layoutId:d,layout:u,visualElement:x}=this.options;if(x&&!x.current&&x.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||d)&&(this.isLayoutDirty=!0),t){let p;const h=()=>this.root.updateBlockedByResize=!1;t(i,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=C7(h,250),op.hasAnimatedSinceResize&&(op.hasAnimatedSinceResize=!1,this.nodes.forEach(u1))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&x&&(d||u)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:h,hasRelativeTargetChanged:j,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const f=this.options.transition||x.getDefaultTransition()||Q7,{onLayoutAnimationStart:I,onLayoutAnimationComplete:A}=x.getProps(),b=!this.targetLayout||!BS(this.targetLayout,y)||j,C=!h&&j;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,C);const S={...by(f,"layout"),onPlay:I,onComplete:A};(x.shouldReduceMotion||this.options.layoutRoot)&&(S.delay=0,S.type=!1),this.startAnimation(S)}else h||u1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ti(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(H7),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&US(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const p=this.path[x];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:o,layout:d}=this.options;if(o===void 0&&!d)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c1);return}this.isUpdating||this.nodes.forEach(q7),this.isUpdating=!1,this.nodes.forEach(z7),this.nodes.forEach(F7),this.nodes.forEach(_7),this.clearAllSnapshots();const o=lr.now();Ma.delta=Fr(0,1e3/60,o-Ma.timestamp),Ma.timestamp=o,Ma.isProcessing=!0,xf.update.process(Ma),xf.preRender.process(Ma),xf.render.process(Ma),Ma.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(U7),this.sharedNodes.forEach(K7)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,us.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){us.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=zs(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(o=!1),o){const d=l(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:d,offset:a(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!n)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!VS(this.projectionDelta),d=this.getTransformTemplate(),u=d?d(this.latestValues,""):void 0,x=u!==this.prevTransformTemplateValue;i&&(o||ro(this.latestValues)||x)&&(n(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const o=this.measurePageBox();let d=this.removeElementScroll(o);return i&&(d=this.removeTransform(d)),J7(d),{animationId:this.root.animationId,measuredBox:o,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:o}=this.options;if(!o)return zs();const d=o.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(Z7))){const{scroll:x}=this.root;x&&(Od(d.x,x.offset.x),Od(d.y,x.offset.y))}return d}removeElementScroll(i){var o;const d=zs();if(_l(d,i),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return d;for(let u=0;u<this.path.length;u++){const x=this.path[u],{scroll:p,options:h}=x;x!==this.root&&p&&h.layoutScroll&&(p.wasRoot&&_l(d,i),Od(d.x,p.offset.x),Od(d.y,p.offset.y))}return d}applyTransform(i,o=!1){const d=zs();_l(d,i);for(let u=0;u<this.path.length;u++){const x=this.path[u];!o&&x.options.layoutScroll&&x.scroll&&x!==x.root&&$d(d,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),ro(x.latestValues)&&$d(d,x.latestValues)}return ro(this.latestValues)&&$d(d,this.latestValues),d}removeTransform(i){const o=zs();_l(o,i);for(let d=0;d<this.path.length;d++){const u=this.path[d];if(!u.instance||!ro(u.latestValues))continue;hb(u.latestValues)&&u.updateSnapshot();const x=zs(),p=u.measurePageBox();_l(x,p),a1(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,x)}return ro(this.latestValues)&&a1(o,this.latestValues),o}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ma.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var o;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==d;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:h}=this.options;if(!(!this.layout||!(p||h))){if(this.resolvedRelativeTargetAt=Ma.timestamp,!this.targetDelta&&!this.relativeTarget){const j=this.getClosestProjectingParent();j&&j.layout&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zs(),this.relativeTargetOrigin=zs(),Su(this.relativeTargetOrigin,this.layout.layoutBox,j.layout.layoutBox),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=zs(),this.targetWithTransforms=zs()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_l(this.target,this.layout.layoutBox),OS(this.target,this.targetDelta)):_l(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const j=this.getClosestProjectingParent();j&&!!j.resumingFrom==!!this.resumingFrom&&!j.options.layoutScroll&&j.target&&this.animationProgress!==1?(this.relativeParent=j,this.forceRelativeParentToResolveTarget(),this.relativeTarget=zs(),this.relativeTargetOrigin=zs(),Su(this.relativeTargetOrigin,this.target,j.target),_l(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}du&&io.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hb(this.parent.latestValues)||DS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const o=this.getLead(),d=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ma.timestamp&&(u=!1),u)return;const{layout:x,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||p))return;_l(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,j=this.treeScale.y;u7(this.layoutCorrected,this.treeScale,this.path,d),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=zs());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(e1(this.prevProjectionDelta.x,this.projectionDelta.x),e1(this.prevProjectionDelta.y,this.projectionDelta.y)),Cu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==j||!o1(this.projectionDelta.x,this.prevProjectionDelta.x)||!o1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),du&&io.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),i){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dd(),this.projectionDelta=Dd(),this.projectionDeltaWithTransform=Dd()}setAnimationOrigin(i,o=!1){const d=this.snapshot,u=d?d.latestValues:{},x={...this.latestValues},p=Dd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=zs(),j=d?d.source:void 0,y=this.layout?this.layout.source:void 0,f=j!==y,I=this.getStack(),A=!I||I.members.length<=1,b=!!(f&&!A&&this.options.crossfade===!0&&!this.path.some(Y7));this.animationProgress=0;let C;this.mixTargetDelta=S=>{const z=S/1e3;m1(p.x,i.x,z),m1(p.y,i.y,z),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Su(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),X7(this.relativeTarget,this.relativeTargetOrigin,h,z),C&&D7(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=zs()),_l(C,this.relativeTarget)),f&&(this.animationValues=x,A7(x,u,this.latestValues,z,b,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ti(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=us.update(()=>{op.hasAnimatedSinceResize=!0,this.currentAnimation=y7(0,d1,{...i,onUpdate:o=>{this.mixTargetDelta(o),i.onUpdate&&i.onUpdate(o)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(d1),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:o,target:d,layout:u,latestValues:x}=i;if(!(!o||!d||!u)){if(this!==i&&this.layout&&u&&zS(this.options.animationType,this.layout.layoutBox,u.layoutBox)){d=this.target||zs();const p=$l(this.layout.layoutBox.x);d.x.min=i.target.x.min,d.x.max=d.x.min+p;const h=$l(this.layout.layoutBox.y);d.y.min=i.target.y.min,d.y.max=d.y.min+h}_l(o,d),$d(o,x),Cu(this.projectionDeltaWithTransform,this.layoutCorrected,o,x)}}registerSharedNode(i,o){this.sharedNodes.has(i)||this.sharedNodes.set(i,new O7),this.sharedNodes.get(i).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:o}=this.options;return o?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:o}=this.options;return o?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:o,preserveFollowOpacity:d}={}){const u=this.getStack();u&&u.promote(this,d),i&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let o=!1;const{latestValues:d}=i;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(o=!0),!o)return;const u={};d.z&&wf("z",i,u,this.animationValues);for(let x=0;x<Nf.length;x++)wf(`rotate${Nf[x]}`,i,u,this.animationValues),wf(`skew${Nf[x]}`,i,u,this.animationValues);i.render();for(const x in u)i.setStaticValue(x,u[x]),this.animationValues&&(this.animationValues[x]=u[x]);i.scheduleRender()}getProjectionStyles(i){var o,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return I7;const u={visibility:""},x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=rp(i==null?void 0:i.pointerEvents)||"",u.transform=x?x(this.latestValues,""):"none",u;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const f={};return this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=rp(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!ro(this.latestValues)&&(f.transform=x?x({},""):"none",this.hasProjected=!1),f}const h=p.animationValues||p.latestValues;this.applyTransformsToTarget(),u.transform=$7(this.projectionDeltaWithTransform,this.treeScale,h),x&&(u.transform=x(h,u.transform));const{x:j,y}=this.projectionDelta;u.transformOrigin=`${j.origin*100}% ${y.origin*100}% 0`,p.animationValues?u.opacity=p===this?(d=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=p===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const f in Kp){if(h[f]===void 0)continue;const{correct:I,applyTo:A}=Kp[f],b=u.transform==="none"?h[f]:I(h[f],p);if(A){const C=A.length;for(let S=0;S<C;S++)u[A[S]]=b}else u[f]=b}return this.options.layoutId&&(u.pointerEvents=p===this?rp(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var o;return(o=i.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(c1),this.root.sharedNodes.clear()}}}function F7(t){t.updateLayout()}function _7(t){var s;const a=((s=t.resumeFrom)===null||s===void 0?void 0:s.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&a&&t.hasListeners("didUpdate")){const{layoutBox:l,measuredBox:n}=t.layout,{animationType:r}=t.options,i=a.source!==t.layout.source;r==="size"?Kl(p=>{const h=i?a.measuredBox[p]:a.layoutBox[p],j=$l(h);h.min=l[p].min,h.max=h.min+j}):zS(r,a.layoutBox,l)&&Kl(p=>{const h=i?a.measuredBox[p]:a.layoutBox[p],j=$l(l[p]);h.max=h.min+j,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+j)});const o=Dd();Cu(o,l,a.layoutBox);const d=Dd();i?Cu(d,t.applyTransform(n,!0),a.measuredBox):Cu(d,l,a.layoutBox);const u=!VS(o);let x=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:h,layout:j}=p;if(h&&j){const y=zs();Su(y,a.layoutBox,h.layoutBox);const f=zs();Su(f,l,j.layoutBox),BS(y,f)||(x=!0),p.options.layoutRoot&&(t.relativeTarget=f,t.relativeTargetOrigin=y,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:l,snapshot:a,delta:d,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:l}=t.options;l&&l()}t.options.transition=void 0}function V7(t){du&&io.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function B7(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function U7(t){t.clearSnapshot()}function c1(t){t.clearMeasurements()}function q7(t){t.isLayoutDirty=!1}function z7(t){const{visualElement:s}=t.options;s&&s.getProps().onBeforeLayoutMeasure&&s.notify("BeforeLayoutMeasure"),t.resetTransform()}function u1(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function G7(t){t.resolveTargetDelta()}function W7(t){t.calcProjection()}function H7(t){t.resetSkewAndRotation()}function K7(t){t.removeLeadSnapshot()}function m1(t,s,a){t.translate=Ss(s.translate,0,a),t.scale=Ss(s.scale,1,a),t.origin=s.origin,t.originPoint=s.originPoint}function x1(t,s,a,l){t.min=Ss(s.min,a.min,l),t.max=Ss(s.max,a.max,l)}function X7(t,s,a,l){x1(t.x,s.x,a.x,l),x1(t.y,s.y,a.y,l)}function Y7(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Q7={duration:.45,ease:[.4,0,.1,1]},p1=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),h1=p1("applewebkit/")&&!p1("chrome/")?Math.round:Rl;function f1(t){t.min=h1(t.min),t.max=h1(t.max)}function J7(t){f1(t.x),f1(t.y)}function zS(t,s,a){return t==="position"||t==="preserve-aspect"&&!t7(i1(s),i1(a),.2)}function Z7(t){var s;return t!==t.root&&((s=t.scroll)===null||s===void 0?void 0:s.wasRoot)}const eL=qS({attachResizeListener:(t,s)=>rm(t,"resize",s),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),kf={current:void 0},GS=qS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!kf.current){const t=new eL({});t.mount(window),t.setOptions({layoutScroll:!0}),kf.current=t}return kf.current},resetTransform:(t,s)=>{t.style.transform=s!==void 0?s:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),tL={pan:{Feature:g7},drag:{Feature:f7,ProjectionNode:GS,MeasureLayout:LS}};function g1(t,s,a){const{props:l}=t;t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",a==="Start");const n="onHover"+a,r=l[n];r&&us.postRender(()=>r(s,Em(s)))}class sL extends Bi{mount(){const{current:s}=this.node;s&&(this.unmount=tI(s,a=>(g1(this.node,a,"Start"),l=>g1(this.node,l,"End"))))}unmount(){}}class aL extends Bi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let s=!1;try{s=this.node.current.matches(":focus-visible")}catch{s=!0}!s||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Am(rm(this.node.current,"focus",()=>this.onFocus()),rm(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function v1(t,s,a){const{props:l}=t;t.animationState&&l.whileTap&&t.animationState.setActive("whileTap",a==="Start");const n="onTap"+(a==="End"?"":a),r=l[n];r&&us.postRender(()=>r(s,Em(s)))}class lL extends Bi{mount(){const{current:s}=this.node;s&&(this.unmount=nI(s,a=>(v1(this.node,a,"Start"),(l,{success:n})=>v1(this.node,l,n?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const gb=new WeakMap,Cf=new WeakMap,nL=t=>{const s=gb.get(t.target);s&&s(t)},rL=t=>{t.forEach(nL)};function iL({root:t,...s}){const a=t||document;Cf.has(a)||Cf.set(a,{});const l=Cf.get(a),n=JSON.stringify(s);return l[n]||(l[n]=new IntersectionObserver(rL,{root:t,...s})),l[n]}function oL(t,s,a){const l=iL(s);return gb.set(t,a),l.observe(t),()=>{gb.delete(t),l.unobserve(t)}}const dL={some:0,all:1};class cL extends Bi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:s={}}=this.node.getProps(),{root:a,margin:l,amount:n="some",once:r}=s,i={root:a?a.current:void 0,rootMargin:l,threshold:typeof n=="number"?n:dL[n]},o=d=>{const{isIntersecting:u}=d;if(this.isInView===u||(this.isInView=u,r&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:x,onViewportLeave:p}=this.node.getProps(),h=u?x:p;h&&h(d)};return oL(this.node.current,i,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:s,prevProps:a}=this.node;["amount","margin","root"].some(uL(s,a))&&this.startObserver()}unmount(){}}function uL({viewport:t={}},{viewport:s={}}={}){return a=>t[a]!==s[a]}const mL={inView:{Feature:cL},tap:{Feature:lL},focus:{Feature:aL},hover:{Feature:sL}},xL={layout:{ProjectionNode:GS,MeasureLayout:LS}},vb={current:null},WS={current:!1};function pL(){if(WS.current=!0,!!ly)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),s=()=>vb.current=t.matches;t.addListener(s),s()}else vb.current=!1}const hL=[...gS,za,Ri],fL=t=>hL.find(fS(t)),b1=new WeakMap;function gL(t,s,a){for(const l in s){const n=s[l],r=a[l];if(Ha(n))t.addValue(l,n);else if(Ha(r))t.addValue(l,lm(n,{owner:t}));else if(r!==n)if(t.hasValue(l)){const i=t.getValue(l);i.liveStyle===!0?i.jump(n):i.hasAnimated||i.set(n)}else{const i=t.getStaticValue(l);t.addValue(l,lm(i!==void 0?i:n,{owner:t}))}}for(const l in a)s[l]===void 0&&t.removeValue(l);return s}const j1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vL{scrapeMotionValuesFromProps(s,a,l){return{}}constructor({parent:s,props:a,presenceContext:l,reducedMotionConfig:n,blockInitialAnimation:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ty,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const j=lr.now();this.renderScheduledAt<j&&(this.renderScheduledAt=j,us.render(this.render,!1,!0))};const{latestValues:d,renderState:u,onUpdate:x}=i;this.onUpdate=x,this.latestValues=d,this.baseTarget={...d},this.initialValues=a.initial?{...d}:{},this.renderState=u,this.parent=s,this.props=a,this.presenceContext=l,this.depth=s?s.depth+1:0,this.reducedMotionConfig=n,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=y0(a),this.isVariantNode=C3(a),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(s&&s.current);const{willChange:p,...h}=this.scrapeMotionValuesFromProps(a,{},this);for(const j in h){const y=h[j];d[j]!==void 0&&Ha(y)&&y.set(d[j],!1)}}mount(s){this.current=s,b1.set(s,this),this.projection&&!this.projection.instance&&this.projection.mount(s),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((a,l)=>this.bindToMotionValue(l,a)),WS.current||pL(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){b1.delete(this.current),this.projection&&this.projection.unmount(),Ti(this.notifyUpdate),Ti(this.render),this.valueSubscriptions.forEach(s=>s()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const s in this.events)this.events[s].clear();for(const s in this.features){const a=this.features[s];a&&(a.unmount(),a.isMounted=!1)}this.current=null}bindToMotionValue(s,a){this.valueSubscriptions.has(s)&&this.valueSubscriptions.get(s)();const l=Io.has(s),n=a.on("change",o=>{this.latestValues[s]=o,this.props.onUpdate&&us.preRender(this.notifyUpdate),l&&this.projection&&(this.projection.isTransformDirty=!0)}),r=a.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,s,a)),this.valueSubscriptions.set(s,()=>{n(),r(),i&&i(),a.owner&&a.stop()})}sortNodePosition(s){return!this.current||!this.sortInstanceNodePosition||this.type!==s.type?0:this.sortInstanceNodePosition(this.current,s.current)}updateFeatures(){let s="animation";for(s in rc){const a=rc[s];if(!a)continue;const{isEnabled:l,Feature:n}=a;if(!this.features[s]&&n&&l(this.props)&&(this.features[s]=new n(this)),this.features[s]){const r=this.features[s];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):zs()}getStaticValue(s){return this.latestValues[s]}setStaticValue(s,a){this.latestValues[s]=a}update(s,a){(s.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=s,this.prevPresenceContext=this.presenceContext,this.presenceContext=a;for(let l=0;l<j1.length;l++){const n=j1[l];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);const r="on"+n,i=s[r];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=gL(this,this.scrapeMotionValuesFromProps(s,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(s){return this.props.variants?this.props.variants[s]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(s){const a=this.getClosestVariantNode();if(a)return a.variantChildren&&a.variantChildren.add(s),()=>a.variantChildren.delete(s)}addValue(s,a){const l=this.values.get(s);a!==l&&(l&&this.removeValue(s),this.bindToMotionValue(s,a),this.values.set(s,a),this.latestValues[s]=a.get())}removeValue(s){this.values.delete(s);const a=this.valueSubscriptions.get(s);a&&(a(),this.valueSubscriptions.delete(s)),delete this.latestValues[s],this.removeValueFromRenderState(s,this.renderState)}hasValue(s){return this.values.has(s)}getValue(s,a){if(this.props.values&&this.props.values[s])return this.props.values[s];let l=this.values.get(s);return l===void 0&&a!==void 0&&(l=lm(a===null?void 0:a,{owner:this}),this.addValue(s,l)),l}readValue(s,a){var l;let n=this.latestValues[s]!==void 0||!this.current?this.latestValues[s]:(l=this.getBaseTargetFromProps(this.props,s))!==null&&l!==void 0?l:this.readValueFromInstance(this.current,s,this.options);return n!=null&&(typeof n=="string"&&(pS(n)||nS(n))?n=parseFloat(n):!fL(n)&&Ri.test(a)&&(n=uS(s,a)),this.setBaseTarget(s,Ha(n)?n.get():n)),Ha(n)?n.get():n}setBaseTarget(s,a){this.baseTarget[s]=a}getBaseTarget(s){var a;const{initial:l}=this.props;let n;if(typeof l=="string"||typeof l=="object"){const i=uy(this.props,l,(a=this.presenceContext)===null||a===void 0?void 0:a.custom);i&&(n=i[s])}if(l&&n!==void 0)return n;const r=this.getBaseTargetFromProps(this.props,s);return r!==void 0&&!Ha(r)?r:this.initialValues[s]!==void 0&&n===void 0?void 0:this.baseTarget[s]}on(s,a){return this.events[s]||(this.events[s]=new Cy),this.events[s].add(a)}notify(s,...a){this.events[s]&&this.events[s].notify(...a)}}class HS extends vL{constructor(){super(...arguments),this.KeyframeResolver=vS}sortInstanceNodePosition(s,a){return s.compareDocumentPosition(a)&2?1:-1}getBaseTargetFromProps(s,a){return s.style?s.style[a]:void 0}removeValueFromRenderState(s,{vars:a,style:l}){delete a[s],delete l[s]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:s}=this.props;Ha(s)&&(this.childSubscription=s.on("change",a=>{this.current&&(this.current.textContent=`${a}`)}))}}function bL(t){return window.getComputedStyle(t)}class jL extends HS{constructor(){super(...arguments),this.type="html",this.renderInstance=O3}readValueFromInstance(s,a){if(Io.has(a)){const l=My(a);return l&&l.default||0}else{const l=bL(s),n=(T3(a)?l.getPropertyValue(a):l[a])||0;return typeof n=="string"?n.trim():n}}measureInstanceViewportBox(s,{transformPagePoint:a}){return $S(s,a)}build(s,a,l){py(s,a,l.transformTemplate)}scrapeMotionValuesFromProps(s,a,l){return vy(s,a,l)}}class yL extends HS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=zs}getBaseTargetFromProps(s,a){return s[a]}readValueFromInstance(s,a){if(Io.has(a)){const l=My(a);return l&&l.default||0}return a=$3.has(a)?a:oy(a),s.getAttribute(a)}scrapeMotionValuesFromProps(s,a,l){return F3(s,a,l)}build(s,a,l){hy(s,a,this.isSVGTag,l.transformTemplate)}renderInstance(s,a,l,n){I3(s,a,l,n)}mount(s){this.isSVGTag=gy(s.tagName),super.mount(s)}}const NL=(t,s)=>cy(t)?new yL(s):new jL(s,{allowProjection:t!==c.Fragment}),wL=K$({...W8,...mL,...tL,...xL},NL),ke=d$(wL);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),KS=(...t)=>t.filter((s,a,l)=>!!s&&s.trim()!==""&&l.indexOf(s)===a).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=c.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:n="",children:r,iconNode:i,...o},d)=>c.createElement("svg",{ref:d,...CL,width:s,height:s,stroke:t,strokeWidth:l?Number(a)*24/Number(s):a,className:KS("lucide",n),...o},[...i.map(([u,x])=>c.createElement(u,x)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(t,s)=>{const a=c.forwardRef(({className:l,...n},r)=>c.createElement(SL,{ref:r,iconNode:s,className:KS(`lucide-${kL(t)}`,l),...n}));return a.displayName=`${t}`,a};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=Pe("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y1=Pe("ArrowDownToLine",[["path",{d:"M12 17V3",key:"1cwfxf"}],["path",{d:"m6 11 6 6 6-6",key:"12ii2o"}],["path",{d:"M19 21H5",key:"150jfl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Pe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=Pe("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=Pe("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=Pe("BatteryCharging",[["path",{d:"M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2",key:"1sdynx"}],["path",{d:"M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1",key:"1gkd3k"}],["path",{d:"m11 7-3 5h4l-3 5",key:"b4a64w"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=Pe("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Af=Pe("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=Pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Pe("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Pe("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Pe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=Pe("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=Pe("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=Pe("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dl=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=Pe("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=Pe("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=Pe("CircleDollarSign",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Pe("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Pe("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Pe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=Pe("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=Pe("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=Pe("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=Pe("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=Pe("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Pe("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Pe("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=Pe("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Pe("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Pe("FileCheck2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m3 15 2 2 4-4",key:"1lhrkk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Pe("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=Pe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const th=Pe("Fingerprint",[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Pe("FolderArchive",[["circle",{cx:"15",cy:"19",r:"2",key:"u2pros"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1",key:"1jj40k"}],["path",{d:"M15 11v-1",key:"cntcp"}],["path",{d:"M15 17v-2",key:"1279jj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=Pe("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Pe("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Pe("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=Pe("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Pe("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Pe("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Pe("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Pe("Laptop",[["path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9m16 0H4m16 0 1.28 2.55a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45L4 16",key:"tarvll"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=Pe("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yb=Pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZS=Pe("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=Pe("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=Pe("LifeBuoy",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.93 4.93 4.24 4.24",key:"1ymg45"}],["path",{d:"m14.83 9.17 4.24-4.24",key:"1cb5xl"}],["path",{d:"m14.83 14.83 4.24 4.24",key:"q42g0n"}],["path",{d:"m9.17 14.83-4.24 4.24",key:"bqpfvv"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cp=Pe("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=Pe("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Pe("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Pe("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Po=Pe("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=Pe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=Pe("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=Pe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=Pe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Pe("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w1=Pe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=Pe("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Pe("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Id=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=Pe("PiggyBank",[["path",{d:"M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.7-1 2-2h2v-4h-2c0-1-.5-1.5-1-2V5z",key:"1ivx2i"}],["path",{d:"M2 9v1c0 1.1.9 2 2 2h1",key:"nm575m"}],["path",{d:"M16 11h.01",key:"xkw8gn"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sh=Pe("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Pe("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=Pe("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=Pe("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Pe("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Pe("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Pe("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=Pe("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kn=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=Pe("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=Pe("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=Pe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Pe("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=Pe("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Pe("SlidersVertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tm=Pe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=Pe("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=Pe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=Pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=Pe("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=Pe("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Pe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=Pe("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=Pe("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=Pe("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=Pe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=Pe("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=Pe("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Pe("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kb=Pe("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=Pe("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=Pe("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),S0="/assets/favicon-DgnKvsOv.png",Yn={green:"#03CD8C",orange:"#F77F00"};function Ro(...t){return t.filter(Boolean).join(" ")}function k1(t,s,a="text/plain"){const l=new Blob([s],{type:a}),n=URL.createObjectURL(l),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function fs({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",accent:"bg-orange-50 text-orange-800 ring-orange-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Ro("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Vl({variant:t="outline",className:s,children:a,onClick:l,href:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-3 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"},o=t==="primary"?{background:Yn.green}:t==="accent"?{background:Yn.orange}:void 0;return n?e.jsx("a",{href:n,onClick:d=>{l&&(d.preventDefault(),l())},className:Ro(r,i[t],s),style:o,children:a}):e.jsx("button",{type:"button",onClick:l,className:Ro(r,i[t],s),style:o,children:a})}function Hr({id:t,eyebrow:s,title:a,subtitle:l,right:n,children:r}){return e.jsxs("section",{id:t,className:"scroll-mt-28",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",children:[e.jsxs("div",{children:[s?e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:s}):null,e.jsx("h2",{className:"mt-2 text-2xl font-semibold tracking-tight text-slate-900 md:text-3xl",children:a}),l?e.jsx("p",{className:"mt-2 max-w-3xl text-sm text-slate-600 md:text-base",children:l}):null]}),n]}),e.jsx("div",{className:"mt-6",children:r})]})}function Xa({icon:t,title:s,desc:a,chips:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:t}),l!=null&&l.length?e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:l.map(n=>e.jsx(fs,{label:n.label,tone:n.tone},n.label))}):null]}),e.jsx("div",{className:"mt-4 text-base font-semibold text-slate-900",children:s}),e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:a})]})}function rx({value:t,label:s}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-semibold tracking-tight text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s})]})}function JL({active:t,onJump:s}){const a=[{k:"product",label:"Product"},{k:"solutions",label:"Solutions"},{k:"how",label:"How it works"},{k:"modules",label:"Modules"},{k:"security",label:"Security"},{k:"integrations",label:"Integrations"},{k:"esg",label:"ESG"},{k:"faq",label:"FAQ"}];return e.jsx("nav",{className:"hidden items-center gap-4 lg:flex",children:a.map(l=>e.jsx("button",{type:"button",onClick:()=>s(l.k),className:Ro("rounded-full px-3 py-2 text-sm font-semibold ring-1 transition",t===l.k?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:t===l.k?{background:Yn.green}:void 0,children:l.label},l.k))})}function ZL({items:t}){const[s,a]=c.useState(0);return e.jsx("div",{className:"space-y-2",children:t.map((l,n)=>{const r=s===n;return e.jsxs("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white",children:[e.jsxs("button",{type:"button",className:"flex w-full items-center justify-between gap-3 px-5 py-4 text-left hover:bg-slate-50",onClick:()=>a(r?-1:n),children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:l.q}),e.jsx(Dl,{className:Ro("h-5 w-5 text-slate-500 transition",r?"rotate-180":"rotate-0")})]}),e.jsx(qe,{initial:!1,children:r?e.jsx(ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18},children:e.jsx("div",{className:"border-t border-slate-200 px-5 py-4 text-sm text-slate-700",children:l.a})}):null})]},l.q)})})}function eF(){const t=ot(),s=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],a=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],l=[{q:"Do employees need a separate CorporatePay app?",a:"No. Employees use the normal EVzone user apps. At checkout, CorporatePay appears as a payment option when they are linked to an organization and eligible under policy."},{q:"How do approvals work?",a:"Approvals can be auto-approved under thresholds (when allowed), or routed to multi-level approvers based on amount, module, marketplace, vendor, or risk. Decisions are fully audited."},{q:"Can we buy high-value assets that exceed monthly budgets?",a:"Yes. Use RFQ/Quote Requests to request supplier quotes, compare offers, and convert to a purchase order. CapEx vs OpEx and milestone payments can be configured."},{q:"What payment models are supported?",a:"Three models: Pay-as-you-go through the corporate wallet, Credit line with a limit, and Prepaid deposit where services stop when the balance is depleted."},{q:"Can we export to our ERP?",a:"Yes. Export CSV/JSON or connect via secure APIs and webhooks (invoice created/paid, approval completed, limit breached)."},{q:"How is EVzone Support handled?",a:"Support is embedded as a role in your console. Support sessions are visible, watermarked, and auditable. No silent actions. Optional session recording is policy-controlled."}],[n,r]=c.useState(!1),[i,o]=c.useState("product"),[d,u]=c.useState({org:"",name:"",email:"",phone:"",note:""}),[x,p]=c.useState(!1),h=y=>{r(!1),o(y);const f=document.getElementById(y);f&&f.scrollIntoView({behavior:"smooth",block:"start"})};c.useEffect(()=>{const y=["product","solutions","how","modules","security","integrations","esg","faq"],f=()=>{const I=window.scrollY,A=y.map(C=>{const S=document.getElementById(C);if(!S)return null;const z=S.getBoundingClientRect().top+window.scrollY;return{id:C,top:z}}).filter(Boolean);let b="product";for(const C of A)I+160>=C.top&&(b=C.id);o(b)};return window.addEventListener("scroll",f,{passive:!0}),f(),()=>window.removeEventListener("scroll",f)},[]);const j=()=>{!d.org.trim()||!d.name.trim()||!/\S+@\S+\.\S+/.test(d.email)||p(!0)};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsxs("header",{className:"sticky top-0 z-30 border-b border-slate-200 bg-white/80 backdrop-blur",children:[e.jsxs("div",{className:"mx-auto flex w-full items-center justify-between gap-3 px-8 py-3 md:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:S0,alt:"EVzone CorporatePay",className:"h-8 w-8 rounded-2xl object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"CorporatePay"}),e.jsx("div",{className:"text-xs text-slate-500",children:"EVzone corporate admin console"})]})]}),e.jsx(JL,{active:i,onJump:h}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"hidden items-center gap-2 lg:flex",children:[e.jsxs(Vl,{variant:"primary",onClick:()=>h("faq"),children:[e.jsx(Eu,{className:"h-4 w-4"})," Request demo"]}),e.jsxs(Vl,{variant:"outline",onClick:()=>{k1("corporatepay-one-pager.txt","CorporatePay one-pager (demo).","text/plain")},children:[e.jsx(ct,{className:"h-4 w-4"})," Download one-pager"]}),e.jsxs(Vl,{variant:"ghost",onClick:()=>h("how"),children:[e.jsx(ue,{className:"h-4 w-4"})," How it works"]}),e.jsx("button",{type:"button",onClick:()=>t(Mt.CONSOLE.DASHBOARD),className:"ml-1 text-xs font-semibold text-slate-600 underline-offset-4 hover:text-slate-900 hover:underline",children:"Already a customer? Launch console"})]}),e.jsx("button",{type:"button",className:"rounded-2xl border border-slate-200 bg-white p-2 text-slate-800 shadow-sm hover:bg-slate-50 lg:hidden",onClick:()=>r(y=>!y),"aria-label":"Open menu",children:n?e.jsx(_e,{className:"h-5 w-5"}):e.jsx(wb,{className:"h-5 w-5"})})]})]}),e.jsx(qe,{children:n?e.jsx(ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.18},className:"border-t border-slate-200 bg-white lg:hidden",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-3 md:px-6",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{k:"product",label:"Product"},{k:"solutions",label:"Solutions"},{k:"how",label:"How it works"},{k:"modules",label:"Modules"},{k:"security",label:"Security"},{k:"integrations",label:"Integrations"},{k:"esg",label:"ESG"},{k:"faq",label:"FAQ"}].map(y=>e.jsx("button",{type:"button",onClick:()=>h(y.k),className:Ro("rounded-2xl border px-3 py-3 text-left text-sm font-semibold",i===y.k?"border-emerald-300 bg-emerald-50 text-emerald-800":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50"),children:y.label},y.k))})})}):null})]}),e.jsxs("main",{children:[e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-10 md:px-6 md:py-14",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-7",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(fs,{label:"Approvals-first",tone:"info"}),e.jsx(fs,{label:"Budget enforcement",tone:"good"}),e.jsx(fs,{label:"ERP-ready",tone:"neutral"}),e.jsx(fs,{label:"SSO-ready (coming soon)",tone:"neutral"})]}),e.jsxs("h1",{className:"mt-5 text-3xl font-semibold tracking-tight text-slate-900 md:text-5xl",children:["Approve, budget and invoice EVzone spend",e.jsx("span",{className:"text-emerald-700",children:" without slowing teams down"}),"."]}),e.jsx("p",{className:"mt-4 max-w-2xl text-base text-slate-600 md:text-lg",children:"CorporatePay centralizes budgets, approvals, invoicing and policy enforcement across the EVzone Super App, while employees keep using the standard EVzone apps."}),e.jsxs("ul",{className:"mt-4 max-w-2xl space-y-2 text-sm text-slate-700 md:text-base",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:Yn.green}}),e.jsx("span",{children:"Budgets by org/team/user + hard/soft caps"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:Yn.green}}),e.jsx("span",{children:"Multi-level approvals with audit trails"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:Yn.green}}),e.jsx("span",{children:"Invoicing + policy enforcement across EVzone spending groups + ERP exports"})]})]}),e.jsxs("div",{className:"mt-6 flex flex-col gap-2 sm:flex-row sm:items-center",children:[e.jsxs(Vl,{variant:"primary",onClick:()=>h("faq"),children:[e.jsx(Eu,{className:"h-4 w-4"})," Request demo"]}),e.jsxs(Vl,{variant:"outline",onClick:()=>{k1("corporatepay-one-pager.txt","CorporatePay one-pager (demo).","text/plain")},children:[e.jsx(ct,{className:"h-4 w-4"})," Download one-pager"]}),e.jsxs(Vl,{variant:"ghost",onClick:()=>h("how"),children:[e.jsx(ue,{className:"h-4 w-4"})," How it works"]})]}),e.jsx("div",{className:"mt-3 text-sm text-slate-600",children:e.jsx("button",{type:"button",onClick:()=>t(Mt.CONSOLE.DASHBOARD),className:"font-semibold text-slate-700 underline-offset-4 hover:text-slate-900 hover:underline",children:"Already a customer? Launch console"})}),e.jsxs("div",{className:"mt-7 grid grid-cols-2 gap-3 md:grid-cols-4",children:[e.jsx(rx,{value:"3",label:"Payment models"}),e.jsx(rx,{value:"Daily",label:"Invoice options"}),e.jsx(rx,{value:"4",label:"Alert channels"}),e.jsx(rx,{value:"Audit",label:"Every action"})]}),e.jsx("div",{className:"mt-6 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800 ring-1 ring-amber-200",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Best for organizations without fleets"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Hospitals, tour companies, and corporates can run company-paid mobility and procurement without owning vehicles."})]})]})})]}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"grid h-9 w-9 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(yb,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Admin console preview"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Budgets  Approvals  Invoices"})]})]}),e.jsx(fs,{label:"Live",tone:"good"})]})}),e.jsxs("div",{className:"bg-slate-50 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(Tc,{icon:e.jsx(al,{className:"h-4 w-4"}),title:"Wallet + Credit + Prepaid",value:"Payment models"}),e.jsx(Tc,{icon:e.jsx(bb,{className:"h-4 w-4"}),title:"Approval workflows",value:"Auto + multi-level"}),e.jsx(Tc,{icon:e.jsx(jt,{className:"h-4 w-4"}),title:"Invoices",value:"Daily/Weekly/Monthly"}),e.jsx(Tc,{icon:e.jsx(dp,{className:"h-4 w-4"}),title:"Webhooks",value:"Invoice/Approvals/Limits"}),e.jsx(Tc,{icon:e.jsx(Ra,{className:"h-4 w-4"}),title:"Audit + Compliance",value:"Forensic exports"})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Go-live readiness"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:"92%"})]}),e.jsx("div",{className:"h-2 w-28 overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:"92%",background:Yn.green}})})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"Finish invoice group routing to unlock full automation."})]})]}),e.jsx("div",{className:"absolute -right-20 -top-24 h-72 w-72 rounded-full",style:{background:"rgba(3,205,140,0.18)"}}),e.jsx("div",{className:"absolute -bottom-24 -left-24 h-72 w-72 rounded-full",style:{background:"rgba(247,127,0,0.14)"}})]})})]})}),e.jsxs("div",{className:"mx-auto max-w-[95%] px-4 pb-10 md:px-6 md:pb-14",children:[e.jsxs(Hr,{id:"product",eyebrow:"Product",title:"A single corporate control plane for EVzone",subtitle:"CorporatePay centralizes financial controls, policies, and approvals across rides, services, marketplaces, and high-value procurement.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(fs,{label:"Role-based",tone:"neutral"}),e.jsx(fs,{label:"Audit-ready",tone:"info"}),e.jsx(fs,{label:"Policy-driven",tone:"good"})]}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Xa,{icon:e.jsx(bb,{className:"h-6 w-6"}),title:"Approvals that scale",desc:"Auto-approve under thresholds (where allowed) and route higher-risk actions to multi-level approvers. All decisions are auditable.",chips:[{label:"Core",tone:"neutral"},{label:"SLA timers",tone:"info"}]}),e.jsx(Xa,{icon:e.jsx(al,{className:"h-6 w-6"}),title:"Budgets and spend controls",desc:"Org, group, user, module, and marketplace budgets. Hard vs soft caps, alerts, forecasting, and emergency exceptions.",chips:[{label:"Core",tone:"neutral"},{label:"Forecasting",tone:"info"}]}),e.jsx(Xa,{icon:e.jsx(jt,{className:"h-6 w-6"}),title:"Invoicing and reconciliation",desc:"Daily, weekly, monthly invoicing. Invoice groups for AP routing. Exports for ERP reconciliation with audit trails.",chips:[{label:"Core",tone:"neutral"},{label:"ERP-ready",tone:"neutral"}]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Xa,{icon:e.jsx(Vy,{className:"h-6 w-6"}),title:"RFQ for high-value assets",desc:"Request quotes for assets that exceed monthly budgets. Compare offers, convert to purchase orders, and manage milestone payments.",chips:[{label:"Core",tone:"neutral"},{label:"CapEx",tone:"info"}]}),e.jsx(Xa,{icon:e.jsx(up,{className:"h-6 w-6"}),title:"Multi-channel reminders",desc:"Automated notifications for due invoices, overdue status, pending approvals, and limit breaches via Email, WhatsApp, WeChat, and SMS.",chips:[{label:"Core",tone:"neutral"},{label:"Delivery logs",tone:"info"}]}),e.jsx(Xa,{icon:e.jsx(Ra,{className:"h-6 w-6"}),title:"Security and compliance",desc:"Audit logs for every action, MFA policies, device trust, support mode gating, dual control, and forensic exports.",chips:[{label:"Core",tone:"neutral"},{label:"Forensics",tone:"info"}]})]})]}),e.jsx("div",{className:"mt-12",children:e.jsx(Hr,{id:"solutions",eyebrow:"Solutions",title:"Built for corporates, hospitals, and tour companies",subtitle:"Use the same control plane across industries, while applying policy templates and risk controls per program.",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Pf,{title:"Corporate",icon:e.jsx(Ia,{className:"h-5 w-5"}),bullets:["Group budgets and chargeback","Procurement approvals","Consolidated invoicing","ERP exports and mapping"]}),e.jsx(Pf,{title:"Hospital",icon:e.jsx(Ra,{className:"h-5 w-5"}),bullets:["Stricter approvals and audit","24/7 exceptions","Emergency travel rules","Vendor compliance docs"]}),e.jsx(Pf,{title:"Tour company",icon:e.jsx(nn,{className:"h-5 w-5"}),bullets:["Airport routes and geo rules","Event manifests","Visitor scheduling","Approved vendor catalogs"]})]})})}),e.jsx("div",{className:"mt-12",children:e.jsx(Hr,{id:"how",eyebrow:"How it works",title:"Employees keep the normal EVzone apps",subtitle:"CorporatePay lives in your web admin console. For employees, CorporatePay appears as a payment option at checkout only when eligible under policy.",right:e.jsxs(Vl,{variant:"outline",onClick:()=>h("modules"),children:[e.jsx(ue,{className:"h-4 w-4"})," See supported modules"]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-7 space-y-3",children:[e.jsx(ix,{n:1,title:"Create your organization",desc:"Add entities, billing contacts, invoice groups, and enable modules and marketplaces."}),e.jsx(ix,{n:2,title:"Invite employees and assign groups",desc:"Assign roles, group membership, cost centers, spend limits, and auto-approval eligibility."}),e.jsx(ix,{n:3,title:"Define budgets and approval rules",desc:"Set org, group, user, module, and marketplace budgets. Configure approval workflows per module and marketplace."}),e.jsx(ix,{n:4,title:"Go live",desc:"Employees see CorporatePay at checkout. Invoices run on your chosen schedule and exports are audit-ready."})]}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Billing models"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Choose per organization"})]}),e.jsx(fs,{label:"Core",tone:"neutral"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(Mf,{title:"Pay-as-you-go wallet",desc:"Company-funded wallet used at checkout.",icon:e.jsx(al,{className:"h-4 w-4"})}),e.jsx(Mf,{title:"Credit line",desc:"Company credit limit with controls.",icon:e.jsx(k0,{className:"h-4 w-4"})}),e.jsx(Mf,{title:"Prepaid deposit",desc:"Spend-down balance. Services stop when depleted.",icon:e.jsx(eh,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Invoicing frequency can be daily, weekly, monthly, or custom by invoice group."})]})})]})})}),e.jsx("div",{className:"mt-12",children:e.jsxs(Hr,{id:"modules",eyebrow:"Coverage",title:"Modules and marketplaces supported",subtitle:"CorporatePay can govern spending across service modules and marketplaces, with an expansion slot for future modules and marketplaces.",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-6",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Service modules"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enable/disable per org and pilot group"})]}),e.jsx(fs,{label:"Core",tone:"neutral"})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:s.map(y=>e.jsx(fs,{label:y,tone:y==="Other Service Module"?"neutral":"good"},y))})]})}),e.jsx("div",{className:"lg:col-span-6",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Marketplaces"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Under E-Commerce (including MyLiveDealz)"})]}),e.jsx(fs,{label:"Core",tone:"neutral"})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:a.map(y=>e.jsx(fs,{label:y,tone:y==="MyLiveDealz"?"accent":y==="Other Marketplace"?"neutral":"good"},y))})]})})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"High-value procurement"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"RFQ flow for assets that do not fit within monthly budgets."})]}),e.jsx(fs,{label:"RFQ",tone:"info"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsx(ox,{n:1,title:"Create RFQ",desc:"Specs, quantities, delivery location"}),e.jsx(ox,{n:2,title:"Get quotes",desc:"Invite vendors + Q&A thread"}),e.jsx(ox,{n:3,title:"Compare",desc:"Table view + approvals"}),e.jsx(ox,{n:4,title:"Convert",desc:"PO  invoice  payments"})]})]})]})}),e.jsx("div",{className:"mt-12",children:e.jsxs(Hr,{id:"security",eyebrow:"Trust & security",title:"Trust & security highlights",subtitle:"Enterprise controls designed for governance, auditability, and integrations.",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Xa,{icon:e.jsx(Ra,{className:"h-6 w-6"}),title:"Audit-ready",desc:"Immutable logs + exports.",chips:[{label:"Audit-ready",tone:"info"}]}),e.jsx(Xa,{icon:e.jsx(Vs,{className:"h-6 w-6"}),title:"Role-based access",desc:"Admins, approvers, viewers.",chips:[{label:"RBAC",tone:"neutral"}]}),e.jsx(Xa,{icon:e.jsx(dp,{className:"h-6 w-6"}),title:"Integrations",desc:"ERP export + webhooks.",chips:[{label:"ERP",tone:"neutral"},{label:"Webhooks",tone:"info"}]})]}),e.jsxs("div",{className:"mt-5 flex flex-wrap items-center gap-2",children:[e.jsxs(Vl,{variant:"outline",onClick:()=>t("/console/security"),children:[e.jsx(jt,{className:"h-4 w-4"})," Security docs"]}),e.jsxs(Vl,{variant:"outline",onClick:()=>h("integrations"),children:[e.jsx(yr,{className:"h-4 w-4"})," SSO / SAML"]}),e.jsxs(Vl,{variant:"outline",onClick:()=>h("integrations"),children:[e.jsx(dp,{className:"h-4 w-4"})," Webhook events"]}),e.jsxs(Vl,{variant:"outline",onClick:()=>t("/console/security"),children:[e.jsx(as,{className:"h-4 w-4"})," Data retention"]})]})]})}),e.jsx("div",{className:"mt-12",children:e.jsxs(Hr,{id:"integrations",eyebrow:"Integrations",title:"ERP exports, APIs, and webhooks",subtitle:"Sync invoices and ledger data to your ERP with secure APIs, scoped keys, and operational webhooks.",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Xa,{icon:e.jsx(jt,{className:"h-6 w-6"}),title:"CSV and JSON exports",desc:"Export transactions, invoices, and approvals. Use invoice group codes and GL mappings for clean accounting workflows.",chips:[{label:"Core",tone:"neutral"}]}),e.jsx(Xa,{icon:e.jsx(yr,{className:"h-6 w-6"}),title:"Secure API keys and scopes",desc:"Least-privilege scopes, rotation, revocation, IP allowlists, and audit trails for all access.",chips:[{label:"Core",tone:"neutral"}]}),e.jsx(Xa,{icon:e.jsx(nn,{className:"h-6 w-6"}),title:"Webhooks",desc:"Invoice created/paid, approval completed, and limit breached events with delivery logs and retries.",chips:[{label:"Core",tone:"neutral"},{label:"Inspector",tone:"info"}]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Phase 2"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"SSO (Google/Microsoft) and HRIS imports to automate user provisioning."})]}),e.jsx(fs,{label:"Phase 2",tone:"neutral"})]})})]})}),e.jsx("div",{className:"mt-12",children:e.jsxs(Hr,{id:"esg",eyebrow:"Sustainability",title:"Sustainability and ESG reporting",subtitle:"Measure EV usage and charging utilization across your corporate activity, with emissions estimates and template-aligned exports.",right:e.jsx(fs,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(Xa,{icon:e.jsx(Hd,{className:"h-6 w-6"}),title:"EV usage metrics",desc:"Track EV share, charging sessions, off-peak ratio, and utilization by site or group."}),e.jsx(Xa,{icon:e.jsx(Tr,{className:"h-6 w-6"}),title:"Scorecards",desc:"Simple, explainable scorecards that your team can adapt to internal sustainability programs."}),e.jsx(Xa,{icon:e.jsx(jt,{className:"h-6 w-6"}),title:"Template exports",desc:"CSV/JSON exports aligned to your internal ESG templates, plus Print-to-PDF packs."})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-emerald-50 p-3 text-xs text-emerald-900 ring-1 ring-emerald-200",children:"Tip: ESG reporting is strongest when purpose tags and cost centers are enforced in policies."})]})}),e.jsx("div",{className:"mt-12",children:e.jsx(Hr,{id:"faq",eyebrow:"FAQ",title:"Questions and demo request",subtitle:"Send your requirements and we will tailor policy templates for your organization.",right:e.jsx(fs,{label:"Fast setup",tone:"good"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-7",children:e.jsx(ZL,{items:l})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Request a demo"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"We will reply with a tailored walkthrough."})]}),e.jsx(fs,{label:"Free",tone:"neutral"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsx(dx,{label:"Organization",value:d.org,onChange:y=>u(f=>({...f,org:y})),placeholder:"Company name",required:!0}),e.jsx(dx,{label:"Your name",value:d.name,onChange:y=>u(f=>({...f,name:y})),placeholder:"Full name",required:!0}),e.jsx(dx,{label:"Work email",value:d.email,onChange:y=>u(f=>({...f,email:y})),placeholder:"name@company.com",required:!0}),e.jsx(dx,{label:"Phone",value:d.phone,onChange:y=>u(f=>({...f,phone:y})),placeholder:"Optional"}),e.jsx(tF,{label:"What do you want to control?",value:d.note,onChange:y=>u(f=>({...f,note:y})),placeholder:"Example: approvals for rides, RFQ for vehicles, invoice groups for 3 departments",rows:4}),e.jsxs(Vl,{variant:"primary",onClick:j,children:[e.jsx(Eu,{className:"h-4 w-4"})," Submit request"]}),x?e.jsx("div",{className:"rounded-2xl bg-emerald-50 p-3 text-xs text-emerald-900 ring-1 ring-emerald-200",children:"Submitted. We will reach out soon."}):e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600 ring-1 ring-slate-200",children:"By submitting, you confirm you want CorporatePay onboarding. In production, this creates a ticket and onboarding checklist."})]})]})})]})})}),e.jsxs("footer",{className:"mt-12 rounded-[28px] border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl text-white",style:{background:Yn.green},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"CorporatePay"}),e.jsx("div",{className:"text-xs text-slate-500",children:"EVzone Super App"})]})]}),e.jsx("div",{className:"mt-3 max-w-md text-sm text-slate-600",children:"CorporatePay is the corporate admin console that governs how organizations pay for rides, services, and purchases across EVzone."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(fs,{label:"Audit-ready",tone:"info"}),e.jsx(fs,{label:"Approvals-first",tone:"good"}),e.jsx(fs,{label:"ERP exports",tone:"neutral"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3",children:[e.jsx(Tf,{title:"Product",links:["Dashboard","Approvals","Budgets","Invoices","RFQ"]}),e.jsx(Tf,{title:"Security",links:["MFA","Device trust","Dual control","Forensic exports"]}),e.jsx(Tf,{title:"Integrations",links:["CSV/JSON","Webhooks","API keys","Sandbox"]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-slate-200 pt-4 text-xs text-slate-500",children:[" ",new Date().getFullYear()," EVzone CorporatePay. All rights reserved."]})]})]})]})]})}function Tc({icon:t,title:s,value:a}){return e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-3xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"grid h-9 w-9 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:t}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s}),e.jsx("div",{className:"text-xs text-slate-500",children:a})]})]}),e.jsx(ue,{className:"h-5 w-5 text-slate-400"})]})}function Pf({title:t,icon:s,bullets:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:s}),e.jsx(fs,{label:"Template",tone:"neutral"})]}),e.jsx("div",{className:"mt-4 text-base font-semibold text-slate-900",children:t}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:a.map(l=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:Yn.green}}),e.jsx("span",{children:l})]},l))})]})}function ix({n:t,title:s,desc:a}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl text-white",style:{background:Yn.green},children:e.jsx("span",{className:"text-sm font-black",children:t})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a})]})]})})}function Mf({title:t,desc:s,icon:a}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:s})]}),e.jsx("div",{className:"grid h-9 w-9 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:a})]})})}function ox({n:t,title:s,desc:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx(fs,{label:`Step ${t}`,tone:"neutral"}),e.jsx(ue,{className:"h-4 w-4 text-slate-400"})]}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a})]})}function dx({label:t,value:s,onChange:a,placeholder:l,required:n}){const r=!!n&&!s.trim();return e.jsxs("label",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs font-semibold text-slate-600",children:[t,n?e.jsx("span",{className:"text-rose-600",children:" *"}):null]}),r?e.jsx("div",{className:"text-xs font-semibold text-rose-600",children:"Required"}):null]}),e.jsx("input",{value:s,onChange:i=>a(i.target.value),placeholder:l,className:Ro("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-rose-300 bg-white text-slate-900 focus:ring-rose-100":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function tF({label:t,value:s,onChange:a,placeholder:l,rows:n=4}){return e.jsxs("label",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("textarea",{value:s,onChange:r=>a(r.target.value),placeholder:l,rows:n,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"})]})}function Tf({title:t,links:s}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-600",children:s.map(a=>e.jsx("li",{children:e.jsx("a",{href:"#",className:"hover:text-slate-900",children:a})},a))})]})}const C1={green:"#03CD8C"};function S1(...t){return t.filter(Boolean).join(" ")}function sF(){const t=ot(),[s,a]=c.useState(""),[l,n]=c.useState(""),[r,i]=c.useState(!1),[o,d]=c.useState("Acme Group Ltd"),[u,x]=c.useState(!1),[p,h]=c.useState(!1),[j,y]=c.useState(""),f=["Acme Group Ltd","EVzone Demo Org","Kampala Holdings"],I=b=>{if(b.preventDefault(),y(""),!s||!l){y("Please enter email and password");return}h(!0),setTimeout(()=>{h(!1),t(Mt.CONSOLE.DASHBOARD)},1e3)},A=()=>{h(!0),setTimeout(()=>{h(!1),t(Mt.CONSOLE.DASHBOARD)},800)};return e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gradient-to-br from-slate-50 via-white to-emerald-50 p-4",children:e.jsxs(ke.div,{initial:{opacity:0,y:20,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{duration:.3},className:"w-full max-w-md",children:[e.jsxs("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsx("div",{className:"border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white px-6 py-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white shadow-lg",style:{background:C1.green},children:e.jsx(lt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-900",children:"CorporatePay"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Sign in to your account"})]})]})}),e.jsxs("form",{onSubmit:I,className:"space-y-4 p-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-600",children:"Organization"}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>x(!u),className:"flex w-full items-center justify-between rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-left text-sm font-medium text-slate-900 transition hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-emerald-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ia,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:o})]}),e.jsx(Dl,{className:S1("h-4 w-4 text-slate-400 transition-transform",u&&"rotate-180")})]}),u&&e.jsx(ke.div,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},className:"absolute left-0 right-0 z-10 mt-1 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg",children:f.map(b=>e.jsxs("button",{type:"button",onClick:()=>{d(b),x(!1)},className:S1("flex w-full items-center gap-2 px-3 py-2 text-left text-sm transition hover:bg-slate-50",o===b?"bg-emerald-50 font-medium text-emerald-700":"text-slate-700"),children:[e.jsx(Ia,{className:"h-4 w-4"}),b]},b))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-600",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"email",value:s,onChange:b=>a(b.target.value),placeholder:"you@company.com",className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-3 text-sm text-slate-900 placeholder:text-slate-400 focus:border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-600",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:r?"text":"password",value:l,onChange:b=>n(b.target.value),placeholder:"",className:"w-full rounded-xl border border-slate-200 bg-white py-2.5 pl-10 pr-10 text-sm text-slate-900 placeholder:text-slate-400 focus:border-emerald-300 focus:outline-none focus:ring-2 focus:ring-emerald-200"}),e.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:r?e.jsx(YS,{className:"h-4 w-4"}):e.jsx(QS,{className:"h-4 w-4"})})]})]}),j&&e.jsx("div",{className:"rounded-lg bg-rose-50 px-3 py-2 text-xs font-medium text-rose-700",children:j}),e.jsx("div",{className:"text-right",children:e.jsx("button",{type:"button",className:"text-xs font-medium text-emerald-600 hover:text-emerald-700 hover:underline",children:"Forgot password?"})}),e.jsx("button",{type:"submit",disabled:p,className:"flex w-full items-center justify-center gap-2 rounded-xl px-4 py-3 text-sm font-semibold text-white shadow-lg transition hover:opacity-95 focus:outline-none focus:ring-4 focus:ring-emerald-200 disabled:opacity-60",style:{background:C1.green},children:p?e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}):"Sign in"}),e.jsxs("div",{className:"relative py-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-white px-3 text-xs text-slate-500",children:"or continue with"})})]}),e.jsxs("button",{type:"button",onClick:A,disabled:p,className:"flex w-full items-center justify-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 shadow-sm transition hover:bg-slate-50 focus:outline-none focus:ring-4 focus:ring-slate-100 disabled:opacity-60",children:[e.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google SSO"]})]}),e.jsxs("div",{className:"border-t border-slate-100 bg-slate-50 px-6 py-4 text-center text-xs text-slate-500",children:["By signing in, you agree to our"," ",e.jsx("a",{href:"#",className:"font-medium text-emerald-600 hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx("a",{href:"#",className:"font-medium text-emerald-600 hover:underline",children:"Privacy Policy"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{type:"button",onClick:()=>t(Mt.HOME),className:"text-sm font-medium text-slate-500 hover:text-slate-700",children:" Back to home"})})]})})}const aF=[{path:Mt.HOME,element:ds.createElement(eF)},{path:Mt.SIGNIN,element:ds.createElement(sF)}],oA=c.createContext(void 0);function lF({children:t}){const[s,a]=c.useState(()=>localStorage.getItem("auth_token")==="demo_token"),l=()=>{localStorage.setItem("auth_token","demo_token"),a(!0)},n=()=>{localStorage.removeItem("auth_token"),a(!1)};return e.jsx(oA.Provider,{value:{isAuthenticated:s,login:l,logout:n},children:t})}function dA(){const t=c.useContext(oA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Fd={green:"#03CD8C",orange:"#F77F00"};function Br(...t){return t.filter(Boolean).join(" ")}function nF(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function rF(t,s,a){return Math.max(s,Math.min(a,t))}function A1(t){if(!t)return"-";const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function Qs({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Br("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function xs({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Fd.green}:t==="accent"?{background:Fd.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Br(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function cx({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Br("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Br("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function zo({icon:t,label:s,value:a,onChange:l,type:n="text",placeholder:r,hint:i,required:o,disabled:d}){const u=!!o&&!a.trim();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs font-semibold text-slate-600",children:[s,o?e.jsx("span",{className:"text-rose-600",children:" *"}):null]}),i?e.jsx("div",{className:"text-xs text-slate-500",children:i}):null]}),e.jsxs("div",{className:Br("mt-2 flex items-center gap-2 rounded-2xl border bg-white px-3 py-2.5 shadow-sm focus-within:ring-4",d?"border-slate-200 bg-slate-50 text-slate-500":u?"border-rose-300 focus-within:ring-rose-100":"border-slate-200 focus-within:ring-emerald-100"),children:[e.jsx("span",{className:"text-slate-500",children:t}),e.jsx("input",{type:n,value:a,onChange:x=>l(x.target.value),placeholder:r,disabled:d,className:Br("w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400",d&&"text-slate-500")})]}),u?e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:"Required"}):null]})}function Rf({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="720px"}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(820px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function iF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Br("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function oF(){var Xe,Ie;const t=ot(),s=_i(),{login:a}=dA(),l=((Ie=(Xe=s.state)==null?void 0:Xe.from)==null?void 0:Ie.pathname)||Mt.CONSOLE.DASHBOARD,[n,r]=c.useState([]),i=v=>{const Q=nF("toast");r(de=>[{id:Q,...v},...de].slice(0,4)),window.setTimeout(()=>r(de=>de.filter(Se=>Se.id!==Q)),3200)},[o,d]=c.useState("login"),[u,x]=c.useState("admin@acme.com"),[p,h]=c.useState(""),[j,y]=c.useState(!0),[f,I]=c.useState(!0),[A,b]=c.useState(!1),[C,S]=c.useState(!1),[z,$]=c.useState("196.43.199.81"),[D,W]=c.useState("Kampala, UG"),[he,V]=c.useState("Windows Chrome"),[xe,pe]=c.useState({location:"Kampala, UG",ts:Date.now()-26*60*60*1e3}),be=c.useMemo(()=>{let v=5;f&&(v+=35),A&&(v+=25),C&&(v+=45);const Q=u.toLowerCase();return(Q.includes("finance")||Q.includes("account"))&&(v+=15),rF(v,0,100)},[f,A,C,u]),fe=c.useMemo(()=>be>=70?{label:"High",tone:"bad"}:be>=40?{label:"Medium",tone:"warn"}:{label:"Low",tone:"good"},[be]),[K,re]=c.useState(!1),[q,L]=c.useState(""),[M,k]=c.useState(""),[P,Y]=c.useState(null),[F,G]=c.useState(""),[ve]=c.useState(["Acme Group Ltd","Kampala Holdings","EVzone Demo Org"]),[Te,ye]=c.useState("Acme Group Ltd"),ie=c.useMemo(()=>u.toLowerCase().includes("admin"),[u]),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState("support@evzone.com"),[Ce,Ee]=c.useState(""),[Ue,Ye]=c.useState(!1),[De,Be]=c.useState(""),[$e,_]=c.useState(!0),te=c.useMemo(()=>ee.trim().toLowerCase().endsWith("@evzone.com")&&Ce.trim().length>=6,[ee,Ce]),[Re,Fe]=c.useState(()=>[{id:"S-001",device:"Windows Chrome",location:"Kampala, UG",ip:"196.43.199.81",trusted:!1,lastSeenTs:Date.now()-2*60*1e3,current:!0},{id:"S-002",device:"Android App",location:"Kampala, UG",ip:"41.190.31.12",trusted:!0,lastSeenTs:Date.now()-6*60*60*1e3,current:!1},{id:"S-003",device:"Mac Safari",location:"Wuxi, CN",ip:"103.42.111.9",trusted:!1,lastSeenTs:Date.now()-6*24*60*60*1e3,current:!1}]),[T,Z]=c.useState(!1),[B,ne]=c.useState(""),[X,ge]=c.useState(""),[Le,ae]=c.useState("Manager"),[le,R]=c.useState(""),[se,m]=c.useState([]),w=["Org Admin","Manager","Accountant","Approver","Travel Coordinator","User"],oe=c.useMemo(()=>{const v=u.toLowerCase();return v.includes("finance")||v.includes("account")?"Accountant":v.includes("approver")?"Approver":v.includes("travel")?"Travel Coordinator":v.includes("admin")?"Org Admin":"Manager"},[u]),me=c.useMemo(()=>{const v=oe==="Accountant"||oe==="Approver";return be>=40||v},[be,oe]),Me=()=>{if(!u.trim()||!p.trim()){i({title:"Missing details",message:"Enter your email and password to continue.",kind:"warn"});return}i({title:"Credentials verified",message:"Checking session risk...",kind:"success"});const v={email:u,role:oe,isSupport:!1,needsOrgSelect:ie};if(me){Y(v),re(!0);return}Ve(v)},Ve=v=>{if(v.needsOrgSelect){d("org");return}ye(Te),d("ready"),i({title:"Signed in",message:`Role: ${v.role}`,kind:"success"})},Ze=()=>{if(P){if(q.trim().length<6){i({title:"Invalid code",message:"Enter a 6-digit code.",kind:"warn"});return}if(Ue&&!M.trim()){i({title:"Justification required",message:"Provide a reason for support session actions.",kind:"warn"});return}re(!1),L(""),i({title:"Step-up verified",message:"Security check passed. Continuing...",kind:"success"}),Ve(P),Y(null)}},E=()=>{Ae(!0)},J=()=>{if(!te){i({title:"Not allowed",message:"Use an EVzone email and valid key.",kind:"warn"});return}const v=`SUP-${Math.floor(1e5+Math.random()*9e5)}`;Be(v),Ye(!0),Ae(!1),Y({email:ee,role:"EVzone Support",isSupport:!0,needsOrgSelect:!0}),k("Troubleshooting request"),re(!0),i({title:"Support mode requested",message:"Step-up authentication required.",kind:"info"})},g=()=>{d("ready"),i({title:"Organization selected",message:`Opening ${Te}.`,kind:"success"})},H=()=>{if(!B.trim()||!X.trim()||!u.trim()){i({title:"Missing fields",message:"Organization, your name, and email are required.",kind:"warn"});return}const v=`TCK-${Math.floor(1e5+Math.random()*9e5)}`,Q={id:v,org:B.trim(),requester:X.trim(),email:u.trim(),roleNeeded:Le,reason:le.trim(),createdAt:Date.now(),status:"Submitted"};m(de=>[Q,...de]),Z(!1),ne(""),ge(""),R(""),i({title:"Request submitted",message:`Ticket created: ${v}. Org admin notified.`,kind:"success"})},N=v=>{Fe(Q=>Q.filter(de=>de.id!==v)),i({title:"Session revoked",message:`Device session ${v} revoked.`,kind:"success"})},U=()=>{Fe(v=>v.filter(Q=>Q.current)),i({title:"Sessions revoked",message:"All other sessions revoked.",kind:"success"})},ce=()=>{Ye(!1),Be(""),i({title:"Support session ended",message:"Support mode disabled.",kind:"info"})},O=c.useMemo(()=>{const v=F.trim().toLowerCase();return v?ve.filter(Q=>Q.toLowerCase().includes(v)):ve},[F,ve]),je=c.useMemo(()=>{const v=[];return v.push({label:"New device",on:f,tone:"warn"}),v.push({label:"New location",on:A,tone:"warn"}),v.push({label:"Impossible travel",on:C,tone:"bad"}),v},[f,A,C]),we=c.useMemo(()=>Ue?{label:`Support Session: ${De}`,tone:"warn"}:{label:`Risk: ${fe.label} (${be})`,tone:fe.tone},[Ue,De,fe,be]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(iF,{toasts:n,onDismiss:v=>r(Q=>Q.filter(de=>de.id!==v))}),Ue&&$e?e.jsxs("div",{className:"pointer-events-none fixed inset-0 z-0 opacity-[0.08]",children:[e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(-22deg, rgba(2,6,23,1) 0, rgba(2,6,23,1) 1px, transparent 1px, transparent 240px)"}}),e.jsx("div",{className:"absolute inset-0 grid place-items-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-black tracking-tight text-slate-900",children:"EVzone Support Session"}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:"Audited  No silent actions"}),e.jsx("div",{className:"mt-1 text-xs text-slate-700",children:De})]})})]}):null,Ue?e.jsx("div",{className:"sticky top-0 z-20 border-b border-amber-200 bg-amber-50",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl flex-col gap-2 px-4 py-3 md:flex-row md:items-center md:justify-between md:px-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800 ring-1 ring-amber-200",children:e.jsx(Tt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Support mode active"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-700",children:["Session ",De,". View-only by default. Any write action requires justification and is audit logged."]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(xs,{variant:"outline",className:"text-xs",onClick:()=>_(v=>!v),children:[e.jsx(th,{className:"h-4 w-4"})," ",$e?"Hide":"Show"," watermark"]}),e.jsxs(xs,{variant:"danger",className:"text-xs",onClick:ce,children:[e.jsx(Nr,{className:"h-4 w-4"})," End session"]})]})]})}):null,e.jsxs("div",{className:"relative z-10 mx-auto max-w-7xl px-4 py-10 md:px-6",children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Fd.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"EVzone CorporatePay"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Login and organization selection"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qs,{label:we.label,tone:we.tone}),e.jsxs(xs,{variant:"outline",onClick:()=>Z(!0),children:[e.jsx(ir,{className:"h-4 w-4"})," Request access"]}),e.jsxs(xs,{variant:"outline",onClick:E,children:[e.jsx(Tt,{className:"h-4 w-4"})," EVzone Support"]})]})]}),e.jsxs(qe,{mode:"wait",children:[o==="login"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},children:e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-6 shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Session security"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Risk-based step-up prompts, device trust, and audit visibility."})]}),e.jsx(Qs,{label:`Risk: ${fe.label}`,tone:fe.tone})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Risk signals"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Toggle to preview step-up prompts."})]}),e.jsx(Qs,{label:`Score ${be}/100`,tone:fe.tone})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[e.jsx(cx,{enabled:f,onChange:I,label:"New device",description:"Unseen device"}),e.jsx(cx,{enabled:A,onChange:b,label:"New geo",description:"New region"}),e.jsx(cx,{enabled:C,onChange:S,label:"Impossible travel",description:"Too fast"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(Go,{icon:e.jsx(Po,{className:"h-4 w-4"}),label:"Current location",value:D}),e.jsx(Go,{icon:e.jsx(nn,{className:"h-4 w-4"}),label:"IP",value:z}),e.jsx(Go,{icon:e.jsx(N1,{className:"h-4 w-4"}),label:"Device",value:he})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-white p-3 text-xs text-slate-600",children:["Last sign-in: ",e.jsx("span",{className:"font-semibold text-slate-900",children:xe.location}),"  ",A1(xe.ts)]})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"What happens when risk is high"}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full",style:{background:Fd.green}}),"Step-up prompt (MFA code)"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full",style:{background:Fd.orange}}),"Support sessions require justification and show a watermark"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-1 h-1.5 w-1.5 rounded-full",style:{background:Fd.green}}),"Active sessions can be revoked instantly"]})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Policy default: Finance and Approver roles require MFA."})]}),se.length?e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Recent access requests"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Tickets created from this login page."})]}),e.jsx(Qs,{label:`${se.length}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-3 space-y-2",children:se.slice(0,2).map(v=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.id}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[v.org,"  Role: ",v.roleNeeded]})]}),e.jsx(Qs,{label:v.status,tone:v.status==="Submitted"?"info":"neutral"})]})},v.id))})]}):null]}),e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-6 shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sign in"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Email and password. SSO is Phase 2."})]}),e.jsx(Qs,{label:`Role detected: ${oe}`,tone:"info"})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4",children:[e.jsx(zo,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Email",required:!0,value:u,onChange:x,placeholder:"you@company.com"}),e.jsx(zo,{icon:e.jsx(as,{className:"h-4 w-4"}),label:"Password",required:!0,value:p,onChange:h,type:"password",placeholder:""}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:v=>y(v.target.checked),className:"h-4 w-4 rounded border-slate-300"}),"Remember me"]}),e.jsx("button",{className:"text-sm font-semibold text-emerald-700 hover:underline",onClick:()=>i({title:"Reset password",message:"Password reset flow opened (demo).",kind:"info"}),type:"button",children:"Forgot password?"})]}),e.jsxs(xs,{variant:"primary",className:"w-full",onClick:Me,children:[e.jsx(rr,{className:"h-4 w-4"})," Sign in"]}),e.jsxs("div",{className:"relative py-2",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-slate-200"})}),e.jsx("div",{className:"relative flex justify-center",children:e.jsx("span",{className:"bg-white px-3 text-xs font-semibold text-slate-500",children:"OR"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[e.jsxs(xs,{variant:"outline",disabled:!0,title:"Phase 2",children:[e.jsx("span",{className:"grid h-6 w-6 place-items-center rounded-xl bg-slate-100 text-slate-700",children:"G"}),"Continue with Google"]}),e.jsxs(xs,{variant:"outline",disabled:!0,title:"Phase 2",children:[e.jsx("span",{className:"grid h-6 w-6 place-items-center rounded-xl bg-slate-100 text-slate-700",children:"M"}),"Continue with Microsoft"]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"EVzone Support entry"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Role-gated sign-in with watermark and audited session."})]}),e.jsx(Qs,{label:"Support",tone:"warn"})]}),e.jsxs(xs,{variant:"outline",className:"mt-3 w-full",onClick:E,children:[e.jsx(Tt,{className:"h-4 w-4"})," Sign in as EVzone Support"]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Support mode actions are never silent and always logged."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Need access?"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Create a request ticket for your organization admin."}),e.jsxs(xs,{variant:"accent",className:"mt-3 w-full",onClick:()=>Z(!0),children:[e.jsx(ir,{className:"h-4 w-4"})," Request access"]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:"If your account belongs to multiple organizations, you will pick one after sign-in."})]})]})]})},"login"):null,o==="org"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-6 shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Select organization"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Your account belongs to multiple organizations. Choose one to continue."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qs,{label:`Signed in as ${Ue?"EVzone Support":oe}`,tone:Ue?"warn":"info"}),e.jsxs(xs,{variant:"outline",onClick:()=>{d("login"),i({title:"Signed out",message:"Returned to login.",kind:"info"})},children:[e.jsx(Nr,{className:"h-4 w-4"})," Sign out"]})]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Search org"}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 shadow-sm focus-within:ring-4 focus-within:ring-emerald-100",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:F,onChange:v=>G(v.target.value),placeholder:"Type to filter...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"Support sessions display a banner and watermark after you enter the org."})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:O.map(v=>e.jsx("button",{type:"button",onClick:()=>ye(v),className:Br("rounded-3xl border p-4 text-left transition",Te===v?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Br("grid h-11 w-11 place-items-center rounded-2xl",Te===v?"bg-white text-emerald-700 ring-1 ring-emerald-200":"bg-slate-100 text-slate-700"),children:e.jsx(Ia,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Admin Console access"})]})]}),Te===v?e.jsx(et,{className:"h-5 w-5 text-emerald-700"}):e.jsx(ue,{className:"h-5 w-5 text-slate-400"})]})},v))}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(xs,{variant:"outline",onClick:()=>d("login"),children:"Back"}),e.jsxs(xs,{variant:"primary",onClick:g,children:[e.jsx(Ia,{className:"h-4 w-4"})," Continue"]})]})]})]})]})},"org"):null,o==="ready"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-6 shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Welcome"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Organization: ",Te]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Qs,{label:Ue?"EVzone Support":oe,tone:Ue?"warn":"info"}),e.jsx(Qs,{label:`Email: ${Ue?ee:u}`,tone:"neutral"}),e.jsx(Qs,{label:`Risk: ${fe.label}`,tone:fe.tone})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(xs,{variant:"outline",onClick:U,children:[e.jsx(Nr,{className:"h-4 w-4"})," Revoke other sessions"]}),e.jsxs(xs,{variant:"primary",onClick:()=>{a(),i({title:"Continue",message:"Redirecting...",kind:"success"}),t(l,{replace:!0})},children:[e.jsx(ue,{className:"h-4 w-4"})," Continue to dashboard"]})]})]}),e.jsxs("div",{className:"mt-5 grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Session badge"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Visibility and audit watermark for support sessions"})]}),e.jsx(Qs,{label:Ue?"Support":"Standard",tone:Ue?"warn":"good"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:Ue?e.jsxs(e.Fragment,{children:["Support session ",e.jsx("span",{className:"font-semibold",children:De})," is visible to organization admins. No silent actions."]}):e.jsx(e.Fragment,{children:"Standard admin session. Security events are still logged."})}),e.jsx(cx,{enabled:Ue?$e:!1,onChange:v=>_(v),label:"Audit watermark",description:"Shown when support mode is active"})]}),e.jsxs("div",{className:"lg:col-span-2 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Active sessions"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Revoke devices and manage trust settings."})]}),e.jsx(Qs,{label:`${Re.length}`,tone:"neutral"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Session"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Device"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Location"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"IP"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Trusted"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Last seen"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:Re.map(v=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:v.id}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.device}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.location}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.ip}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Qs,{label:v.trusted?"Yes":"No",tone:v.trusted?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:A1(v.lastSeenTs)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(xs,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{v.current?(Fe(Q=>Q.map(de=>de.id===v.id?{...de,trusted:!de.trusted}:de)),i({title:"Updated",message:"Current device trust updated.",kind:"success"})):(Fe(Q=>Q.map(de=>de.id===v.id?{...de,trusted:!de.trusted}:de)),i({title:"Updated",message:"Device trust updated.",kind:"success"}))},children:[e.jsx(th,{className:"h-4 w-4"})," ",v.trusted?"Untrust":"Trust"]}),v.current?e.jsx(Qs,{label:"Current",tone:"info"}):e.jsxs(xs,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>N(v.id),children:[e.jsx(Nr,{className:"h-4 w-4"})," Revoke"]})]})})]},v.id))})]})}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"In production, session actions require audit logging and may require step-up authentication."})]})]}),e.jsxs("div",{className:"mt-5 flex flex-wrap items-center justify-between gap-2 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sign out"}),e.jsxs(xs,{variant:"outline",onClick:()=>{d("login"),i({title:"Signed out",message:"Returned to login.",kind:"info"})},children:[e.jsx(Nr,{className:"h-4 w-4"})," Sign out"]})]})]})},"ready"):null]})]}),e.jsxs(Rf,{open:K,title:"Step-up authentication",subtitle:"Risk-based prompt. Complete MFA to continue.",onClose:()=>{re(!1),Y(null)},footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(xs,{variant:"outline",onClick:()=>{re(!1),Y(null),i({title:"Cancelled",message:"Step-up cancelled.",kind:"info"})},children:"Cancel"}),e.jsxs(xs,{variant:"primary",onClick:Ze,children:[e.jsx(He,{className:"h-4 w-4"})," Verify"]})]}),maxW:"820px",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Risk summary"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Signals that triggered this prompt."})]}),e.jsx(Qs,{label:`Risk ${be}/100`,tone:fe.tone})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:je.map(v=>e.jsx(Qs,{label:`${v.label}: ${v.on?"Yes":"No"}`,tone:v.on?v.tone:"neutral"},v.label))}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[e.jsx(Go,{icon:e.jsx(Po,{className:"h-4 w-4"}),label:"Location",value:D}),e.jsx(Go,{icon:e.jsx(nn,{className:"h-4 w-4"}),label:"IP",value:z}),e.jsx(Go,{icon:e.jsx(N1,{className:"h-4 w-4"}),label:"Device",value:he})]})]}),P!=null&&P.isSupport?e.jsxs("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800 ring-1 ring-amber-200",children:e.jsx(Tt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Support session rules"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"No silent actions. Any write action requires justification."}),e.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Session ID: ",De]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:"Justification (required)"}),e.jsx("textarea",{value:M,onChange:v=>k(v.target.value),placeholder:"Example: troubleshooting an invoice delivery failure",className:"mt-2 w-full rounded-2xl border border-amber-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-amber-100",rows:3})]})]}):null,e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Authenticator code"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enter a 6-digit code from your authenticator app."}),e.jsx("input",{value:q,onChange:v=>L(v.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"mt-3 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Demo: any 6 digits are accepted."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Help"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"If you cannot access your authenticator, use backup codes (X2 page)."}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Finance and Approver roles require MFA."}),e.jsxs(xs,{variant:"outline",className:"mt-3 w-full",onClick:()=>i({title:"Help",message:"Open MFA help article (demo).",kind:"info"}),children:[e.jsx(Pm,{className:"h-4 w-4"})," MFA help"]})]})]})]}),e.jsxs(Rf,{open:Oe,title:"EVzone Support sign-in",subtitle:"Role-gated entry. Support sessions are visible and audited.",onClose:()=>Ae(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(xs,{variant:"outline",onClick:()=>Ae(!1),children:"Cancel"}),e.jsxs(xs,{variant:"primary",disabled:!te,onClick:J,children:[e.jsx(Tt,{className:"h-4 w-4"})," Continue"]})]}),maxW:"820px",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(zo,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"EVzone email",value:ee,onChange:Ne,placeholder:"support@evzone.com",required:!0}),e.jsx(zo,{icon:e.jsx(rr,{className:"h-4 w-4"}),label:"Support key",value:Ce,onChange:Ee,placeholder:"Enter key",type:"password",required:!0,hint:"Demo: 6+ chars"})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800 ring-1 ring-amber-200",children:e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Support safety"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[e.jsx("li",{children:"1) View-only by default"}),e.jsx("li",{children:"2) Step-up authentication required"}),e.jsx("li",{children:"3) Justification required for write actions"}),e.jsx("li",{children:"4) Visible banner and watermark"})]})]})]})})]}),e.jsxs(Rf,{open:T,title:"Request access",subtitle:"Creates a ticket for the organization admin and logs the request.",onClose:()=>Z(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(xs,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),e.jsxs(xs,{variant:"primary",onClick:H,children:[e.jsx(ir,{className:"h-4 w-4"})," Submit"]})]}),maxW:"820px",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700",children:[e.jsx("span",{className:"font-semibold",children:"Email used"}),": ",u||"(enter email on login page)"]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(zo,{icon:e.jsx(Ia,{className:"h-4 w-4"}),label:"Organization",required:!0,value:B,onChange:ne,placeholder:"Example: Acme Group Ltd"}),e.jsx(zo,{icon:e.jsx(or,{className:"h-4 w-4"}),label:"Your name",required:!0,value:X,onChange:ge,placeholder:"Full name"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Role needed"}),e.jsx("select",{value:Le,onChange:v=>ae(v.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100",children:w.map(v=>e.jsx("option",{value:v,children:v},v))}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"The org admin will approve this request."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Delivery"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(Qs,{label:"Email",tone:"neutral"}),e.jsx(Qs,{label:"WhatsApp",tone:"good"}),e.jsx(Qs,{label:"SMS",tone:"info"})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"In production, delivery logs appear in Notifications Center."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Reason"}),e.jsx("textarea",{value:le,onChange:v=>R(v.target.value),placeholder:"Explain why you need access",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100",rows:4}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Tip: include urgency and your responsibilities."})]})]})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 text-xs text-slate-500 md:px-6",children:"X1 Login: email/password, org selector, EVzone support entry, risk-based step-up prompts, session management, and support-mode banner + watermark."})})]})}function Go({icon:t,label:s,value:a}){return e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:t}),e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:s})]}),e.jsx("span",{className:"text-xs font-semibold text-slate-900",children:a})]})})}const Pu={green:"#03CD8C",orange:"#F77F00"};function Cn(...t){return t.filter(Boolean).join(" ")}function E1(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function cA(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function ux(t){if(!t)return"-";const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function Lt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Cn("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Vt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Pu.green}:t==="accent"?{background:Pu.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Cn(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function mx({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Cn("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Cn("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function dF({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:Cn("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function cF({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="860px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(dF,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function uF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Cn("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Kr({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text"}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:i=>a(i.target.value),placeholder:l,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"})]})}function Df(t=8){return Array.from({length:t}).map(()=>{const s=Math.random().toString(16).slice(2,6).toUpperCase(),a=Math.random().toString(16).slice(2,6).toUpperCase();return`${s}-${a}`})}function xx(t,s){const a=new Blob([s],{type:"text/plain"}),l=URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download=t,n.click(),URL.revokeObjectURL(l)}function mF(t){const s=["id","timestamp","severity","actor","category","title","detail","status"],a=n=>{const r=String(n??"");return r.includes(",")||r.includes(`
`)||r.includes('"')?`"${r.replace(/"/g,'""')}"`:r},l=t.map(n=>[n.id,cA(n.ts),n.severity,n.actor,n.category,n.title,n.detail,n.status].map(a).join(","));return[s.join(","),...l].join(`
`)}function xF(t){return t==="Critical"?"bad":t==="Warning"?"warn":"info"}function pF(t){const s=[];if(t.ipEnabled&&(t.ipAllow.includes(t.ip)||s.push("IP not in allowlist")),t.geoEnabled&&(t.geoAllow.map(l=>l.toLowerCase()).includes(t.geo.toLowerCase())||s.push("Geo not in allowlist")),t.timeEnabled){t.timeDays.includes(t.day)||s.push("Day not allowed");const l=t.time;t.timeStart&&t.timeEnd&&(l<t.timeStart||l>t.timeEnd)&&s.push("Time outside allowed window")}return s.length?{status:"Step-up required",reasons:s}:{status:"Allowed",reasons:[]}}function hF(){const[t,s]=c.useState([]),a=O=>{const je=E1("toast");s(we=>[{id:je,...O},...we].slice(0,4)),window.setTimeout(()=>s(we=>we.filter(Xe=>Xe.id!==je)),3200)},[l,n]=c.useState("setup"),[r]=c.useState("EVZ-CPAY-2FA-9X3D-7K1P"),[i,o]=c.useState(""),[d,u]=c.useState(!1),[x,p]=c.useState([]),[h,j]=c.useState(!0),[y,f]=c.useState(30),[I,A]=c.useState({Finance:!0,Approver:!0,Admin:!0,Manager:!1,User:!1,"Travel Coordinator":!1}),[b,C]=c.useState(()=>[{id:"S-001",device:"Windows Chrome",location:"Kampala, UG",ip:"196.43.199.81",trusted:!1,lastSeenTs:Date.now()-2*60*1e3,status:"Current"},{id:"S-002",device:"Android App",location:"Kampala, UG",ip:"41.190.31.12",trusted:!0,lastSeenTs:Date.now()-6*60*60*1e3,status:"Active"},{id:"S-003",device:"Mac Safari",location:"Wuxi, CN",ip:"103.42.111.9",trusted:!1,lastSeenTs:Date.now()-6*24*60*60*1e3,status:"Signed out"}]),[S,z]=c.useState(!1),[$,D]=c.useState(["196.43.199.81","41.190.31.12"]),[W,he]=c.useState(""),[V,xe]=c.useState(!1),[pe,be]=c.useState(["Kampala, UG","Entebbe, UG"]),[fe,K]=c.useState(""),[re,q]=c.useState(!1),[L,M]=c.useState("06:00"),[k,P]=c.useState("22:00"),[Y,F]=c.useState(["Mon","Tue","Wed","Thu","Fri"]),[G,ve]=c.useState("196.43.199.81"),[Te,ye]=c.useState("Kampala, UG"),[ie,Oe]=c.useState("Wed"),[Ae,ee]=c.useState("10:30"),[Ne,Ce]=c.useState(()=>[{id:"BG-001",email:"breakglass-admin@acme.com",enabled:!0,locked:!1,lastRotatedTs:Date.now()-60*24*60*60*1e3,lastUsedTs:null,notes:"Emergency-only. Dual-control recommended.",emergencyCodes:Df(10)}]),[Ee,Ue]=c.useState(!1),[Ye,De]=c.useState(null),[Be,$e]=c.useState(()=>[{id:"EVT-9001",ts:Date.now()-20*60*1e3,severity:"Warning",actor:"System",category:"Tamper",title:"MFA disable attempt blocked",detail:"A user attempted to disable MFA but policy requires MFA for Finance roles.",status:"Open"},{id:"EVT-9002",ts:Date.now()-2*60*60*1e3,severity:"Info",actor:"Org Admin",category:"Policy",title:"Updated MFA policy",detail:"Set MFA required for Approver and Admin roles.",status:"Resolved"},{id:"EVT-9003",ts:Date.now()-9*60*60*1e3,severity:"Critical",actor:"System",category:"Session",title:"Unusual login detected",detail:"Impossible travel signal. Step-up authentication required.",status:"Open"}]),[_,te]=c.useState("All"),[Re,Fe]=c.useState("All"),T=O=>{const je={id:E1("EVT"),ts:Date.now(),status:O.status??"Open",...O};$e(we=>[je,...we])},Z=c.useMemo(()=>pF({ip:G,geo:Te,day:ie,time:Ae,ipEnabled:S,ipAllow:$,geoEnabled:V,geoAllow:pe,timeEnabled:re,timeStart:L,timeEnd:k,timeDays:Y}),[G,Te,ie,Ae,S,$,V,pe,re,L,k,Y]),B=c.useMemo(()=>Be.filter(O=>O.status==="Open").length,[Be]),ne=c.useMemo(()=>Be.filter(O=>O.status==="Open"&&O.severity==="Critical").length,[Be]),X=c.useMemo(()=>Be.filter(O=>!(_!=="All"&&O.status!==_||Re!=="All"&&O.severity!==Re)),[Be,_,Re]),ge=O=>{if(O==="json"){xx("corporatepay-security-events.json",JSON.stringify(Be,null,2)),a({title:"Exported",message:"Security events exported as JSON.",kind:"success"});return}const je=mF(Be);xx("corporatepay-security-events.csv",je),a({title:"Exported",message:"Security events exported as CSV.",kind:"success"})},Le=async O=>{try{await navigator.clipboard.writeText(O),a({title:"Copied",message:"Copied to clipboard.",kind:"success"})}catch{a({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},ae=()=>{if(i.trim().length<6){a({title:"Invalid code",message:"Enter a 6-digit code.",kind:"warn"});return}u(!0),T({severity:"Info",actor:"You",category:"MFA",title:"MFA enabled",detail:"Authenticator verified successfully."}),a({title:"MFA enabled",message:"Authenticator verified.",kind:"success"})},le=()=>{const O=Df(10);p(O),T({severity:"Info",actor:"You",category:"MFA",title:"Backup codes generated",detail:"Generated 10 backup codes."}),a({title:"Generated",message:"Backup codes generated.",kind:"success"})},R=()=>{xx("evzone-corporatepay-backup-codes.txt",x.join(`
`)),a({title:"Downloaded",message:"Backup codes downloaded.",kind:"success"})},se=O=>{A(je=>{const we={...je,[O]:!je[O]};return T({severity:"Info",actor:"Org Admin",category:"Policy",title:"MFA policy updated",detail:`Role ${O}: ${we[O]?"required":"optional"}`}),we})},m=()=>{C(O=>O.map(je=>je.status==="Current"?je:{...je,status:"Signed out"})),T({severity:"Warning",actor:"You",category:"Session",title:"Forced sign-out",detail:"Signed out all other active sessions."}),a({title:"Signed out",message:"All other sessions were signed out.",kind:"success"})},w=O=>{C(je=>je.map(we=>we.id===O?{...we,status:"Signed out"}:we)),T({severity:"Info",actor:"You",category:"Session",title:"Session signed out",detail:`Session ${O} signed out.`}),a({title:"Signed out",message:`Session ${O} signed out.",`,kind:"success"})},oe=O=>{C(je=>je.map(we=>we.id===O?{...we,trusted:!we.trusted}:we)),T({severity:"Info",actor:"You",category:"Device",title:"Device trust changed",detail:`Trust updated for ${O}.`}),a({title:"Updated",message:"Device trust updated.",kind:"success"})},me=()=>{const O=W.trim();if(!O){a({title:"Missing IP",message:"Enter an IP address.",kind:"warn"});return}if($.includes(O)){a({title:"Exists",message:"IP already in allowlist.",kind:"info"});return}D(je=>[O,...je]),he(""),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"IP allowlist changed",detail:`Added ${O}.`}),a({title:"Added",message:"IP added to allowlist.",kind:"success"})},Me=O=>{D(je=>je.filter(we=>we!==O)),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"IP allowlist changed",detail:`Removed ${O}.`})},Ve=()=>{const O=fe.trim();if(!O){a({title:"Missing geo",message:"Enter a location.",kind:"warn"});return}if(pe.map(je=>je.toLowerCase()).includes(O.toLowerCase())){a({title:"Exists",message:"Location already in allowlist.",kind:"info"});return}be(je=>[O,...je]),K(""),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"Geo allowlist changed",detail:`Added ${O}.`}),a({title:"Added",message:"Location added to allowlist.",kind:"success"})},Ze=O=>{be(je=>je.filter(we=>we!==O)),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"Geo allowlist changed",detail:`Removed ${O}.`})},E=O=>{F(je=>{const Xe=je.includes(O)?je.filter(Ie=>Ie!==O):[...je,O];return T({severity:"Info",actor:"Org Admin",category:"Policy",title:"Time restriction changed",detail:`Allowed days updated: ${Xe.join(", ")}`}),Xe})},J=O=>{$e(je=>je.map(we=>we.id===O?{...we,status:"Resolved"}:we)),a({title:"Resolved",message:`Event ${O} marked resolved.",`,kind:"success"})},g=O=>{De(O),Ue(!0)},H=O=>{Ce(je=>je.map(we=>we.id===O?{...we,emergencyCodes:Df(12),lastRotatedTs:Date.now()}:we)),T({severity:"Warning",actor:"Org Admin",category:"Break-glass",title:"Emergency codes rotated",detail:`Rotated emergency codes for ${O}.`}),a({title:"Rotated",message:"Emergency codes rotated.",kind:"success"})},N=O=>{Ce(je=>je.map(we=>we.id===O?{...we,enabled:!we.enabled}:we)),T({severity:"Warning",actor:"Org Admin",category:"Break-glass",title:"Break-glass status changed",detail:`Toggled enabled state for ${O}.`})},U=O=>{Ce(je=>je.map(we=>we.id===O?{...we,locked:!we.locked}:we)),T({severity:"Critical",actor:"Org Admin",category:"Break-glass",title:"Break-glass lock changed",detail:`Toggled lock state for ${O}.`})},ce=c.useMemo(()=>({policy:`MFA required roles: ${Object.values(I).filter(Boolean).length}`,conditional:S||V||re?"Conditional access on":"Conditional access off"}),[I,S,V,re]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(uF,{toasts:t,onDismiss:O=>s(je=>je.filter(we=>we.id!==O))}),e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-10 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-6 py-5",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Pu.green},children:e.jsx(th,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"MFA and Device Trust"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Secure access policies, trusted devices, and exportable security events."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Lt,{label:d?"MFA: Enabled":"MFA: Not enabled",tone:d?"good":"warn"}),e.jsx(Lt,{label:h?`Trust: ${y} days`:"Trust: Off",tone:h?"info":"neutral"}),e.jsx(Lt,{label:ce.conditional,tone:S||V||re?"warn":"neutral"}),e.jsx(Lt,{label:`Open alerts: ${B}`,tone:B?"warn":"good"}),ne?e.jsx(Lt,{label:`Critical: ${ne}`,tone:"bad"}):null]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"outline",onClick:()=>ge("csv"),children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(Vt,{variant:"outline",onClick:()=>ge("json"),children:[e.jsx(jt,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs(Vt,{variant:"primary",onClick:()=>a({title:"Saved",message:"Security settings saved (demo).",kind:"success"}),children:[e.jsx(He,{className:"h-4 w-4"})," Save"]})]})]}),e.jsx("div",{className:"mt-5 flex flex-wrap gap-2",children:[{id:"setup",label:"MFA setup"},{id:"trust",label:"Device trust and sessions"},{id:"conditional",label:"Conditional access"},{id:"breakglass",label:"Break-glass"},{id:"events",label:"Tamper alerts and events"}].map(O=>e.jsx("button",{className:Cn("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",l===O.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:l===O.id?{background:Pu.green}:void 0,onClick:()=>n(O.id),children:O.label},O.id))})]}),e.jsx("div",{className:"bg-slate-50 px-6 py-6",children:e.jsxs(qe,{mode:"wait",children:[l==="setup"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs(mn,{title:"Authenticator",subtitle:"Scan QR and verify a code",right:e.jsx(Lt,{label:d?"Enabled":"Setup",tone:d?"good":"warn"}),children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:"QR placeholder"}),e.jsx("div",{className:"mt-3 grid place-items-center rounded-3xl bg-white p-6 ring-1 ring-slate-200",children:e.jsx("div",{className:"grid h-40 w-40 place-items-center rounded-2xl border border-slate-200 bg-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"QR"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Authenticator setup"})]})})})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Secret key"}),e.jsxs("div",{className:"mt-2 flex items-center justify-between rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:r}),e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Le(r),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy"]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Verification code"}),e.jsx("input",{value:i,onChange:O=>o(O.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Demo: any 6 digits enable MFA."})]}),e.jsxs("div",{className:"mt-4 flex flex-col gap-2 sm:flex-row sm:justify-end",children:[e.jsxs(Vt,{variant:"outline",onClick:()=>a({title:"Help",message:"MFA setup help (demo).",kind:"info"}),children:[e.jsx(Pm,{className:"h-4 w-4"})," Help"]}),e.jsxs(Vt,{variant:"primary",onClick:ae,disabled:d,children:[e.jsx(He,{className:"h-4 w-4"})," Verify"]})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Admin policy can require MFA by role (Finance, Approver, Admin)."})]}),e.jsxs(mn,{title:"Backup codes",subtitle:"Emergency access if phone is unavailable",right:e.jsx(Lt,{label:x.length?"Generated":"Not generated",tone:x.length?"good":"warn"}),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"primary",onClick:le,children:[e.jsx(rr,{className:"h-4 w-4"})," Generate"]}),e.jsxs(Vt,{variant:"outline",disabled:!x.length,onClick:()=>Le(x.join(`
`)),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy all"]}),e.jsxs(Vt,{variant:"outline",disabled:!x.length,onClick:R,children:[e.jsx(ct,{className:"h-4 w-4"})," Download"]}),e.jsxs(Vt,{variant:"outline",disabled:!x.length,onClick:()=>{p([]),T({severity:"Warning",actor:"You",category:"MFA",title:"Backup codes cleared",detail:"Backup codes cleared. Generate again if needed."}),a({title:"Cleared",message:"Backup codes cleared.",kind:"warn"})},children:[e.jsx(bs,{className:"h-4 w-4"})," Clear"]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2",children:x.length?x.map(O=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:O}),e.jsx(Lt,{label:"One-time",tone:"neutral"})]},O)):e.jsxs("div",{className:"sm:col-span-2 rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(rr,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"No backup codes"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Generate and store securely."})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: backup code use should create an audit event and trigger a security alert."})]}),e.jsxs(mn,{title:"Admin MFA policies",subtitle:"Require MFA by role",right:e.jsx(Lt,{label:ce.policy,tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:Object.keys(I).map(O=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:O}),e.jsx("button",{type:"button",className:Cn("relative h-7 w-12 rounded-full border transition",I[O]?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>se(O),"aria-label":`Toggle MFA required for ${O}`,children:e.jsx("span",{className:Cn("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",I[O]?"left-[22px]":"left-1")})})]},O))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Recommendation: keep MFA required for Finance, Approver, and Admin roles."})]})]})},"setup"):null,l==="trust"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs(mn,{title:"Trust this device",subtitle:"Reduce repeated prompts",right:e.jsx(Lt,{label:h?"Enabled":"Off",tone:h?"good":"neutral"}),children:[e.jsx(mx,{enabled:h,onChange:O=>{j(O),T({severity:"Info",actor:"You",category:"Device",title:"Trust device toggled",detail:`Trust device ${O?"enabled":"disabled"}.`}),a({title:"Updated",message:"Trust device updated.",kind:"success"})},label:"Trust this device",description:"If enabled, step-up prompts are reduced for this device."}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Expiry"}),e.jsx("select",{value:String(y),onChange:O=>{f(Number(O.target.value)),T({severity:"Info",actor:"You",category:"Device",title:"Trust expiry changed",detail:`Trust expiry set to ${O.target.value} days.`})},disabled:!h,className:Cn("mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100",!h&&"bg-slate-50 text-slate-500"),children:[7,30,90].map(O=>e.jsxs("option",{value:O,children:[O," days"]},O))}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Admin policy can cap trust duration."})]}),e.jsxs(Vt,{variant:"danger",className:"mt-4 w-full",onClick:()=>{j(!1),T({severity:"Warning",actor:"You",category:"Device",title:"Trusted device revoked",detail:"Trust revoked for current device."}),a({title:"Revoked",message:"Trusted device revoked.",kind:"warn"})},children:[e.jsx(bs,{className:"h-4 w-4"})," Revoke trust"]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: trust revocation should trigger tamper alerts if unusual."})]}),e.jsxs("div",{className:"lg:col-span-2 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-2 border-b border-slate-200 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Login history and sessions"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Review devices, revoke access, and force sign-out."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"outline",className:"text-xs",onClick:m,children:[e.jsx(Nr,{className:"h-4 w-4"})," Sign out others"]}),e.jsxs(Vt,{variant:"danger",className:"text-xs",onClick:()=>{C(O=>O.map(je=>({...je,status:je.status==="Current"?"Current":"Signed out"}))),T({severity:"Critical",actor:"You",category:"Session",title:"Global sign-out",detail:"All non-current sessions signed out."}),a({title:"Global sign-out",message:"All non-current sessions signed out.",kind:"warn"})},children:[e.jsx(Tt,{className:"h-4 w-4"})," Force global sign-out"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Session"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Device"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Location"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"IP"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Trusted"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Last seen"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(O=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:O.id}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.device}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.location}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.ip}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.trusted?"Yes":"No",tone:O.trusted?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ux(O.lastSeenTs)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.status,tone:O.status==="Current"?"info":O.status==="Active"?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>oe(O.id),children:[e.jsx(th,{className:"h-4 w-4"})," ",O.trusted?"Untrust":"Trust"]}),O.status!=="Current"&&O.status!=="Signed out"?e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>w(O.id),children:[e.jsx(Nr,{className:"h-4 w-4"})," Sign out"]}):null]})})]},O.id))})]})}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Forced sign-out controls should be audit logged and may require step-up auth."})]})]})},"trust"):null,l==="conditional"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs(mn,{title:"Conditional access policies",subtitle:"IP allowlist, geo allowlist, and time restrictions",right:e.jsx(Lt,{label:S||V||re?"Enabled":"Off",tone:S||V||re?"warn":"neutral"}),children:[e.jsx(mx,{enabled:S,onChange:O=>{z(O),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"IP allowlist toggled",detail:O?"Enabled":"Disabled"})},label:"IP allowlist",description:"If enabled, IPs outside allowlist trigger step-up authentication."}),e.jsx(mx,{enabled:V,onChange:O=>{xe(O),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"Geo allowlist toggled",detail:O?"Enabled":"Disabled"})},label:"Geo allowlist",description:"If enabled, locations outside allowlist trigger step-up authentication."}),e.jsx(mx,{enabled:re,onChange:O=>{q(O),T({severity:"Info",actor:"Org Admin",category:"Policy",title:"Time restriction toggled",detail:O?"Enabled":"Disabled"})},label:"Time restrictions",description:"If enabled, access outside allowed hours triggers step-up authentication."}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: you can switch from step-up to block for specific modules (Billing, Security) later."})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs(mn,{title:"IP allowlist",subtitle:"Manage allowed IP addresses",right:e.jsx(Lt,{label:S?"On":"Off",tone:S?"warn":"neutral"}),children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[$.map(O=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200",children:[O,e.jsx("button",{type:"button",className:"rounded-full p-1 hover:bg-slate-200",onClick:()=>Me(O),"aria-label":`Remove ${O}`,children:e.jsx(_e,{className:"h-3.5 w-3.5"})})]},O)),$.length?null:e.jsx(Lt,{label:"No IPs",tone:"warn"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(Kr,{label:"Add IP",value:W,onChange:he,placeholder:"196.43.199.81"})}),e.jsx("div",{className:"flex items-end",children:e.jsxs(Vt,{variant:"outline",className:"w-full",onClick:me,children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})})]})]}),e.jsxs(mn,{title:"Geo allowlist",subtitle:"Manage allowed locations",right:e.jsx(Lt,{label:V?"On":"Off",tone:V?"warn":"neutral"}),children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[pe.map(O=>e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200",children:[O,e.jsx("button",{type:"button",className:"rounded-full p-1 hover:bg-slate-200",onClick:()=>Ze(O),"aria-label":`Remove ${O}`,children:e.jsx(_e,{className:"h-3.5 w-3.5"})})]},O)),pe.length?null:e.jsx(Lt,{label:"No locations",tone:"warn"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-3",children:[e.jsx("div",{className:"sm:col-span-2",children:e.jsx(Kr,{label:"Add location",value:fe,onChange:K,placeholder:"Kampala, UG"})}),e.jsx("div",{className:"flex items-end",children:e.jsxs(Vt,{variant:"outline",className:"w-full",onClick:Ve,children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})})]})]}),e.jsxs(mn,{title:"Time restrictions",subtitle:"Allowed days and hours",right:e.jsx(Lt,{label:re?"On":"Off",tone:re?"warn":"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Kr,{label:"Start",value:L,onChange:M,type:"time"}),e.jsx(Kr,{label:"End",value:k,onChange:P,type:"time"})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Allowed days"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(O=>{const je=Y.includes(O);return e.jsx("button",{type:"button",className:Cn("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",je?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:je?{background:Pu.green}:void 0,onClick:()=>E(O),children:O},O)})})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: keep restrictions strict for Billing and Security roles."})]}),e.jsxs(mn,{title:"Policy preview",subtitle:"Evaluate the current session context",right:e.jsx(Lt,{label:Z.status,tone:Z.status==="Allowed"?"good":"warn"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Kr,{label:"Current IP",value:G,onChange:ve,placeholder:"196.43.199.81"}),e.jsx(Kr,{label:"Current geo",value:Te,onChange:ye,placeholder:"Kampala, UG"}),e.jsx(Kr,{label:"Day",value:ie,onChange:Oe,placeholder:"Wed",hint:"Mon..Sun"}),e.jsx(Kr,{label:"Time",value:Ae,onChange:ee,type:"time"})]}),Z.reasons.length?e.jsxs("div",{className:"mt-3 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:[e.jsx("div",{className:"font-semibold",children:"Reasons"}),e.jsx("ul",{className:"mt-2 space-y-1",children:Z.reasons.map(O=>e.jsxs("li",{children:[" ",O]},O))})]}):e.jsx("div",{className:"mt-3 rounded-2xl border border-emerald-200 bg-emerald-50 p-3 text-xs text-emerald-900",children:"Allowed: no step-up required."})]})]})]})},"conditional"):null,l==="breakglass"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs(mn,{title:"Break-glass overview",subtitle:"Emergency-only admin accounts",right:e.jsx(Lt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:["Break-glass is for emergencies only. Recommended controls:",e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:"1) Dual-control approval to unlock"}),e.jsx("li",{children:"2) Step-up authentication always"}),e.jsx("li",{children:"3) Rotate emergency codes after any use"})]})]}),e.jsxs(Vt,{variant:"outline",className:"mt-3 w-full",onClick:()=>{T({severity:"Critical",actor:"System",category:"Tamper",title:"Tamper alert test",detail:"Simulated tamper alert triggered."}),a({title:"Tamper test",message:"Created a simulated tamper alert.",kind:"warn"})},children:[e.jsx(at,{className:"h-4 w-4"})," Trigger tamper test"]})]}),e.jsxs("div",{className:"lg:col-span-2 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Break-glass accounts"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"View codes, rotate, lock, and audit usage."})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Email"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Enabled"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Locked"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Last rotated"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Last used"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:Ne.map(O=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:O.email}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.enabled?"Yes":"No",tone:O.enabled?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.locked?"Locked":"Open",tone:O.locked?"bad":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ux(O.lastRotatedTs)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.lastUsedTs?ux(O.lastUsedTs):"Never"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>g(O.id),children:[e.jsx(rr,{className:"h-4 w-4"})," View codes"]}),e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>H(O.id),children:[e.jsx(lt,{className:"h-4 w-4"})," Rotate"]}),e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>N(O.id),children:[e.jsx(Tt,{className:"h-4 w-4"})," Toggle enabled"]}),e.jsxs(Vt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>U(O.id),children:[e.jsx(as,{className:"h-4 w-4"})," ",O.locked?"Unlock":"Lock"]})]})})]},O.id))})]})}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Premium: break-glass unlock should require dual approval and create tamper alerts."})]})]})},"breakglass"):null,l==="events"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs(mn,{title:"Tamper alerts",subtitle:"Detect and respond to unusual actions",right:e.jsx(Lt,{label:`${B} open`,tone:B?"warn":"good"}),children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Tamper events include:",e.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:[e.jsx("li",{children:"1) MFA disable attempts"}),e.jsx("li",{children:"2) Break-glass changes"}),e.jsx("li",{children:"3) Conditional access bypass attempts"}),e.jsx("li",{children:"4) Forced sign-out anomalies"})]})]}),e.jsxs(Vt,{variant:"outline",className:"mt-3 w-full",onClick:()=>{T({severity:"Critical",actor:"System",category:"Tamper",title:"Policy tamper detected",detail:"Attempt to modify allowlist without permission."}),a({title:"Tamper event",message:"Created a simulated tamper event.",kind:"warn"})},children:[e.jsx(at,{className:"h-4 w-4"})," Simulate tamper"]})]}),e.jsxs("div",{className:"lg:col-span-2 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 border-b border-slate-200 px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Security events"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Exportable logs for audits and incident response."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("select",{value:_,onChange:O=>te(O.target.value),className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none",children:["All","Open","Resolved"].map(O=>e.jsx("option",{value:O,children:O},O))}),e.jsx("select",{value:Re,onChange:O=>Fe(O.target.value),className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none",children:["All","Info","Warning","Critical"].map(O=>e.jsx("option",{value:O,children:O},O))}),e.jsxs(Vt,{variant:"outline",className:"text-xs",onClick:()=>ge("csv"),children:[e.jsx(ct,{className:"h-4 w-4"})," CSV"]}),e.jsxs(Vt,{variant:"outline",className:"text-xs",onClick:()=>ge("json"),children:[e.jsx(jt,{className:"h-4 w-4"})," JSON"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Severity"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Category"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Title"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[X.map(O=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:cA(O.ts)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.severity,tone:xF(O.severity)})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.category}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:O.title}),e.jsx("div",{className:"mt-0.5 text-xs text-slate-500",children:O.detail}),e.jsx("div",{className:"mt-0.5 text-xs text-slate-400",children:O.id})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:O.actor}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Lt,{label:O.status,tone:O.status==="Open"?"warn":"good"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[O.status==="Open"?e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>J(O.id),children:[e.jsx(He,{className:"h-4 w-4"})," Resolve"]}):e.jsx(Lt,{label:"Resolved",tone:"good"}),e.jsxs(Vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{a({title:"Details",message:"Open event detail panel (demo).",kind:"info"})},children:[e.jsx(rt,{className:"h-4 w-4"})," Details"]})]})})]},O.id)),X.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10",children:e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(Tt,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"No events"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Try changing filters."})]})})})]})]})}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Events are exportable and audit-friendly. Tamper alerts should be immutable in production."})]})]})},"events"):null]})})]})}),e.jsx(cF,{open:Ee,title:"Break-glass emergency codes",subtitle:"Emergency-only. Rotate after any use.",onClose:()=>Ue(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Vt,{variant:"outline",onClick:()=>Ue(!1),children:"Close"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Vt,{variant:"outline",onClick:()=>{const O=Ne.find(je=>je.id===Ye);O&&Le(O.emergencyCodes.join(`
`))},children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy"]}),e.jsxs(Vt,{variant:"outline",onClick:()=>{const O=Ne.find(je=>je.id===Ye);O&&(xx(`breakglass-${O.id}-codes.txt`,O.emergencyCodes.join(`
`)),a({title:"Downloaded",message:"Emergency codes downloaded.",kind:"success"}))},children:[e.jsx(ct,{className:"h-4 w-4"})," Download"]})]})]}),children:(()=>{const O=Ne.find(je=>je.id===Ye);return O?e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Lt,{label:O.email,tone:"neutral"}),e.jsx(Lt,{label:O.enabled?"Enabled":"Disabled",tone:O.enabled?"good":"neutral"}),e.jsx(Lt,{label:O.locked?"Locked":"Open",tone:O.locked?"bad":"neutral"}),e.jsx(Lt,{label:`Rotated: ${ux(O.lastRotatedTs)}`,tone:"info"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2 sm:grid-cols-2",children:O.emergencyCodes.map(je=>e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:je}),e.jsx(Lt,{label:"One-time",tone:"neutral"})]},je))}),e.jsx("div",{className:"mt-4 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:"Do not store these in plain text. Rotate after any use."})]}):null})()}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 text-xs text-slate-500 md:px-6",children:"X2 MFA page: authenticator setup, backup codes, device trust expiry, role-based MFA policies, session history + forced sign-out, conditional access policies, break-glass controls, tamper alerts, and exportable security events."})})]})}function mn({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}const ah={green:"#03CD8C",orange:"#F77F00"};function ll(...t){return t.filter(Boolean).join(" ")}function fF(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function gF(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function vF(t,s,a){return Math.max(s,Math.min(a,t))}function ya({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:ll("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Ya({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:ah.green}:t==="accent"?{background:ah.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:ll(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Of({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:ll("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:ll("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function In({icon:t,label:s,value:a,onChange:l,type:n="text",placeholder:r,hint:i,required:o,disabled:d}){const u=!!o&&!a.trim();return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs font-semibold text-slate-600",children:[s,o?e.jsx("span",{className:"text-rose-600",children:" *"}):null]}),i?e.jsx("div",{className:"text-xs text-slate-500",children:i}):null]}),e.jsxs("div",{className:ll("mt-2 flex items-center gap-2 rounded-2xl border bg-white px-3 py-2.5 shadow-sm focus-within:ring-4",d?"border-slate-200 bg-slate-50 text-slate-500":u?"border-rose-300 focus-within:ring-rose-100":"border-slate-200 focus-within:ring-emerald-100"),children:[e.jsx("span",{className:"text-slate-500",children:t}),e.jsx("input",{type:n,value:a,onChange:x=>l(x.target.value),placeholder:r,disabled:d,className:ll("w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400",d&&"text-slate-500")})]}),u?e.jsx("div",{className:"mt-1 text-xs text-rose-600",children:"Required"}):null]})}function bF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:ll("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Rc({idx:t,active:s,done:a,label:l}){return e.jsxs("div",{className:ll("flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold ring-1",s?"bg-emerald-600 text-white ring-emerald-600":a?"bg-emerald-50 text-emerald-800 ring-emerald-200":"bg-white text-slate-700 ring-slate-200"),style:s?{background:ah.green}:void 0,children:[e.jsx("span",{className:ll("grid h-6 w-6 place-items-center rounded-full",s?"bg-white/20":a?"bg-emerald-100":"bg-slate-100"),children:a?e.jsx(He,{className:"h-4 w-4"}):e.jsx("span",{children:t})}),l]})}function Gi({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function jF(t){const s=t.trim().toLowerCase().split("@");return s.length===2?s[1]:""}function yF(t,s,a){var r;const l=jF(t),n=((r=t.split("@")[0])==null?void 0:r.toLowerCase())||"";return s?a==="Finance"?{group:"Finance",role:"Accountant",reason:"HRIS department = Finance"}:a==="Procurement"?{group:"Procurement",role:"Approver",reason:"HRIS department = Procurement"}:a==="Sales"?{group:"Sales",role:"User",reason:"HRIS department = Sales"}:a==="Operations"?{group:"Operations",role:"Manager",reason:"HRIS department = Operations"}:{group:"Admin",role:"User",reason:"HRIS department default"}:l.endsWith("acme.com")?n.includes("finance")||n.includes("account")?{group:"Finance",role:"Accountant",reason:"Matched email local-part pattern"}:n.includes("proc")?{group:"Procurement",role:"Approver",reason:"Matched email local-part pattern"}:n.includes("admin")?{group:"Admin",role:"Org Admin",reason:"Admin naming convention"}:{group:"Operations",role:"User",reason:"Corporate domain default"}:{group:"Operations",role:"User",reason:"Fallback rule"}}function P1(){const[t,s]=c.useState([]),a=R=>{const se=fF("toast");s(m=>[{id:se,...R},...m].slice(0,4)),window.setTimeout(()=>s(m=>m.filter(w=>w.id!==se)),3200)},[l,n]=c.useState(1),[r,i]=c.useState("INV-CPAY-8F2K-UG"),[o,d]=c.useState("finance@acme.com"),[u,x]=c.useState("+256 700 000 000"),[p]=c.useState(Date.now()+2*24*60*60*1e3),[h,j]=c.useState(!1),[y,f]=c.useState("finance@acme.com"),[I,A]=c.useState("+256 700 000 000"),[b,C]=c.useState("existing"),[S,z]=c.useState("finance@acme.com"),[$,D]=c.useState(!1),[W,he]=c.useState(""),[V,xe]=c.useState(""),[pe,be]=c.useState("finance@acme.com"),[fe,K]=c.useState("+256 700 000 000"),[re,q]=c.useState(""),[L,M]=c.useState(!1),[k,P]=c.useState(""),Y=c.useMemo(()=>({organization:"Acme Group Ltd",group:"Finance",role:"Accountant",spendLimits:{daily:"UGX 3,000,000",weekly:"UGX 12,000,000",monthly:"UGX 30,000,000"},autoApproval:{eligible:!1,under:"UGX 0"},defaultCostCenter:"FIN-OPS",defaultProjectTag:"Audit-2026",enforcedModules:["Rides & Logistics","E-Commerce","EVs & Charging","Finance & Payments","Other Service Module"],enforcedMarketplaces:["MyLiveDealz","EVmart","ServiceMart","GadgetMart","Other Marketplace"]}),[]),[F,G]=c.useState(!0),[ve,Te]=c.useState(!1),[ye,ie]=c.useState("Finance"),Oe=c.useMemo(()=>yF(b==="existing"?S:pe,ve,ye),[b,S,pe,ve,ye]),Ae=c.useMemo(()=>F?{...Y,group:Oe.group,role:Oe.role}:Y,[Y,F,Oe]),[ee,Ne]=c.useState(!0),[Ce,Ee]=c.useState({businessOnly:!1,noPersonalUse:!1,complyPolicy:!1,dataPrivacy:!1,antiBribery:!1}),Ue=c.useMemo(()=>ee?Object.values(Ce).every(Boolean):!0,[ee,Ce]),[Ye,De]=c.useState(!1),[Be,$e]=c.useState(!1),[_,te]=c.useState(!1),Re=c.useMemo(()=>Ye&&Be&&_,[Ye,Be,_]),Fe=c.useMemo(()=>gF(p),[p]),T=c.useMemo(()=>r.trim()?!o.trim()||!u.trim()?{ok:!1,reason:"Missing invite email/phone"}:h||Date.now()>p?{ok:!1,reason:"Invite expired"}:y.trim().toLowerCase()!==o.trim().toLowerCase()?{ok:!1,reason:"Email does not match invite"}:I.trim()!==u.trim()?{ok:!1,reason:"Phone does not match invite"}:{ok:!0,reason:"Valid"}:{ok:!1,reason:"Missing token"},[r,o,u,h,p,y,I]),Z=()=>{if(!T.ok){a({title:"Invite invalid",message:T.reason,kind:"warn"});return}a({title:"Invite validated",message:"Proceed to link your EVzone account.",kind:"success"}),n(2)},B=()=>{if(!S.trim()){a({title:"Missing identifier",message:"Enter email or phone.",kind:"warn"});return}D(!0),a({title:"OTP sent",message:"Verification code sent (demo).",kind:"success"})},ne=()=>{if(!$){a({title:"Send OTP first",message:"Click Send OTP.",kind:"warn"});return}if(W.trim().length<4){a({title:"Invalid OTP",message:"Enter the code you received.",kind:"warn"});return}const R=`EVZ-${Math.floor(1e5+Math.random()*9e5)}`;P(R),M(!0),a({title:"Account linked",message:`Linked to EVzone ID ${R}.`,kind:"success"}),n(3)},X=()=>{if(!V.trim()||!pe.trim()||!fe.trim()||!re.trim()){a({title:"Missing fields",message:"Name, email, phone and password are required.",kind:"warn"});return}const R=`EVZ-${Math.floor(1e5+Math.random()*9e5)}`;P(R),M(!0),a({title:"Account created",message:`EVzone account created: ${R}.`,kind:"success"}),n(3)},ge=()=>{if(!L){a({title:"Not linked",message:"Link or create your EVzone account first.",kind:"warn"});return}if(!Ue){a({title:"Checklist incomplete",message:"Complete required attestations to continue.",kind:"warn"});return}a({title:"Defaults applied",message:"Group, role, limits and tags have been applied.",kind:"success"}),n(4)},Le=()=>{if(!Re){a({title:"Complete welcome",message:"Confirm the policy highlights first.",kind:"warn"});return}a({title:"Welcome",message:"CorporatePay is active for your EVzone account.",kind:"success"}),n(5)},ae=async R=>{try{await navigator.clipboard.writeText(R),a({title:"Copied",message:R,kind:"success"})}catch{a({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},le=c.useMemo(()=>{const R=(l-1)/4;return Math.round(vF(R*100,0,100))},[l]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(bF,{toasts:t,onDismiss:R=>s(se=>se.filter(m=>m.id!==R))}),e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-10 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white p-6 shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:ah.green},children:e.jsx(cp,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Invite acceptance and EVzone account linking"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Validate invite, link/create EVzone account, apply defaults, then complete welcome wizard."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(ya,{label:`Completion: ${le}%`,tone:le>=75?"good":le>=40?"warn":"neutral"}),e.jsx(ya,{label:`Expires: ${Fe}`,tone:h?"bad":"warn"}),e.jsxs(Ya,{variant:"outline",className:"text-xs",onClick:()=>j(R=>!R),children:[e.jsx(at,{className:"h-4 w-4"})," Simulate expired"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ya,{label:`Org: ${Ae.organization}`,tone:"neutral"}),e.jsx(ya,{label:`Role: ${Ae.role}`,tone:"info"}),e.jsx(ya,{label:`Group: ${Ae.group}`,tone:"neutral"})]})]}),e.jsxs("div",{className:"mt-5 flex flex-wrap gap-2",children:[e.jsx(Rc,{idx:1,active:l===1,done:l>1,label:"Validate invite"}),e.jsx(Rc,{idx:2,active:l===2,done:l>2,label:"Link account"}),e.jsx(Rc,{idx:3,active:l===3,done:l>3,label:"Defaults and checklist"}),e.jsx(Rc,{idx:4,active:l===4,done:l>4,label:"Welcome"}),e.jsx(Rc,{idx:5,active:l===5,done:!1,label:"Done"})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Gi,{title:"Invite summary",subtitle:"The invite must match your email and phone",right:e.jsx(ya,{label:T.ok?"Valid":"Check",tone:T.ok?"good":"warn"}),children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Token"}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-slate-900",children:r}),e.jsxs(Ya,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>ae(r),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy"]})]})]}),e.jsx($f,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Invite email",value:o}),e.jsx($f,{icon:e.jsx(Id,{className:"h-4 w-4"}),label:"Invite phone",value:u}),e.jsx($f,{icon:e.jsx(et,{className:"h-4 w-4"}),label:"Expires",value:Fe})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"If your invite expires, request a new invite from your organization admin."})]}),e.jsxs(Gi,{title:"Just-in-time provisioning",subtitle:"Premium: auto role assignment based on domain/HRIS rules",right:e.jsx(ya,{label:F?"On":"Off",tone:F?"info":"neutral"}),children:[e.jsx(Of,{enabled:F,onChange:G,label:"Enable JIT provisioning",description:"Applies group and role from rules on acceptance."}),e.jsx(Of,{enabled:ve,onChange:Te,label:"HRIS rule (Phase 2)",description:"When enabled, HR department drives role assignment."}),e.jsxs("div",{className:ll("mt-3",!ve&&"opacity-60"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"HR department"}),e.jsx("select",{value:ye,onChange:R=>ie(R.target.value),disabled:!ve,className:ll("mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100",!ve&&"bg-slate-50 text-slate-500"),children:["Finance","Procurement","Sales","Operations","Admin"].map(R=>e.jsx("option",{value:R,children:R},R))})]}),e.jsxs("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Matched rule"}),e.jsxs("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:[Oe.group,"  ",Oe.role]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:Oe.reason})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"JIT provisioning modifies group and role only. Spend limits remain admin-defined."})]})]}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(qe,{mode:"wait",children:[l===1?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(Gi,{title:"Validate invite",subtitle:"Token, email, and phone must match the invitation",right:e.jsx(ya,{label:T.ok?"Ready":"Needs match",tone:T.ok?"good":"warn"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(In,{icon:e.jsx(cp,{className:"h-4 w-4"}),label:"Invite token",value:r,onChange:i,placeholder:"INV-...",required:!0}),e.jsx(In,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Invite email",value:o,onChange:d,placeholder:"you@company.com",required:!0}),e.jsx(In,{icon:e.jsx(Id,{className:"h-4 w-4"}),label:"Invite phone",value:u,onChange:x,placeholder:"+256 ...",required:!0}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Expiry"}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Fe}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Invite links expire for security."})]})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Match details"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"To simulate verification, enter the same email and phone as the invite."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(In,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Your email",value:y,onChange:f,placeholder:"finance@acme.com",required:!0}),e.jsx(In,{icon:e.jsx(Id,{className:"h-4 w-4"}),label:"Your phone",value:I,onChange:A,placeholder:"+256 700...",required:!0})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:["Status: ",e.jsx("span",{className:"font-semibold text-slate-900",children:T.ok?"Valid":T.reason})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsxs(Ya,{variant:"outline",onClick:()=>a({title:"Resend invite",message:"Admin resend flow opened (demo).",kind:"info"}),children:[e.jsx(ir,{className:"h-4 w-4"})," Request resend"]}),e.jsxs(Ya,{variant:"primary",onClick:Z,children:[e.jsx(et,{className:"h-4 w-4"})," Validate"]})]})]})},"s1"):null,l===2?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(Gi,{title:"Link your EVzone account",subtitle:"Connect to an existing account or create a new one",right:e.jsx(ya,{label:L?"Linked":"Not linked",tone:L?"good":"warn"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(M1,{title:"Link existing",desc:"Use OTP to verify ownership of your EVzone account.",active:b==="existing",onClick:()=>C("existing"),icon:e.jsx(cp,{className:"h-4 w-4"})}),e.jsx(M1,{title:"Create new",desc:"Create an EVzone account and link it to this organization.",active:b==="new",onClick:()=>C("new"),icon:e.jsx(or,{className:"h-4 w-4"})})]}),b==="existing"?e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Verify existing account"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enter email/phone and receive an OTP."})]}),L?e.jsx(ya,{label:`Linked: ${k}`,tone:"good"}):e.jsx(ya,{label:"OTP required",tone:"warn"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(In,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Email or phone",value:S,onChange:z,placeholder:"you@company.com or +256...",required:!0}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"OTP"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("input",{value:W,onChange:R=>he(R.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsxs(Ya,{variant:"outline",className:"px-3 py-2 text-xs",onClick:B,children:[e.jsx(rr,{className:"h-4 w-4"})," Send"]})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Demo: any 4+ digits verify."})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Ya,{variant:"outline",onClick:()=>n(1),children:"Back"}),e.jsxs(Ya,{variant:"primary",onClick:ne,children:[e.jsx(et,{className:"h-4 w-4"})," Verify and link"]})]})]}):null,b==="new"?e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Create new EVzone account"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Account will be linked to the organization on acceptance."})]}),e.jsx(ya,{label:"New",tone:"info"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(In,{icon:e.jsx(or,{className:"h-4 w-4"}),label:"Full name",value:V,onChange:xe,placeholder:"Your name",required:!0}),e.jsx(In,{icon:e.jsx(os,{className:"h-4 w-4"}),label:"Email",value:pe,onChange:be,placeholder:"you@company.com",required:!0}),e.jsx(In,{icon:e.jsx(Id,{className:"h-4 w-4"}),label:"Phone",value:fe,onChange:K,placeholder:"+256...",required:!0}),e.jsx(In,{icon:e.jsx(as,{className:"h-4 w-4"}),label:"Password",value:re,onChange:q,type:"password",placeholder:"",required:!0})]}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Ya,{variant:"outline",onClick:()=>n(1),children:"Back"}),e.jsxs(Ya,{variant:"primary",onClick:X,children:[e.jsx(or,{className:"h-4 w-4"})," Create and link"]})]})]}):null,e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"After linking, the system applies admin defaults (group, role, limits, tags) to your CorporatePay profile."})]})},"s2"):null,l===3?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(Gi,{title:"Review defaults and accept",subtitle:"Admin-defined defaults applied on acceptance",right:e.jsx(ya,{label:"Ready",tone:L?"good":"warn"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Wo,{icon:e.jsx(Vs,{className:"h-4 w-4"}),label:"Group",value:Ae.group}),e.jsx(Wo,{icon:e.jsx(Tt,{className:"h-4 w-4"}),label:"Role",value:Ae.role}),e.jsx(Wo,{icon:e.jsx(al,{className:"h-4 w-4"}),label:"Spend limits",value:`${Ae.spendLimits.daily} daily  ${Ae.spendLimits.monthly} monthly`}),e.jsx(Wo,{icon:e.jsx(et,{className:"h-4 w-4"}),label:"Auto-approval",value:Ae.autoApproval.eligible?`Eligible under ${Ae.autoApproval.under}`:"Not eligible"}),e.jsx(Wo,{icon:e.jsx(lt,{className:"h-4 w-4"}),label:"Default cost center",value:Ae.defaultCostCenter}),e.jsx(Wo,{icon:e.jsx(lt,{className:"h-4 w-4"}),label:"Default project tag",value:Ae.defaultProjectTag})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Enabled modules and marketplaces"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"These are the default CorporatePay-enabled areas for your organization."}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Ae.enforcedModules.map(R=>e.jsx(ya,{label:R,tone:"neutral"},R))}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Ae.enforcedMarketplaces.map(R=>e.jsx(ya,{label:R,tone:R==="MyLiveDealz"?"info":"neutral"},R))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:'Note: "Other Service Module" and "Other Marketplace" slots allow future expansion without redesign.'})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Acceptance checklist"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Premium: compliance attestations can be required by policy."})]}),e.jsx(Of,{enabled:ee,onChange:Ne,label:"Require attestations",description:"If on, all boxes must be checked"})]}),e.jsxs("div",{className:ll("mt-4 space-y-2",!ee&&"opacity-70"),children:[e.jsx(Xr,{label:"I will use CorporatePay for business purposes only",checked:Ce.businessOnly,onChange:R=>Ee(se=>({...se,businessOnly:R})),disabled:!ee}),e.jsx(Xr,{label:"I will not use CorporatePay for personal spending",checked:Ce.noPersonalUse,onChange:R=>Ee(se=>({...se,noPersonalUse:R})),disabled:!ee}),e.jsx(Xr,{label:"I agree to follow corporate spending policies",checked:Ce.complyPolicy,onChange:R=>Ee(se=>({...se,complyPolicy:R})),disabled:!ee}),e.jsx(Xr,{label:"I understand data privacy and audit logging",checked:Ce.dataPrivacy,onChange:R=>Ee(se=>({...se,dataPrivacy:R})),disabled:!ee}),e.jsx(Xr,{label:"I will comply with anti-bribery and compliance rules",checked:Ce.antiBribery,onChange:R=>Ee(se=>({...se,antiBribery:R})),disabled:!ee})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:Ue?"Checklist complete.":"Complete the checklist to proceed."})]}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Ya,{variant:"outline",onClick:()=>n(2),children:"Back"}),e.jsxs(Ya,{variant:"primary",onClick:ge,children:[e.jsx(et,{className:"h-4 w-4"})," Accept invite"]})]})]})},"s3"):null,l===4?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(Gi,{title:"Welcome wizard",subtitle:"Policy highlights, do/dont rules, and what changes in the app",right:e.jsx(ya,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"CorporatePay available in the EVzone app"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"You continue using the normal EVzone apps. Only the payment method changes."}),e.jsxs("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Checkout behavior"}),e.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-700",children:[e.jsx("li",{children:"1) You choose a ride/service/purchase as usual."}),e.jsxs("li",{children:["2) At checkout, select ",e.jsx("span",{className:"font-semibold text-slate-900",children:"CorporatePay"}),"."]}),e.jsx("li",{children:"3) Policies and approvals may apply."}),e.jsx("li",{children:"4) Spend maps to your group and cost center automatically."})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Xr,{label:"I understand CorporatePay appears at checkout",checked:_,onChange:te})})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Policy highlights"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Key rules you should follow."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsx(T1,{kind:"do",title:"Do",items:["Use correct purpose tags (airport, client meeting, etc.)",`Stay within spend limits (${Ae.spendLimits.daily} daily)`,"Use approved vendors and marketplaces"]}),e.jsx(T1,{kind:"dont",title:"Dont",items:["Use CorporatePay for personal purchases","Bypass approvals or split purchases to avoid thresholds","Buy restricted categories (example: alcohol)"]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Xr,{label:"I understand the policy do/dont rules",checked:Ye,onChange:De}),e.jsx(Xr,{label:"I understand approvals can be required above thresholds",checked:Be,onChange:$e})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: if you need an exception, request approval in-app. All actions are audited."})]})]}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Ya,{variant:"outline",onClick:()=>n(3),children:"Back"}),e.jsxs(Ya,{variant:"primary",onClick:Le,children:[e.jsx(ue,{className:"h-4 w-4"})," Finish"]})]})]})},"s4"):null,l===5?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(Gi,{title:"Youre all set",subtitle:"CorporatePay is now active for your EVzone account",right:e.jsx(ya,{label:"Completed",tone:"good"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(px,{icon:e.jsx(al,{className:"h-5 w-5"}),title:"CorporatePay enabled",desc:"CorporatePay can now be selected at checkout for eligible transactions."}),e.jsx(px,{icon:e.jsx(Tt,{className:"h-5 w-5"}),title:"Policies enforced",desc:"Some transactions will require approval depending on rules and thresholds."}),e.jsx(px,{icon:e.jsx(Vs,{className:"h-5 w-5"}),title:"Org mapping",desc:`Spend maps to group ${Ae.group} and cost center ${Ae.defaultCostCenter}.`}),e.jsx(px,{icon:e.jsx(_L,{className:"h-5 w-5"}),title:"Audit ready",desc:"All approvals and changes are logged for compliance."})]}),e.jsx("div",{className:"mt-4 rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(lt,{className:"mt-0.5 h-4 w-4 text-emerald-700"}),e.jsxs("div",{className:"text-xs text-slate-600",children:["EVzone ID: ",e.jsx("span",{className:"font-semibold text-slate-900",children:k}),"  Organization: ",e.jsx("span",{className:"font-semibold text-slate-900",children:Ae.organization})]})]})}),e.jsxs("div",{className:"mt-4 flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsxs(Ya,{variant:"outline",onClick:()=>a({title:"Guide",message:"Opening onboarding guide (demo).",kind:"info"}),children:[e.jsx(Pm,{className:"h-4 w-4"})," View guide"]}),e.jsxs(Ya,{variant:"primary",onClick:()=>a({title:"Dashboard",message:"Opening CorporatePay Admin Console (demo).",kind:"success"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Open dashboard"]})]})]})},"s5"):null]})})]}),e.jsx("div",{className:"mt-6 text-xs text-slate-500",children:"X3: validates invite token/email/phone/expiry, links or creates EVzone account, applies admin defaults (group/role/limits/auto-approval/cost center/project tags), and completes a premium welcome wizard."})]})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 text-xs text-slate-500 md:px-6",children:"X3 Invite Acceptance: includes JIT provisioning (domain/HRIS rules), compliance checklist, and welcome wizard for policy highlights."})})]})}function $f({icon:t,label:s,value:a}){return e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:t}),e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:s})]}),e.jsx("span",{className:"text-xs font-semibold text-slate-900",children:a})]})})}function M1({title:t,desc:s,icon:a,active:l,onClick:n}){return e.jsx("button",{type:"button",onClick:n,className:ll("rounded-3xl border p-4 text-left transition",l?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[e.jsx("span",{className:"text-slate-600",children:a}),t]}),e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:s})]}),l?e.jsx(et,{className:"h-5 w-5 text-emerald-700"}):null]})})}function Wo({icon:t,label:s,value:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:t}),e.jsx("span",{className:"text-xs font-semibold text-slate-600",children:s})]}),e.jsx(ya,{label:"Applied",tone:"good"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:a})]})}function Xr({label:t,checked:s,onChange:a,disabled:l}){return e.jsxs("label",{className:ll("flex items-start gap-3 rounded-2xl border border-slate-200 bg-white p-3",l&&"opacity-60"),children:[e.jsx("input",{type:"checkbox",checked:s,disabled:l,onChange:n=>a(n.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300"}),e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:t})]})}function T1({kind:t,title:s,items:a}){const l=t==="do"?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50",n=t==="do"?"#10B981":"#F43F5E";return e.jsxs("div",{className:ll("rounded-3xl border p-4",l),children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s}),e.jsx("ul",{className:"mt-2 space-y-1 text-sm text-slate-700",children:a.map(r=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:n}}),e.jsx("span",{children:r})]},r))})]})}function px({icon:t,title:s,desc:a}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"grid h-9 w-9 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:t}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a})]})]})})}const NF=[{path:Mt.AUTH.LOGIN,element:ds.createElement(oF)},{path:Mt.AUTH.MFA,element:ds.createElement(hF)},{path:Mt.AUTH.INVITE,element:ds.createElement(P1)},{path:Mt.AUTH.INVITE_TOKEN,element:ds.createElement(P1)}],Yr="cpay_budgets_v1",If=[{id:"B-1",group:"Operations",module:"All",marketplace:"All",amount:5e6,period:"Monthly",hardCap:!0,timestamp:new Date().toISOString(),spent:32e5},{id:"B-2",group:"Sales",module:"Rides & Logistics",marketplace:"All",amount:25e5,period:"Monthly",hardCap:!1,timestamp:new Date().toISOString(),spent:21e5},{id:"B-3",group:"Finance",module:"All",marketplace:"All",amount:8e6,period:"Quarterly",hardCap:!0,timestamp:new Date().toISOString(),spent:0}],pl={getAll:()=>{try{const t=localStorage.getItem(Yr);return t?JSON.parse(t):(localStorage.setItem(Yr,JSON.stringify(If)),If)}catch{return If}},getById:t=>pl.getAll().find(a=>a.id===t),add:t=>{const s=pl.getAll();s.unshift(t),localStorage.setItem(Yr,JSON.stringify(s)),window.dispatchEvent(new Event("budget-storage-update"))},update:(t,s)=>{const a=pl.getAll(),l=a.findIndex(n=>n.id===t);l!==-1&&(a[l]={...a[l],...s},localStorage.setItem(Yr,JSON.stringify(a)),window.dispatchEvent(new Event("budget-storage-update")))},delete:t=>{const a=pl.getAll().filter(l=>l.id!==t);localStorage.setItem(Yr,JSON.stringify(a)),window.dispatchEvent(new Event("budget-storage-update"))},clearAll:()=>{localStorage.setItem(Yr,JSON.stringify([])),window.dispatchEvent(new Event("budget-storage-update"))},clearByPeriod:t=>{const a=pl.getAll().filter(l=>l.period!==t);localStorage.setItem(Yr,JSON.stringify(a)),window.dispatchEvent(new Event("budget-storage-update"))},clearByPredicate:t=>{const a=pl.getAll().filter(l=>!t(l));localStorage.setItem(Yr,JSON.stringify(a)),window.dispatchEvent(new Event("budget-storage-update"))}},lh={green:"#03CD8C",orange:"#F77F00"};function ta(...t){return t.filter(Boolean).join(" ")}function wF(t,s,a){return Math.max(s,Math.min(a,t))}function Bt(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function R1(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Na({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200 dark:bg-emerald-900/40 dark:text-emerald-300 dark:ring-emerald-800",warn:"bg-amber-50 text-amber-800 ring-amber-200 dark:bg-amber-900/40 dark:text-amber-300 dark:ring-amber-800",bad:"bg-rose-50 text-rose-700 ring-rose-200 dark:bg-rose-900/40 dark:text-rose-300 dark:ring-rose-800",info:"bg-blue-50 text-blue-700 ring-blue-200 dark:bg-blue-900/40 dark:text-blue-300 dark:ring-blue-800",neutral:"bg-slate-50 text-slate-700 ring-slate-200 dark:bg-slate-800 dark:text-slate-300 dark:ring-slate-700"};return e.jsx("span",{className:ta("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function ia({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200 dark:shadow-none",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200 dark:shadow-none",outline:"border border-slate-200 bg-white text-slate-900 shadow-sm hover:bg-slate-50 focus:ring-slate-200 dark:border-slate-700 dark:bg-slate-800 dark:text-white dark:hover:bg-slate-700",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200 dark:text-slate-300 dark:hover:bg-slate-800",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100 dark:border-rose-900 dark:bg-rose-950 dark:text-rose-300"},d=t==="primary"?{background:lh.green}:t==="accent"?{background:lh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:ta(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function kF({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:ta("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function hx({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="900px",actions:o}){return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[4vh] z-50 mx-auto flex w-full flex-col overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)] dark:border-slate-800 dark:bg-slate-900 dark:shadow-none",style:{maxWidth:i,maxHeight:"92vh"},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex shrink-0 items-start justify-between gap-3 border-b border-slate-200 px-5 py-4 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(kF,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"shrink-0 border-t border-slate-200 px-5 py-4 dark:border-slate-800",children:r}):null]})]}):null})}function CF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur dark:border-slate-800 dark:bg-slate-900/90 dark:shadow-none",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:ta("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",a.kind==="warn"&&"bg-amber-50 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400",a.kind==="error"&&"bg-rose-50 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400",a.kind==="info"&&"bg-blue-50 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600 dark:text-slate-400",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function D1({title:t,rows:s,total:a}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs font-semibold text-slate-700 dark:text-slate-300",children:[e.jsx("span",{children:t}),e.jsx("span",{children:Bt(a)})]}),e.jsx("div",{className:"mt-2 flex h-2 w-full overflow-hidden rounded-full bg-slate-100 dark:bg-slate-800",children:s.map((l,n)=>{const r=["bg-emerald-500","bg-blue-500","bg-amber-500","bg-indigo-500","bg-rose-500","bg-purple-500"],i=a>0?l.value/a*100:0;return e.jsx("div",{className:ta("h-full",r[n%r.length]),style:{width:`${i}%`},title:`${l.label}: ${Bt(l.value)}`},l.label)})}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-500",children:s.map((l,n)=>e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx("span",{className:ta("h-1.5 w-1.5 rounded-full",["bg-emerald-500","bg-blue-500","bg-amber-500","bg-indigo-500","bg-rose-500","bg-purple-500"][n%6])}),l.label]},l.label))})]})}function Ho({title:t,value:s,sub:a,icon:l,trend:n,variant:r}){const i={green:"border-slate-200 bg-white hover:border-emerald-200 hover:shadow-emerald-500/10 dark:border-slate-800 dark:bg-slate-900 dark:hover:border-emerald-500/30",orange:"border-slate-200 bg-white hover:border-orange-200 hover:shadow-orange-500/10 dark:border-slate-800 dark:bg-slate-900 dark:hover:border-orange-500/30",gray:"border-slate-200 bg-white hover:border-slate-300 dark:border-slate-800 dark:bg-slate-900"},o={green:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400",orange:"bg-orange-50 text-orange-700 dark:bg-orange-900/30 dark:text-orange-400",gray:"bg-slate-50 text-slate-700 dark:bg-slate-800 dark:text-slate-400"},d=r||"gray";return e.jsx("div",{className:ta("rounded-3xl border p-6 shadow-sm transition-all hover-lift dark:shadow-none",i[d]),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400",children:t}),e.jsx("div",{className:"mt-2 text-3xl font-semibold tracking-tight text-slate-900 dark:text-white",children:s}),e.jsx("div",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:a}),n?e.jsx("div",{className:"mt-3",children:e.jsx(Na,{label:n.label,tone:n.tone})}):null]}),e.jsx("div",{className:ta("grid h-12 w-12 place-items-center rounded-2xl shrink-0",o[d]),children:l})]})})}function SF({value:t,labelLeft:s,labelRight:a}){const l=wF(t,0,100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold",children:s}),e.jsx("span",{className:"font-semibold",children:a})]}),e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${l}%`,background:lh.green}})})]})}function AF({data:t,height:s=240,mode:a,onModeChange:l}){if(!(t!=null&&t.length))return null;const n=Math.max(...t.map(u=>u.value))||1,r=s-40,i=t.map((u,x)=>{const p=x/(t.length-1)*100,h=100-u.value/n*100;return[p,h]}),d=(u=>{if(u.length===0)return"";let x=`M ${u[0][0]},${u[0][1]}`;for(let p=0;p<u.length-1;p++){const h=u[p],j=u[p+1],y=h[0]+(j[0]-h[0])*.5,f=h[1],I=h[0]+(j[0]-h[0])*.5,A=j[1];x+=` C ${y},${f} ${I},${A} ${j[0]},${j[1]}`}return x})(i);return e.jsxs("div",{className:"relative overflow-hidden rounded-2xl border border-slate-800 bg-[#0B1120] p-4 text-white shadow-sm",children:[e.jsxs("div",{className:"relative z-10 mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Trip Trends"}),e.jsxs("div",{className:"flex rounded-lg bg-slate-800 p-0.5",children:[e.jsx("button",{type:"button",onClick:()=>l("rides"),className:ta("rounded px-2 py-1 text-[10px] font-semibold transition",a==="rides"?"bg-[#03CD8C] text-slate-900 shadow":"text-slate-400 hover:text-white"),children:"RIDES"}),e.jsx("button",{type:"button",onClick:()=>l("delivery"),className:ta("rounded px-2 py-1 text-[10px] font-semibold transition",a==="delivery"?"bg-[#03CD8C] text-slate-900 shadow":"text-slate-400 hover:text-white"),children:"DELIVERY"}),e.jsx("button",{type:"button",onClick:()=>l("both"),className:ta("rounded px-2 py-1 text-[10px] font-semibold transition",a==="both"?"bg-[#03CD8C] text-slate-900 shadow":"text-slate-400 hover:text-white"),children:"BOTH"})]})]}),e.jsxs("div",{className:"relative",style:{height:r},children:[[0,25,50,75,100].map(u=>e.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-slate-700/50",style:{top:`${u}%`}},u)),e.jsx("div",{className:"absolute inset-0 flex justify-between pointer-events-none",children:t.map((u,x)=>e.jsx("div",{className:"h-full border-r border-dashed border-slate-700/50 w-px first:border-l"},x))}),e.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"absolute inset-0 h-full w-full overflow-visible",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#03CD8C",stopOpacity:"0.4"}),e.jsx("stop",{offset:"100%",stopColor:"#03CD8C",stopOpacity:"0"})]})}),e.jsx("path",{d:`${d} L 100,100 L 0,100 Z`,fill:"url(#chartGradient)"}),e.jsx("path",{d,fill:"none",stroke:"#03CD8C",strokeWidth:"1.5",className:"drop-shadow-[0_0_6px_rgba(3,205,140,0.5)]"})]})]}),e.jsx("div",{className:"mt-2 flex justify-between text-[10px] text-slate-400 font-medium",children:t.map((u,x)=>x%2===0||x===t.length-1?e.jsx("div",{children:u.label},x):null)})]})}function O1({title:t,subtitle:s,icon:a,items:l,actionLabel:n,onAction:r}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:a}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-900 dark:text-white",children:t}),e.jsx("div",{className:"mt-0.5 text-xs text-slate-500 dark:text-slate-500",children:s})]})]}),n?e.jsx("button",{type:"button",className:"text-xs font-semibold text-emerald-700 hover:underline",onClick:r,children:n}):null]}),e.jsx("div",{className:"mt-3 space-y-2",children:l.map(i=>e.jsx("button",{onClick:i.onClick,type:i.onClick?"button":void 0,className:ta("w-full text-left rounded-2xl border border-slate-200 bg-white p-3 dark:border-slate-800 dark:bg-slate-950",i.onClick?"cursor-pointer transition-all hover:bg-slate-50 hover:shadow-sm hover:border-slate-300 dark:hover:bg-slate-800":""),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900 dark:text-slate-200",children:i.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:i.meta})]}),i.pill?e.jsx(Na,{label:i.pill.label,tone:i.pill.tone}):null]})},i.title))})]})}function EF(){const t=ot(),[s,a]=c.useState([]),l=B=>{const ne=R1("toast");a(X=>[{id:ne,...B},...X].slice(0,4)),window.setTimeout(()=>a(X=>X.filter(ge=>ge.id!==ne)),3200)},n=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],r=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],i=["Operations","Sales","Finance","Admin","Procurement"],[o]=c.useState("Acme Group Ltd"),[d,u]=c.useState("This month"),[x,p]=c.useState(()=>{const B=new Date;return B.setMonth(B.getMonth()-1),B.toISOString().split("T")[0]}),[h,j]=c.useState(()=>new Date().toISOString().split("T")[0]),[y,f]=c.useState(68e5),[I,A]=c.useState("All"),[b,C]=c.useState("All"),[S,z]=c.useState("All"),$=c.useMemo(()=>b==="All"||b==="E-Commerce",[b]),D=c.useMemo(()=>{let X=1,ge=1,Le="This month";switch(d){case"Today":X=.038,ge=.038,Le="Today";break;case"This week":X=.21,ge=.21,Le="This week";break;case"This month":X=1,ge=1,Le="This month";break;case"This year":X=8.5,ge=12,Le="This year";break;case"Custom":const Xe=new Date(x),Ie=new Date(h),v=Math.max(1,Math.ceil((Ie.getTime()-Xe.getTime())/(1e3*60*60*24)));X=v/30,ge=v/30,Le=`${v} days`;break}const ae=Math.round(325e5*.038),le=Math.round(325e5*.21),R=Math.round(325e5*X),se=Math.round(325e5*8.5),m=Math.round(4e7*ge),w=Math.round(142e5*X),oe=Math.round(168e5*X),me=Math.round(15e5*X),Me=y,Ve=82e5,Ze=3,E=d==="Today"?0:d==="This week"?1:2,J=d==="Today"?0:1,g=Math.round(4*X),H=7,N=30,U=Math.round(R/Math.max(1,H*X)*N*X),ce={"E-Commerce":Math.round(168e5*X),"EVs & Charging":Math.round(42e5*X),"Rides & Logistics":Math.round(142e5*X),"School & E-Learning":Math.round(8e5*X),"Medical & Health Care":Math.round(65e4*X),"Travel & Tourism":Math.round(12e5*X),"Green Investments":Math.round(5e5*X),FaithHub:Math.round(12e4*X),"Virtual Workspace":Math.round(9e5*X),"Finance & Payments":Math.round(2e6*X),"Other Service Module":0},O={MyLiveDealz:Math.round(52e5*X),ServiceMart:Math.round(12e5*X),EVmart:Math.round(34e5*X),GadgetMart:Math.round(22e5*X),LivingMart:Math.round(13e5*X),StyleMart:Math.round(9e5*X),EduMart:Math.round(6e5*X),HealthMart:Math.round(75e4*X),PropertyMart:Math.round(4e5*X),GeneratMart:Math.round(7e5*X),ExpressMart:Math.round(6e5*X),FaithMart:Math.round(15e4*X),"Other Marketplace":0},je={Operations:Math.round(12e6*X),Sales:Math.round(98e5*X),Finance:Math.round(52e5*X),Admin:Math.round(41e5*X),Procurement:Math.round(34e5*X)},we={Operations:Math.round(15e6*ge),Sales:Math.round(12e6*ge),Finance:Math.round(6e6*ge),Admin:Math.round(5e6*ge),Procurement:Math.round(5e6*ge)};return{spendToday:ae,spendWeek:le,spendMonth:R,spendYear:se,budgetMonth:m,budgetRemaining:Math.max(0,m-R),ridesMonth:w,purchasesMonth:oe,servicesMonth:me,walletBalance:y,creditLimit:Me,creditUsed:Ve,prepaidRunwayDays:Ze,failedPayments:E,overdueInvoices:J,policyBreaches:g,forecastMonthEnd:U,monthDay:H,daysInMonth:N,spendByModule:ce,spendByMarketplace:O,spendByGroup:je,budgetByGroup:we,periodLabel:Le,multiplier:X}},[d,x,h,y]),[W,he]=c.useState(()=>pl.getAll());c.useEffect(()=>{const B=()=>{he(pl.getAll())};return window.addEventListener("budget-storage-update",B),()=>window.removeEventListener("budget-storage-update",B)},[]);const[V,xe]=c.useState(()=>[{id:"AP-1821",type:"Purchase",module:"E-Commerce",marketplace:"MyLiveDealz",requester:"Mary N.",group:"Operations",amount:654e4,slaHours:6,ageMinutes:120,status:"Pending",needsAttachment:!0,details:{Item:"MacBook Pro M3 x 2",Vendor:"Shenzhen Store","Unit Cost":327e4,Warranty:"1 Year",Delivery:"3 Days"}},{id:"RFQ-390",type:"RFQ",module:"Rides & Logistics",marketplace:"-",requester:"Ronald I.",group:"Admin",amount:285e6,slaHours:2,ageMinutes:1440,status:"Escalated",needsAttachment:!0,details:{Title:"Company Fleet Expansion",Items:"Toyota Hiace x 5","Needed By":"2026-02-15","Est. Value":285e6,"Specs Attached":!0}},{id:"RD-0442",type:"Ride",module:"Rides & Logistics",marketplace:"-",requester:"John S.",group:"Sales",amount:41500,slaHours:7,ageMinutes:15,status:"Pending",needsAttachment:!1,details:{Pickup:"Acme HQ, Kampala",Dropoff:"Entebbe Intl Airport",Distance:"42km",Vehicle:"Premium Sedan",Passenger:"Client Guest"}},{id:"SV-2201",type:"Service",module:"EVs & Charging",marketplace:"-",requester:"Finance Desk",group:"Finance",amount:18e5,slaHours:12,ageMinutes:180,status:"Pending",needsAttachment:!1,details:{Service:"Fleet Charging Credits",Provider:"EVzone Charging",Units:"5000 kWh",Rate:"UGX 360/kWh","Valid Until":"2026-12-31"}}]),[pe,be]=c.useState(null),[fe,K]=c.useState(null),[re,q]=c.useState("both"),L=V.filter(B=>B.status!=="Escalated").length,M=V.filter(B=>B.status==="Escalated").length,[k,P]=c.useState(()=>{const B={};return n.forEach(ne=>B[ne]=ne!=="Other Service Module"),B}),Y=c.useMemo(()=>[{title:"Failed payments",meta:`${D.failedPayments} failures  Risk of hold`,pill:{label:"Critical",tone:"bad"}},{title:"Overdue invoices",meta:`${D.overdueInvoices} invoice  Grace window active`,pill:{label:"Warning",tone:"warn"}},{title:"Policy breaches",meta:`${D.policyBreaches} events  Review policy rules`,pill:{label:"Review",tone:"info"}}],[D.failedPayments,D.overdueInvoices,D.policyBreaches]),F=c.useMemo(()=>({rows:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],cols:["00-02","02-04","04-06","06-08","08-10","10-12","12-14","14-16","16-18","18-20","20-22","22-24"],matrix:[[2,1,3,8,14,11,9,8,12,16,10,4],[1,1,2,9,15,12,8,9,11,15,9,3],[2,2,4,10,16,13,9,10,13,17,11,5],[3,1,3,9,15,12,9,11,14,18,12,4],[4,2,4,10,14,14,10,12,16,20,15,8],[8,5,2,4,8,12,14,13,15,18,16,10],[7,4,1,3,6,10,12,11,13,15,12,6]]}),[]);c.useMemo(()=>[{title:"Unusual vendor spend",body:"Shenzhen Store spend is 3.1 higher than typical (MyLiveDealz).",severity:"warn",ctas:["Investigate","Create rule"]},{title:"User nearing cap",body:"3 users are above 80% of their monthly cap in Sales.",severity:"info",ctas:["Review users","Tighten policy"]}],[]),c.useMemo(()=>[{title:"Prefer standard rides for commute",body:`Estimated savings: ${Bt(42e4)} this month if premium is restricted for commute trips.`,tag:"Rides & Logistics"},{title:"Use preferred vendor catalog",body:`Estimated savings: ${Bt(9e5)} by routing purchases to negotiated vendors.`,tag:"E-Commerce"},{title:"Bundle EV charging credits",body:`Estimated savings: ${Bt(26e4)} by purchasing credits in bulk (EVs & Charging).`,tag:"EVs & Charging"}],[]),c.useMemo(()=>[{id:"NA-1",title:"Approve RFQ escalation",why:"RFQ-390 is escalated and past SLA.",impact:"Unblocks high-value asset procurement.",cta:"Open RFQ",tone:"warn"},{id:"NA-2",title:"Increase Operations budget or enforce hard cap",why:"Operations is projected to exceed budget by month-end.",impact:"Prevents service interruption.",cta:"Adjust budget",tone:"info"},{id:"NA-3",title:"Add Shenzhen Store to vendor rule",why:"Anomaly detected for vendor spend.",impact:"Reduces fraud risk and overspend.",cta:"Create rule",tone:"good"}],[]);const G=D.spendMonth/Math.max(1,D.budgetMonth)*100,ve=D.creditUsed/Math.max(1,D.creditLimit)*100,Te=c.useMemo(()=>i.map(ne=>{const X=D.spendByGroup[ne],ge=Math.round(X/Math.max(1,D.monthDay)*D.daysInMonth),Le=D.budgetByGroup[ne],ae=ge>Le?"bad":ge>Le*.9?"warn":"good";return{group:ne,mtd:X,forecast:ge,budget:Le,risk:ae}}),[D,i]),ye=c.useMemo(()=>n.map(ne=>{const X=D.spendByModule[ne]||0,ge=Math.round(X/Math.max(1,D.monthDay)*D.daysInMonth);return{module:ne,mtd:X,forecast:ge}}).filter(ne=>ne.mtd>0||ne.module==="Other Service Module"),[D,n]),ie=c.useMemo(()=>r.map(ne=>{const X=D.spendByMarketplace[ne]||0,ge=Math.round(X/Math.max(1,D.monthDay)*D.daysInMonth);return{marketplace:ne,mtd:X,forecast:ge}}).filter(ne=>ne.mtd>0||ne.marketplace==="Other Marketplace"),[D,r]),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState(!1),[Ce,Ee]=c.useState(!1),[Ue,Ye]=c.useState(!1),[De,Be]=c.useState({method:"Wallet top-up",amount:2e6,reference:""}),[$e,_]=c.useState({group:"Operations",module:"All",marketplace:"All",period:"Monthly",amount:5e6,hardCap:!0}),[te,Re]=c.useState({title:"Company vehicle purchase",module:"Rides & Logistics",marketplace:"All",estValue:285e6,neededBy:"2026-02-01",description:"Need a company vehicle. Include warranty, service plan, and delivery timeline.",attachments:!1}),Fe=Object.values(D.spendByModule).reduce((B,ne)=>B+ne,0),T=Object.values(D.spendByMarketplace).reduce((B,ne)=>B+ne,0),Z=c.useMemo(()=>{const B=[];return I!=="All"&&B.push(`Group: ${I}`),b!=="All"&&B.push(`Module: ${b}`),S!=="All"&&B.push(`Marketplace: ${S}`),B.length?B.join("  "):"All spend"},[I,b,S,y]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(CF,{toasts:s,onDismiss:B=>a(ne=>ne.filter(X=>X.id!==B))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)] transition-colors dark:border-slate-800 dark:bg-slate-900 dark:shadow-none",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 transition-colors md:px-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:lh.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"CorporatePay Dashboard"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:["Organization: ",o,"  ",Z]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Na,{label:`Approvals: ${L} pending`,tone:L?"warn":"good"}),M?e.jsx(Na,{label:`${M} escalated`,tone:"bad"}):null,e.jsx(Na,{label:`Budget used: ${Math.round(G)}%`,tone:G>90?"bad":G>75?"warn":"good"}),e.jsx(Na,{label:`Forecast: ${Bt(D.forecastMonthEnd)}`,tone:D.forecastMonthEnd>D.budgetMonth?"warn":"good"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-2 py-2 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Time"}),e.jsxs("select",{value:d,onChange:B=>u(B.target.value),className:"rounded-xl border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 outline-none dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200",children:[e.jsx("option",{children:"Today"}),e.jsx("option",{children:"This week"}),e.jsx("option",{children:"This month"}),e.jsx("option",{children:"This year"}),e.jsx("option",{children:"Custom"})]})]}),d==="Custom"&&e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsx(ML,{className:"h-4 w-4 text-slate-500 dark:text-slate-400"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"date",value:x,onChange:B=>p(B.target.value),className:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-orange-200 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"}),e.jsx("span",{className:"text-xs text-slate-500",children:"to"}),e.jsx("input",{type:"date",value:h,onChange:B=>j(B.target.value),className:"rounded-lg border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700 outline-none focus:ring-2 focus:ring-orange-200 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-200"})]}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",D.periodLabel,")"]})]}),e.jsxs(ia,{variant:"primary",onClick:()=>Ye(!0),children:[e.jsx(et,{className:"h-4 w-4"})," Approvals inbox"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Group"}),e.jsxs("select",{value:I,onChange:B=>A(B.target.value),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-2 text-sm font-semibold text-slate-900 outline-none dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"All",children:"All"}),i.map(B=>e.jsx("option",{value:B,children:B},B))]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Service Module"}),e.jsxs("select",{value:b,onChange:B=>{const ne=B.target.value;C(ne),ne!=="All"&&ne!=="E-Commerce"&&z("All")},className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-2 text-sm font-semibold text-slate-900 outline-none dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100",children:[e.jsx("option",{value:"All",children:"All"}),n.map(B=>e.jsx("option",{value:B,children:B},B))]})]}),e.jsxs("div",{className:ta("rounded-2xl border px-3 py-2",$?"border-slate-200 bg-white dark:border-slate-700 dark:bg-slate-800":"border-slate-200 bg-slate-50 opacity-70 dark:border-slate-700 dark:bg-slate-800/50"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Marketplace"}),e.jsxs("select",{value:S,disabled:!$,onChange:B=>z(B.target.value),className:ta("mt-1 w-full rounded-xl border px-2 py-2 text-sm font-semibold outline-none",$?"border-slate-200 bg-white text-slate-900 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100":"border-slate-200 bg-slate-50 text-slate-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-400"),children:[e.jsx("option",{value:"All",children:"All"}),r.map(B=>e.jsx("option",{value:B,children:B},B))]}),$?null:e.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:"Marketplace filters apply to E-Commerce only."})]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-8 transition-colors md:px-8 dark:bg-slate-950",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(Ho,{title:"Spend today",value:Bt(D.spendToday),sub:"All modules",icon:e.jsx(eh,{className:"h-5 w-5"}),trend:{label:"+12% vs yesterday",tone:"good"},variant:"green"}),e.jsx(Ho,{title:"Spend this week",value:Bt(D.spendWeek),sub:"Week-to-date",icon:e.jsx(XL,{className:"h-5 w-5"}),trend:{label:"Stable",tone:"neutral"},variant:"orange"}),e.jsx(Ho,{title:"Spend this month",value:Bt(D.spendMonth),sub:`Budget: ${Bt(D.budgetMonth)}`,icon:e.jsx(Tr,{className:"h-5 w-5"}),trend:{label:`${Math.round(G)}% used`,tone:G>90?"bad":"warn"},variant:"gray"}),e.jsx(Ho,{title:"Budget remaining",value:Bt(D.budgetRemaining),sub:"Available this month",icon:e.jsx(Kd,{className:"h-5 w-5"}),trend:{label:D.budgetRemaining<2e6?"Low":"OK",tone:D.budgetRemaining<2e6?"warn":"good"},variant:"orange"}),e.jsx(Ho,{title:"Approvals pending",value:String(L),sub:M?`${M} escalated`:"No escalations",icon:e.jsx(et,{className:"h-5 w-5"}),trend:{label:M?"Escalation":"On track",tone:M?"bad":"good"},variant:"green"}),e.jsx(Ho,{title:"Forecast month-end",value:Bt(D.forecastMonthEnd),sub:D.forecastMonthEnd>D.budgetMonth?"Over budget":"Within budget",icon:e.jsx(im,{className:"h-5 w-5"}),trend:{label:D.forecastMonthEnd>D.budgetMonth?"Risk":"OK",tone:D.forecastMonthEnd>D.budgetMonth?"warn":"good"},variant:"gray"})]}),e.jsxs("div",{className:"mt-8 rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Account Health"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Wallet, credit, and service status overview"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Na,{label:`Wallet: ${Bt(D.walletBalance)}`,tone:D.walletBalance<1e6?"bad":"good"}),e.jsx(Na,{label:`Credit: ${Math.round(ve)}% used`,tone:ve>80?"warn":"neutral"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-5 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-emerald-100 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",children:e.jsx(al,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Wallet Balance"})]}),e.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:Bt(D.walletBalance)}),e.jsx("div",{className:"mt-2 text-xs text-slate-600 dark:text-slate-300",children:"Budget is allowance; wallet is prepaid funds; credit is postpaid limit."}),e.jsx("div",{className:"mt-4",children:e.jsx(ia,{variant:"outline",className:"w-full justify-center bg-white dark:bg-slate-800",onClick:()=>Ae(!0),children:"Top up"})})]}),e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-5 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:e.jsx($y,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Credit Usage"})]}),e.jsxs("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:[Bt(D.creditUsed)," ",e.jsxs("span",{className:"text-sm font-normal text-slate-500",children:["/ ",Bt(D.creditLimit)]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(SF,{value:ve,labelLeft:"Used",labelRight:`${Math.round(ve)}%`})}),D.creditUsed>D.creditLimit?e.jsxs("div",{className:"mt-3 rounded-2xl bg-rose-50 p-3 text-xs font-semibold text-rose-800 ring-1 ring-rose-200",children:["Credit over-limit: ",Bt(D.creditUsed-D.creditLimit)," above limit. Approvals and service access may be restricted."]}):null]}),e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-5 dark:bg-slate-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-xl bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",children:e.jsx(jl,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 dark:text-white",children:"Active Modules"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:n.map(B=>e.jsx("button",{type:"button",className:ta("inline-flex items-center justify-center rounded-lg px-2 py-1.5 text-xs font-medium transition-colors cursor-pointer border",k[B]?"bg-[#064e3b] text-emerald-100 border-[#065f46] hover:bg-[#065f46] shadow-sm":"bg-slate-100 text-slate-500 border-slate-200 hover:bg-slate-200 dark:bg-slate-800 dark:text-slate-500 dark:border-slate-700"),onClick:()=>{P(ne=>({...ne,[B]:!ne[B]})),l({title:"Module toggle",message:`${B} ${k[B]?"disabled":"enabled"}`,kind:"info"})},children:B},B))})]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-8 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-8",children:e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Top Issues"}),e.jsx(Na,{label:`${Y.length}`,tone:Y.some(B=>B.pill.tone==="bad")?"bad":"warn"})]}),e.jsx("div",{className:"space-y-3",children:Y.map(B=>e.jsx("button",{onClick:()=>t("/console/notifications_activity"),className:"w-full rounded-2xl border border-slate-100 bg-slate-50 p-4 text-left transition-all hover:bg-white hover:shadow-md hover:ring-1 hover:ring-slate-200 dark:border-slate-800 dark:bg-slate-800/50 dark:hover:bg-slate-800 dark:hover:ring-slate-700",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900 dark:text-white",children:B.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:B.meta})]}),e.jsx(Na,{label:B.pill.label,tone:B.pill.tone})]})},B.title))}),e.jsx(ia,{variant:"ghost",className:"mt-4 w-full text-xs",onClick:()=>t("/console/notifications_activity"),children:"View all notifications"})]})}),e.jsx("div",{className:"lg:col-span-8 flex flex-col gap-8",children:e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Peak Ride Times"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Ride volume heat distribution"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ia,{variant:"outline",className:"h-8 text-xs",onClick:()=>l({title:"Updated",message:"Data refreshed",kind:"success"}),children:[e.jsx(ct,{className:"h-3 w-3 mr-2"}),"Import Data"]})})]}),e.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-100 dark:border-slate-800",children:e.jsx("div",{className:"p-4 rounded-2xl border border-slate-100 dark:border-slate-800",children:e.jsx(AF,{mode:re,onModeChange:q,data:F.cols.map((B,ne)=>{const X=F.matrix.reduce((ae,le)=>ae+le[ne],0),ge=Math.round(X*.65),Le=re==="rides"?X:re==="delivery"?ge:X+ge;return{label:B,value:Le}})})})})]})}),e.jsx("div",{className:"lg:col-span-6",children:e.jsx(O1,{title:"Top Vendors",subtitle:"By spend volume",icon:e.jsx(C0,{className:"h-4 w-4"}),actionLabel:"View All",onAction:()=>t("/console/vendors"),items:[{title:"Shenzhen Store",meta:`UGX ${Bt(52e5)}`,pill:{label:"Anomaly",tone:"warn"},onClick:()=>t("/console/vendors")},{title:"Kampala Office Mart",meta:`UGX ${Bt(31e5)}`,pill:{label:"Preferred",tone:"good"},onClick:()=>t("/console/vendors")},{title:"City Courier",meta:`UGX ${Bt(82e4)}`,pill:{label:"OK",tone:"neutral"},onClick:()=>t("/console/vendors")}]})}),e.jsx("div",{className:"lg:col-span-6",children:e.jsx(O1,{title:"Top Routes",subtitle:"Most frequent trips",icon:e.jsx(Po,{className:"h-4 w-4"}),actionLabel:"View All",onAction:()=>t("/console/travel"),items:[{title:"Office  Airport",meta:"36 trips  Avg UGX 82k",pill:{label:"Peak",tone:"warn"},onClick:()=>t("/console/travel")},{title:"Office  Client HQ",meta:"29 trips  Avg UGX 41k",pill:{label:"OK",tone:"neutral"},onClick:()=>t("/console/travel")},{title:"Office  Warehouse",meta:"18 trips  Avg UGX 35k",pill:{label:"OK",tone:"neutral"},onClick:()=>t("/console/travel")}]})}),e.jsxs("div",{className:"lg:col-span-12 rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Issued Budgets"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Most recent allocations (Last 5)"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Na,{label:`${W.length} total`,tone:"neutral"}),W.length>5&&e.jsxs(ia,{variant:"ghost",onClick:()=>t("/console/settings/budgets-issued"),className:"text-xs",children:["View all",e.jsx(Iy,{className:"ml-1 h-3 w-3"})]})]})]}),W.length===0?e.jsx("div",{className:"py-8 text-center text-slate-500 dark:text-slate-400",children:"No budgets have been issued yet. Start by identifying a group and amount."}):e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100 dark:border-slate-800",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold text-slate-600 dark:bg-slate-950 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3",children:"Group"}),e.jsx("th",{className:"px-5 py-3",children:"Module / Market"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"Amount"}),e.jsx("th",{className:"px-5 py-3",children:"Period"}),e.jsx("th",{className:"px-5 py-3 text-center",children:"Hard Cap"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"Time"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:W.slice(0,5).map(B=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-5 py-3 font-medium text-slate-900 dark:text-white",children:B.group}),e.jsx("td",{className:"px-5 py-3 text-slate-600 dark:text-slate-300",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-xs font-medium",children:B.module}),e.jsx("span",{className:"text-[10px] text-slate-400",children:B.marketplace})]})}),e.jsx("td",{className:"px-5 py-3 text-right font-semibold text-slate-900 dark:text-white",children:Bt(B.amount)}),e.jsx("td",{className:"px-5 py-3 text-slate-600 dark:text-slate-300",children:B.period}),e.jsx("td",{className:"px-5 py-3 text-center",children:e.jsx("span",{className:ta("inline-block h-2 w-2 rounded-full",B.hardCap?"bg-emerald-500":"bg-slate-300"),title:B.hardCap?"Hard Cap Enabled":"Soft Cap"})}),e.jsx("td",{className:"px-5 py-3 text-right text-slate-500",children:new Date(B.timestamp).toLocaleTimeString()})]},B.id))})]})})]}),e.jsxs("div",{className:"lg:col-span-12 rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Budget Forecast"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Projected month-end spend vs budget"})]}),e.jsx(Na,{label:`Day ${D.monthDay} of ${D.daysInMonth}`,tone:"neutral"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-100 dark:border-slate-800",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold text-slate-600 dark:bg-slate-950 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3",children:"Group"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"MTD Spend"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"Forecast"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"Budget"}),e.jsx("th",{className:"px-5 py-3 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:Te.map(B=>e.jsxs("tr",{className:"hover:bg-slate-50/50",children:[e.jsx("td",{className:"px-5 py-3 font-medium text-slate-900 dark:text-white",children:B.group}),e.jsx("td",{className:"px-5 py-3 text-right text-slate-600 dark:text-slate-300",children:Bt(B.mtd)}),e.jsx("td",{className:"px-5 py-3 text-right font-medium text-slate-900 dark:text-white",children:Bt(B.forecast)}),e.jsx("td",{className:"px-5 py-3 text-right text-slate-500",children:Bt(B.budget)}),e.jsx("td",{className:"px-5 py-3 text-center",children:e.jsx(Na,{label:B.risk==="bad"?"Over":B.risk==="warn"?"Risk":"OK",tone:B.risk})})]},B.group))})]})})}),e.jsx("div",{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(D1,{title:"Service Modules",total:Fe,rows:ye.slice(0,5).map(B=>({label:B.module,value:B.mtd}))}),e.jsx(D1,{title:"Marketplaces",total:T,rows:ie.slice(0,5).map(B=>({label:B.marketplace,value:B.mtd}))})]})})]})]}),e.jsx("div",{className:"mt-8 text-center lg:col-span-12",children:e.jsx("div",{className:"inline-block rounded-full bg-slate-100 px-4 py-2 text-xs text-slate-500 dark:bg-slate-900 dark:text-slate-400",children:"CorporatePay v2.5  Everything is up to date"})}),e.jsx("div",{className:"mt-8 lg:col-span-12",children:e.jsx("div",{className:"rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Quick Actions"}),e.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Fast paths to high-impact workflows"})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs(ia,{variant:"primary",onClick:()=>Ae(!0),className:"shadow-lg shadow-emerald-500/10",children:[e.jsx(al,{className:"h-4 w-4"})," Add funds"]}),e.jsxs(ia,{variant:"outline",onClick:()=>Ne(!0),children:[e.jsx(Kd,{className:"h-4 w-4"})," Issue budget"]}),e.jsxs(ia,{variant:"outline",onClick:()=>Ye(!0),children:[e.jsx(et,{className:"h-4 w-4"})," Approve queue"]}),e.jsxs(ia,{variant:"outline",onClick:()=>Ee(!0),children:[e.jsx(jt,{className:"h-4 w-4"})," Create RFQ"]})]})]})})})]})," "]})]})}),e.jsx(hx,{open:Oe,title:"Add funds",subtitle:"Top up wallet or add prepaid deposit. (Demo)",onClose:()=>Ae(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(ia,{variant:"outline",onClick:()=>Ae(!1),children:"Cancel"}),e.jsxs(ia,{variant:"primary",onClick:()=>{Ae(!1),f(B=>B+De.amount),l({title:"Funds added",message:`${De.method}: ${Bt(De.amount)}`,kind:"success"})},children:[e.jsx(al,{className:"h-4 w-4"})," Confirm"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Method"}),e.jsxs("select",{value:De.method,onChange:B=>Be(ne=>({...ne,method:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{children:"Wallet top-up"}),e.jsx("option",{children:"Prepaid deposit"}),e.jsx("option",{children:"Credit repayment"})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Payment rails configured under Finance & Payments."})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Amount (UGX)"}),e.jsx("input",{type:"number",min:0,onKeyDown:B=>(B.key==="-"||B.key==="e")&&B.preventDefault(),value:De.amount,onChange:B=>{const ne=Number(B.target.value||0);ne>=0&&Be(X=>({...X,amount:ne}))},className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Preview: ",Bt(De.amount)]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Reference (optional)"}),e.jsx("input",{value:De.reference,onChange:B=>Be(ne=>({...ne,reference:B.target.value})),placeholder:"Bank/txn reference",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Premium: large funding events can require approvals and are fully audit logged."})]})}),e.jsx(hx,{open:ee,title:"Issue budget",subtitle:"Allocate budget to a group (and optionally module/marketplace).",onClose:()=>Ne(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(ia,{variant:"outline",onClick:()=>Ne(!1),children:"Cancel"}),e.jsxs(ia,{variant:"primary",onClick:()=>{Ne(!1),pl.add({id:R1("budget"),group:$e.group,module:$e.module,marketplace:$e.marketplace,amount:Number($e.amount),period:$e.period,hardCap:$e.hardCap,timestamp:new Date().toISOString()}),l({title:"Budget issued",message:`${$e.group}: ${Bt($e.amount)} (${$e.period})`,kind:"success"})},children:[e.jsx(Kd,{className:"h-4 w-4"})," Issue"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Group"}),e.jsx("select",{value:$e.group,onChange:B=>_(ne=>({...ne,group:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:i.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Period"}),e.jsx("select",{value:$e.period,onChange:B=>_(ne=>({...ne,period:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:"Weekly,Monthly,Quarterly,Annual".split(",").map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Service Module (optional)"}),e.jsxs("select",{value:$e.module,onChange:B=>{const ne=B.target.value;_(X=>({...X,module:ne,marketplace:ne==="E-Commerce"?X.marketplace:"All"}))},className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{value:"All",children:"All"}),n.map(B=>e.jsx("option",{value:B,children:B},B))]})]}),e.jsxs("div",{className:ta("",$e.module==="E-Commerce"?"":"opacity-60"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Marketplace (optional)"}),e.jsxs("select",{value:$e.marketplace,disabled:$e.module!=="E-Commerce"&&$e.module!=="All",onChange:B=>_(ne=>({...ne,marketplace:B.target.value})),className:ta("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none",$e.module==="E-Commerce"||$e.module==="All"?"border-slate-200 bg-white text-slate-900":"border-slate-200 bg-slate-50 text-slate-500"),children:[e.jsx("option",{value:"All",children:"All"}),r.map(B=>e.jsx("option",{value:B,children:B},B))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Amount (UGX)"}),e.jsx("input",{type:"number",min:0,onKeyDown:B=>(B.key==="-"||B.key==="e")&&B.preventDefault(),value:$e.amount,onChange:B=>{const ne=Number(B.target.value||0);ne>=0&&_(X=>({...X,amount:ne}))},className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Hard cap"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Block spend when budget exceeded"})]}),e.jsx("button",{type:"button",className:ta("relative h-7 w-12 rounded-full border transition",$e.hardCap?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>_(B=>({...B,hardCap:!B.hardCap})),"aria-label":"Toggle hard cap",children:e.jsx("span",{className:ta("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",$e.hardCap?"left-[22px]":"left-1")})})]})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Premium: high budget increases can require multi-level approvals."})]})}),e.jsx(hx,{open:Ce,title:"Create RFQ / Quote request",subtitle:"High-value assets and quotes with approval-aware workflow.",onClose:()=>Ee(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(ia,{variant:"outline",onClick:()=>Ee(!1),children:"Cancel"}),e.jsxs(ia,{variant:"primary",onClick:()=>{Ee(!1),l({title:"RFQ created",message:`${te.title}  ${Bt(te.estValue)}`,kind:"success"}),xe(B=>[{id:`RFQ-${Math.floor(100+Math.random()*900)}`,type:"RFQ",module:te.module,marketplace:"-",requester:"You",group:$e.group||"Admin",amount:te.estValue,slaHours:4,ageMinutes:1,status:"Pending",needsAttachment:!te.attachments},...B])},children:[e.jsx(jt,{className:"h-4 w-4"})," Create"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Title"}),e.jsx("input",{value:te.title,onChange:B=>Re(ne=>({...ne,title:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Service Module"}),e.jsx("select",{value:te.module,onChange:B=>Re(ne=>({...ne,module:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:n.map(B=>e.jsx("option",{value:B,children:B},B))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Needed by"}),e.jsx("input",{type:"date",value:te.neededBy,onChange:B=>Re(ne=>({...ne,neededBy:B.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Estimated value (UGX)"}),e.jsx("input",{type:"number",value:te.estValue,onChange:B=>Re(ne=>({...ne,estValue:Number(B.target.value||0)})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"This can be paid via milestones after quote approval."})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Attachments"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Specs, PDFs, drawings"})]}),e.jsx("input",{type:"file",multiple:!0,className:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-600 file:mr-4 file:rounded-full file:border-0 file:bg-emerald-50 file:px-4 file:py-2 file:text-sm file:font-semibold file:text-emerald-700 hover:file:bg-emerald-100",onChange:B=>{var ne;(ne=B.target.files)!=null&&ne.length&&Re(X=>({...X,attachments:!0}))}})]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Description"}),e.jsx("textarea",{value:te.description,onChange:B=>Re(ne=>({...ne,description:B.target.value})),rows:5,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: RFQs can be routed to CFO/CEO approvals and converted to PO with milestone payments."})]})}),e.jsx(hx,{open:Ue,title:fe?`Approval Details: ${fe.id}`:"Approvals inbox",subtitle:fe?`${fe.type} request from ${fe.requester}`:"Unified approvals: rides, purchases, services, and RFQs.",onClose:()=>{fe?K(null):Ye(!1)},footer:fe?e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx(ia,{variant:"ghost",onClick:()=>K(null),children:"Back to list"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ia,{variant:"accent",onClick:()=>{xe(B=>B.filter(ne=>ne.id!==fe.id)),l({title:"Rejected",message:`${fe.id} rejected.`,kind:"warn"}),K(null)},children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]}),e.jsxs(ia,{variant:"primary",onClick:()=>{xe(B=>B.filter(ne=>ne.id!==fe.id)),l({title:"Approved",message:`${fe.id} approved.`,kind:"success"}),K(null)},children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]})]})]}):e.jsx("div",{className:"flex justify-end",children:e.jsx(ia,{variant:"outline",onClick:()=>Ye(!1),children:"Close"})}),maxW:"95vw",children:fe?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Amount"}),e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:Bt(fe.amount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Requester"}),e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:fe.requester})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Module"}),e.jsx("div",{className:"font-medium text-slate-900 dark:text-white",children:fe.module})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Status"}),e.jsx(Na,{label:fe.status,tone:fe.status==="Escalated"?"bad":"warn"})]})]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-sm font-bold text-slate-900 dark:text-white",children:"Request Details"}),e.jsx("div",{className:"overflow-hidden rounded-2xl border border-slate-200 dark:border-slate-800",children:e.jsx("table",{className:"w-full text-sm text-left",children:e.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:[Object.entries(fe.details||{}).map(([B,ne])=>e.jsxs("tr",{className:"bg-white dark:bg-slate-950",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-500 bg-slate-50 w-1/3 dark:bg-slate-900 dark:text-slate-400",children:B}),e.jsx("td",{className:"px-4 py-3 text-slate-900 dark:text-white font-semibold",children:typeof ne=="boolean"?ne?"Yes":"No":ne})]},B)),!fe.details&&e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-4 py-4 text-center text-slate-500",children:"No additional details provided."})})]})})})]}),e.jsx("div",{className:"rounded-2xl bg-slate-50 p-4 text-xs text-slate-500 dark:bg-slate-900/50",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:["ID: ",e.jsx("span",{className:"font-mono text-slate-700 dark:text-slate-300",children:fe.id})]}),e.jsxs("span",{children:["Group: ",e.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:fe.group})]}),e.jsxs("span",{children:["Created: ",e.jsxs("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:[fe.ageMinutes," mins ago"]})]})]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white shadow-md p-4",children:[" ",e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"ID"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Marketplace"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"SLA"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Required"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[V.map(B=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60 cursor-pointer",onClick:()=>K(B),children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:B.id}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:B.type}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:B.module}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:B.marketplace}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:B.group}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:Bt(B.amount)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Na,{label:`${B.slaHours}h`,tone:B.status==="Escalated"?"bad":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Na,{label:B.status,tone:B.status==="Escalated"?"bad":"warn"})}),e.jsx("td",{className:"px-4 py-3",children:B.needsAttachment?e.jsx(Na,{label:"Attachment",tone:"warn"}):e.jsx(Na,{label:"OK",tone:"good"})}),e.jsxs("td",{className:"px-4 py-3 relative",children:[e.jsx("button",{onClick:ne=>{ne.stopPropagation(),be(pe===B.id?null:B.id)},className:"p-1.5 text-slate-500 hover:bg-slate-100 rounded-full transition-colors",children:e.jsx(fa,{className:"h-4 w-4"})}),e.jsx(qe,{children:pe===B.id&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:ne=>{ne.stopPropagation(),be(null)}}),e.jsxs(ke.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},className:"absolute right-8 top-1/2 -translate-y-1/2 z-20 w-32 bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden",onClick:ne=>ne.stopPropagation(),children:[e.jsx("button",{className:"w-full text-left px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{K(B),be(null)},children:"Open details"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-xs font-semibold text-emerald-600 hover:bg-emerald-50",onClick:()=>{xe(ne=>ne.filter(X=>X.id!==B.id)),l({title:"Approved",message:`${B.id} approved.`,kind:"success"}),be(null)},children:"Approve"}),e.jsx("button",{className:"w-full text-left px-3 py-2 text-xs font-semibold text-rose-600 hover:bg-rose-50",onClick:()=>{xe(ne=>ne.filter(X=>X.id!==B.id)),l({title:"Rejected",message:`${B.id} rejected.`,kind:"warn"}),be(null)},children:"Reject"})]})]})})]})]},B.id)),V.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No approvals in queue."})})]})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: SLA timers, delegation routing, and load balancing are configured in Approval Workflow Builder (Round 4J)."})]})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"A Corporate Dashboard v2: KPIs, account health, issues, heatmaps, quick actions, and premium insights with forecasts by group/module/marketplace."})})]})}const Cb={green:"#03CD8C",orange:"#F77F00"};function el(...t){return t.filter(Boolean).join(" ")}function $1(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function I1(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function PF(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function rs({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:el("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function gs({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Cb.green}:t==="accent"?{background:Cb.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:el(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function MF({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:el("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function Dc({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-0 z-50 m-auto flex w-[min(980px,calc(100vw-2rem))] flex-col overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i,maxHeight:"90vh"},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex flex-none items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(MF,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"flex-none border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function TF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:el("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function uA(t){return t==="Critical"?"bad":t==="Warning"?"warn":"info"}function RF(t){return{pay_fail_gateway:"Payment gateway failures",policy_breach_hours:"Outside working hours policy breaches",vendor_anomaly_shenzhen:"Shenzhen Store anomaly cluster",rfq_sla_breach:"RFQ SLA breaches",budget_near_cap_sales:"Sales nearing budget cap",invoice_overdue:"Overdue invoices"}[t]||t}function DF(t,s){const a={};for(const l of t){const n=s(l);a[n]=a[n]||[],a[n].push(l)}return a}function OF(){const[t,s]=c.useState([]),a=X=>{const ge=$1("toast");s(Le=>[{id:ge,...X},...Le].slice(0,4)),window.setTimeout(()=>s(Le=>Le.filter(ae=>ae.id!==ge)),3200)},l=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],n=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],[r]=c.useState("Acme Group Ltd"),[i,o]=c.useState(""),[d,u]=c.useState("All"),[x,p]=c.useState("All"),[h,j]=c.useState("All"),[y,f]=c.useState("All"),[I,A]=c.useState(!0),b=c.useMemo(()=>h==="All"||h==="E-Commerce",[h]),[C,S]=c.useState("You"),[z,$]=c.useState(!1),[D,W]=c.useState(!0),[he,V]=c.useState(()=>{const X=Date.now();return[{id:"EVT-1001",ts:X-12*60*1e3,severity:"Critical",kind:"Payment",module:"Finance & Payments",marketplace:"-",title:"Failed payment attempts",body:"2 wallet top-ups failed due to gateway error. Risk of hold if unpaid invoices persist.",assignedTo:null,status:"Open",snoozeUntil:null,rootCauseKey:"pay_fail_gateway",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered to finance@acme.com"},{channel:"WhatsApp",status:"Failed",detail:"User not opted-in"},{channel:"SMS",status:"Sent",detail:"Sent to +256700..."},{channel:"WeChat",status:"Queued",detail:"Awaiting channel token"}],why:{rule:"Collections: payment failure alert",triggeredBy:"Payment gateway returned error code 502",audience:"Org Admin + Accountant",auditId:"AUD-90021"}},{id:"EVT-1002",ts:X-2*60*60*1e3,severity:"Warning",kind:"Policy",module:"Rides & Logistics",marketplace:"-",title:"Policy breach: outside working hours",body:"4 rides requested outside allowed time window. Consider tightening policy or enabling approvals.",assignedTo:"You",status:"Open",snoozeUntil:null,rootCauseKey:"policy_breach_hours",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered to admin@acme.com"},{channel:"WhatsApp",status:"Delivered",detail:"Delivered to WhatsApp group"},{channel:"SMS",status:"Delivered",detail:"Delivered"},{channel:"WeChat",status:"Sent",detail:"Sent"}],why:{rule:"Policy engine: breach alert",triggeredBy:"Requests created outside Mon-Fri 06:00-22:00",audience:"Org Admin + Approver",auditId:"AUD-90042"}},{id:"EVT-1003",ts:X-4*60*60*1e3,severity:"Warning",kind:"Vendor",module:"E-Commerce",marketplace:"MyLiveDealz",title:"Anomaly: Shenzhen Store spend",body:"Vendor spend is 3.1 typical in the last 24h. Review vendor rule or require approvals.",assignedTo:null,status:"Open",snoozeUntil:null,rootCauseKey:"vendor_anomaly_shenzhen",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered"},{channel:"WhatsApp",status:"Delivered",detail:"Delivered"},{channel:"WeChat",status:"Delivered",detail:"Delivered"},{channel:"SMS",status:"Delivered",detail:"Delivered"}],why:{rule:"Anomaly detection: vendor spike",triggeredBy:"Spend spike in MyLiveDealz orders",audience:"Org Admin + Accountant",auditId:"AUD-90110"}},{id:"EVT-1004",ts:X-26*60*60*1e3,severity:"Critical",kind:"Quote",module:"Rides & Logistics",marketplace:"-",title:"RFQ escalation: past SLA",body:"RFQ-390 is escalated and past SLA. High-value asset requires action.",assignedTo:"Approver Desk",status:"Open",snoozeUntil:null,rootCauseKey:"rfq_sla_breach",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered"},{channel:"WhatsApp",status:"Delivered",detail:"Delivered"},{channel:"SMS",status:"Delivered",detail:"Delivered"},{channel:"WeChat",status:"Delivered",detail:"Delivered"}],why:{rule:"Approvals: SLA breach escalation",triggeredBy:"SLA timer reached 0",audience:"Approver + Org Admin",auditId:"AUD-90200"}},{id:"EVT-1005",ts:X-3*24*60*60*1e3,severity:"Info",kind:"Budget",module:"Rides & Logistics",marketplace:"-",title:"Budget alert: Sales at 82%",body:"Sales group has reached 82% of monthly cap. Consider adjust or enforce.",assignedTo:"Finance Desk",status:"Open",snoozeUntil:null,rootCauseKey:"budget_near_cap_sales",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered"},{channel:"WhatsApp",status:"Sent",detail:"Sent"},{channel:"SMS",status:"Delivered",detail:"Delivered"},{channel:"WeChat",status:"Queued",detail:"Queued"}],why:{rule:"Budget monitor: threshold 80%",triggeredBy:"Spend ratio crossed 80%",audience:"Accountant + Manager",auditId:"AUD-90300"}},{id:"EVT-1006",ts:X-6*24*60*60*1e3,severity:"Warning",kind:"Reminder",module:"Finance & Payments",marketplace:"-",title:"Invoice overdue reminder",body:"1 invoice overdue. Dunning schedule will escalate if unpaid.",assignedTo:null,status:"Open",snoozeUntil:null,rootCauseKey:"invoice_overdue",deliveries:[{channel:"Email",status:"Delivered",detail:"Delivered"},{channel:"WhatsApp",status:"Failed",detail:"Opt-out"},{channel:"SMS",status:"Delivered",detail:"Delivered"},{channel:"WeChat",status:"Sent",detail:"Sent"}],why:{rule:"Collections: overdue reminder",triggeredBy:"Invoice unpaid after due date",audience:"Accountant + Org Admin",auditId:"AUD-90410"}}]}),[xe,pe]=c.useState(()=>[{id:"DG-01",enabled:!0,frequency:"Daily",role:"Accountant",includeSev:["Warning","Critical"],includeKinds:["Payment","Reminder","Budget"],channels:["Email","WhatsApp"],timeOfDay:"08:30"},{id:"DG-02",enabled:!0,frequency:"Daily",role:"Approver",includeSev:["Warning","Critical"],includeKinds:["Approval","Quote"],channels:["Email","SMS"],timeOfDay:"09:00"},{id:"DG-03",enabled:!0,frequency:"Weekly",role:"Org Admin",includeSev:["Info","Warning","Critical"],includeKinds:["Payment","Budget","Policy","Vendor","Quote"],channels:["Email"],timeOfDay:"08:00"}]),[be,fe]=c.useState(()=>[{id:"RR-01",enabled:!0,name:"Finance alerts to Accountants",match:{kinds:["Payment","Reminder","Budget"],severities:["Warning","Critical","Info"],modules:["Finance & Payments"],marketplaces:["-"]},routeToRole:"Accountant"},{id:"RR-02",enabled:!0,name:"Approval reminders to Approvers",match:{kinds:["Approval","Quote"],severities:["Warning","Critical"],modules:["Rides & Logistics","E-Commerce"],marketplaces:["-","MyLiveDealz"]},routeToRole:"Approver"}]),[K,re]=c.useState(!1),[q,L]=c.useState(null),[M,k]=c.useState("You"),[P,Y]=c.useState(!1),[F,G]=c.useState(null),[ve,Te]=c.useState(!1),[ye,ie]=c.useState(null),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState(!1),Ce=c.useMemo(()=>{const X=i.trim().toLowerCase();return he.filter(ge=>{if(!I&&ge.kind==="Quote"||d!=="All"&&ge.severity!==d||x!=="All"&&ge.kind!==x||h!=="All"&&ge.module!==h)return!1;if(y!=="All"){if(b){if((ge.marketplace||"-")!==y)return!1}else if(y!=="-")return!1}return!(z&&(ge.assignedTo||"")!==C||X&&!`${ge.id} ${ge.title} ${ge.body} ${ge.kind} ${ge.severity} ${ge.module} ${ge.marketplace||"-"}`.toLowerCase().includes(X)||ge.status==="Snoozed"&&ge.snoozeUntil&&ge.snoozeUntil>Date.now())})},[he,i,d,x,h,y,I,z,C,b]),Ee=c.useMemo(()=>Ce.filter(X=>X.status==="Open").length,[Ce]),Ue=c.useMemo(()=>Ce.filter(X=>X.status==="Open"&&X.severity==="Critical").length,[Ce]),Ye=c.useMemo(()=>{const X=DF(Ce,ae=>ae.rootCauseKey),ge=Object.keys(X),Le=ae=>{const le=m=>m==="Critical"?3:m==="Warning"?2:1,R=Math.max(...ae.map(m=>le(m.severity))),se=Math.max(...ae.map(m=>m.ts));return{maxSev:R,latest:se}};return ge.sort((ae,le)=>{const R=Le(X[ae]),se=Le(X[le]);return se.maxSev!==R.maxSev?se.maxSev-R.maxSev:se.latest-R.latest}),ge.map(ae=>({key:ae,label:RF(ae),items:X[ae]}))},[Ce]),De=c.useMemo(()=>h==="All"||h==="E-Commerce",[h]),Be=(X,ge)=>{const Le=Date.now()+ge*60*1e3;V(ae=>ae.map(le=>le.id===X.id?{...le,status:"Snoozed",snoozeUntil:Le}:le)),a({title:"Snoozed",message:`${X.id} snoozed for ${ge} minutes.`,kind:"info"})},$e=X=>{V(ge=>ge.map(Le=>Le.id===X.id?{...Le,status:"Resolved",snoozeUntil:null}:Le)),a({title:"Resolved",message:`${X.id} resolved.`,kind:"success"})},_=(X,ge)=>{V(Le=>Le.map(ae=>ae.id===X.id?{...ae,assignedTo:ge}:ae)),a({title:"Assigned",message:`${X.id} assigned to ${ge}.`,kind:"success"})},te=X=>{ie(X),Te(!0)},Re=()=>{a({title:"Digest preview",message:"Generating digest preview (demo).",kind:"info"})},Fe=()=>{a({title:"Digest sent",message:"Digest sent to configured channels (demo).",kind:"success"}),Ae(!1)},T=X=>{pe(ge=>ge.map(Le=>Le.id===X?{...Le,enabled:!Le.enabled}:Le))},Z=X=>{fe(ge=>ge.map(Le=>Le.id===X?{...Le,enabled:!Le.enabled}:Le))},B=()=>{const X={id:$1("RR"),enabled:!0,name:"Policy breaches to Approvers",match:{kinds:["Policy"],severities:["Warning","Critical"],modules:["Rides & Logistics"],marketplaces:["-"]},routeToRole:"Approver"};fe(ge=>[X,...ge]),a({title:"Rule added",message:"Routing rule added from template.",kind:"success"})},ne=()=>{const X=["ID","Timestamp","Severity","Kind","Module","Marketplace","Title","Body","AssignedTo","Status"],ge=Ce.map(se=>[se.id,new Date(se.ts).toISOString(),se.severity,se.kind,se.module,se.marketplace||"-",`"${se.title.replace(/"/g,'""')}"`,`"${se.body.replace(/"/g,'""')}"`,se.assignedTo||"",se.status]),Le=[X.join(","),...ge.map(se=>se.join(","))].join(`
`),ae=new Blob([Le],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(ae),R=document.createElement("a");R.setAttribute("href",le),R.setAttribute("download",`notifications_export_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(R),R.click(),document.body.removeChild(R),a({title:"Export ready",message:"Download started.",kind:"success"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(TF,{toasts:t,onDismiss:X=>s(ge=>ge.filter(Le=>Le.id!==X))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Cb.green},children:e.jsx(Ei,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Notifications and Activity Center"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Organization: ",r,"  Unified feed across approvals, billing, policies, budgets, vendors, and quotes."]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(rs,{label:`${Ee} open`,tone:Ee?"warn":"good"}),Ue?e.jsx(rs,{label:`${Ue} critical`,tone:"bad"}):null,e.jsx(rs,{label:D?`Clusters: ${Ye.length}`:`Events: ${Ce.length}`,tone:"info"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",onClick:()=>Ae(!0),children:[e.jsx(Tn,{className:"h-4 w-4"})," Digests"]}),e.jsxs(gs,{variant:"outline",onClick:()=>Ne(!0),children:[e.jsx(F1,{})," Routing rules"]}),e.jsxs(gs,{variant:"outline",onClick:ne,children:[e.jsx(jt,{className:"h-4 w-4"})," Export"]}),e.jsxs(gs,{variant:"primary",onClick:()=>a({title:"Refresh",message:"Feed refreshed (demo).",kind:"success"}),children:[e.jsx(Rn,{className:"h-4 w-4"})," Refresh"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-4",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 py-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:i,onChange:X=>o(X.target.value),placeholder:"Approvals, payments, policies...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Severity"}),e.jsxs("select",{value:d,onChange:X=>u(X.target.value),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-2 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Info",children:"Info"}),e.jsx("option",{value:"Warning",children:"Warning"}),e.jsx("option",{value:"Critical",children:"Critical"})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Module"}),e.jsxs("select",{value:h,onChange:X=>{const ge=X.target.value;j(ge),ge!=="All"&&ge!=="E-Commerce"&&f("All")},className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-2 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{value:"All",children:"All"}),l.map(X=>e.jsx("option",{value:X,children:X},X))]})]}),e.jsxs("div",{className:el("rounded-2xl border px-3 py-2",De?"border-slate-200 bg-white":"border-slate-200 bg-slate-50 opacity-70"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Marketplace / Quotes"}),e.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[e.jsxs("select",{value:y,disabled:!De,onChange:X=>f(X.target.value),className:el("w-full rounded-xl border px-2 py-2 text-sm font-semibold outline-none",De?"border-slate-200 bg-white text-slate-900":"border-slate-200 bg-slate-50 text-slate-500"),children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"-",children:"(No marketplace)"}),n.map(X=>e.jsx("option",{value:X,children:X},X))]}),e.jsxs("label",{className:el("flex items-center justify-between gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold",!I&&"opacity-80"),children:[e.jsx("span",{className:"text-slate-700",children:"Quotes"}),e.jsx("input",{type:"checkbox",checked:I,onChange:X=>A(X.target.checked),className:"h-4 w-4 rounded border-slate-300"})]})]}),De?null:e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Marketplace applies to E-Commerce only."})]})]}),e.jsxs("div",{className:"mt-3 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:X=>W(X.target.checked),className:"h-4 w-4 rounded border-slate-300"}),"Cluster mode",e.jsx(rs,{label:"Premium",tone:"info"})]}),e.jsxs("label",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:X=>$(X.target.checked),className:"h-4 w-4 rounded border-slate-300"}),"Assigned to me"]}),e.jsxs("div",{className:el("rounded-2xl border border-slate-200 bg-white px-3 py-2",!z&&"opacity-70"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Assignee"}),e.jsxs("select",{value:C,disabled:!z,onChange:X=>S(X.target.value),className:el("mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-900 outline-none",!z&&"bg-slate-50 text-slate-500"),children:[e.jsx("option",{children:"You"}),e.jsx("option",{children:"Finance Desk"}),e.jsx("option",{children:"Approver Desk"}),e.jsx("option",{children:"Org Admin"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",onClick:()=>{o(""),u("All"),p("All"),j("All"),f("All"),A(!0),a({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(gs,{variant:"outline",onClick:()=>a({title:"Bulk",message:"Bulk actions (demo).",kind:"info"}),children:[e.jsx(lt,{className:"h-4 w-4"})," Bulk actions"]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[D?e.jsxs("div",{className:"space-y-4",children:[Ye.map(X=>e.jsx($F,{clusterKey:X.key,label:X.label,items:X.items,onOpen:ge=>{G(ge),Y(!0)},onAssign:ge=>{L(ge),k(ge.assignedTo||"You"),re(!0)},onResolve:ge=>$e(ge),onSnooze:(ge,Le)=>Be(ge,Le),onRule:ge=>te(ge)},X.key)),Ye.length?null:e.jsx(L1,{title:"No events",subtitle:"No notifications match your filters."})]}):e.jsxs("div",{className:"space-y-3",children:[Ce.map(X=>e.jsx(mA,{e:X,onWhy:()=>{G(X),Y(!0)},onAssign:()=>{L(X),k(X.assignedTo||"You"),re(!0)},onResolve:()=>$e(X),onSnooze:ge=>Be(X,ge),onRule:()=>te(X)},X.id)),Ce.length?null:e.jsx(L1,{title:"No events",subtitle:"No notifications match your filters."})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium controls"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Digests and routing rules improve signal-to-noise."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",onClick:()=>Ae(!0),children:[e.jsx(Tn,{className:"h-4 w-4"})," Configure digests"]}),e.jsxs(gs,{variant:"outline",onClick:()=>Ne(!0),children:[e.jsx(F1,{})," Configure routing"]}),e.jsxs(gs,{variant:"primary",onClick:()=>a({title:"Done",message:"Premium controls saved (demo).",kind:"success"}),children:[e.jsx(He,{className:"h-4 w-4"})," Save"]})]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold",children:"Digests"}),e.jsx("div",{className:"mt-1 text-slate-600",children:"Daily/weekly summaries by role. Reduce notification fatigue."})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold",children:"Routing rules"}),e.jsx("div",{className:"mt-1 text-slate-600",children:"Send finance alerts to Accountants, approval reminders to Approvers."})]})]})]}),e.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"B Notifications v2: unified feed with filters, actions, delivery logs, audit-linked explanations, smart digests, routing rules, and logic-based clustering."})]})]})}),e.jsx(Dc,{open:K,title:"Assign event",subtitle:"Assign an event to a person or desk (audit logged in production).",onClose:()=>re(!1),actions:[{label:"Assign",onClick:()=>{q&&(_(q,M),re(!1))}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(gs,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),e.jsxs(gs,{variant:"primary",onClick:()=>{q&&(_(q,M),re(!1))},children:[e.jsx(Vs,{className:"h-4 w-4"})," Assign"]})]}),children:q?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold",children:"Event"}),e.jsxs("div",{className:"mt-1 text-slate-600",children:[q.id,"  ",q.title]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Assign to"}),e.jsxs("select",{value:M,onChange:X=>k(X.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{children:"You"}),e.jsx("option",{children:"Finance Desk"}),e.jsx("option",{children:"Approver Desk"}),e.jsx("option",{children:"Org Admin"}),e.jsx("option",{children:"Support Desk"})]})]})]}):null}),e.jsx(Dc,{open:P,title:"Why did I get this?",subtitle:"Audit-linked explanation of rules and triggers.",onClose:()=>Y(!1),actions:[{label:"Close",onClick:()=>Y(!1)}],footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(gs,{variant:"outline",onClick:()=>Y(!1),children:"Close"})}),children:F?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Event"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[F.id,"  ",F.kind,"  ",F.severity]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:F.title}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:F.body})]}),e.jsx(rs,{label:F.status,tone:F.status==="Resolved"?"good":F.status==="Snoozed"?"warn":"info"})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Explanation"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(fx,{label:"Rule",value:F.why.rule}),e.jsx(fx,{label:"Triggered by",value:F.why.triggeredBy}),e.jsx(fx,{label:"Audience",value:F.why.audience}),e.jsx(fx,{label:"Audit ID",value:F.why.auditId})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-white p-3 text-xs text-slate-600",children:"Premium: This links to the immutable audit log record and policy version."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Delivery logs"}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:F.deliveries.map(X=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:X.channel}),e.jsx(rs,{label:X.status,tone:X.status==="Failed"?"bad":X.status==="Queued"?"warn":"good"})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:X.detail})]},X.channel))})]})]}):null}),e.jsx(Dc,{open:ve,title:"Create rule from this event",subtitle:"Generate a policy/routing rule draft based on the event.",onClose:()=>Te(!1),actions:[{label:"Create",onClick:()=>{Te(!1),a({title:"Rule created",message:"Rule draft created (demo).",kind:"success"})}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(gs,{variant:"outline",onClick:()=>Te(!1),children:"Cancel"}),e.jsxs(gs,{variant:"primary",onClick:()=>{Te(!1),a({title:"Rule created",message:"Rule draft created (demo).",kind:"success"})},children:[e.jsx(ft,{className:"h-4 w-4"})," Create"]})]}),children:ye?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold",children:"Event"}),e.jsxs("div",{className:"mt-1 text-slate-600",children:[ye.id,"  ",ye.title]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Suggested rule"}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"This is a safe draft. Review before saving."}),e.jsx("pre",{className:"mt-3 overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800",children:JSON.stringify({if:{kind:ye.kind,severity:ye.severity,module:ye.module,marketplace:ye.marketplace||"-",rootCause:ye.rootCauseKey},then:{action:ye.kind==="Vendor"?"Require approvals for vendor":"Route to role",routeTo:ye.kind==="Payment"?"Accountant":"Approver",notify:["Email","WhatsApp"]},notes:"Generated from event. Audit logged."},null,2)})]})]}):null}),e.jsx(Dc,{open:Oe,title:"Smart digests",subtitle:"Daily/weekly summaries by role and channel.",onClose:()=>Ae(!1),actions:[{label:"Send now",onClick:Fe}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gs,{variant:"outline",onClick:()=>Ae(!1),children:"Close"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",onClick:Re,children:[e.jsx(jt,{className:"h-4 w-4"})," Preview"]}),e.jsxs(gs,{variant:"primary",onClick:Fe,children:[e.jsx(Tn,{className:"h-4 w-4"})," Send now"]})]})]}),children:e.jsx("div",{className:"space-y-3",children:xe.map(X=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[X.frequency," digest"]}),e.jsx(rs,{label:`Role: ${X.role}`,tone:"info"}),e.jsx(rs,{label:`Time: ${X.timeOfDay}`,tone:"neutral"}),e.jsx(rs,{label:X.enabled?"Enabled":"Off",tone:X.enabled?"good":"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Include: ",X.includeSev.join(", "),"  ",X.includeKinds.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Channels: ",X.channels.join(", ")]})]}),e.jsx("button",{type:"button",className:el("relative h-7 w-12 rounded-full transition",X.enabled?"border-emerald-300 bg-emerald-200":"border-amber-300 bg-white"),onClick:()=>T(X.id),"aria-label":"Toggle digest",style:{border:X.enabled?"none":"2px solid #F77F00"},children:e.jsx("span",{className:el("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",X.enabled?"left-[22px]":"left-1 ring-1 ring-slate-200")})})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: digests are generated from clustering and routing rules to reduce noise."})]},X.id))})}),e.jsx(Dc,{open:ee,title:"Routing rules",subtitle:"Send finance alerts to Accountants, approvals to Approvers, etc.",onClose:()=>Ne(!1),actions:[{label:"Save",onClick:()=>{a({title:"Saved",message:"Routing rules saved (demo).",kind:"success"}),Ne(!1)}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gs,{variant:"outline",onClick:()=>Ne(!1),children:"Close"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",onClick:B,children:[e.jsx(ft,{className:"h-4 w-4"})," Add template"]}),e.jsxs(gs,{variant:"primary",onClick:()=>{a({title:"Saved",message:"Routing rules saved (demo).",kind:"success"}),Ne(!1)},children:[e.jsx(He,{className:"h-4 w-4"})," Save"]})]})]}),children:e.jsx("div",{className:"space-y-3",children:be.map(X=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:X.name}),e.jsx(rs,{label:`Route to ${X.routeToRole}`,tone:"info"}),e.jsx(rs,{label:X.enabled?"Enabled":"Off",tone:X.enabled?"good":"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Kinds: ",X.match.kinds.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Severities: ",X.match.severities.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Modules: ",X.match.modules.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Marketplaces: ",X.match.marketplaces.join(", ")]})]}),e.jsx("button",{type:"button",className:el("relative h-7 w-12 rounded-full border transition",X.enabled?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>Z(X.id),"aria-label":"Toggle routing rule",style:X.enabled?void 0:{border:"2px solid #F77F00"},children:e.jsx("span",{className:el("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",X.enabled?"left-[22px]":"left-1 ring-1 ring-slate-200")})})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:'Premium: routing decisions are logged and visible in "Why did I get this?".'})]},X.id))})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"B Notifications & Activity Center v2: unified feed, severity/module/marketplace filters, actions (snooze/assign/resolve/create rule), channel delivery logs, audit explanations, smart digests, routing rules, and clustering."})})]})}function L1({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(Ei,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function mA({e:t,onWhy:s,onAssign:a,onResolve:l,onSnooze:n,onRule:r}){const i=uA(t.severity),o=t.status==="Snoozed";return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(rs,{label:t.severity,tone:i}),e.jsx(rs,{label:t.kind,tone:"neutral"}),e.jsx(rs,{label:t.module,tone:"neutral"}),t.marketplace&&t.marketplace!=="-"?e.jsx(rs,{label:String(t.marketplace),tone:"info"}):e.jsx(rs,{label:"No marketplace",tone:"neutral"}),e.jsx(rs,{label:t.status,tone:t.status==="Resolved"?"good":t.status==="Snoozed"?"warn":"info"}),t.assignedTo?e.jsx(rs,{label:`Assigned: ${t.assignedTo}`,tone:"info"}):e.jsx(rs,{label:"Unassigned",tone:"warn"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900 truncate",children:t.title}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:t.body}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[PF(t.ts),"  ",I1(t.ts),"  ",t.id,o&&t.snoozeUntil?e.jsxs("span",{className:"ml-2",children:[" Snoozed until ",I1(t.snoozeUntil)]}):null]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gs,{variant:"outline",className:"text-xs",onClick:s,children:[e.jsx(cp,{className:"h-4 w-4"})," Why?"]}),e.jsxs(gs,{variant:"outline",className:"text-xs",onClick:a,children:[e.jsx(Vs,{className:"h-4 w-4"})," Assign"]}),e.jsx("div",{className:"relative",children:e.jsx(FF,{onSnooze:n})}),e.jsxs(gs,{variant:"outline",className:"text-xs",onClick:r,children:[e.jsx(lt,{className:"h-4 w-4"})," Create rule"]}),e.jsxs(gs,{variant:"primary",className:"text-xs",onClick:l,children:[e.jsx(He,{className:"h-4 w-4"})," Resolve"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(IF,{deliveries:t.deliveries}),e.jsx(LF,{why:t.why})]})]})}function $F({clusterKey:t,label:s,items:a,onOpen:l,onAssign:n,onResolve:r,onSnooze:i,onRule:o}){const d=a.reduce((j,y)=>{const f=I=>I==="Critical"?3:I==="Warning"?2:1;return f(y.severity)>f(j)?y.severity:j},"Info"),u=uA(d),[x,p]=c.useState(!0),h=a.filter(j=>j.status!=="Resolved");return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm",children:[e.jsxs("button",{type:"button",className:"flex w-full items-start justify-between gap-3 px-4 py-4 text-left",onClick:()=>p(j=>!j),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(rs,{label:s,tone:u}),e.jsx(rs,{label:`${a.length} events`,tone:"neutral"}),e.jsx(rs,{label:`${h.length} open`,tone:h.length?"warn":"good"})]}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:["Root cause: ",t]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Logic-based clustering groups similar alerts into one stack."})]}),e.jsx(Dl,{className:el("h-5 w-5 text-slate-500 transition",x?"rotate-180":"rotate-0")})]}),e.jsx(qe,{initial:!1,children:x?e.jsx(ke.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.18},className:"border-t border-slate-200",children:e.jsx("div",{className:"space-y-3 p-4",children:a.map(j=>e.jsx(mA,{e:j,onWhy:()=>l(j),onAssign:()=>n(j),onResolve:()=>r(j),onSnooze:y=>i(j,y),onRule:()=>o(j)},j.id))})}):null})]})}function IF({deliveries:t}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Delivery status"}),e.jsx(rs,{label:`${t.length} channels`,tone:"neutral"})]}),e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2",children:t.map(s=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:s.channel}),e.jsx(rs,{label:s.status,tone:s.status==="Failed"?"bad":s.status==="Queued"?"warn":"good"})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:s.detail})]},s.channel))})]})}function LF({why:t}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Why did I get this?"}),e.jsx(rs,{label:t.auditId,tone:"info"})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Lf,{label:"Rule",value:t.rule}),e.jsx(Lf,{label:"Triggered by",value:t.triggeredBy}),e.jsx(Lf,{label:"Audience",value:t.audience})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: audit ID links to immutable audit log."})]})}function Lf({label:t,value:s}){return e.jsxs("div",{className:"flex items-start justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("div",{className:"text-xs font-semibold text-slate-900 text-right",children:s})]})}function fx({label:t,value:s}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:s})]})}function FF({onSnooze:t}){const[s,a]=c.useState(!1);return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center justify-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>a(l=>!l),children:[e.jsx(_r,{className:"h-4 w-4"})," Snooze",e.jsx(Dl,{className:el("h-4 w-4 transition",s?"rotate-180":"rotate-0")})]}),e.jsx(qe,{children:s?e.jsx(ke.div,{initial:{opacity:0,y:6,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:6,scale:.98},transition:{duration:.16},className:"absolute right-0 z-10 mt-2 w-48 overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-lg",children:[30,60,240,1440].map(l=>e.jsxs("button",{type:"button",className:"flex w-full items-center justify-between px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",onClick:()=>{t(l),a(!1)},children:[e.jsx("span",{children:l===1440?"1 day":`${l} min`}),e.jsx(pa,{className:"h-4 w-4 text-slate-500"})]},l))}):null})]})}function F1(){return e.jsx("span",{className:"grid h-4 w-4 place-items-center",children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M16 3h5v5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 20l6.5-6.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 10l7-7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M16 21h5v-5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M4 4l6.5 6.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M14 14l7 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}const oo={green:"#03CD8C",orange:"#F77F00"};function Sn(...t){return t.filter(Boolean).join(" ")}function _1(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Qr(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function V1(t,s,a){return Math.max(s,Math.min(a,t))}function B1(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function wa({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Sn("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Qa({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:oo.green}:t==="accent"?{background:oo.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Sn(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function _F({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Sn("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function VF({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:Sn("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function Ff({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="900px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(VF,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function BF({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"&&n();return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.18},className:Sn("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[14vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[560px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function UF(){const t=ot(),[s,a]=c.useState([]),l=ae=>{const le=_1("toast");a(R=>[{id:le,...ae},...R].slice(0,4)),window.setTimeout(()=>a(R=>R.filter(se=>se.id!==le)),3200)},n=["Org Admin","Accountant","Approver","Manager","Travel Coordinator"],r=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],i=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],o=["Users","Groups","Cost centers","Invoices","Trips","Purchases","Vendors","RFQs","Approvals"],[d,u]=c.useState(""),[x,p]=c.useState(()=>new Set(o)),[h,j]=c.useState("Org Admin"),[y,f]=c.useState(!0),[I,A]=c.useState(!1),[b,C]=c.useState(""),[S,z]=c.useState(0),$=c.useRef(null),D=c.useRef(null),[W,he]=c.useState(null),[V,xe]=c.useState(!1),[pe,be]=c.useState(""),[fe,K]=c.useState(null),[re,q]=c.useState(!1),[L,M]=c.useState(""),[k,P]=c.useState(!1),[Y,F]=c.useState({title:"Company vehicle purchase",module:"Rides & Logistics",marketplace:"All",estValue:285e6,neededBy:"2026-02-01",description:"Need a company vehicle. Include warranty and delivery timeline.",attachments:!0}),[G,ve]=c.useState({group:"Operations",period:"Monthly",amount:5e6,hardCap:!0}),[Te,ye]=c.useState({mode:"Soft pause",scope:"CorporatePay only",notifyUsers:!0}),[ie,Oe]=c.useState({month:"2026-01",format:"CSV",breakdown:"Group + Module + Marketplace"}),Ae=c.useMemo(()=>{const ae=Date.now();return{users:[{id:"U-1001",name:"Mary N.",email:"mary@acme.com",group:"Operations",role:"Manager"},{id:"U-1002",name:"Finance Desk",email:"finance@acme.com",group:"Finance",role:"Accountant"},{id:"U-1003",name:"John S.",email:"john@acme.com",group:"Sales",role:"User"}],groups:[{id:"G-OPS",name:"Operations",budget:15e6,usedPct:61},{id:"G-SALES",name:"Sales",budget:12e6,usedPct:82},{id:"G-FIN",name:"Finance",budget:6e6,usedPct:68}],costCenters:[{id:"CC-OPS-001",code:"OPS-001",name:"Operations core",group:"Operations"},{id:"CC-SALES-TR",code:"SALES-TRAVEL",name:"Travel",group:"Sales"},{id:"CC-FIN-OPS",code:"FIN-OPS",name:"Finance operations",group:"Finance"}],invoices:[{id:"INV-2026-0017",status:"Overdue",amount:24e5,group:"Admin",due:ae-2*24*60*60*1e3},{id:"INV-2026-0018",status:"Sent",amount:68e5,group:"Operations",due:ae+5*24*60*60*1e3}],trips:[{id:"TR-0442",route:"Office  Airport",rider:"John S.",amount:82e3,time:ae-45*60*1e3},{id:"TR-0443",route:"Office  Client HQ",rider:"Mary N.",amount:41500,time:ae-3*60*60*1e3}],purchases:[{id:"PO-9001",marketplace:"MyLiveDealz",vendor:"Shenzhen Store",amount:24e5,group:"Admin"},{id:"PO-9002",marketplace:"EVmart",vendor:"Kampala Office Mart",amount:12e5,group:"Operations"}],vendors:[{id:"VN-01",name:"Shenzhen Store",status:"Risk",marketplace:"MyLiveDealz"},{id:"VN-02",name:"Kampala Office Mart",status:"Preferred",marketplace:"EVmart"},{id:"VN-03",name:"City Courier",status:"OK",marketplace:"ServiceMart"}],rfqs:[{id:"RFQ-390",title:"Company vehicle",estValue:285e6,status:"Escalated",module:"Rides & Logistics"},{id:"RFQ-402",title:"Bulk EV charging credits",estValue:8e6,status:"Pending",module:"EVs & Charging"}],approvals:[{id:"AP-1821",type:"Purchase",amount:654e4,status:"Pending",module:"E-Commerce"},{id:"AP-1902",type:"Budget override",amount:18e6,status:"Pending",module:"Finance & Payments"}]}},[]),ee=c.useMemo(()=>{const ae=[];return Ae.users.forEach(le=>ae.push({scope:"Users",id:le.id,title:le.name,subtitle:le.email,meta:`Group: ${le.group}  Role: ${le.role}`,tags:[le.group,le.role],raw:le})),Ae.groups.forEach(le=>ae.push({scope:"Groups",id:le.id,title:le.name,subtitle:`Budget: ${Qr(le.budget)}`,meta:`Used: ${le.usedPct}%`,tags:["Budget"],raw:le})),Ae.costCenters.forEach(le=>ae.push({scope:"Cost centers",id:le.id,title:`${le.code} - ${le.name}`,subtitle:`Group: ${le.group}`,meta:"Used in exports and chargeback",tags:[le.group,"Cost center"],raw:le})),Ae.invoices.forEach(le=>ae.push({scope:"Invoices",id:le.id,title:le.id,subtitle:`Status: ${le.status}`,meta:`Amount: ${Qr(le.amount)}  Due: ${B1(le.due)}`,tags:[le.status,le.group],raw:le})),Ae.trips.forEach(le=>ae.push({scope:"Trips",id:le.id,title:le.route,subtitle:`Rider: ${le.rider}`,meta:`Amount: ${Qr(le.amount)}  Time: ${B1(le.time)}`,tags:["Ride"],raw:le})),Ae.purchases.forEach(le=>ae.push({scope:"Purchases",id:le.id,title:le.id,subtitle:`Marketplace: ${le.marketplace}`,meta:`Vendor: ${le.vendor}  Amount: ${Qr(le.amount)}  Group: ${le.group}`,tags:[le.marketplace,le.vendor,le.group],raw:le})),Ae.vendors.forEach(le=>ae.push({scope:"Vendors",id:le.id,title:le.name,subtitle:`Marketplace: ${le.marketplace}`,meta:`Status: ${le.status}`,tags:[le.status,le.marketplace],raw:le})),Ae.rfqs.forEach(le=>ae.push({scope:"RFQs",id:le.id,title:le.title,subtitle:`Status: ${le.status}`,meta:`Value: ${Qr(le.estValue)}  Module: ${le.module}`,tags:[le.status,le.module],raw:le})),Ae.approvals.forEach(le=>ae.push({scope:"Approvals",id:le.id,title:le.id,subtitle:`Type: ${le.type}`,meta:`Amount: ${Qr(le.amount)}  Module: ${le.module}  Status: ${le.status}`,tags:[le.status,le.module],raw:le})),ae},[Ae]),Ne=c.useMemo(()=>{const ae=d.trim().toLowerCase(),le=Array.from(x),R=m=>le.includes(m.scope)?ae?`${m.scope} ${m.id} ${m.title} ${m.subtitle} ${m.meta} ${(m.tags||[]).join(" ")}`.toLowerCase().includes(ae):!0:!1,se={Users:[],Groups:[],"Cost centers":[],Invoices:[],Trips:[],Purchases:[],Vendors:[],RFQs:[],Approvals:[]};return ee.filter(R).forEach(m=>se[m.scope].push(m)),Object.keys(se).forEach(m=>{se[m]=se[m].slice(0,8)}),se},[ee,d,x]),Ce=c.useMemo(()=>Object.values(Ne).reduce((ae,le)=>ae+le.length,0),[Ne]),[Ee,Ue]=c.useState(()=>[{id:"SS-001",role:"Accountant",name:"Overdue invoices",query:"overdue",scopes:["Invoices","Payments"].filter(Boolean)},{id:"SS-002",role:"Approver",name:"Pending approvals",query:"pending",scopes:["Approvals","RFQs"]},{id:"SS-003",role:"Org Admin",name:"Vendor risk",query:"risk",scopes:["Vendors","Purchases"]}]);c.useEffect(()=>{Ue(ae=>ae.map(le=>({...le,scopes:le.scopes.filter(R=>o.includes(R))})))},[]);const Ye=c.useMemo(()=>Ee.filter(ae=>ae.role===h),[Ee,h]),De=()=>{const ae=d.trim()?`Search: ${d.trim()}`:"My search";be(ae),xe(!0)},Be=()=>{const ae=pe.trim();if(!ae){l({title:"Missing name",message:"Enter a name for the saved search.",kind:"warn"});return}const le={id:_1("SS"),role:h,name:ae,query:d,scopes:Array.from(x)};Ue(R=>[le,...R]),xe(!1),l({title:"Saved",message:`Saved search for ${h}.`,kind:"success"})},$e=ae=>{u(ae.query),p(new Set(ae.scopes)),l({title:"Applied",message:`Applied saved search: ${ae.name}`,kind:"success"})},_=ae=>{Ue(le=>le.filter(R=>R.id!==ae)),l({title:"Deleted",message:"Saved search removed.",kind:"info"})},te=ae=>{K(ae),M(""),P(!1),q(!0)},Re=c.useMemo(()=>L.trim().length>=8&&k,[L,k]),Fe=()=>{if(fe){if(!Re){l({title:"Reason required",message:"Add a clear reason and confirm acknowledgement.",kind:"warn"});return}fe==="rfq"&&l({title:"RFQ created",message:`${Y.title}  ${Qr(Y.estValue)}`,kind:"success"}),fe==="budget"&&l({title:"Budget issued",message:`${G.group}: ${Qr(G.amount)} (${G.period})`,kind:"success"}),fe==="freeze"&&l({title:"CorporatePay frozen",message:`${Te.mode}  Notifications: ${Te.notifyUsers?"On":"Off"}`,kind:"warn"}),fe==="export"&&l({title:"Report exported",message:`${ie.month}  ${ie.format}`,kind:"success"}),q(!1)}},T=async()=>{const ae={action:fe,reason:L,actorRole:h,createdAt:new Date().toISOString(),draft:fe==="rfq"?Y:fe==="budget"?G:fe==="freeze"?Te:ie};try{await navigator.clipboard.writeText(JSON.stringify(ae,null,2)),l({title:"Copied",message:"Audit preview copied.",kind:"success"})}catch{l({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},Z=c.useMemo(()=>[{id:"cmd_rfq",label:"Create RFQ",description:"Request a quote for high-value assets",shortcut:"A R",group:"Quick actions",run:()=>te("rfq")},{id:"cmd_budget",label:"Issue budget",description:"Allocate budget to a group",shortcut:"A B",group:"Quick actions",run:()=>te("budget")},{id:"cmd_freeze",label:"Freeze CorporatePay",description:"Pause CorporatePay at checkout",shortcut:"A F",group:"Quick actions",run:()=>te("freeze")},{id:"cmd_export",label:"Export month report",description:"Export spend and approvals report",shortcut:"A E",group:"Quick actions",run:()=>te("export")},{id:"nav_dashboard",label:"Go to Corporate Dashboard",description:"Open the dashboard",shortcut:"G D",group:"Navigate",run:()=>t("/console/dashboard")},{id:"nav_approvals",label:"Go to Approvals Inbox",description:"Open approvals queue",shortcut:"G A",group:"Navigate",run:()=>t("/console/approvals_inbox")},{id:"tool_save",label:"Save this search",description:"Save current query and scopes",shortcut:"S",group:"Tools",run:()=>De()}],[h,fe,L,Y,G,Te,ie,d,x]),B=c.useMemo(()=>{const ae=b.trim().toLowerCase(),le=ae?Z.filter(se=>`${se.label} ${se.description} ${se.group} ${se.shortcut}`.toLowerCase().includes(ae)):Z,R=se=>se==="Quick actions"?0:se==="Navigate"?1:2;return[...le].sort((se,m)=>{const w=R(se.group),oe=R(m.group);return w!==oe?w-oe:se.label.localeCompare(m.label)})},[Z,b]);c.useEffect(()=>{const ae=le=>{var m;if((navigator.platform.toLowerCase().includes("mac")?le.metaKey:le.ctrlKey)&&le.key.toLowerCase()==="k"&&(le.preventDefault(),A(!0),C(""),z(0),window.setTimeout(()=>{var w;return(w=$.current)==null?void 0:w.focus()},50)),!I&&le.key==="/"&&(le.preventDefault(),(m=D.current)==null||m.focus()),I&&(le.key==="ArrowDown"&&(le.preventDefault(),z(w=>V1(w+1,0,Math.max(0,B.length-1)))),le.key==="ArrowUp"&&(le.preventDefault(),z(w=>V1(w-1,0,Math.max(0,B.length-1)))),le.key==="Enter")){le.preventDefault();const w=B[S];w&&(A(!1),w.run())}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[I,B,S]);const ne=ae=>{p(le=>{const R=new Set(le);return R.has(ae)?R.delete(ae):R.add(ae),R})},X=()=>{p(new Set(o)),l({title:"Scopes reset",message:"Searching across all entities.",kind:"info"})},ge=c.useMemo(()=>o.filter(le=>Ne[le].length>0).map(le=>({scope:le,items:Ne[le]})),[Ne]),Le=ae=>{switch(ae){case"Users":return e.jsx(Vs,{className:"h-4 w-4"});case"Groups":return e.jsx(jl,{className:"h-4 w-4"});case"Cost centers":return e.jsx(Fy,{className:"h-4 w-4"});case"Invoices":return e.jsx(jt,{className:"h-4 w-4"});case"Trips":return e.jsx(Po,{className:"h-4 w-4"});case"Purchases":return e.jsx(Vy,{className:"h-4 w-4"});case"Vendors":return e.jsx(C0,{className:"h-4 w-4"});case"RFQs":return e.jsx(ir,{className:"h-4 w-4"});case"Approvals":return e.jsx(et,{className:"h-4 w-4"});default:return e.jsx(js,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(_F,{toasts:s,onDismiss:ae=>a(le=>le.filter(R=>R.id!==ae))}),e.jsx(Ff,{open:I,title:"Command Center",subtitle:"Type to search commands. Use arrow keys and Enter.",onClose:()=>A(!1),footer:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Tip: use Ctrl+K (or Cmd+K) to open. Use / to focus search."}),e.jsx(Qa,{variant:"outline",onClick:()=>A(!1),children:"Close"})]}),maxW:"760px",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 shadow-sm focus-within:ring-4 focus-within:ring-emerald-100",children:[e.jsx(lx,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{ref:$,value:b,onChange:ae=>{C(ae.target.value),z(0)},placeholder:"Search commands or pages...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsx("div",{className:"mt-4 overflow-hidden rounded-2xl border border-slate-200 bg-white",children:e.jsx("div",{className:"max-h-[420px] overflow-auto",children:B.length?e.jsx("div",{className:"divide-y divide-slate-100",children:B.map((ae,le)=>e.jsxs("button",{type:"button",onClick:()=>{A(!1),ae.run()},className:Sn("flex w-full items-start justify-between gap-3 px-4 py-3 text-left",le===S?"bg-emerald-50":"hover:bg-slate-50"),children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ae.label}),e.jsx(wa,{label:ae.group,tone:ae.group==="Quick actions"?"info":"neutral"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:ae.description})]}),e.jsx("div",{className:"shrink-0 rounded-xl border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-700",children:ae.shortcut})]},ae.id))}):e.jsx("div",{className:"p-6 text-sm text-slate-600",children:"No commands found."})})})]})}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:oo.green},children:e.jsx(lx,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Global Search and Command Center"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Search users, invoices, vendors, RFQs, approvals and more. Run audited admin actions."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(wa,{label:`Role: ${h}`,tone:"info"}),e.jsx(wa,{label:`Hits: ${Ce}`,tone:Ce?"good":"neutral"}),e.jsx(wa,{label:y?"Operator mode: On":"Operator mode: Off",tone:y?"warn":"neutral"}),e.jsx(wa,{label:"Ctrl+K",tone:"neutral"}),e.jsx(wa,{label:"/",tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Role"}),e.jsx("select",{value:h,onChange:ae=>j(ae.target.value),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-2 py-1 text-xs font-semibold text-slate-900 outline-none",children:n.map(ae=>e.jsx("option",{value:ae,children:ae},ae))})]}),e.jsxs("button",{type:"button",className:Sn("rounded-2xl border px-3 py-2 text-sm font-semibold transition-colors",y?"border-[#064e3b] bg-[#064e3b] text-emerald-100 shadow-sm":"border-slate-200 bg-slate-100 text-slate-500 hover:bg-slate-200"),onClick:()=>{f(ae=>!ae),l({title:"Operator mode",message:y?"Disabled":"Enabled",kind:"info"})},children:[e.jsx(lt,{className:"h-4 w-4"})," ",y?"Disable":"Enable"," Operator mode"]}),e.jsxs(Qa,{variant:"outline",onClick:()=>{A(!0),C(""),z(0),window.setTimeout(()=>{var ae;return(ae=$.current)==null?void 0:ae.focus()},50)},children:[e.jsx(lx,{className:"h-4 w-4"})," Open commands"]}),e.jsxs(Qa,{variant:"primary",onClick:De,children:[e.jsx(Af,{className:"h-4 w-4"})," Save search"]})]})]})}),e.jsx("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Saved searches"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Premium: saved searches per role."})]}),e.jsx(wa,{label:`${Ye.length}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-3 space-y-2",children:Ye.length?Ye.map(ae=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("button",{type:"button",className:"min-w-0 text-left",onClick:()=>$e(ae),children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:ae.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Query:"," ",ae.query||"(none)"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[ae.scopes.slice(0,4).map(le=>e.jsx(wa,{label:le,tone:"neutral"},le)),ae.scopes.length>4?e.jsx(wa,{label:`+${ae.scopes.length-4}`,tone:"neutral"}):null]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(Qa,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>$e(ae),children:"Apply"}),e.jsx(Qa,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>_(ae.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]})},ae.id)):e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-6 text-center",children:[e.jsx("div",{className:"mx-auto grid h-10 w-10 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(Af,{className:"h-5 w-5"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"No saved searches"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Save your first search for this role."})]})})]})}),e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Search"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Users, groups, cost centers, invoices, trips, purchases, vendors, RFQs, approvals."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Qa,{variant:"outline",onClick:X,children:[e.jsx(cr,{className:"h-4 w-4"})," ","Scopes: All"]}),e.jsxs(Qa,{variant:"outline",onClick:()=>{u(""),l({title:"Cleared",message:"Search cleared.",kind:"info"})},children:[e.jsx(_e,{className:"h-4 w-4"})," Clear"]}),e.jsxs(Qa,{variant:"primary",onClick:()=>{A(!0),C(""),z(0),window.setTimeout(()=>{var ae;return(ae=$.current)==null?void 0:ae.focus()},50)},children:[e.jsx(lx,{className:"h-4 w-4"})," ","Commands"]})]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 shadow-sm focus-within:ring-4 focus-within:ring-emerald-100",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{ref:D,value:d,onChange:ae=>u(ae.target.value),placeholder:"Search across the whole corporate account...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"}),e.jsx("span",{className:"rounded-xl border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-semibold text-slate-700",children:"/"})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:o.map(ae=>{const le=x.has(ae);return e.jsxs("button",{type:"button",onClick:()=>ne(ae),className:Sn("flex items-center gap-2 rounded-full px-3 py-2 text-xs font-semibold ring-1 transition",le?"bg-emerald-600 text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:le?{background:oo.green}:void 0,children:[e.jsx("span",{className:Sn("text-white",!le&&"text-slate-600"),children:Le(ae)}),ae]},ae)})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: use saved searches per role for common workflows. Use command center for actions."})]}),e.jsx("div",{className:"space-y-4",children:ge.length?ge.map(ae=>e.jsx(qF,{scope:ae.scope,items:ae.items,onOpen:le=>he(le)},ae.scope)):e.jsx(zF,{title:"No results",subtitle:"Try a different query or enable more scopes."})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium: audit-friendly actions"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Every destructive action requires a reason and produces an audit preview."})]}),e.jsx(wa,{label:"Always on",tone:"good"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(_f,{title:"Reason",value:"Why are you performing this action?"}),e.jsx(_f,{title:"Scope",value:"Which org, group, or module is affected?"}),e.jsx(_f,{title:"Audit",value:"Audit ID is created and visible to Admins."})]})]}),e.jsx("div",{className:"text-xs text-slate-500",children:"C Global Search v2: unified search across all entities, premium saved searches per role, operator shortcuts, and audited quick actions."})]})]})})]})}),e.jsx(BF,{open:!!W,title:W?`${W.scope}: ${W.title}`:"",subtitle:W?`${W.id}  ${W.subtitle}`:"",onClose:()=>he(null),footer:W?e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Tags:"," ",(W.tags||[]).slice(0,4).join(", ")||"-"]}),e.jsxs(Qa,{variant:"primary",onClick:()=>{if(W)switch(W.scope){case"Users":t(`/console/settings/users?id=${W.id}`);break;case"Groups":t(`/console/settings/groups?id=${W.id}`);break;case"Cost centers":t(`/console/settings/groups?tab=cost_centers&id=${W.id}`);break;case"Invoices":t(`/console/invoices?id=${W.id}`);break;case"Trips":t(`/console/travel?id=${W.id}`);break;case"Purchases":t(`/console/reporting?id=${W.id}`);break;case"Vendors":t(`/console/vendors?id=${W.id}`);break;case"RFQs":t(`/console/rfq?id=${W.id}`);break;case"Approvals":t(`/console/approvals_inbox?id=${W.id}`);break;default:l({title:"Open",message:`Opening ${W.id} (demo).`,kind:"info"})}},children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})]}):null,children:W?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Summary"}),e.jsx("div",{className:"mt-2 text-sm text-slate-700",children:W.meta}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(wa,{label:W.scope,tone:"info"}),e.jsx(wa,{label:W.id,tone:"neutral"})]})]}),e.jsxs(Qa,{variant:"outline",onClick:()=>l({title:"Copy",message:"Copied ID (demo).",kind:"success"}),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy ID"]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Raw data"}),e.jsx("pre",{className:"mt-3 max-h-[360px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800",children:JSON.stringify(W.raw,null,2)}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"In production, this panel respects role permissions and redacts sensitive fields."})]})]}):null}),e.jsx(Ff,{open:V,title:"Save search",subtitle:"Premium: saved searches per role",onClose:()=>xe(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Qa,{variant:"outline",onClick:()=>xe(!1),children:"Cancel"}),e.jsxs(Qa,{variant:"primary",onClick:Be,children:[e.jsx(Af,{className:"h-4 w-4"})," Save"]})]}),maxW:"780px",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Name"}),e.jsx("input",{value:pe,onChange:ae=>be(ae.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Saved under role: ",h]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Preview"}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:["Query: ",d||"(none)"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Array.from(x).slice(0,6).map(ae=>e.jsx(wa,{label:ae,tone:"neutral"},ae)),x.size>6?e.jsx(wa,{label:`+${x.size-6}`,tone:"neutral"}):null]})]})]})}),e.jsx(Ff,{open:re,title:fe==="rfq"?"Create RFQ":fe==="budget"?"Issue budget":fe==="freeze"?"Freeze CorporatePay":fe==="export"?"Export month report":"Action",subtitle:"Audit-friendly confirmation and reason prompt",onClose:()=>q(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Qa,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Qa,{variant:"outline",onClick:T,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy audit preview"]}),e.jsxs(Qa,{variant:fe==="freeze"?"danger":"primary",onClick:Fe,disabled:!Re,children:[e.jsx(He,{className:"h-4 w-4"})," Confirm"]})]})]}),maxW:"980px",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[fe==="rfq"?e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"RFQ details"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Vf,{label:"Title",value:Y.title,onChange:ae=>F(le=>({...le,title:ae})),placeholder:"RFQ title"}),e.jsx(Jr,{label:"Service Module",value:Y.module,onChange:ae=>F(le=>({...le,module:ae})),options:[...r]}),e.jsx(Jr,{label:"Marketplace",value:Y.marketplace,onChange:ae=>F(le=>({...le,marketplace:ae})),options:["All",...i]}),e.jsx(Vf,{label:"Needed by",value:Y.neededBy,onChange:ae=>F(le=>({...le,neededBy:ae})),placeholder:"YYYY-MM-DD"}),e.jsx(U1,{label:"Estimated value (UGX)",value:Y.estValue,onChange:ae=>F(le=>({...le,estValue:ae}))}),e.jsx(Bf,{label:"Attachments",value:Y.attachments,onChange:ae=>F(le=>({...le,attachments:ae}))}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Description"}),e.jsx("textarea",{value:Y.description,onChange:ae=>F(le=>({...le,description:ae.target.value})),rows:4,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 outline-none"})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"RFQs are routed to approvals and can use milestone payments after quote approval."})]}):null,fe==="budget"?e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Budget details"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Jr,{label:"Group",value:G.group,onChange:ae=>ve(le=>({...le,group:ae})),options:["Operations","Sales","Finance","Admin","Procurement"]}),e.jsx(Jr,{label:"Period",value:G.period,onChange:ae=>ve(le=>({...le,period:ae})),options:["Weekly","Monthly","Quarterly","Annual"]}),e.jsx(U1,{label:"Amount (UGX)",value:G.amount,onChange:ae=>ve(le=>({...le,amount:ae}))}),e.jsx(Bf,{label:"Hard cap",value:G.hardCap,onChange:ae=>ve(le=>({...le,hardCap:ae}))})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: large budget changes can require approvals."})]}):null,fe==="freeze"?e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Freeze details"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Jr,{label:"Mode",value:Te.mode,onChange:ae=>ye(le=>({...le,mode:ae})),options:["Soft pause","Full stop"]}),e.jsx(Jr,{label:"Scope",value:Te.scope,onChange:ae=>ye(le=>({...le,scope:ae})),options:["CorporatePay only","All services and purchases"]}),e.jsx(Bf,{label:"Notify users",value:Te.notifyUsers,onChange:ae=>ye(le=>({...le,notifyUsers:ae}))})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-rose-50 p-3 text-xs text-rose-800 ring-1 ring-rose-200",children:"Freeze is a sensitive action. Consider dual approval for full stop."})]}):null,fe==="export"?e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Export details"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Vf,{label:"Month",value:ie.month,onChange:ae=>Oe(le=>({...le,month:ae})),placeholder:"YYYY-MM"}),e.jsx(Jr,{label:"Format",value:ie.format,onChange:ae=>Oe(le=>({...le,format:ae})),options:["CSV","PDF","JSON"]}),e.jsx(Jr,{label:"Breakdown",value:ie.breakdown,onChange:ae=>Oe(le=>({...le,breakdown:ae})),options:["Group + Module + Marketplace","Group only","Vendor only","Approvals only"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: scheduled exports can be configured in Integrations."})]}):null,e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Reason and acknowledgement"}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Reason is required for audit logs. Keep it specific."}),e.jsx("textarea",{value:L,onChange:ae=>M(ae.target.value),placeholder:"Example: RFQ needed for vehicle procurement; monthly budget not sufficient; CFO approval requested",rows:4,className:"mt-3 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsxs("label",{className:"mt-3 flex items-start gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:ae=>P(ae.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300"}),e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"I confirm this action is authorized and will be audit logged."})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Minimum reason length: 8 characters."})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Audit preview"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"This is the record that would be stored."})]}),e.jsx(wa,{label:"Preview",tone:"info"})]}),e.jsx("pre",{className:"mt-3 max-h-[360px] overflow-auto rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-800",children:JSON.stringify({action:fe,actorRole:h,at:new Date().toISOString(),reason:L,draft:fe==="rfq"?Y:fe==="budget"?G:fe==="freeze"?Te:ie},null,2)}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: map this to immutable audit log IDs and include policy version."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Safety tips"}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:oo.green}})," ","Use group-level budgets before user caps."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:oo.orange}})," ","For freezing, notify users to avoid disruptions."]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:oo.green}})," ","For RFQs, attach specs and required documents."]})]})]})]})]})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"C Global Search & Command Center v2: unified search + premium saved searches per role + operator shortcuts + audited quick actions."})})]})}function qF({scope:t,items:s,onOpen:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-600",children:l(t)}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Top matches"})]})]}),e.jsx(wa,{label:`${s.length}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-3 space-y-2",children:s.map(n=>e.jsxs("button",{type:"button",onClick:()=>a(n),className:"w-full rounded-2xl border border-slate-200 bg-white p-3 text-left hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:n.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:n.subtitle}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:n.meta})]}),e.jsx(ue,{className:"mt-1 h-5 w-5 text-slate-400"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[(n.tags||[]).slice(0,4).map(r=>e.jsx(wa,{label:r,tone:"neutral"},r)),(n.tags||[]).length>4?e.jsx(wa,{label:`+${(n.tags||[]).length-4}`,tone:"neutral"}):null]})]},n.id))})]});function l(n){switch(n){case"Users":return e.jsx(Vs,{className:"h-4 w-4"});case"Groups":return e.jsx(jl,{className:"h-4 w-4"});case"Cost centers":return e.jsx(Fy,{className:"h-4 w-4"});case"Invoices":return e.jsx(jt,{className:"h-4 w-4"});case"Trips":return e.jsx(Po,{className:"h-4 w-4"});case"Purchases":return e.jsx(Vy,{className:"h-4 w-4"});case"Vendors":return e.jsx(C0,{className:"h-4 w-4"});case"RFQs":return e.jsx(ir,{className:"h-4 w-4"});case"Approvals":return e.jsx(et,{className:"h-4 w-4"});default:return e.jsx(js,{className:"h-4 w-4"})}}}function _f({title:t,value:s}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:s})]})}function zF({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-10 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(js,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function Vf({label:t,value:s,onChange:a,placeholder:l}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("input",{value:s,onChange:n=>a(n.target.value),placeholder:l,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]})}function U1({label:t,value:s,onChange:a}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("input",{type:"number",value:s,onChange:l=>a(Number(l.target.value||0)),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]})}function Jr({label:t,value:s,onChange:a,options:l}){return e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),e.jsx("select",{value:s,onChange:n=>a(n.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:l.map(n=>e.jsx("option",{value:n,children:n},n))})]})}function Bf({label:t,value:s,onChange:a}){return e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:s?"On":"Off"})]}),e.jsx("button",{type:"button",className:Sn("relative h-7 w-12 rounded-full border transition",s?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>a(!s),"aria-label":t,children:e.jsx("span",{className:Sn("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",s?"left-[22px]":"left-1")})})]})})}const wo={green:"#03CD8C",orange:"#F77F00"};function ml(...t){return t.filter(Boolean).join(" ")}function GF(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Bl({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:ml("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function WF(t){return t==="Approved"?"good":t==="In review"?"info":t==="Needs action"?"warn":"neutral"}function HF(t){return t==="Active"?"good":t==="Draft"?"neutral":t==="Paused"?"warn":"bad"}function Js({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:wo.green}:t==="accent"?{background:wo.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:ml(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Ko({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function KF({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:ml("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function q1({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function XF({value:t,max:s}){const a=s<=0?0:Math.max(0,Math.min(1,t/s)),l=Math.round(a*100),n=l>=85?wo.orange:wo.green;return e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${l}%`,background:n}})})}function YF(t){return navigator.clipboard.writeText(t)}function gx({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="600px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i,width:"calc(100vw - 2rem)"},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(cu,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function z1({label:t,value:s,onChange:a,placeholder:l,rows:n=3}){return e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-500",children:t}),e.jsx("textarea",{value:s,onChange:r=>a(r.target.value),rows:n,placeholder:l,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 transition focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})}function QF({onDrop:t}){const s=ds.useRef(null),a=l=>{l.target.files&&l.target.files[0]&&t(l.target.files[0])};return e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-3xl border border-dashed border-slate-200 bg-slate-50 py-10 text-center transition hover:bg-slate-100",onClick:()=>{var l;return(l=s.current)==null?void 0:l.click()},children:[e.jsx("input",{type:"file",ref:s,className:"hidden",onChange:a}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl bg-white text-emerald-600 shadow-sm",children:e.jsx(Mo,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-slate-900",children:"Click to upload or drag and drop"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"PDF, PNG, JPG up to 10MB"})]})}function cu({actions:t}){const[s,a]=c.useState(!1),l=ds.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:ml("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function Oc({label:t,status:s}){return e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:ml("grid h-6 w-6 place-items-center rounded-full",s==="Pass"?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"),children:s==="Pass"?e.jsx(He,{className:"h-3.5 w-3.5"}):e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-current"})}),e.jsx("span",{className:ml("text-sm font-medium",s==="Pass"?"text-slate-900":"text-slate-500"),children:t})]}),s==="Pass"&&e.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Passed"}),s==="Pending"&&e.jsx("span",{className:"text-xs text-slate-400",children:"Waiting..."})]})}function xA(){const t=ot(),[s,a]=c.useState([]),l=M=>{const k=GF("toast");a(P=>[{id:k,...M},...P].slice(0,4)),window.setTimeout(()=>a(P=>P.filter(Y=>Y.id!==k)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",country:"Uganda",city:"Kampala",role:"Admin",kyb:"In review",program:"Draft",legalName:"Acme Group Limited",tradingName:"Acme Group",regNo:"80020001234567",taxId:"TIN-10101010",billingEmail:"billing@acme.ug",billingPhone:"+256 7XX XXX XXX",billingAddress:"Millennium House, Nsambya Road 472, Kampala, Uganda",brandPrimary:"#0B1220",brandAccent:wo.green,entities:[{id:"ent_ug",name:"Acme Uganda",country:"Uganda",currency:"UGX",isDefault:!0},{id:"ent_cn",name:"Acme China",country:"China",currency:"CNY",isDefault:!1}],invoiceGroups:[{id:"inv_g1",name:"UG Operations",entityId:"ent_ug",billingEmail:"billing-ug@acme.ug"},{id:"inv_g2",name:"CN Procurement",entityId:"ent_cn",billingEmail:"billing-cn@acme.ug"}],modules:[{key:"CorporatePay",enabled:!0,note:"Approvals and policies enabled"},{key:"Wallet",enabled:!0,note:"Multi-currency balances enabled"},{key:"Marketplace",enabled:!0,note:"Checkout and refunds enabled"},{key:"Services",enabled:!0,note:"Bookings and payouts enabled"},{key:"EV Charging",enabled:!1,note:"Enable when charging rollout starts"}],readiness:[{key:"profile",label:"Company profile complete",done:!0,hint:"Legal details and contacts"},{key:"docs",label:"KYB documents uploaded",done:!0,hint:"All required documents"},{key:"bank",label:"Settlement method verified",done:!1,hint:"Verify bank or payout rail"},{key:"roles",label:"Admin roles assigned",done:!0,hint:"Owner, Admin, Finance"},{key:"policy",label:"Policies configured",done:!1,hint:"Approval thresholds and limits"},{key:"goLive",label:"Go-live checks passed",done:!1,hint:"All checks complete"}],documents:[{id:"d1",name:"Certificate of Incorporation.pdf",kind:"Incorporation",status:"Approved",note:"Approved"},{id:"d2",name:"Director ID.pdf",kind:"Identity",status:"Pending",note:"Under review"},{id:"d3",name:"Proof of Address.pdf",kind:"Address",status:"Pending",note:"Under review"}]},{id:"org_khl",name:"Kampala Holdings",country:"Uganda",city:"Kampala",role:"Member",kyb:"Approved",program:"Paused",legalName:"Kampala Holdings Ltd",tradingName:"KHL",regNo:"80020007654321",taxId:"TIN-20202020",billingEmail:"billing@khl.africa",billingPhone:"+256 7XX XXX XXX",billingAddress:"Kampala, Uganda",brandPrimary:"#0B1220",brandAccent:wo.orange,entities:[{id:"ent_ug2",name:"KHL Uganda",country:"Uganda",currency:"UGX",isDefault:!0}],invoiceGroups:[{id:"inv_k1",name:"KHL Billing",entityId:"ent_ug2",billingEmail:"billing@khl.africa"}],modules:[{key:"CorporatePay",enabled:!0,note:"Paused due to deposit depleted"},{key:"Wallet",enabled:!0,note:"Organization wallet exists"},{key:"Marketplace",enabled:!0,note:"Refunds enabled"}],readiness:[{key:"profile",label:"Company profile complete",done:!0,hint:""},{key:"docs",label:"KYB documents uploaded",done:!0,hint:""},{key:"bank",label:"Settlement method verified",done:!0,hint:""},{key:"roles",label:"Admin roles assigned",done:!0,hint:""},{key:"policy",label:"Policies configured",done:!0,hint:""},{key:"goLive",label:"Go-live checks passed",done:!0,hint:""}],documents:[{id:"k1",name:"KYB Package.zip",kind:"KYB",status:"Approved",note:"Approved"}]}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(M=>M.id===r)||n[0],[n,r]),[d,u]=c.useState(o.entities[0].id);c.useEffect(()=>{u(o.entities[0].id)},[o]);const x=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),p=c.useMemo(()=>o.readiness.filter(M=>M.done).length,[o.readiness]),h=c.useMemo(()=>o.readiness.length,[o.readiness]),j=async M=>{try{await YF(M),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed",message:"Clipboard access blocked."})}},y=()=>{t("/console/admin")},[f,I]=c.useState("Overview"),[A,b]=c.useState(!1),[C,S]=c.useState(!1),[z,$]=c.useState(null),[D,W]=c.useState(""),[he,V]=c.useState(!1),[xe,pe]=c.useState(0),[be,fe]=c.useState("Idle"),[K,re]=c.useState(o.program);c.useEffect(()=>{re(o.program)},[o]);const q=()=>{if(K==="Active"){l({kind:"success",title:"Already Live",message:"Organization is already active."});return}V(!0),fe("Running"),pe(0);let M=0;const k=setInterval(()=>{M+=Math.floor(Math.random()*15)+5,M>=100&&(M=100,clearInterval(k),fe("Complete")),pe(M)},400)},L=()=>{re("Active"),V(!1),l({kind:"success",title:"You are Live!",message:"Welcome to CorporatePay."}),setTimeout(()=>{t("/console/dashboard")},1e3)};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(KF,{toasts:s,onDismiss:M=>a(k=>k.filter(P=>P.id!==M))}),e.jsxs(gx,{open:A,onClose:()=>b(!1),title:"Upload Document",subtitle:"Securely upload required verification documents.",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Js,{variant:"ghost",onClick:()=>b(!1),children:"Cancel"}),e.jsx(Js,{variant:"primary",onClick:()=>{l({kind:"success",title:"Upload complete",message:"Document sent for verification."}),b(!1)},children:"Upload"})]}),children:[e.jsx(QF,{onDrop:M=>l({kind:"info",title:"File selected",message:M.name})}),e.jsx("div",{className:"mt-4",children:e.jsx(z1,{label:"Notes (Optional)",value:"",onChange:()=>{},placeholder:"Any additional context..."})})]}),e.jsx(gx,{open:C,onClose:()=>S(!1),title:"Contact Organization Admin",subtitle:"Send a secure message to the organization administrators.",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Js,{variant:"ghost",onClick:()=>S(!1),children:"Cancel"}),e.jsx(Js,{variant:"primary",onClick:()=>{l({kind:"success",title:"Message sent",message:"Admins have been notified."}),S(!1),W("")},children:"Send Message"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-2xl border border-blue-200 bg-blue-50 p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(rt,{className:"h-5 w-5 text-blue-700"}),e.jsxs("div",{className:"text-sm text-blue-800",children:["Your message will be sent to ",e.jsx("strong",{children:"3"})," active admins via email and in-app notification."]})]})}),e.jsx(z1,{label:"Message",value:D,onChange:W,placeholder:"Describe your request...",rows:5})]})}),e.jsx(gx,{open:!!z,onClose:()=>$(null),title:"Item Details",subtitle:z||"",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-center text-sm text-slate-500",children:"Preview not available for this item type."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Created On"}),e.jsx("div",{className:"font-semibold text-slate-900",children:"Oct 12, 2023"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Last Modified"}),e.jsx("div",{className:"font-semibold text-slate-900",children:"2 mins ago"})]})]})]})}),e.jsx(gx,{open:he,onClose:()=>V(!1),title:"Go-live Requirements Check",subtitle:"Verifying organization readiness for live transactions.",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Js,{variant:"ghost",onClick:()=>V(!1),children:"Cancel"}),be==="Complete"?e.jsxs(Js,{variant:"primary",onClick:L,className:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-200",children:[e.jsx(lt,{className:"h-4 w-4 mr-2"})," Launch CorporatePay"]}):e.jsx(Js,{variant:"outline",disabled:!0,children:xe<100?`Scanning... ${xe}%`:"Finalizing..."})]}),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2 flex justify-between text-sm font-semibold",children:[e.jsx("span",{children:"Overall Progress"}),e.jsxs("span",{children:[xe,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all duration-300",style:{width:`${xe}%`}})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(Oc,{label:"Company Profile Completeness",status:xe>10?"Pass":"Pending"}),e.jsx(Oc,{label:"KYB Verification",status:xe>30?"Pass":"Pending"}),e.jsx(Oc,{label:"Settlement Account Verified",status:xe>60?"Pass":"Pending"}),e.jsx(Oc,{label:"Admin Roles Assigned",status:xe>80?"Pass":"Pending"}),e.jsx(Oc,{label:"Transaction Limits Configured",status:xe===100?"Pass":"Pending"})]})]})}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:wo.green},children:e.jsx(Ia,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Organization Profile & KYB"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Summary and deep links to Admin Console for editing"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Bl,{label:`Role: ${o.role}`,tone:x?"info":"neutral"}),e.jsx(Bl,{label:`KYB: ${o.kyb}`,tone:WF(o.kyb)}),e.jsx(Bl,{label:`Program: ${K}`,tone:HF(K)}),e.jsx(Bl,{label:`Readiness: ${p}/${h}`,tone:p===h?"good":"warn"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(q1,{value:r,onChange:i,options:n.map(M=>({value:M.id,label:M.name}))})}),e.jsx("div",{className:"min-w-[180px]",children:e.jsx(q1,{value:d,onChange:u,options:o.entities.map(M=>({value:M.id,label:`${M.name} (${M.currency})`}))})}),e.jsx(cu,{actions:[{label:"Switch Wallet",onClick:()=>t("/console/wallet-switch"),icon:e.jsx(ue,{className:"h-4 w-4"})},{label:"Admin Console",onClick:y,icon:e.jsx(kn,{className:"h-4 w-4"})}]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:["Overview","Structure","Configuration","Compliance"].map(M=>e.jsx("button",{onClick:()=>I(M),className:ml("rounded-full px-4 py-2 text-sm font-semibold transition-colors",f===M?"bg-slate-900 text-white":"bg-white text-slate-600 hover:bg-slate-50 ring-1 ring-slate-200"),children:M},M))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[x?null:e.jsx("div",{className:"mb-6 rounded-3xl border border-amber-200 bg-amber-50 p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Admin access required"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"You can view summary details, but editing requires Admin or Finance role."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Js,{variant:"accent",onClick:()=>l({kind:"info",title:"Request access",message:"This would open the access request workflow."}),children:[e.jsx(ue,{className:"h-4 w-4"})," Request access"]}),e.jsxs(Js,{variant:"outline",onClick:()=>S(!0),children:[e.jsx(ue,{className:"h-4 w-4"})," Contact Admin"]})]})]})]})}),f==="Overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ko,{title:"Company profile",subtitle:"Legal details, contacts, and branding",right:e.jsx(Bl,{label:o.country,tone:"neutral"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:e.jsx("div",{className:"flex items-start justify-between gap-4",children:e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Legal Information"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Legal Name"}),e.jsx("div",{className:"font-semibold text-slate-900",children:o.legalName})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Trading Name"}),e.jsx("div",{className:"font-semibold text-slate-900",children:o.tradingName})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Registration"}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900",children:o.regNo}),e.jsx(Js,{variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>j(o.regNo),children:e.jsx(Ot,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Tax ID"}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[e.jsx("div",{className:"font-mono text-sm font-semibold text-slate-900",children:o.taxId}),e.jsx(Js,{variant:"ghost",className:"h-6 w-6 p-0",onClick:()=>j(o.taxId),children:e.jsx(Ot,{className:"h-3.5 w-3.5"})})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider text-slate-500",children:"Contact Information"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-100 bg-white p-3",children:[e.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-lg bg-slate-100 text-slate-500",children:e.jsx(os,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Billing Email"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:o.billingEmail})]})]}),e.jsxs("div",{className:"flex items-center gap-3 rounded-2xl border border-slate-100 bg-white p-3",children:[e.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-lg bg-slate-100 text-slate-500",children:e.jsx(Ia,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Billing Address"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 truncate",children:o.billingAddress})]})]})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsx("div",{className:ml("rounded-3xl border p-5",o.kyb==="Approved"?"border-emerald-200 bg-emerald-50":o.kyb==="Needs action"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:ml("grid h-12 w-12 shrink-0 place-items-center rounded-2xl",o.kyb==="Approved"?"bg-white text-emerald-700":o.kyb==="Needs action"?"bg-white text-amber-800":"bg-slate-50 text-slate-700"),children:o.kyb==="Approved"?e.jsx(et,{className:"h-6 w-6"}):o.kyb==="Needs action"?e.jsx(at,{className:"h-6 w-6"}):e.jsx(rt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-base font-semibold text-slate-900",children:["KYB Status: ",o.kyb]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:"Verification is required for full feature access."}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx(Js,{variant:o.kyb==="Needs action"?"accent":"outline",onClick:()=>t("/console/settings/org/kyb"),className:"text-xs h-8",children:"Manage KYB"}),e.jsx(Js,{variant:"outline",onClick:()=>l({kind:"info",title:"Requirements",message:"Shown"}),className:"text-xs h-8",children:"Requirements"})]})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Brand Identity"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Primary and Accent colors"})]}),e.jsx(Js,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:y,children:e.jsx(kn,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-12 w-full rounded-xl border border-slate-100 shadow-sm",style:{background:o.brandPrimary}}),e.jsx("div",{className:"mt-1 text-center text-xs font-mono text-slate-500",children:o.brandPrimary})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-12 w-full rounded-xl border border-slate-100 shadow-sm",style:{background:o.brandAccent}}),e.jsx("div",{className:"mt-1 text-center text-xs font-mono text-slate-500",children:o.brandAccent})]})]})]})]})]})}),e.jsx(Ko,{title:"Go-live readiness",subtitle:"Checklist with progress",right:e.jsx(Bl,{label:`${Math.round(p/h*100)}%`,tone:p===h?"good":"warn"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-6 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm font-semibold mb-2",children:[e.jsx("span",{"text-slate-900":!0,children:"Readiness Progress"}),e.jsxs("span",{className:"text-slate-600",children:[p,"/",h]})]}),e.jsx(XF,{value:p,max:h})]}),e.jsxs(Js,{variant:"primary",onClick:q,children:[e.jsx(lt,{className:"h-4 w-4"})," Run Checks"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.readiness.map(M=>e.jsxs("div",{className:ml("flex flex-col justify-between rounded-2xl border p-4 transition-all hover:bg-slate-50",M.done?"border-emerald-100 bg-emerald-50/30":"border-slate-200 bg-white"),children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900 text-sm",children:M.label}),e.jsx("div",{className:ml("grid h-5 w-5 place-items-center rounded-full",M.done?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"),children:e.jsx(He,{className:"h-3 w-3"})})]}),M.hint&&e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:M.hint})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100/50",children:e.jsxs("button",{className:"text-xs font-medium text-emerald-600 hover:underline flex items-center gap-1",onClick:()=>{switch(M.key){case"profile":t("/console/settings/org/setup");break;case"docs":t("/console/settings/org/kyb");break;case"bank":t("/console/settings/billing");break;case"roles":t("/console/settings/roles");break;case"policy":t("/console/settings/policies");break;case"goLive":q();break;default:y()}},children:[M.key==="goLive"?"Run Checks":"Resolve"," ",e.jsx(ue,{className:"h-3 w-3"})]})})]},M.key))})]})}),e.jsxs("div",{className:"pt-4 border-t border-slate-200",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 mb-4 px-1",children:"Quick Actions & Deep Links"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[{label:"Company Profile",icon:e.jsx(Ia,{className:"h-4 w-4"}),path:"/console/settings/org/setup"},{label:"KYB Documents",icon:e.jsx(jt,{className:"h-4 w-4"}),path:"/console/settings/org/kyb"},{label:"Entities & Groups",icon:e.jsx(nn,{className:"h-4 w-4"}),path:"/console/settings/org/entities"},{label:"Module Settings",icon:e.jsx(kn,{className:"h-4 w-4"}),path:"/console/settings/modules"},{label:"Go-live Checklist",icon:e.jsx(Ra,{className:"h-4 w-4"}),path:"/console/settings/org/go-live"}].map((M,k)=>e.jsxs("button",{onClick:()=>t(M.path),className:"flex flex-col items-center justify-center gap-3 rounded-2xl border border-slate-200 bg-white p-4 transition-all hover:-translate-y-1 hover:shadow-md hover:border-emerald-200 group",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-full bg-slate-50 text-slate-600 group-hover:bg-emerald-50 group-hover:text-emerald-600 transition-colors",children:M.icon}),e.jsx("div",{className:"text-xs font-semibold text-slate-700 group-hover:text-slate-900",children:M.label})]},k))})]})]}),f==="Structure"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsx(Ko,{title:"Entities",subtitle:"Legal entities under this organization",right:e.jsx(Js,{variant:"primary",onClick:y,className:"px-3 py-1 text-xs",children:"Add Entity"}),children:e.jsx("div",{className:"space-y-3",children:o.entities.map(M=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:M.name}),e.jsx(Bl,{label:M.currency,tone:"neutral"}),M.isDefault?e.jsx(Bl,{label:"Default",tone:"info"}):null]}),e.jsx("div",{className:"mt-1 text-sm text-slate-500",children:M.country})]}),e.jsx(cu,{actions:[{label:"Edit",onClick:y,icon:e.jsx(kn,{className:"h-4 w-4"})},{label:"View Details",onClick:()=>$(M.name),icon:e.jsx(jt,{className:"h-4 w-4"})}]})]})},M.id))})}),e.jsx(Ko,{title:"Invoice Groups",subtitle:"Billing groupings mapped to entities",right:e.jsx(Js,{variant:"primary",onClick:y,className:"px-3 py-1 text-xs",children:"Add Group"}),children:e.jsx("div",{className:"space-y-3",children:o.invoiceGroups.map(M=>{var k;return e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:M.name}),e.jsxs("div",{className:"mt-1 text-sm text-slate-500",children:["Entity: ",((k=o.entities.find(P=>P.id===M.entityId))==null?void 0:k.name)??M.entityId]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-500",children:["Billing: ",M.billingEmail]})]}),e.jsx(cu,{actions:[{label:"Copy Email",onClick:()=>j(M.billingEmail),icon:e.jsx(Ot,{className:"h-4 w-4"})},{label:"Settings",onClick:y,icon:e.jsx(kn,{className:"h-4 w-4"})}]})]})},M.id)})})})]}),f==="Configuration"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsx(Ko,{title:"Module Enablement",subtitle:"Active modules for this organization",right:e.jsx(Bl,{label:`${o.modules.filter(M=>M.enabled).length} Enabled`,tone:"good"}),children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:o.modules.map(M=>e.jsx("div",{className:ml("rounded-3xl border p-4",M.enabled?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.key}),e.jsx(Bl,{label:M.enabled?"Enabled":"Disabled",tone:M.enabled?"good":"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:M.note})]}),e.jsx(Js,{variant:"outline",onClick:()=>t("/console/settings/modules"),className:"px-3 py-2 text-xs",children:"Manage"})]})},M.key))})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(kn,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Advanced Configuration"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Additional settings for APIs, Webhooks, and SSO are available in the integration settings."}),e.jsx("div",{className:"mt-4",children:e.jsx(Js,{variant:"outline",onClick:()=>l({kind:"info",title:"Integrations",message:"Redirecting..."}),children:"Go to Integrations"})})]})]})})]}),f==="Compliance"&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsx(Ko,{title:"KYB Documents",subtitle:"Verification documents and status",right:e.jsxs(Js,{variant:"primary",onClick:()=>b(!0),className:"px-3 py-1 text-xs",children:[e.jsx(Mo,{className:"h-3 w-3 mr-1"})," Upload"]}),children:e.jsx("div",{className:"space-y-2",children:o.documents.map(M=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.name}),e.jsx(Bl,{label:M.status,tone:M.status==="Approved"?"good":M.status==="Rejected"?"bad":"warn"}),e.jsx(Bl,{label:M.kind,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:M.note})]}),e.jsx(cu,{actions:[{label:"Preview",onClick:()=>$(M.name),icon:e.jsx(jt,{className:"h-4 w-4"})},{label:"Download",onClick:()=>l({kind:"success",title:"Download",message:"Downloading..."}),icon:e.jsx(ct,{className:"h-4 w-4"})}]})]}),M.status==="Rejected"?e.jsx("div",{className:"mt-3 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(at,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Action required"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:"Re-upload with correct details."})]})]})}):null]},M.id))})})}),e.jsx("div",{className:"lg:col-span-4",children:e.jsx("div",{className:ml("rounded-3xl border p-5",o.kyb==="Approved"?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:ml("grid h-10 w-10 place-items-center rounded-2xl bg-white",o.kyb==="Approved"?"text-emerald-700":"text-amber-800"),children:o.kyb==="Approved"?e.jsx(et,{className:"h-5 w-5"}):e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["KYB Status: ",o.kyb]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:o.kyb==="Approved"?"Your organization is fully verified.":"Please complete the required document uploads."})]})]})})})]})]})]})})]})}const nh={green:"#03CD8C",orange:"#F77F00"};function Is(...t){return t.filter(Boolean).join(" ")}function JF(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function xn(t){return JSON.parse(JSON.stringify(t))}function yt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Is("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Ht({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:nh.green}:t==="accent"?{background:nh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Is(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Uf({enabled:t,onChange:s,label:a,disabled:l}){return e.jsxs("button",{type:"button",disabled:l,onClick:()=>!l&&s(!t),className:Is("flex items-center justify-between gap-3 rounded-2xl border px-3 py-2 text-left text-sm font-semibold transition",t?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50",l&&"opacity-60 cursor-not-allowed"),children:[e.jsx("span",{children:a}),e.jsx("span",{className:Is("relative h-6 w-10 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),children:e.jsx("span",{className:Is("absolute top-0.5 h-5 w-5 rounded-full bg-white shadow-sm transition",t?"left-[18px]":"left-1")})})]})}function Xo({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Is(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Is("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i,children:i},i))})]})}function vx({label:t,value:s,onChange:a,placeholder:l,hint:n,disabled:r}){return e.jsxs("div",{className:Is(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{value:s,onChange:i=>a(i.target.value),placeholder:l,disabled:r,className:Is("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function pA({actions:t}){const[s,a]=ds.useState(!1),l=ds.useRef(null);return ds.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:Is("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function qf({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(pA,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function ZF({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,actions:i}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.18},className:Is("fixed z-50 flex flex-col overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[14vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[560px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4 shrink-0",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(pA,{actions:i}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4 shrink-0 bg-white",children:r}):null]})]}):null})}function e_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Is("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Wi(t){return t==="High"?"bad":t==="Medium"?"warn":"good"}function hA(t){return t==="High"?90:t==="Medium"?55:20}function t_(t){const a=t.reduce((n,r)=>n+hA(r),0)/Math.max(1,t.length),l=a>=70?"High":a>=40?"Medium":"Low";return{avg:a,label:l}}function s_(t,s){const a=[...t].sort().join("|"),l=[...s].sort().join("|");return a===l}function G1(){const t=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],s=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],a={"E-Commerce":"Medium","EVs & Charging":"Medium","Rides & Logistics":"Medium","School & E-Learning":"Medium","Medical & Health Care":"High","Travel & Tourism":"Medium","Green Investments":"High",FaithHub:"Medium","Virtual Workspace":"Low","Finance & Payments":"High","Other Service Module":"Medium"},l={};t.forEach(r=>{l[r]={enabled:r!=="Other Service Module"&&r!=="Green Investments",risk:a[r],policy:r==="Finance & Payments"||r==="Medical & Health Care"?"Strict compliance":"Balanced",approval:r==="Finance & Payments"?"Finance approval":r==="Medical & Health Care"?"Manager approval":"Auto under threshold"}});const n={};return s.forEach(r=>{n[r]={enabled:r==="MyLiveDealz"||r==="EVmart"||r==="ServiceMart"||r==="GadgetMart"||r==="ExpressMart"||r==="Other Marketplace",inheritFromModule:!0,policy:"Org default",approval:"Org default"}}),{modules:l,marketplaces:n,labels:{otherModuleLabel:"Other Service Module",otherMarketplaceLabel:"Other Marketplace"},rollout:{stage:"Pilot",pilotGroups:["Operations","Finance"],plannedGoAllDate:"2026-01-14",notes:"Pilot with Operations and Finance, then expand to all groups."}}}function a_(){const t=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],s=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],a=[{id:"Operations",users:34},{id:"Sales",users:22},{id:"Finance",users:10},{id:"Admin",users:8},{id:"Procurement",users:6}],l=[{id:"U-1001",name:"Mary N.",group:"Operations",title:"Operations Manager"},{id:"U-1002",name:"Finance Desk",group:"Finance",title:"Accountant"},{id:"U-1003",name:"John S.",group:"Sales",title:"Sales Executive"},{id:"U-1004",name:"Admin Team",group:"Admin",title:"Org Admin"},{id:"U-1005",name:"Procurement Desk",group:"Procurement",title:"Approver"},{id:"U-1006",name:"Irene K.",group:"Operations",title:"Travel Coordinator"},{id:"U-1007",name:"Samuel A.",group:"Sales",title:"Manager"},{id:"U-1008",name:"Daisy O.",group:"Finance",title:"Finance Officer"}],n=["Org default","Conservative","Balanced","Flexible","Strict compliance"],r=["Org default","Auto under threshold","Manager approval","Finance approval","CFO approval","Multi-level escalation"],[i,o]=c.useState([]),d=_=>{const te=JF("toast");o(Re=>[{id:te,..._},...Re].slice(0,4)),window.setTimeout(()=>o(Re=>Re.filter(Fe=>Fe.id!==te)),3200)},[u,x]=c.useState("enablement"),[p,h]=c.useState(()=>G1()),[j,y]=c.useState(()=>xn(G1())),[f,I]=c.useState({kind:"module",key:"E-Commerce"}),[A,b]=c.useState(!1),[C,S]=c.useState(""),[z,$]=c.useState(!1),[D,W]=c.useState(!1),[he,V]=c.useState({open:!1,title:"",message:"",action:()=>{}});c.useMemo(()=>a.reduce((_,te)=>_+te.users,0),[a]);const xe=c.useMemo(()=>(f==null?void 0:f.kind)==="module"?f.key:null,[f]),pe=c.useMemo(()=>(f==null?void 0:f.kind)==="marketplace"?f.key:null,[f]),be=_=>_==="Other Marketplace"?p.labels.otherMarketplaceLabel||"Other Marketplace":_,fe=_=>_==="Other Service Module"?p.labels.otherModuleLabel||"Other Service Module":_,K=p.modules["E-Commerce"].enabled,re=c.useMemo(()=>{const _=[];return t.forEach(te=>{p.modules[te].enabled&&_.push(p.modules[te].risk)}),_},[p,t]),q=c.useMemo(()=>t_(re),[re]),L=p.rollout,M=_=>L.stage==="All"?!0:L.pilotGroups.includes(_.group),k=(_,te,Re)=>_.modules[Re].enabled?_.rollout.stage==="All"?!0:_.rollout.pilotGroups.includes(te.group):!1,P=(_,te,Re)=>!_.modules["E-Commerce"].enabled||!_.marketplaces[Re].enabled?!1:_.rollout.stage==="All"?!0:_.rollout.pilotGroups.includes(te.group),Y=c.useMemo(()=>{let _=0;return t.forEach(te=>{const Re=p.modules[te],Fe=j.modules[te];Re.enabled!==Fe.enabled&&(_+=1),Re.risk!==Fe.risk&&(_+=1),Re.policy!==Fe.policy&&(_+=1),Re.approval!==Fe.approval&&(_+=1)}),s.forEach(te=>{const Re=p.marketplaces[te],Fe=j.marketplaces[te];Re.enabled!==Fe.enabled&&(_+=1),Re.inheritFromModule!==Fe.inheritFromModule&&(_+=1),Re.policy!==Fe.policy&&(_+=1),Re.approval!==Fe.approval&&(_+=1)}),p.labels.otherModuleLabel!==j.labels.otherModuleLabel&&(_+=1),p.labels.otherMarketplaceLabel!==j.labels.otherMarketplaceLabel&&(_+=1),p.rollout.stage!==j.rollout.stage&&(_+=1),s_(p.rollout.pilotGroups,j.rollout.pilotGroups)||(_+=1),p.rollout.plannedGoAllDate!==j.rollout.plannedGoAllDate&&(_+=1),_},[p,j,t,s]),F=c.useMemo(()=>{const _=[];l.forEach(Fe=>{const T=[],Z=[];t.forEach(B=>{const ne=k(j,Fe,B),X=k(p,Fe,B);!ne&&X&&T.push(`Module: ${fe(B)}`),ne&&!X&&Z.push(`Module: ${fe(B)}`)}),s.forEach(B=>{const ne=P(j,Fe,B),X=P(p,Fe,B);!ne&&X&&T.push(`Marketplace: ${be(B)}`),ne&&!X&&Z.push(`Marketplace: ${be(B)}`)}),(T.length||Z.length)&&_.push({user:Fe,gained:T,lost:Z})});const te=_.reduce((Fe,T)=>Fe+T.gained.length,0),Re=_.reduce((Fe,T)=>Fe+T.lost.length,0);return{changedUsers:_,gains:te,losses:Re,changedCount:_.length}},[p,j,l,t,s]),G=c.useMemo(()=>{const _=l.filter(Re=>M(Re)),te=l.filter(Re=>!M(Re));return{pilotUsers:_,nonPilot:te}},[l,M]),ve=()=>{h(xn(j)),d({title:"Reverted",message:"Draft reverted to last published settings.",kind:"info"})},Te=()=>{d({title:"Saved",message:"Draft saved (demo).",kind:"success"})},ye=()=>{S(""),$(!1),b(!0)},ie=()=>{if(C.trim().length<8||!z){d({title:"Publish blocked",message:"Add a clear reason and confirm acknowledgement.",kind:"warn"});return}y(xn(p)),b(!1),d({title:"Published",message:"Enablement settings published.",kind:"success"})},Oe=async()=>{const _={draft:p,exportedAt:new Date().toISOString()},te=JSON.stringify(_,null,2);try{await navigator.clipboard.writeText(te),d({title:"Copied",message:"Config JSON copied to clipboard.",kind:"success"}),W(!1)}catch{d({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},Ae=()=>{if(!xe){d({title:"Select module",message:"Select a module first.",kind:"warn"});return}h(_=>{const te=xn(_),Re=te.modules[xe];return t.forEach(Fe=>{te.modules[Fe].policy=Re.policy,te.modules[Fe].approval=Re.approval}),te}),d({title:"Applied",message:"Module defaults applied to all modules.",kind:"success"})},ee=()=>{h(_=>{const te=xn(_);return s.forEach(Re=>{te.marketplaces[Re].inheritFromModule=!0,te.marketplaces[Re].policy="Org default",te.marketplaces[Re].approval="Org default"}),te}),d({title:"Applied",message:"Marketplaces set to inherit from E-Commerce defaults.",kind:"success"})},Ne=!!f,Ce=xe?`Module: ${fe(xe)}`:pe?`Marketplace: ${be(pe)}`:"",Ee=xe?`Risk: ${p.modules[xe].risk}  Enabled: ${p.modules[xe].enabled?"Yes":"No"}`:pe?`Enabled: ${p.marketplaces[pe].enabled?"Yes":"No"}  Inherit: ${p.marketplaces[pe].inheritFromModule?"Yes":"No"}`:"",Ue={"E-Commerce":["High vendor variability","Category restrictions may apply","Marketplace-specific rules"],"EVs & Charging":["Energy transactions","Station policies and credits","Operational fraud risk"],"Rides & Logistics":["High volume","Policy breaches (time/geo)","Safety and chargeback"],"School & E-Learning":["Payments and subscriptions","Youth safety policies","Refund rules"],"Medical & Health Care":["Sensitive categories","Compliance requirements","Higher audit expectations"],"Travel & Tourism":["High variability","Airport rules","Large bookings"],"Green Investments":["Regulatory sensitivity","Large amounts","Enhanced approvals"],FaithHub:["Content sensitivity","Donations/refunds","Policy controls"],"Virtual Workspace":["Low monetary risk","Mostly operational","Permissions sensitive"],"Finance & Payments":["Direct money movement","Fraud risk","Always audited"],"Other Service Module":["Unknown risk","Default to Medium","Review before enabling"]},Ye=t.filter(_=>p.modules[_].enabled).length,De=s.filter(_=>p.marketplaces[_].enabled).length;return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(e_,{toasts:i,onDismiss:_=>o(te=>te.filter(Re=>Re.id!==_))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:nh.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Modules and Marketplaces Enablement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enable services and marketplaces. Map default policies and approval flows. Use pilot rollout before enabling for everyone."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(yt,{label:`Modules enabled: ${Ye}/${t.length}`,tone:"neutral"}),e.jsx(yt,{label:`Marketplaces enabled: ${De}/${s.length}`,tone:K?"neutral":"warn"}),e.jsx(yt,{label:`Rollout: ${p.rollout.stage}`,tone:p.rollout.stage==="Pilot"?"warn":"good"}),e.jsx(yt,{label:`Org risk: ${q.label}`,tone:Wi(q.label)}),Y?e.jsx(yt,{label:`Draft changes: ${Y}`,tone:"info"}):e.jsx(yt,{label:"No draft changes",tone:"good"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Ht,{variant:"outline",onClick:()=>W(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{Y&&V({open:!0,title:"Revert Changes",message:"Are you sure you want to revert all draft changes to the last published version?",action:ve,actionLabel:"Revert",variant:"danger"})},disabled:!Y,children:[e.jsx(_e,{className:"h-4 w-4"})," Revert"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{Te()},children:[e.jsx(Vr,{className:"h-4 w-4"})," Save draft"]}),e.jsxs(Ht,{variant:"primary",onClick:ye,disabled:!Y,children:[e.jsx(et,{className:"h-4 w-4"})," Publish"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"enablement",label:"Enablement"},{id:"defaults",label:"Default policies and approvals"},{id:"rollout",label:"Controlled rollout"},{id:"impact",label:"Change impact"}].map(_=>e.jsx("button",{className:Is("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",u===_.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:u===_.id?{background:nh.green}:void 0,onClick:()=>x(_.id),children:_.label},_.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[u==="enablement"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Service modules"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enable or disable modules. Click to edit defaults."})]}),e.jsx(yt,{label:"Core",tone:"neutral"})]}),e.jsx("div",{className:"mt-4 space-y-2",children:t.map(_=>{const te=p.modules[_],Re=xe===_,Fe=fe(_);return e.jsx("button",{type:"button",onClick:()=>I({kind:"module",key:_}),className:Is("w-full rounded-3xl border p-4 text-left transition",Re?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:Fe}),e.jsx(yt,{label:te.enabled?"Enabled":"Off",tone:te.enabled?"good":"neutral"}),e.jsx(yt,{label:`Risk: ${te.risk}`,tone:Wi(te.risk)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Policy: ",te.policy,"  Approval: ",te.approval]})]}),e.jsx(ue,{className:"mt-0.5 h-4 w-4 text-slate-500"})]})},_)})}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: risk profile scoring is shown per module and aggregated for the org."}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Other labels"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Optional: rename the Other slots."}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsx(vx,{label:"Other Service Module label",value:p.labels.otherModuleLabel,onChange:_=>h(te=>({...te,labels:{...te.labels,otherModuleLabel:_}})),placeholder:"Other Service Module"}),e.jsx(vx,{label:"Other Marketplace label",value:p.labels.otherMarketplaceLabel,onChange:_=>h(te=>({...te,labels:{...te.labels,otherMarketplaceLabel:_}})),placeholder:"Other Marketplace"})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Marketplaces (within E-Commerce)"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Enable or disable marketplaces. Applies when E-Commerce is enabled."})]}),e.jsx(yt,{label:K?"E-Commerce enabled":"E-Commerce off",tone:K?"good":"warn"})]}),e.jsx("div",{className:Is("mt-4 grid grid-cols-1 gap-2 md:grid-cols-2",!K&&"opacity-70"),children:s.map(_=>{const te=p.marketplaces[_],Re=pe===_,Fe=be(_);return e.jsx("button",{type:"button",disabled:!K,onClick:()=>I({kind:"marketplace",key:_}),className:Is("rounded-3xl border p-4 text-left transition",Re?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50",!K&&"cursor-not-allowed"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:Fe}),e.jsx(yt,{label:te.enabled?"Enabled":"Off",tone:te.enabled?"good":"neutral"}),e.jsx(yt,{label:te.inheritFromModule?"Inherit":"Override",tone:te.inheritFromModule?"neutral":"info"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:te.inheritFromModule?"Uses E-Commerce defaults":`Policy: ${te.policy}  Approval: ${te.approval}`})]}),e.jsx(ue,{className:"mt-0.5 h-4 w-4 text-slate-500"})]})},_)})}),K?null:e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Enable E-Commerce to use marketplace toggles."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ht,{variant:"outline",onClick:()=>{V({open:!0,title:"Set All to Inherit",message:"Set all marketplaces to inherit settings from E-Commerce?",action:ee,actionLabel:"Set Inherit",variant:"default"})},disabled:!K,children:[e.jsx(lt,{className:"h-4 w-4"})," Set all to inherit"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{V({open:!0,title:"Enable All Marketplaces",message:"Are you sure you want to enable all marketplaces?",action:()=>{h(_=>{const te=xn(_);return s.forEach(Re=>{Re!=="Other Marketplace"&&(te.marketplaces[Re].enabled=!0)}),te}),d({title:"Enabled",message:"All marketplaces enabled.",kind:"success"})},actionLabel:"Enable All",variant:"default"})},disabled:!K,children:[e.jsx(ft,{className:"h-4 w-4"})," Enable all"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{V({open:!0,title:"Disable All Marketplaces",message:"Are you sure you want to disable all marketplaces (except 'Other')?",action:()=>{h(_=>{const te=xn(_);return s.forEach(Re=>te.marketplaces[Re].enabled=!1),te.marketplaces["Other Marketplace"].enabled=!0,te}),d({title:"Disabled",message:"All marketplaces disabled (except Other).",kind:"info"})},actionLabel:"Disable All",variant:"danger"})},disabled:!K,children:[e.jsx(_e,{className:"h-4 w-4"})," Disable all"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Module risk profile scoring"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"High sensitivity modules should have stricter policies and approvals."})]}),e.jsx(yt,{label:`Org risk: ${q.label}`,tone:Wi(q.label)})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(Be,{title:"Enabled modules",value:`${Ye}`,icon:e.jsx(jl,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Be,{title:"Avg risk score",value:`${Math.round(q.avg)}/100`,icon:e.jsx(at,{className:"h-5 w-5"}),tone:Wi(q.label)}),e.jsx(Be,{title:"Stage",value:p.rollout.stage,icon:e.jsx(Vs,{className:"h-5 w-5"}),tone:p.rollout.stage==="Pilot"?"warn":"good"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: risk score influences recommended approval flows and alert routing."})]})]})]}):null,u==="defaults"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Bulk tools"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Apply defaults quickly."})]}),e.jsx(yt,{label:"Premium",tone:"info"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs(Ht,{variant:"outline",className:"w-full",onClick:()=>{V({open:!0,title:"Apply Module Defaults",message:"Apply defaults from the selected module to ALL other modules?",action:Ae,actionLabel:"Apply",variant:"default"})},children:[e.jsx(lt,{className:"h-4 w-4"})," Apply selected module defaults to all"]}),e.jsxs(Ht,{variant:"outline",className:"w-full",onClick:()=>{V({open:!0,title:"Bulk Inherit Marketplaces",message:"Set ALL marketplaces to inherit settings from E-Commerce?",action:ee,actionLabel:"Set to Inherit",variant:"default"})},disabled:!K,children:[e.jsx(lt,{className:"h-4 w-4"})," Set all marketplaces to inherit"]}),e.jsxs(Ht,{variant:"outline",className:"w-full",onClick:()=>{V({open:!0,title:"Apply Balanced Template",message:"Apply 'Balanced' policy template to all modules (with specific overrides for Finance & Medical)?",action:()=>{h(_=>{const te=xn(_);return t.forEach(Re=>{te.modules[Re].policy="Balanced",te.modules[Re].approval="Auto under threshold"}),te.modules["Finance & Payments"].policy="Strict compliance",te.modules["Finance & Payments"].approval="Finance approval",te}),d({title:"Template",message:"Balanced defaults applied.",kind:"success"})},actionLabel:"Apply Template",variant:"default"})},children:[e.jsx(jl,{className:"h-4 w-4"})," Apply Balanced template"]})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Defaults are used when users do not have group or user overrides."})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Per-module defaults"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Default policy template and approval flow mapping."})]}),e.jsx(yt,{label:"Core",tone:"neutral"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Enabled"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Risk"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Default policy"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Default approval"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Edit"})]})}),e.jsx("tbody",{children:t.map(_=>{const te=p.modules[_];return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:fe(_)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(yt,{label:te.enabled?"Yes":"No",tone:te.enabled?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(yt,{label:te.risk,tone:Wi(te.risk)})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:te.policy}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:te.approval}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ht,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>I({kind:"module",key:_}),children:"Edit"})})]},_)})})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Best practice: Finance & Payments and Medical & Health Care should use strict compliance defaults."})]}),e.jsxs("div",{className:Is("rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",!K&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Per-marketplace overrides"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"If not inheriting, set marketplace-specific policy and approvals."})]}),e.jsx(yt,{label:K?"E-Commerce on":"E-Commerce off",tone:K?"good":"warn"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Marketplace"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Enabled"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Inherit"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Policy"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Approval"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Edit"})]})}),e.jsx("tbody",{children:s.map(_=>{const te=p.marketplaces[_];return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:be(_)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(yt,{label:te.enabled?"Yes":"No",tone:te.enabled?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(yt,{label:te.inheritFromModule?"Yes":"No",tone:te.inheritFromModule?"neutral":"info"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:te.inheritFromModule?"(inherits)":te.policy}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:te.inheritFromModule?"(inherits)":te.approval}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ht,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>I({kind:"marketplace",key:_}),disabled:!K,children:"Edit"})})]},_)})})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: set MyLiveDealz to stricter approvals if you allow high-value deals."})]})]})]}):null,u==="rollout"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Controlled rollout"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Pilot group first, then expand to all."})]}),e.jsx(yt,{label:"Premium",tone:"info"})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(Xo,{label:"Stage",value:p.rollout.stage,onChange:_=>h(te=>({...te,rollout:{...te.rollout,stage:_}})),options:["Pilot","All"],hint:"Pilot limits access"}),e.jsx(vx,{label:"Planned go-all date",value:p.rollout.plannedGoAllDate,onChange:_=>h(te=>({...te,rollout:{...te.rollout,plannedGoAllDate:_}})),placeholder:"YYYY-MM-DD",hint:"Roadmap"}),e.jsx(vx,{label:"Notes",value:p.rollout.notes,onChange:_=>h(te=>({...te,rollout:{...te.rollout,notes:_}})),placeholder:"Explain rollout plan"}),e.jsxs("div",{className:Is("rounded-3xl border border-slate-200 bg-white p-4",p.rollout.stage==="All"&&"opacity-70"),children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Pilot groups"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Select groups to receive access during pilot stage."}),e.jsx("div",{className:"mt-3 space-y-2",children:a.map(_=>{const te=p.rollout.pilotGroups.includes(_.id);return e.jsxs("button",{type:"button",disabled:p.rollout.stage==="All",onClick:()=>{p.rollout.stage!=="All"&&h(Re=>{const Fe=xn(Re),T=new Set(Fe.rollout.pilotGroups);let Z="";return T.has(_.id)?(T.delete(_.id),Z=`Removed ${_.id} from pilot`):(T.add(_.id),Z=`Added ${_.id} to pilot`),Fe.rollout.pilotGroups=Array.from(T),d({title:"Updated",message:Z,kind:"info"}),Fe})},className:Is("flex w-full items-center justify-between rounded-2xl border px-3 py-2 text-left text-sm font-semibold",te?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50",p.rollout.stage==="All"&&"cursor-not-allowed"),children:[e.jsx("span",{children:_.id}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{label:`${_.users} users`,tone:"neutral"}),e.jsx(yt,{label:te?"Pilot":"Off",tone:te?"good":"neutral"})]})]},_.id)})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Ht,{variant:"primary",onClick:()=>{h(_=>({..._,rollout:{..._.rollout,stage:"All"}})),d({title:"Expanded",message:"Rollout expanded to all groups (draft).",kind:"success"})},children:[e.jsx(Vs,{className:"h-4 w-4"})," Expand to all"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{h(_=>({..._,rollout:{..._.rollout,stage:"Pilot"}})),d({title:"Pilot",message:"Returned to pilot stage (draft).",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Pilot stage"]})]}),e.jsx("div",{className:"mt-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: pilot rollout is recommended for high-risk modules like Finance & Payments."})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Pilot preview"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Who has access now under draft rollout settings."})]}),e.jsx(yt,{label:`Pilot users: ${G.pilotUsers.length}`,tone:p.rollout.stage==="Pilot"?"warn":"neutral"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Allowed groups"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(p.rollout.stage==="All"?a.map(_=>_.id):p.rollout.pilotGroups).map(_=>e.jsx(yt,{label:_,tone:"neutral"},_))})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Pilot coverage"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:p.rollout.stage==="All"?"100%":`${Math.round(G.pilotUsers.length/Math.max(1,l.length)*100)}%`}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Sample users list, full list in production"})]})]}),e.jsx("div",{className:"mt-4 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"User"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rollout access"})]})}),e.jsx("tbody",{children:l.map(_=>{const te=M(_);return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:_.name}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:_.group}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(yt,{label:p.rollout.stage==="All"?"Allowed":te?"Pilot":"Not yet",tone:p.rollout.stage==="All"?"good":te?"warn":"neutral"})})]},_.id)})})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Controlled rollout does not remove individual permissions. It limits availability until pilot is complete."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Recommended rollout strategy"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Based on enabled modules risk."})]}),e.jsx(yt,{label:`Org risk: ${q.label}`,tone:Wi(q.label)})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Suggested:",e.jsxs("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:[e.jsx("li",{children:"1) Pilot Finance & Payments with Finance group only"}),e.jsx("li",{children:"2) Pilot MyLiveDealz purchases with Procurement approvals"}),e.jsx("li",{children:"3) Expand to all when approval SLAs stabilize"})]})]})]})]})]}):null,u==="impact"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Change impact preview"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Compares draft against last published configuration."})]}),e.jsx(yt,{label:Y?"Draft has changes":"No changes",tone:Y?"warn":"good"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsx($e,{title:"Users affected",value:`${F.changedCount}`,tone:F.changedCount?"warn":"good",icon:e.jsx(Vs,{className:"h-5 w-5"})}),e.jsx($e,{title:"Access gains",value:`${F.gains}`,tone:F.gains?"good":"neutral",icon:e.jsx(lt,{className:"h-5 w-5"})}),e.jsx($e,{title:"Access losses",value:`${F.losses}`,tone:F.losses?"warn":"neutral",icon:e.jsx(as,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: publish changes after reviewing impact. Use pilot rollout to reduce disruption."}),e.jsxs(Ht,{variant:"primary",className:"mt-4 w-full",disabled:!Y,onClick:ye,children:[e.jsx(et,{className:"h-4 w-4"})," Publish changes"]}),e.jsxs(Ht,{variant:"outline",className:"mt-2 w-full",disabled:!Y,onClick:ve,children:[e.jsx(_e,{className:"h-4 w-4"})," Revert"]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Users impacted"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Sample list (demo). In production, this lists all users."})]}),e.jsx(yt,{label:`${F.changedUsers.length}`,tone:F.changedUsers.length?"warn":"good"})]}),F.changedUsers.length?e.jsx("div",{className:"mt-4 space-y-3",children:F.changedUsers.map(_=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:_.user.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[_.user.title,"  Group: ",_.user.group,"  ",_.user.id]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[_.gained.length?e.jsx(yt,{label:`Gains: ${_.gained.length}`,tone:"good"}):null,_.lost.length?e.jsx(yt,{label:`Losses: ${_.lost.length}`,tone:"warn"}):null]})]}),_.gained.length?e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Gained access"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[_.gained.slice(0,8).map(te=>e.jsx(yt,{label:te,tone:"good"},te)),_.gained.length>8?e.jsx(yt,{label:`+${_.gained.length-8}`,tone:"good"}):null]})]}):null,_.lost.length?e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Lost access"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[_.lost.slice(0,8).map(te=>e.jsx(yt,{label:te,tone:"warn"},te)),_.lost.length>8?e.jsx(yt,{label:`+${_.lost.length-8}`,tone:"warn"}):null]})]}):null,e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: impact preview can include historical spend risk scoring for each user."})]},_.user.id))}):e.jsxs("div",{className:"mt-4 rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(He,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"No impact"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Draft matches last published configuration."})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"What changes in the apps"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Employees use normal EVzone apps. CorporatePay appears at checkout based on enablement."})]}),e.jsx(yt,{label:"Explanation",tone:"info"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1 text-xs text-slate-600",children:[e.jsx("li",{children:"1) If a module is disabled, CorporatePay is not available for that module at checkout."}),e.jsx("li",{children:"2) For E-Commerce, marketplaces must be enabled for CorporatePay to appear on those purchases."}),e.jsx("li",{children:"3) Controlled rollout limits access to pilot groups until expanded."})]})})]})]})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"E Modules & Marketplaces Enablement v2: module toggles, marketplace toggles, per-module and per-marketplace defaults, risk scoring, controlled rollout, and impact preview."})})]})}),e.jsxs(ZF,{open:Ne,title:Ce,subtitle:Ee,onClose:()=>I(null),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Edit is draft-only until published."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ht,{variant:"outline",onClick:()=>I(null),children:"Close"}),e.jsxs(Ht,{variant:"primary",onClick:()=>{Te(),I(null)},children:[e.jsx(Vr,{className:"h-4 w-4"})," Save"]})]})]}),children:[xe?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Enablement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Toggle availability for this module at checkout."})]}),e.jsx(yt,{label:p.modules[xe].enabled?"Enabled":"Off",tone:p.modules[xe].enabled?"good":"neutral"})]}),e.jsx("div",{className:"mt-3",children:e.jsx(Uf,{enabled:p.modules[xe].enabled,onChange:_=>h(te=>({...te,modules:{...te.modules,[xe]:{...te.modules[xe],enabled:_}}})),label:p.modules[xe].enabled?"Disable module":"Enable module"})}),xe==="E-Commerce"&&!p.modules[xe].enabled?e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Disabling E-Commerce disables all marketplace purchases via CorporatePay."}):null]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Risk profile"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Premium: scoring guides defaults and rollout strategy."})]}),e.jsx(yt,{label:`Score ${hA(p.modules[xe].risk)}/100`,tone:Wi(p.modules[xe].risk)})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(Xo,{label:"Risk rating",value:p.modules[xe].risk,onChange:_=>h(te=>({...te,modules:{...te.modules,[xe]:{...te.modules[xe],risk:_}}})),options:["Low","Medium","High"],hint:"Override if needed"}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Signals:",e.jsx("ul",{className:"mt-2 space-y-1 text-xs text-slate-600",children:Ue[xe].map(_=>e.jsxs("li",{children:[" ",_]},_))})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Default mappings"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Applied unless overridden by group/user policies."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4",children:[e.jsx(Xo,{label:"Default policy template",value:p.modules[xe].policy,onChange:_=>h(te=>({...te,modules:{...te.modules,[xe]:{...te.modules[xe],policy:_}}})),options:n}),e.jsx(Xo,{label:"Default approval flow",value:p.modules[xe].approval,onChange:_=>h(te=>({...te,modules:{...te.modules,[xe]:{...te.modules[xe],approval:_}}})),options:r})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Recommendation: high risk modules should use Finance approval or Multi-level escalation."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Quick apply"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ht,{variant:"outline",onClick:Ae,children:[e.jsx(lt,{className:"h-4 w-4"})," Apply to all modules"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{h(_=>{const te=xn(_);return te.modules[xe].policy="Strict compliance",te.modules[xe].approval="Multi-level escalation",te}),d({title:"Applied",message:"Strict defaults set for this module.",kind:"success"})},children:[e.jsx(Tt,{className:"h-4 w-4"})," Strict preset"]})]})]})]}):null,pe?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Enablement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Availability for this marketplace at checkout."})]}),e.jsx(yt,{label:p.marketplaces[pe].enabled?"Enabled":"Off",tone:p.marketplaces[pe].enabled?"good":"neutral"})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Uf,{enabled:p.marketplaces[pe].enabled,onChange:_=>h(te=>({...te,marketplaces:{...te.marketplaces,[pe]:{...te.marketplaces[pe],enabled:_}}})),label:p.marketplaces[pe].enabled?"Disable marketplace":"Enable marketplace",disabled:!p.modules["E-Commerce"].enabled}),e.jsx(Uf,{enabled:p.marketplaces[pe].inheritFromModule,onChange:_=>h(te=>({...te,marketplaces:{...te.marketplaces,[pe]:{...te.marketplaces[pe],inheritFromModule:_}}})),label:p.marketplaces[pe].inheritFromModule?"Inheriting from E-Commerce":"Override defaults",disabled:!p.modules["E-Commerce"].enabled})]}),p.modules["E-Commerce"].enabled?null:e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Enable E-Commerce module first."})]}),e.jsx("div",{className:Is(p.marketplaces[pe].inheritFromModule?"opacity-70":""),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Marketplace defaults"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Only applies when overrides are enabled."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-4",children:[e.jsx(Xo,{label:"Policy template",value:p.marketplaces[pe].policy,onChange:_=>h(te=>({...te,marketplaces:{...te.marketplaces,[pe]:{...te.marketplaces[pe],policy:_}}})),options:n,disabled:p.marketplaces[pe].inheritFromModule}),e.jsx(Xo,{label:"Approval flow",value:p.marketplaces[pe].approval,onChange:_=>h(te=>({...te,marketplaces:{...te.marketplaces,[pe]:{...te.marketplaces[pe],approval:_}}})),options:r,disabled:p.marketplaces[pe].inheritFromModule})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: use stricter approvals for marketplaces that allow high-value assets or services."})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Shortcuts"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ht,{variant:"outline",onClick:()=>{window.confirm("Set all marketplaces to inherit from E-Commerce settings?")&&ee()},children:[e.jsx(lt,{className:"h-4 w-4"})," Set all to inherit"]}),e.jsxs(Ht,{variant:"outline",onClick:()=>{h(_=>{const te=xn(_);return te.marketplaces[pe].inheritFromModule=!1,te.marketplaces[pe].policy="Strict compliance",te.marketplaces[pe].approval="Multi-level escalation",te}),d({title:"Applied",message:"Strict marketplace overrides set.",kind:"success"})},disabled:!p.modules["E-Commerce"].enabled,children:[e.jsx(Tt,{className:"h-4 w-4"})," Strict override"]})]})]})]}):null]}),e.jsxs(qf,{open:A,title:"Publish enablement changes",subtitle:"Provide a reason. This will be audit logged in production.",onClose:()=>b(!1),actions:[{label:"Publish",onClick:ie,disabled:C.trim().length<8||!z}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Ht,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(Ht,{variant:"primary",onClick:ie,disabled:C.trim().length<8||!z,children:[e.jsx(et,{className:"h-4 w-4"})," Publish"]})]}),children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Draft changes: ",e.jsx("span",{className:"font-semibold text-slate-900",children:Y}),"  Users impacted: ",e.jsx("span",{className:"font-semibold text-slate-900",children:F.changedCount})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Reason"}),e.jsx("textarea",{value:C,onChange:_=>S(_.target.value),placeholder:"Example: enable MyLiveDealz for pilot groups; keep Finance & Payments strict; approvals routed to Finance Desk",rows:4,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsxs("label",{className:"mt-3 flex items-start gap-3 rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("input",{type:"checkbox",checked:z,onChange:_=>$(_.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300"}),e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:"I confirm this change is authorized and should be logged."})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Minimum reason length: 8 characters."})]})]}),e.jsxs(qf,{open:D,title:"Export configuration",subtitle:"Copy JSON to clipboard (demo).",onClose:()=>W(!1),actions:[{label:"Copy JSON",onClick:Oe}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Ht,{variant:"outline",onClick:()=>W(!1),children:"Close"}),e.jsxs(Ht,{variant:"primary",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy JSON"]})]}),children:[e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:"This export includes modules, marketplaces, labels, and rollout settings."}),e.jsx("pre",{className:"mt-3 max-h-[360px] overflow-auto rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-800",children:JSON.stringify(p,null,2)})]}),e.jsx(qf,{open:he.open,title:he.title,subtitle:he.message,onClose:()=>V(_=>({..._,open:!1})),actions:[{label:he.actionLabel||"Confirm",onClick:()=>{he.action(),V(_=>({..._,open:!1}))},variant:he.variant}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Ht,{variant:"outline",onClick:()=>V(_=>({..._,open:!1})),children:"Cancel"}),e.jsx(Ht,{variant:he.variant==="danger"?"danger":"primary",onClick:()=>{he.action(),V(_=>({..._,open:!1}))},children:he.actionLabel||"Confirm"})]}),children:e.jsx("div",{className:"text-sm text-slate-600",children:"This action will update your draft configuration. Changes are not live until published."})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"E Modules & Marketplaces Enablement v2: enablement, default mappings, risk scoring, controlled rollout, and change impact preview."})})]});function Be({title:_,value:te,icon:Re,tone:Fe}){const T=Fe==="bad"?"bg-rose-50 text-rose-700":Fe==="warn"?"bg-amber-50 text-amber-800":Fe==="good"?"bg-emerald-50 text-emerald-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:_}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:te})]}),e.jsx("div",{className:Is("grid h-10 w-10 place-items-center rounded-2xl",T),children:Re})]})})}function $e({title:_,value:te,icon:Re,tone:Fe}){const T=Fe==="bad"?"bg-rose-50 text-rose-700":Fe==="warn"?"bg-amber-50 text-amber-800":Fe==="good"?"bg-emerald-50 text-emerald-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:_}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:te})]}),e.jsx("div",{className:Is("grid h-10 w-10 place-items-center rounded-2xl",T),children:Re})]})})}}const bx="cpay_users_v1";function Qn(t){return{Owner:["All access","Change policies","Manage users","Manage funding"],Admin:["Manage users","Manage policies","View reports"],Finance:["Approve payouts","Export reports","Reconcile"],Approver:["Approve purchases","Approve payouts"],Member:["Create requests","View own items"],Viewer:["View only"]}[t]||[]}const zf=[{id:"U-1",name:"Ronald Isabirye",email:"ronald@acme.ug",role:"Owner",status:"Active",lastActive:"Now",twoFA:!0,trustedDevice:!0,permissions:Qn("Owner"),joined:"Oct 2023"},{id:"U-2",name:"Finance Desk",email:"finance@acme.ug",role:"Finance",status:"Active",lastActive:"12m ago",twoFA:!0,trustedDevice:!0,permissions:Qn("Finance"),joined:"Nov 2023"},{id:"U-3",name:"Procurement",email:"procurement@acme.ug",role:"Approver",status:"Active",lastActive:"2h ago",twoFA:!1,trustedDevice:!1,permissions:Qn("Approver"),joined:"Dec 2023"},{id:"U-4",name:"Auditor",email:"audit@acme.ug",role:"Viewer",status:"Disabled",lastActive:"1w ago",twoFA:!1,trustedDevice:!1,permissions:Qn("Viewer"),joined:"Jan 2024"}],An={getAll:()=>{try{const t=localStorage.getItem(bx);return t?JSON.parse(t):(localStorage.setItem(bx,JSON.stringify(zf)),zf)}catch{return zf}},getById:t=>An.getAll().find(a=>a.id===t),update:(t,s)=>{const a=An.getAll(),l=a.findIndex(n=>n.id===t);l!==-1&&(a[l]={...a[l],...s},s.role&&(a[l].permissions=Qn(s.role)),localStorage.setItem(bx,JSON.stringify(a)),window.dispatchEvent(new Event("user-storage-update")))},add:t=>{const s=An.getAll();s.unshift(t),localStorage.setItem(bx,JSON.stringify(s)),window.dispatchEvent(new Event("user-storage-update"))}};function l_(){const[t,s]=c.useState(An.getAll());return c.useEffect(()=>{const a=()=>s(An.getAll());return window.addEventListener("user-storage-update",a),()=>window.removeEventListener("user-storage-update",a)},[]),{users:t,updateUser:An.update,addUser:An.add}}function qy(t){const[s,a]=c.useState(t?An.getById(t):void 0);return c.useEffect(()=>{if(!t)return;a(An.getById(t));const l=()=>a(An.getById(t));return window.addEventListener("user-storage-update",l),()=>window.removeEventListener("user-storage-update",l)},[t]),{user:s,updateUser:l=>t&&An.update(t,l)}}const rh={green:"#03CD8C",orange:"#F77F00"};function zy(...t){return t.filter(Boolean).join(" ")}function n_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Ps({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:zy("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function r_(t){return t==="Active"?"good":t==="Deposit depleted"||t==="Needs verification"?"warn":"bad"}function W1(t){return t==="Active"?"good":t==="Invited"?"info":"warn"}function Ms({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:rh.green}:t==="accent"?{background:rh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:zy(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function i_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:zy("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function H1({open:t,title:s,subtitle:a,onClose:l,children:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?l():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,l]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:l,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:n}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function jx({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>{const n=typeof l=="string"?l:l.value,r=typeof l=="string"?l:l.label;return e.jsx("option",{value:n,children:r},n)})})}function K1({value:t,onChange:s,placeholder:a}){return e.jsx("input",{value:t,onChange:l=>s(l.target.value),placeholder:a,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-emerald-100"})}function Sb(){const t=ot(),[s,a]=c.useState([]),l=G=>{const ve=n_("toast");a(Te=>[{id:ve,...G},...Te].slice(0,4)),window.setTimeout(()=>a(Te=>Te.filter(ye=>ye.id!==ve)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Finance",status:"Active"},{id:"org_khl",name:"Kampala Holdings Group",role:"Member",status:"Deposit depleted"}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(G=>G.id===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),u=c.useMemo(()=>[{id:"I-1",email:"ops@acme.ug",role:"Admin",sentAt:"Today 09:05",status:"Pending",note:"Operations admin"},{id:"I-2",email:"viewer@acme.ug",role:"Viewer",sentAt:"Yesterday",status:"Expired",note:"Read-only"}],[]),{users:x,addUser:p,updateUser:h}=l_(),[j,y]=c.useState(u),[f,I]=c.useState(""),[A,b]=c.useState("ALL"),[C,S]=c.useState("ALL"),z=c.useMemo(()=>{const G=f.trim().toLowerCase();return x.filter(ve=>G?`${ve.name} ${ve.email}`.toLowerCase().includes(G):!0).filter(ve=>A==="ALL"?!0:ve.role===A).filter(ve=>C==="ALL"?!0:ve.status===C)},[x,f,A,C]),[$,D]=c.useState(!1),[W,he]=c.useState(""),[V,xe]=c.useState("Member"),[pe,be]=c.useState("Team member"),[fe,K]=c.useState(null),[re,q]=c.useState(!1),L=()=>{if(!W.trim()||!W.includes("@")){l({kind:"warn",title:"Enter valid email"});return}const G=`I-${Math.floor(10+Math.random()*90)}`;y(ve=>[{id:G,email:W.trim(),role:V,sentAt:"Just now",status:"Pending",note:pe},...ve]),D(!1),he(""),l({kind:"success",title:"Invite sent",message:`${W} as ${V}`})},M=G=>{const ve=j.find(Te=>Te.id===G);ve&&(y(Te=>Te.map(ye=>ye.id===G?{...ye,status:"Accepted"}:ye)),p({id:`U-${Math.floor(10+Math.random()*90)}`,name:ve.email.split("@")[0].replace(/\./g," ").replace(/\b\w/g,Te=>Te.toUpperCase()),email:ve.email,role:ve.role,status:"Active",lastActive:"Just now",twoFA:!1,trustedDevice:!1,permissions:Qn(ve.role)}),l({kind:"success",title:"Invite accepted",message:ve.email}))},k=G=>{const ve=x.find(Te=>Te.id===G);ve&&h(G,{status:ve.status==="Disabled"?"Active":"Disabled"}),l({kind:"success",title:"Status updated"})},P=G=>{K(G),q(!0)},Y=c.useMemo(()=>({last:"Oct 10",dueInDays:12,next:"Feb 02",note:"Quarterly access review recommended"}),[]),F=async G=>{try{await navigator.clipboard.writeText(G),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed",message:"Clipboard access blocked."})}};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(i_,{toasts:s,onDismiss:G=>a(ve=>ve.filter(Te=>Te.id!==G))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:rh.green},children:e.jsx(Vs,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Users & Invitations"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Team directory, invite flows, and access reviews"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ps,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Ps,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Ps,{label:o.status,tone:r_(o.status)}),e.jsx(Ps,{label:`${z.length} members`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(jx,{value:r,onChange:i,options:n.map(G=>({value:G.id,label:G.name}))})}),e.jsxs(Ms,{variant:"primary",disabled:!d,title:d?"Invite":"Admin role required",onClick:()=>D(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," Invite"]})]})]}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limited access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"You can view the team directory, but invites and role edits require Admin or Finance role."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ms,{variant:"accent",onClick:()=>t("/console/access-request"),children:[e.jsx(ue,{className:"h-4 w-4"})," Request access"]}),e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/support-tools"),children:[e.jsx(ue,{className:"h-4 w-4"})," Contact Admin"]})]})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Team directory"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Status, last active, and permission boundaries"})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:f,onChange:G=>I(G.target.value),placeholder:"Search name or email",className:"w-[min(320px,70vw)] bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]}),e.jsx("div",{className:"min-w-[160px]",children:e.jsx(jx,{value:A,onChange:G=>b(G),options:["ALL","Owner","Admin","Finance","Approver","Member","Viewer"]})}),e.jsx("div",{className:"min-w-[160px]",children:e.jsx(jx,{value:C,onChange:G=>S(G),options:["ALL","Active","Invited","Disabled"]})})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[z.map(G=>e.jsxs("button",{type:"button",onClick:()=>P(G),className:"w-full rounded-3xl border border-slate-200 bg-white p-4 text-left hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:G.name}),e.jsx(Ps,{label:G.role,tone:G.role==="Owner"||G.role==="Admin"?"info":"neutral"}),e.jsx(Ps,{label:G.status,tone:W1(G.status)}),e.jsx(Ps,{label:G.twoFA?"2FA":"No 2FA",tone:G.twoFA?"good":"warn"}),e.jsx(Ps,{label:G.trustedDevice?"Trusted":"Untrusted",tone:G.trustedDevice?"good":"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:G.email}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Last active: ",G.lastActive]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ms,{variant:"outline",className:"px-3 py-2",onClick:()=>F(G.email),children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(Ms,{variant:"outline",className:"px-3 py-2",onClick:()=>t(`/console/users/${G.id}`),children:e.jsx(ue,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[G.permissions.slice(0,3).map(ve=>e.jsx(Ps,{label:ve,tone:"neutral"},ve)),G.permissions.length>3?e.jsx(Ps,{label:`+${G.permissions.length-3} more`,tone:"neutral"}):null]})]},G.id)),z.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No members match filters."})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Permission boundaries"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"What each role can do"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:["Owner","Admin","Finance","Approver","Member","Viewer"].map(G=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:G}),e.jsx(Ps,{label:`${Qn(G).length} permissions`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[Qn(G).slice(0,2).map(ve=>e.jsx(Ps,{label:ve,tone:"neutral"},ve)),Qn(G).length>2?e.jsx(Ps,{label:"More",tone:"neutral"}):null]})]}),e.jsx(Ms,{variant:"outline",className:"px-3 py-2",onClick:()=>t("/console/settings/roles"),children:e.jsx(ue,{className:"h-4 w-4"})})]})},G))})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Invitations"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Pending invites and access reviews"})]}),e.jsx(Ps,{label:`${j.length}`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[j.map(G=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:G.email}),e.jsx(Ps,{label:G.role,tone:"neutral"}),e.jsx(Ps,{label:G.status,tone:G.status==="Accepted"?"good":G.status==="Pending"?"warn":"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:G.note}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Sent: ",G.sentAt]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ms,{variant:"outline",className:"px-3 py-2",onClick:()=>F(G.email),children:e.jsx(Ot,{className:"h-4 w-4"})}),G.status==="Pending"?e.jsxs(Ms,{variant:"primary",disabled:!d,title:d?"Simulate accept":"Admin role required",onClick:()=>M(G.id),children:[e.jsx(He,{className:"h-4 w-4"})," Accept"]}):null]})]})},G.id)),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Access review"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Last: ",Y.last,"  Next: ",Y.next,"  Due in ",Y.dueInDays," days"]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/security"),children:[e.jsx(ue,{className:"h-4 w-4"})," Start review"]}),e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/reports"),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]})]})]})]})})]})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:rh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Admin console deep links"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"This page is a fast view. Full management happens in Admin Console."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open Admin"]}),e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/security"),children:[e.jsx(ue,{className:"h-4 w-4"})," Audit"]})]})]})]})})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Encourage 2FA and trusted devices for Finance and Approver roles."})]})]}),e.jsxs(Ms,{variant:"primary",disabled:!d,title:d?"Invite":"Admin role required",onClick:()=>D(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," Invite"]})]})})]})]})}),e.jsx(H1,{open:$,title:"Invite user",subtitle:`${o.name}  Role-based permissions`,onClose:()=>D(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Invites are audited."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{variant:"outline",onClick:()=>D(!1),children:"Cancel"}),e.jsxs(Ms,{variant:"primary",onClick:L,children:[e.jsx(os,{className:"h-4 w-4"})," Send"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Invite"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Email"}),e.jsx("div",{className:"mt-1",children:e.jsx(K1,{value:W,onChange:he,placeholder:"name@company.com"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Role"}),e.jsx("div",{className:"mt-1",children:e.jsx(jx,{value:V,onChange:G=>xe(G),options:["Owner","Admin","Finance","Approver","Member","Viewer"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Note"}),e.jsx("div",{className:"mt-1",children:e.jsx(K1,{value:pe,onChange:be,placeholder:"Reason"})})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"New users should enable 2FA for payouts and approvals."})]})})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Permission preview"}),e.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:["Role: ",V]}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:Qn(V).map(G=>e.jsx(Ps,{label:G,tone:"neutral"},G))}),e.jsx("div",{className:"mt-4",children:e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/roles"),children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced permissions"]})})]})]})}),e.jsx(H1,{open:re,title:fe?fe.name:"Member",subtitle:fe?`${fe.email}  ${fe.role}`:"",onClose:()=>q(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Role changes are audited."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ms,{variant:"outline",onClick:()=>q(!1),children:"Close"}),fe?e.jsxs(Ms,{variant:"primary",disabled:!d,title:d?"Toggle":"Admin role required",onClick:()=>k(fe.id),children:[e.jsx(ue,{className:"h-4 w-4"})," ",fe.status==="Disabled"?"Enable":"Disable"]}):null]})]}),children:fe?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ps,{label:fe.role,tone:fe.role==="Owner"||fe.role==="Admin"?"info":"neutral"}),e.jsx(Ps,{label:fe.status,tone:W1(fe.status)}),e.jsx(Ps,{label:fe.twoFA?"2FA":"No 2FA",tone:fe.twoFA?"good":"warn"}),e.jsx(Ps,{label:fe.trustedDevice?"Trusted":"Untrusted",tone:fe.trustedDevice?"good":"neutral"})]}),e.jsxs("div",{className:"mt-3 text-sm text-slate-700",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Last active"}),e.jsx("div",{className:"mt-1",children:fe.lastActive})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Permissions"}),e.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:fe.permissions.map(G=>e.jsx(Ps,{label:G,tone:"neutral"},G))})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(Ms,{variant:"outline",onClick:()=>F(fe.email),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy email"]}),e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/roles"),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit role"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Recommendations"}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Enable 2FA for payouts and approvals"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Trust devices used frequently"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Review access quarterly"]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/security"),children:[e.jsx(ue,{className:"h-4 w-4"})," Security"]}),e.jsxs(Ms,{variant:"outline",onClick:()=>t("/console/settings/security"),children:[e.jsx(ue,{className:"h-4 w-4"})," Audit"]})]})]})]}):null})]})}const Gf="cpay_groups_v1",o_=[{id:"G-OPS",name:"Operations",description:"Daily operations spend",defaultCostCenterId:"CC-OPS",visibility:"Managers only",taggingEnforced:!0,status:"Active"},{id:"G-PROC",name:"Procurement",description:"Purchases and vendor payments",defaultCostCenterId:"CC-PROC",visibility:"Group only",taggingEnforced:!0,status:"Active"},{id:"G-MKT",name:"Marketing",description:"Campaigns and Shoppable Adz",defaultCostCenterId:"CC-MKT",visibility:"All",taggingEnforced:!1,status:"Active"}],d_=[{id:"CC-OPS",code:"OPS-001",name:"Operations",defaultFor:"G-OPS",spendLimitUGX:3e6,tagsRequired:!0,description:"General ops"},{id:"CC-PROC",code:"PRC-001",name:"Procurement",defaultFor:"G-PROC",spendLimitUGX:5e6,tagsRequired:!0,description:"Procurement"},{id:"CC-MKT",code:"MKT-001",name:"Marketing",defaultFor:"G-MKT",spendLimitUGX:2e6,tagsRequired:!1,description:"Marketing campaigns"}],c_=[{id:"M-1",rule:"Module: CorporatePay",targetCostCenterId:"CC-PROC",default:!0,note:"Corporate purchases map to procurement"},{id:"M-2",rule:"Module: Shoppable Adz",targetCostCenterId:"CC-MKT",default:!0,note:"Ad spend maps to marketing"}],u_=[{id:"GM-1",groupId:"G-OPS",name:"Alice Johnson",email:"alice@acme.com",role:"Manager",status:"Active",joinedAt:new Date().toISOString()},{id:"GM-2",groupId:"G-OPS",name:"Bob Smith",email:"bob@acme.com",role:"Member",status:"Active",joinedAt:new Date().toISOString()}],kt={getData:()=>{try{const t=localStorage.getItem(Gf);if(!t){const s={groups:o_,costCenters:d_,mappings:c_,members:u_};return localStorage.setItem(Gf,JSON.stringify(s)),s}return JSON.parse(t)}catch{return{groups:[],costCenters:[],mappings:[],members:[]}}},save:t=>{localStorage.setItem(Gf,JSON.stringify(t)),window.dispatchEvent(new Event("groups-storage-update"))},getGroup:t=>kt.getData().groups.find(s=>s.id===t),getCostCenter:t=>kt.getData().costCenters.find(s=>s.id===t),getMembers:t=>kt.getData().members.filter(s=>s.groupId===t),addGroup:t=>{const s=kt.getData();s.groups.push(t),kt.save(s)},updateGroup:(t,s)=>{const a=kt.getData(),l=a.groups.findIndex(n=>n.id===t);l!==-1&&(a.groups[l]={...a.groups[l],...s},kt.save(a))},removeGroup:t=>{const s=kt.getData();s.groups=s.groups.filter(a=>a.id!==t),kt.save(s)},addMember:t=>{const s=kt.getData();s.members.push(t),kt.save(s)},updateMember:(t,s)=>{const a=kt.getData(),l=a.members.findIndex(n=>n.id===t);l!==-1&&(a.members[l]={...a.members[l],...s},kt.save(a))},removeMember:t=>{const s=kt.getData();s.members=s.members.filter(a=>a.id!==t),kt.save(s)},addCostCenter:t=>{const s=kt.getData();s.costCenters.push(t),kt.save(s)},updateCostCenter:(t,s)=>{const a=kt.getData(),l=a.costCenters.findIndex(n=>n.id===t);l!==-1&&(a.costCenters[l]={...a.costCenters[l],...s},kt.save(a))},addMapping:t=>{const s=kt.getData();s.mappings.push(t),kt.save(s)},updateMapping:(t,s)=>{const a=kt.getData(),l=a.mappings.findIndex(n=>n.id===t);l!==-1&&(a.mappings[l]={...a.mappings[l],...s},kt.save(a))},findMapping:(t,s)=>kt.getData().mappings.find(l=>l.rule.includes(t)||s&&l.rule.includes(s))};function A0(){const[t,s]=c.useState(kt.getData());return c.useEffect(()=>{const a=()=>s(kt.getData());return window.addEventListener("groups-storage-update",a),()=>window.removeEventListener("groups-storage-update",a)},[]),{...t,refresh:()=>s(kt.getData()),addGroup:kt.addGroup,updateGroup:kt.updateGroup,removeGroup:kt.removeGroup,addCostCenter:kt.addCostCenter,updateCostCenter:kt.updateCostCenter,addMapping:kt.addMapping,updateMapping:kt.updateMapping,addMember:kt.addMember,updateMember:kt.updateMember,removeMember:kt.removeMember,findMapping:kt.findMapping}}const ih={green:"#03CD8C",orange:"#F77F00"};function br(...t){return t.filter(Boolean).join(" ")}function m_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function X1(t){const s=Math.abs(t).toLocaleString(void 0,{maximumFractionDigits:0});return`${t<0?"-":""}UGX ${s}`}function oa({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:br("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function da({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"},d=t==="primary"?{background:ih.green}:t==="accent"?{background:ih.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:br(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function x_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:br("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Wf({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function p_({open:t,title:s,subtitle:a,onClose:l,children:n,footer:r}){return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(ke.div,{className:"fixed inset-0 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},className:"relative w-full max-w-3xl overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-6 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:l,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-6 py-6 bg-slate-50",children:n}),r?e.jsx("div",{className:"border-t border-slate-200 bg-white px-6 py-4",children:r}):null]})]}):null}function Y1({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l,children:l},l))})}function $c({value:t,onChange:s,placeholder:a}){return e.jsx("input",{value:t,onChange:l=>s(l.target.value),placeholder:a,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-emerald-100"})}function fA(){var Y,F;const t=ot(),{groups:s,costCenters:a,mappings:l,members:n,addGroup:r,addCostCenter:i,addMapping:o,updateGroup:d,updateMapping:u}=A0(),[x,p]=c.useState([]),h=G=>{const ve=m_("toast");p(Te=>[{id:ve,...G},...Te].slice(0,4)),window.setTimeout(()=>p(Te=>Te.filter(ye=>ye.id!==ve)),3200)},[j,y]=c.useState(((Y=s[0])==null?void 0:Y.id)||""),f=c.useMemo(()=>s.find(G=>G.id===j)||s[0],[s,j]),I=c.useMemo(()=>a.find(G=>G.id===(f==null?void 0:f.defaultCostCenterId))||null,[a,f]),A=G=>n.filter(ve=>ve.groupId===G).length,[b,C]=c.useState(!1),[S,z]=c.useState("Group"),[$,D]=c.useState(""),[W,he]=c.useState("New item"),[V,xe]=c.useState("NEW-001"),[pe,be]=c.useState("1000000"),[fe,K]=c.useState("Module: E-Commerce"),[re,q]=c.useState(((F=a[0])==null?void 0:F.id)||""),L=()=>{var G;if(!$.trim()&&S!=="Mapping"){h({kind:"warn",title:"Name required"});return}if(S==="Group"){const ve=`G-${$.trim().slice(0,3).toUpperCase()}-${Math.floor(Math.random()*100)}`;r({id:ve,name:$.trim(),description:W.trim(),defaultCostCenterId:(G=a[0])==null?void 0:G.id,visibility:"Group only",taggingEnforced:!0,status:"Active"}),h({kind:"success",title:"Group created",message:$.trim()})}if(S==="Cost Center"){const ve=`CC-${V.trim().replace(/\s+/g,"-")}`,Te=Number(pe.replace(/[^0-9]/g,""))||0;i({id:ve,code:V.trim(),name:$.trim(),spendLimitUGX:Te,tagsRequired:!0,description:W.trim()}),h({kind:"success",title:"Cost center created",message:V.trim()})}if(S==="Mapping"){const ve=`M-${Math.floor(10+Math.random()*90)}`;o({id:ve,rule:fe.trim(),targetCostCenterId:re,default:!1,note:W.trim()}),h({kind:"success",title:"Mapping created"})}D(""),he("New item"),C(!1)},M=G=>{var ve;return((ve=a.find(Te=>Te.id===G))==null?void 0:ve.name)||G},k=G=>{l.find(Te=>Te.id===G)&&(u(G,{default:!0}),h({kind:"success",title:"Default mapping updated"}))},P=G=>{const ve=s.find(Te=>Te.id===G);ve&&(d(G,{taggingEnforced:!ve.taggingEnforced}),h({kind:"success",title:"Tag enforcement updated"}))};return f?e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(x_,{toasts:x,onDismiss:G=>p(ve=>ve.filter(Te=>Te.id!==G))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsx("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:ih.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Groups & Cost Centers"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Spend segmentation, defaults, mapping, and tagging enforcement"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(oa,{label:"Org: Acme Group Ltd",tone:"info"}),e.jsx(oa,{label:`Groups: ${s.length}`,tone:"neutral"}),e.jsx(oa,{label:`Cost centers: ${a.length}`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(da,{variant:"outline",onClick:()=>t("/console/wallet-switch"),children:[e.jsx(ue,{className:"h-4 w-4"})," Switch"]}),e.jsxs(da,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(da,{variant:"primary",onClick:()=>C(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})]})]})}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsx(Wf,{title:"Groups",subtitle:"Visibility rules and tagging enforcement",right:e.jsx(oa,{label:`Active: ${f.name}`,tone:"info"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{className:"space-y-2",children:s.map(G=>e.jsxs("div",{className:br("relative w-full rounded-3xl border bg-white p-4 text-left shadow-sm transition-all hover:bg-slate-50 group",j===G.id?"border-emerald-200 ring-2 ring-emerald-100":"border-slate-200"),children:[e.jsx("button",{type:"button",onClick:()=>t(`/console/settings/groups/${G.id}/members`),className:"absolute inset-0 z-10 w-full h-full cursor-pointer focus:outline-none",title:"Manage Group Members"}),e.jsxs("div",{className:"relative z-20 flex items-start justify-between gap-3 pointer-events-none",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900 group-hover:text-emerald-700 transition-colors",children:G.name}),e.jsx(oa,{label:G.visibility,tone:"neutral"}),e.jsx(oa,{label:G.taggingEnforced?"Tag required":"Tag optional",tone:G.taggingEnforced?"warn":"neutral"}),G.status==="Inactive"&&e.jsx(oa,{label:"Inactive",tone:"bad"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:G.description}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Members: ",A(G.id)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 pointer-events-auto",children:[e.jsx("button",{onClick:ve=>{ve.stopPropagation(),y(G.id)},className:br("grid h-8 w-8 place-items-center rounded-xl bg-slate-50 hover:bg-emerald-50 hover:text-emerald-600 transition",j===G.id?"text-emerald-600 bg-emerald-50":"text-slate-400"),title:"Preview Details",children:e.jsx(rt,{className:"h-4 w-4"})}),e.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-xl bg-slate-50 text-slate-400",children:e.jsx(ue,{className:"h-4 w-4"})})]})]})]},G.id))}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Group details"}),e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:f.description}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(oa,{label:`Visibility: ${f.visibility}`,tone:"neutral"}),e.jsx(oa,{label:`Members: ${A(f.id)}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"If tagging is enforced, purchases and payouts require cost center and tags before approval."})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(da,{variant:f.taggingEnforced?"primary":"outline",onClick:()=>P(f.id),children:[e.jsx(dm,{className:"h-4 w-4"})," ",f.taggingEnforced?"Enforced":"Enforce tags"]}),e.jsxs(da,{variant:"outline",onClick:()=>t(`/console/settings/groups/${f.id}/members`),children:[e.jsx(ue,{className:"h-4 w-4"})," Manage members"]})]})]})]})}),e.jsx(Wf,{title:"Cost centers",subtitle:"Defaults, spend limits, and tag requirements",right:e.jsx(oa,{label:I?`Default: ${I.code}`:"No default",tone:I?"info":"warn"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx("div",{className:"space-y-2",children:a.map(G=>e.jsx("div",{className:br("rounded-3xl border border-slate-200 bg-white p-4",G.id===f.defaultCostCenterId?"ring-2 ring-emerald-100 border-emerald-200":""),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:G.code}),e.jsx(oa,{label:G.name,tone:"neutral"}),G.id===f.defaultCostCenterId?e.jsx(oa,{label:"Default",tone:"info"}):null,e.jsx(oa,{label:G.tagsRequired?"Tags required":"Tags optional",tone:G.tagsRequired?"warn":"neutral"})]}),typeof G.spendLimitUGX=="number"?e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Limit: ",X1(G.spendLimitUGX)]}):e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"No limit configured"})]}),e.jsx(da,{variant:"outline",onClick:()=>t(`/console/settings/groups/cost-centers/${G.id}/edit`),className:"px-3 py-2",children:e.jsx(ue,{className:"h-4 w-4"})})]})},G.id))}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Cost center preview"}),I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:[I.name," (",I.code,")"]}),typeof I.spendLimitUGX=="number"?e.jsxs("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Spend limit"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:X1(I.spendLimitUGX)}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Tag requirement: ",I.tagsRequired?"Required":"Optional"]})]}):null,e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(da,{variant:"outline",onClick:()=>h({kind:"info",title:"Set default",message:"This would set default for the group."}),children:[e.jsx(ue,{className:"h-4 w-4"})," Set default"]}),e.jsxs(da,{variant:"outline",onClick:()=>t(`/console/settings/groups/cost-centers/${I.id}/edit`),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit"]})]})]}):e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"No default cost center assigned for this group."})]})]})}),e.jsx(Wf,{title:"Mapping rules",subtitle:"Automatic mapping from module/vendor to cost center",right:e.jsx(oa,{label:`${l.length} rule(s)`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[l.map(G=>e.jsx("div",{className:br("rounded-3xl border border-slate-200 bg-white p-4",G.default?"ring-2 ring-emerald-100 border-emerald-200":""),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:G.rule}),e.jsx(oa,{label:` ${M(G.targetCostCenterId)}`,tone:"neutral"}),G.default?e.jsx(oa,{label:"Default",tone:"info"}):null]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:G.note})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(da,{variant:"outline",className:"px-3 py-2",onClick:()=>k(G.id),title:"Set default",children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(da,{variant:"outline",className:"px-3 py-2",onClick:()=>t("/console/admin"),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},G.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(da,{variant:"primary",onClick:()=>{z("Mapping"),C(!0)},children:[e.jsx(ft,{className:"h-4 w-4"})," Add mapping"]}),e.jsxs(da,{variant:"outline",onClick:()=>t("/console/settings/simulate"),children:[e.jsx(ue,{className:"h-4 w-4"})," Simulate"]}),e.jsxs(da,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced"]})]})]})})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tagging enforcement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Visibility and compliance on spend"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:br("rounded-3xl border p-4",f.taggingEnforced?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:br("grid h-10 w-10 place-items-center rounded-2xl",f.taggingEnforced?"bg-white text-emerald-700":"bg-white text-amber-800"),children:f.taggingEnforced?e.jsx(et,{className:"h-5 w-5"}):e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:f.taggingEnforced?"Enforced":"Not enforced"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Cost center tags ",f.taggingEnforced?"required":"optional"," for this group."]})]})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Policies can block out-of-policy purchases if cost center is missing. Approval workflows can request attestation."})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(da,{variant:"outline",onClick:()=>t("/console/settings/policies"),children:[e.jsx(ue,{className:"h-4 w-4"})," Policy builder"]}),e.jsxs(da,{variant:"outline",onClick:()=>t("/console/settings/approvals/workflows"),children:[e.jsx(ue,{className:"h-4 w-4"})," Approval builder"]})]})]})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:ih.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium segmentation"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Cost centers create clear accountability across modules."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(oa,{label:"Defaults",tone:"neutral"}),e.jsx(oa,{label:"Mappings",tone:"neutral"}),e.jsx(oa,{label:"Enforcement",tone:"neutral"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(da,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]})})]})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use mapping rules to auto-apply correct cost centers and reduce approval delays."})]})]}),e.jsxs(da,{variant:"primary",onClick:()=>C(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})]})})]})]})}),e.jsx(p_,{open:b,title:`Add ${S}`,subtitle:"Create groups, cost centers, or mapping rules",onClose:()=>C(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Changes are audited."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(da,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsxs(da,{variant:"primary",onClick:L,children:[e.jsx(He,{className:"h-4 w-4"})," Create"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Type"}),e.jsx("div",{className:"mt-3",children:e.jsx(Y1,{value:S,onChange:G=>z(G),options:["Group","Cost Center","Mapping"]})}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Name"}),e.jsx("div",{className:"mt-1",children:e.jsx($c,{value:$,onChange:D,placeholder:S==="Cost Center"?"Marketing":"Operations"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Description / Note"}),e.jsx("div",{className:"mt-1",children:e.jsx($c,{value:W,onChange:he,placeholder:"Description"})})]}),S==="Cost Center"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Code"}),e.jsx("div",{className:"mt-1",children:e.jsx($c,{value:V,onChange:xe,placeholder:"MKT-002"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Spend limit (UGX)"}),e.jsx("div",{className:"mt-1",children:e.jsx($c,{value:pe,onChange:be,placeholder:"1000000"})})]})]}):null,S==="Mapping"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Rule"}),e.jsx("div",{className:"mt-1",children:e.jsx($c,{value:fe,onChange:K,placeholder:"Module: CorporatePay"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Target cost center"}),e.jsx("div",{className:"mt-1",children:e.jsx(Y1,{value:re,onChange:q,options:a.map(G=>G.id)})})]})]}):null,e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Use Policy Builder to enforce required cost centers for approvals."})]})})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Preview"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Type"}),e.jsx("span",{className:"font-semibold",children:S})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Name"}),e.jsx("span",{className:"font-semibold",children:$||""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Note"}),e.jsx("span",{className:"font-semibold",children:W})]}),S==="Cost Center"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Code"}),e.jsx("span",{className:"font-semibold",children:V})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Limit"}),e.jsxs("span",{className:"font-semibold",children:["UGX ",pe]})]})]}):null,S==="Mapping"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Rule"}),e.jsx("span",{className:"font-semibold",children:fe})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Target"}),e.jsx("span",{className:"font-semibold",children:M(re)})]})]}):null]})]})]})})]}):e.jsx("div",{className:"p-10",children:"Loading Groups..."})}const Hf="cpay_roles_v1",Kf="cpay_dual_v1",Xf="cpay_thresholds_v1",Yf=[{role:"Owner",summary:"Full control of org wallet and policies",permissions:["View wallet","Pay","Request","Approve","Withdraw","Manage beneficiaries","Batch payouts","Refunds","Export reports","Manage users","Manage policies"]},{role:"Admin",summary:"Manage users and policies",permissions:["View wallet","Pay","Request","Approve","Withdraw","Manage beneficiaries","Export reports","Manage users","Manage policies"]},{role:"Finance",summary:"Payout operations and reconciliation",permissions:["View wallet","Pay","Request","Approve","Withdraw","Manage beneficiaries","Batch payouts","Export reports"]},{role:"Approver",summary:"Approve purchases and payouts",permissions:["View wallet","Approve","Pay","Request"]},{role:"Member",summary:"Create requests and view own items",permissions:["View wallet","Request","Pay"]},{role:"Viewer",summary:"Read-only access",permissions:["View wallet"]}],Qf=[{key:"Beneficiary edits",enabled:!0,note:"Require second approval for beneficiary changes"},{key:"Batch payouts",enabled:!0,note:"Maker-checker required for CSV batch payouts"},{key:"Refund approvals",enabled:!1,note:"Optional dual-control for refunds"},{key:"Policy changes",enabled:!0,note:"Any policy change requires dual-control"},{key:"Role changes",enabled:!0,note:"Role assignments require approval"},{key:"High value payouts",enabled:!0,note:"Extra approvals for payouts above threshold"}],Jf=[{id:"T-1",label:"Purchases",currency:"UGX",threshold:5e5,approvers:2,appliesTo:["Purchases"]},{id:"T-2",label:"Payouts",currency:"UGX",threshold:3e5,approvers:2,appliesTo:["Payouts"]},{id:"T-3",label:"Refunds",currency:"UGX",threshold:15e4,approvers:1,appliesTo:["Refunds"]}],Da={getRoles:()=>{try{const t=localStorage.getItem(Hf);return t?JSON.parse(t):(localStorage.setItem(Hf,JSON.stringify(Yf)),Yf)}catch{return Yf}},getRole:t=>Da.getRoles().find(a=>a.role===t),updateRole:(t,s)=>{const a=Da.getRoles(),l=a.findIndex(n=>n.role===t);l!==-1&&(a[l]={...a[l],...s},localStorage.setItem(Hf,JSON.stringify(a)),window.dispatchEvent(new Event("role-storage-update")))},getDualRules:()=>{try{const t=localStorage.getItem(Kf);return t?JSON.parse(t):(localStorage.setItem(Kf,JSON.stringify(Qf)),Qf)}catch{return Qf}},updateDualRule:(t,s)=>{const a=Da.getDualRules(),l=a.findIndex(n=>n.key===t);l!==-1&&(a[l]={...a[l],enabled:s},localStorage.setItem(Kf,JSON.stringify(a)),window.dispatchEvent(new Event("role-storage-update")))},getThresholds:()=>{try{const t=localStorage.getItem(Xf);return t?JSON.parse(t):(localStorage.setItem(Xf,JSON.stringify(Jf)),Jf)}catch{return Jf}},updateThreshold:(t,s)=>{const a=Da.getThresholds(),l=a.findIndex(n=>n.id===t);l!==-1&&(a[l]={...a[l],...s},localStorage.setItem(Xf,JSON.stringify(a)),window.dispatchEvent(new Event("role-storage-update")))}};function h_(){const[t,s]=c.useState(Da.getRoles());return c.useEffect(()=>{const a=()=>s(Da.getRoles());return window.addEventListener("role-storage-update",a),()=>window.removeEventListener("role-storage-update",a)},[]),{roles:t,updateRole:Da.updateRole}}function f_(t){const[s,a]=c.useState(t?Da.getRole(t):void 0);return c.useEffect(()=>{if(!t)return;a(Da.getRole(t));const l=()=>a(Da.getRole(t));return window.addEventListener("role-storage-update",l),()=>window.removeEventListener("role-storage-update",l)},[t]),{role:s,updateRole:l=>t&&Da.updateRole(t,l)}}function g_(){const[t,s]=c.useState(Da.getDualRules());return c.useEffect(()=>{const a=()=>s(Da.getDualRules());return window.addEventListener("role-storage-update",a),()=>window.removeEventListener("role-storage-update",a)},[]),{dualRules:t,updateDualRule:Da.updateDualRule}}function v_(){const[t,s]=c.useState(Da.getThresholds());return c.useEffect(()=>{const a=()=>s(Da.getThresholds());return window.addEventListener("role-storage-update",a),()=>window.removeEventListener("role-storage-update",a)},[]),{thresholds:t,updateThreshold:Da.updateThreshold}}const oh={green:"#03CD8C",orange:"#F77F00"};function jr(...t){return t.filter(Boolean).join(" ")}function b_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Zf(t,s){const a=Math.abs(t),n=s==="UGX"?0:2,r=a.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n});return`${s} ${r}`}function Ns({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:jr("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function j_(t){return t==="Active"?"good":t==="Deposit depleted"||t==="Needs verification"?"warn":"bad"}function ga({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:oh.green}:t==="accent"?{background:oh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:jr(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function y_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:jr("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function yx({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function N_({open:t,title:s,subtitle:a,onClose:l,children:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?l():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,l]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:l,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:n}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function Q1({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l,children:l},l))})}function gA(){const t=ot(),[s,a]=c.useState([]),l=K=>{const re=b_("toast");a(q=>[{id:re,...K},...q].slice(0,4)),window.setTimeout(()=>a(q=>q.filter(L=>L.id!==re)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin",status:"Active"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer",status:"Deposit depleted"}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(K=>K.id===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),{roles:u}=h_(),{dualRules:x,updateDualRule:p}=g_(),{thresholds:h,updateThreshold:j}=v_(),[y,f]=c.useState("Admin"),I=c.useMemo(()=>u.find(K=>K.role===y)||u[0],[u,y]),[A,b]=c.useState([{key:"Beneficiary edits",enabled:!0,note:"Require second approval for beneficiary changes"},{key:"Batch payouts",enabled:!0,note:"Maker-checker required for CSV batch payouts"},{key:"Refund approvals",enabled:!1,note:"Optional dual-control for refunds"},{key:"Policy changes",enabled:!0,note:"Any policy change requires dual-control"},{key:"Role changes",enabled:!0,note:"Role assignments require approval"},{key:"High value payouts",enabled:!0,note:"Extra approvals for payouts above threshold"}]),[C]=c.useState([{id:"A-1",when:"Today 08:10",actor:"Ronald",action:"Role change",target:"procurement@acme.ug  Approver",outcome:"Success",why:"Admin role"},{id:"A-2",when:"Today 07:55",actor:"Finance Desk",action:"Policy update",target:"Approval threshold to UGX 500,000",outcome:"Success",why:"Dual-control satisfied"},{id:"A-3",when:"Yesterday",actor:"Auditor",action:"Export",target:"Statement PDF (30D)",outcome:"Success",why:"Viewer allowed exports disabled"},{id:"A-4",when:"Last week",actor:"Unknown",action:"Beneficiary edit",target:"Attempted add bank account",outcome:"Blocked",why:"Step-up and dual-control required"}]),S=K=>{const re=x.find(q=>q.key===K);re&&(p(K,!re.enabled),l({kind:"success",title:"Rule updated"}))},[z,$]=c.useState(!1),[D,W]=c.useState("T-1"),[he,V]=c.useState("500000"),[xe,pe]=c.useState("2");c.useEffect(()=>{const K=h.find(re=>re.id===D);K&&(V(String(K.threshold)),pe(String(K.approvers)))},[D,h]);const be=()=>{const K=Number(he.replace(/[^0-9]/g,""))||0,re=Number(xe.replace(/[^0-9]/g,""))||1;j(D,{threshold:K,approvers:Math.max(1,Math.min(5,re))}),$(!1),l({kind:"success",title:"Threshold updated"})},fe=async K=>{try{await navigator.clipboard.writeText(K),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed",message:"Clipboard access blocked."})}};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(y_,{toasts:s,onDismiss:K=>a(re=>re.filter(q=>q.id!==K))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:oh.green},children:e.jsx(YL,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Roles, Permissions & Governance"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Dual-control, thresholds, and audit trail"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ns,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Ns,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Ns,{label:o.status,tone:j_(o.status)}),e.jsx(Ns,{label:d?"Can manage policies":"View only",tone:d?"good":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(Q1,{value:r,onChange:i,options:n.map(K=>K.name)})}),e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/wallet-switch"),children:[e.jsx(ue,{className:"h-4 w-4"})," Switch"]}),e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(ga,{variant:"primary",disabled:!d,title:d?"Save":"Admin role required",onClick:()=>l({kind:"success",title:"Saved",message:"Governance settings saved."}),children:[e.jsx(lt,{className:"h-4 w-4"})," Save"]})]})]}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"View-only access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Editing roles and policies requires Admin or Finance role. Use deep links to request access."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ga,{variant:"accent",onClick:()=>t("/console/access-request"),children:[e.jsx(ue,{className:"h-4 w-4"})," Request access"]}),e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/settings/support-tools"),children:[e.jsx(ue,{className:"h-4 w-4"})," Contact Admin"]})]})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(yx,{title:"Roles",subtitle:"Standard roles with granular permissions",right:e.jsx(Ns,{label:I.role,tone:"info"}),children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:u.map(K=>e.jsxs("button",{type:"button",onClick:()=>t(`/console/settings/roles/${K.role}/edit`),className:jr("rounded-3xl border bg-white p-4 text-left transition-all duration-200","hover:shadow-[0_8px_30px_rgb(0,0,0,0.12)] hover:border-emerald-300 hover:-translate-y-1","shadow-[0_2px_8px_rgba(0,0,0,0.08)]",y===K.role?"border-emerald-200 ring-2 ring-emerald-100":"border-slate-200"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:K.role}),e.jsx(Ns,{label:`${K.permissions.length} perms`,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:K.summary})]}),e.jsx("div",{className:jr("grid h-10 w-10 place-items-center rounded-2xl",y===K.role?"bg-emerald-50 text-emerald-700":"bg-slate-50 text-slate-700"),children:e.jsx(Vs,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[K.permissions.slice(0,3).map(re=>e.jsx(Ns,{label:re,tone:"neutral"},re)),K.permissions.length>3?e.jsx(Ns,{label:`+${K.permissions.length-3} more`,tone:"neutral"}):null]})]},K.role))}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Permission details"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Role: ",I.role]})]}),e.jsxs(ga,{variant:"outline",onClick:()=>t(`/console/settings/roles/${I.role}/edit`),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit Permissions"]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:I.permissions.map(K=>e.jsx(Ns,{label:K,tone:K.includes("Manage")?"info":"neutral"},K))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Governance health"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"A quick view of protections"}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Dual-control"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Enabled for high-risk actions"}),e.jsx(Ns,{label:`${x.filter(K=>K.enabled).length} rules enabled`,tone:"info"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(Ra,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Thresholds"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Approval required above thresholds"}),e.jsx("div",{className:"mt-2",children:e.jsx(Ns,{label:`${h.length} threshold rules`,tone:"neutral"})})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(lA,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:jr("rounded-3xl border p-4",d?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:jr("grid h-10 w-10 place-items-center rounded-2xl",d?"bg-white text-emerald-700":"bg-white text-amber-800"),children:d?e.jsx(et,{className:"h-5 w-5"}):e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Admin controls"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:d?"You can edit governance":"Request Admin access to edit"}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:e.jsxs(ga,{variant:d?"outline":"accent",onClick:()=>t(d?"/console/admin":"/console/access-request"),children:[e.jsx(ue,{className:"h-4 w-4"})," ",d?"Open Admin":"Request access"]})})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Exports and reporting"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Audit-ready exports and receipts"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/reports"),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]}),e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/invoices"),children:[e.jsx(ue,{className:"h-4 w-4"})," Statements"]})]})]})]})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:oh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium governance"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Dual-control and audit trail reduce fraud and policy drift."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(Ns,{label:"Dual-control",tone:"neutral"}),e.jsx(Ns,{label:"Audit trail",tone:"neutral"}),e.jsx(Ns,{label:"Thresholds",tone:"neutral"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open Admin"]})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsxs(yx,{title:"Dual-control rules",subtitle:"Maker-checker for sensitive actions",right:e.jsx(Ns,{label:`${x.filter(K=>K.enabled).length}/${x.length} enabled`,tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:x.map(K=>e.jsx("div",{className:jr("rounded-3xl border p-4",K.enabled?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:K.key}),e.jsx(Ns,{label:K.enabled?"Enabled":"Disabled",tone:K.enabled?"good":"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:K.note})]}),e.jsx(ga,{variant:K.enabled?"primary":"outline",disabled:!d,title:d?"Toggle":"Admin role required",onClick:()=>S(K.key),className:"px-3 py-2",children:K.enabled?"ON":"OFF"})]})},K.key))}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Dual-control actions create an immutable audit trail with both decisions."})]})})]}),e.jsx(yx,{title:"Approval thresholds",subtitle:"Approval required above threshold",right:e.jsx(Ns,{label:`${h.length} rules`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:h.map(K=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:K.label}),e.jsx(Ns,{label:K.currency,tone:"neutral"}),e.jsx(Ns,{label:`${K.approvers} approver(s)`,tone:"info"}),e.jsx(Ns,{label:`Above ${Zf(K.threshold,K.currency)}`,tone:"warn"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Applies to: ",K.appliesTo.join(", ")]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ga,{variant:"outline",disabled:!d,title:d?"Edit":"Admin role required",onClick:()=>{W(K.id),$(!0)},children:[e.jsx(ue,{className:"h-4 w-4"})," Edit"]}),e.jsxs(ga,{variant:"outline",onClick:()=>fe(`${K.label} ${Zf(K.threshold,K.currency)} ${K.approvers}`),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy"]})]})]})},K.id))})})]}),e.jsx(yx,{title:"Audit trail",subtitle:"Recent policy and permission changes",right:e.jsx(Ns,{label:`${C.length}`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:C.map(K=>e.jsxs("div",{className:jr("rounded-3xl border p-4",K.outcome==="Blocked"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:K.action}),e.jsx(Ns,{label:K.outcome,tone:K.outcome==="Blocked"?"warn":"good"}),e.jsx(Ns,{label:K.actor,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:K.target}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[K.when,"  ",K.why]})]}),e.jsx(ga,{variant:"outline",onClick:()=>t("/console/settings/security"),className:"px-3 py-2",children:e.jsx(ue,{className:"h-4 w-4"})})]}),K.outcome==="Blocked"?e.jsx("div",{className:"mt-3 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(at,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Blocked by governance"}),e.jsx("div",{className:"mt-1 text-xs text-amber-800",children:K.why})]})]})}):null]},K.id))})})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Enable dual-control for beneficiary edits and batch payouts to reduce payout fraud."})]})]}),e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/settings/support-tools"),children:[e.jsx(ue,{className:"h-4 w-4"})," Support"]})]})})]})]})}),e.jsx(N_,{open:z,title:"Edit approval threshold",subtitle:"Adjust threshold amount and approver count",onClose:()=>$(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Changes are audited."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ga,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsxs(ga,{variant:"primary",disabled:!d,title:d?"Save":"Admin role required",onClick:be,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Threshold"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Rule"}),e.jsx("div",{className:"mt-1",children:e.jsx(Q1,{value:D,onChange:W,options:h.map(K=>K.id)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Amount"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:he,onChange:K=>V(K.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"500000"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Approvers"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:xe,onChange:K=>pe(K.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"2"})}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Allowed range: 1 to 5"})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Preview"}),e.jsx("div",{className:"mt-3 space-y-2 text-sm text-slate-700",children:(()=>{const K=h.find(L=>L.id===D);if(!K)return null;const re=Number(he.replace(/[^0-9]/g,""))||K.threshold,q=Number(xe.replace(/[^0-9]/g,""))||K.approvers;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Label"}),e.jsx("span",{className:"font-semibold",children:K.label})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Currency"}),e.jsx("span",{className:"font-semibold",children:K.currency})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Threshold"}),e.jsx("span",{className:"font-semibold",children:Zf(re,K.currency)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Approvers"}),e.jsx("span",{className:"font-semibold",children:Math.max(1,Math.min(5,q))})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Transactions above this threshold will require approvals. Policy reasons show in receipt drawer."})]})})]})})()}),e.jsx("div",{className:"mt-4",children:e.jsxs(ga,{variant:"outline",onClick:()=>t("/console/admin"),children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced rules"]})})]})]})})]})}const dh={green:"#03CD8C",orange:"#F77F00"};function cm(...t){return t.filter(Boolean).join(" ")}function w_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function eg(t){return`UGX ${Math.abs(t).toLocaleString(void 0,{maximumFractionDigits:0})}`}function Aa({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:cm("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function k_(t){return t==="Active"?"good":t==="Deposit depleted"||t==="Needs verification"?"warn":"bad"}function J1(t){return t==="Allow"?"good":t==="Require approval"?"info":t==="Require attestation"?"warn":"bad"}function Ul({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"},d=t==="primary"?{background:dh.green}:t==="accent"?{background:dh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:cm(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function C_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:cm("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function tg({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function S_({open:t,title:s,subtitle:a,onClose:l,children:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?l():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,l]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:l,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:n}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function Yo({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l,children:l},l))})}function sg({value:t,onChange:s,placeholder:a}){return e.jsx("input",{value:t,onChange:l=>s(l.target.value),placeholder:a,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-emerald-100"})}function A_(t,s){for(const a of s.when){const l=a.value.toLowerCase(),r=(a.key==="Module"?t.module:a.key==="Marketplace"?t.marketplace:a.key==="Vendor"?t.vendor:a.key==="Country"?t.country:a.key==="Cost center"?t.costCenter:a.key==="Amount"?String(t.amountUGX):a.key==="Currency"?"UGX":"").toLowerCase();if(a.op==="is"&&r!==l||a.op==="contains"&&!r.includes(l)||a.op==="gte"&&Number(r)<Number(l)||a.op==="lte"&&Number(r)>Number(l)||a.op==="in"&&!l.split(",").map(o=>o.trim()).includes(r))return!1}return!0}function vA(){const t=ot(),[s,a]=c.useState([]),l=q=>{const L=w_("toast");a(M=>[{id:L,...q},...M].slice(0,4)),window.setTimeout(()=>a(M=>M.filter(k=>k.id!==L)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin",status:"Active"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer",status:"Deposit depleted"}],[]),[r,i]=c.useState(n[0].name),o=c.useMemo(()=>n.find(q=>q.name===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),[u,x]=c.useState([{id:"PR-1",name:"CorporatePay high value requires approval",status:"Active",priority:1,when:[{key:"Module",op:"is",value:"CorporatePay"},{key:"Amount",op:"gte",value:"500000"}],then:{action:"Require approval",reason:"Above approval threshold",outOfPolicyHandling:"Route to approval"},lastEdited:"Today"},{id:"PR-2",name:"Missing cost center blocks",status:"Active",priority:2,when:[{key:"Cost center",op:"is",value:""},{key:"Module",op:"in",value:"CorporatePay,Marketplace"}],then:{action:"Block",reason:"Cost center is required",outOfPolicyHandling:"Stop"},lastEdited:"Yesterday"},{id:"PR-3",name:"Large refunds require attachment",status:"Active",priority:3,when:[{key:"Module",op:"is",value:"E-Commerce"},{key:"Amount",op:"gte",value:"150000"}],then:{action:"Require attestation",reason:"Large refund needs evidence",requireAttachment:!0,attachmentType:"Refund proof",attachmentThresholdUGX:15e4,outOfPolicyHandling:"Allow with attestation"},lastEdited:"Last week"},{id:"PR-4",name:"Blocked vendor list",status:"Draft",priority:10,when:[{key:"Vendor",op:"contains",value:"banned"}],then:{action:"Block",reason:"Vendor is blocked",outOfPolicyHandling:"Stop"},lastEdited:"Draft"}]),[p,h]=c.useState("ALL"),[j,y]=c.useState(""),f=c.useMemo(()=>{const q=j.trim().toLowerCase();return u.filter(L=>p==="ALL"?!0:L.status===p).filter(L=>q?`${L.id} ${L.name}`.toLowerCase().includes(q):!0).sort((L,M)=>L.priority-M.priority)},[u,p,j]),[I,A]=c.useState({module:"CorporatePay",marketplace:"EVmart",vendor:"Acme Supplies",amountUGX:54e4,country:"Uganda",costCenter:"CC-PROC"}),b=c.useMemo(()=>{const L=u.filter(P=>P.status==="Active").sort((P,Y)=>P.priority-Y.priority).find(P=>A_(I,P));if(!L)return{decision:"Allow",reason:"No matching policy"};const M=L.then.requireAttachment?`${L.then.attachmentType??"Attachment"} above ${eg(L.then.attachmentThresholdUGX??0)}`:void 0,k=L.then.outOfPolicyHandling==="Route to approval"?"Approval workflow":L.then.outOfPolicyHandling==="Allow with attestation"?"Attestation + record":"Stop";return{decision:L.then.action,reason:L.then.reason,matchedRule:L.name,attachmentsRequired:M,route:k}},[u,I]),[C,S]=c.useState(!1),[z,$]=c.useState("New policy"),[D,W]=c.useState("Require approval"),[he,V]=c.useState("CorporatePay"),[xe,pe]=c.useState("500000"),be=()=>{if(!z.trim()){l({kind:"warn",title:"Name required"});return}const q=`PR-${Math.floor(10+Math.random()*90)}`;x(L=>[{id:q,name:z.trim(),status:"Draft",priority:Math.max(...L.map(M=>M.priority))+1,when:[{key:"Module",op:"is",value:he},{key:"Amount",op:"gte",value:xe}],then:{action:D,reason:"New rule",outOfPolicyHandling:D==="Block"?"Stop":D==="Require attestation"?"Allow with attestation":"Route to approval"},lastEdited:"Just now"},...L]),S(!1),l({kind:"success",title:"Policy created",message:q})},fe=q=>{if(!d){l({kind:"warn",title:"Admin required"});return}x(L=>L.map(M=>M.id===q?{...M,status:M.status==="Active"?"Archived":"Active",lastEdited:"Just now"}:M)),l({kind:"success",title:"Status updated"})},K=q=>t(`/console/settings/policies/${q}/edit`),re=async q=>{try{await navigator.clipboard.writeText(q),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed",message:"Clipboard access blocked."})}};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(C_,{toasts:s,onDismiss:q=>a(L=>L.filter(M=>M.id!==q))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:dh.green},children:e.jsx(kb,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Policy Builder"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Rule engine by module, marketplace, and vendor"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Aa,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Aa,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Aa,{label:o.status,tone:k_(o.status)}),e.jsx(Aa,{label:`${f.length} rules`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(Yo,{value:r,onChange:i,options:n.map(q=>q.name)})}),e.jsxs(Ul,{variant:"primary",disabled:!d,title:d?"Add":"Admin required",onClick:()=>S(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," New policy"]})]})]}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"View-only access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Editing policies requires Admin or Finance role."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsx(tg,{title:"Rules",subtitle:"Priority order matters. First match wins.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[160px]",children:e.jsx(Yo,{value:p,onChange:q=>h(q),options:["ALL","Draft","Active","Archived"]})}),e.jsx("div",{className:"min-w-[220px]",children:e.jsx("input",{value:j,onChange:q=>y(q.target.value),placeholder:"Search rules",className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none focus:ring-4 focus:ring-emerald-100"})})]}),children:e.jsxs("div",{className:"space-y-2",children:[f.map(q=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:q.name}),e.jsx(Aa,{label:q.id,tone:"neutral"}),e.jsx(Aa,{label:q.status,tone:q.status==="Active"?"good":q.status==="Draft"?"warn":"neutral"}),e.jsx(Aa,{label:`Priority ${q.priority}`,tone:"neutral"}),e.jsx(Aa,{label:q.then.action,tone:J1(q.then.action)})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Then: ",q.then.reason]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[q.when.slice(0,3).map((L,M)=>e.jsx(Aa,{label:`${L.key} ${L.op} ${L.value||"(empty)"}`,tone:"neutral"},M)),q.when.length>3?e.jsx(Aa,{label:`+${q.when.length-3} more`,tone:"neutral"}):null]}),q.then.requireAttachment?e.jsx("div",{className:"mt-2 rounded-2xl border border-amber-200 bg-amber-50 p-3 text-xs text-amber-900",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(at,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:["Attachment required: ",q.then.attachmentType," above ",eg(q.then.attachmentThresholdUGX??0)]})]})}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ul,{variant:"outline",onClick:()=>re(q.id),className:"px-3 py-2",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsxs(Ul,{variant:"outline",onClick:()=>K(q.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit"]}),e.jsx(Ul,{variant:q.status==="Active"?"outline":"primary",disabled:!d,title:d?"Toggle":"Admin required",onClick:()=>fe(q.id),children:q.status==="Active"?"Archive":"Activate"})]})]})},q.id)),f.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No rules match."})]})}),e.jsxs(tg,{title:"Out-of-policy handling",subtitle:"Stop, allow with attestation, or route to approval",right:e.jsx(Aa,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Stop"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Block transaction until fixed"}),e.jsx("div",{className:"mt-3",children:e.jsx(Aa,{label:"Hard enforcement",tone:"warn"})})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Attestation"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Allow with user justification and record"}),e.jsx("div",{className:"mt-3",children:e.jsx(Aa,{label:"Audit-ready",tone:"info"})})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Route to approval"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Send to approvals and escalation"}),e.jsx("div",{className:"mt-3",children:e.jsx(Aa,{label:"Maker-checker",tone:"info"})})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Policy reasons show in the receipt drawer as enforcement details."})]})})]})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(tg,{title:"Scenario simulation",subtitle:"What happens if...",right:e.jsx(Aa,{label:b.decision,tone:J1(b.decision)}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Module"}),e.jsx("div",{className:"mt-2",children:e.jsx(Yo,{value:I.module,onChange:q=>A(L=>({...L,module:q})),options:["CorporatePay","E-Commerce","Services","EV Charging","Rides & Logistics","Shoppable Adz"]})}),e.jsx("div",{className:"mt-3 text-xs font-semibold text-slate-600",children:"Marketplace"}),e.jsx("div",{className:"mt-2",children:e.jsx(Yo,{value:I.marketplace,onChange:q=>A(L=>({...L,marketplace:q})),options:["EVmart","ServiceMart","GeneralMart"]})}),e.jsx("div",{className:"mt-3 text-xs font-semibold text-slate-600",children:"Vendor"}),e.jsx("div",{className:"mt-2",children:e.jsx(sg,{value:I.vendor,onChange:q=>A(L=>({...L,vendor:q})),placeholder:"Vendor"})}),e.jsx("div",{className:"mt-3 text-xs font-semibold text-slate-600",children:"Amount (UGX)"}),e.jsx("div",{className:"mt-2",children:e.jsx(sg,{value:String(I.amountUGX),onChange:q=>A(L=>({...L,amountUGX:Number(q.replace(/[^0-9]/g,""))||0})),placeholder:"540000"})}),e.jsx("div",{className:"mt-3 text-xs font-semibold text-slate-600",children:"Cost center"}),e.jsx("div",{className:"mt-2",children:e.jsx(sg,{value:I.costCenter,onChange:q=>A(L=>({...L,costCenter:q})),placeholder:"CC-PROC"})})]}),e.jsxs("div",{className:cm("rounded-3xl border p-4",b.decision==="Allow"?"border-emerald-200 bg-emerald-50":b.decision==="Block"?"border-rose-200 bg-rose-50":"border-amber-200 bg-amber-50"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:cm("grid h-10 w-10 place-items-center rounded-2xl",b.decision==="Allow"?"bg-white text-emerald-700":b.decision==="Block"?"bg-white text-rose-700":"bg-white text-amber-800"),children:b.decision==="Allow"?e.jsx(et,{className:"h-5 w-5"}):e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Decision: ",b.decision]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:b.reason}),b.matchedRule?e.jsxs("div",{className:"mt-2 text-xs text-slate-700",children:["Matched: ",b.matchedRule]}):null,b.attachmentsRequired?e.jsxs("div",{className:"mt-2 text-xs text-slate-700",children:["Attachments: ",b.attachmentsRequired]}):null,b.route?e.jsxs("div",{className:"mt-2 text-xs text-slate-700",children:["Route: ",b.route]}):null]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ul,{variant:"outline",onClick:()=>t("/console/settings/approvals/workflows"),children:[e.jsx(ue,{className:"h-4 w-4"})," Approvals"]}),e.jsxs(Ul,{variant:"outline",onClick:()=>t(`/console/receipt/${I.vendor.replace(/\s+/g,"-").toLowerCase()}`),children:[e.jsx(ue,{className:"h-4 w-4"})," Receipt"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use simulation to validate changes before activating policies."}),e.jsx("div",{className:"mt-3",children:e.jsxs(Ul,{variant:"outline",onClick:()=>t("/console/settings/policies/scenarios"),children:[e.jsx(ue,{className:"h-4 w-4"})," Scenario suite"]})})]})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:dh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium policy control"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Out-of-policy handling, attestations, and attachment thresholds."}),e.jsx("div",{className:"mt-3",children:e.jsxs(Ul,{variant:"outline",onClick:()=>t("/console/settings/policies/scenarios"),children:[e.jsx(ue,{className:"h-4 w-4"})," Policy Scenarios"]})})]})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Keep policies simple and predictable. Put exceptions behind attestations and approvals."})]})]}),e.jsxs(Ul,{variant:"primary",disabled:!d,title:d?"New":"Admin required",onClick:()=>S(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," New policy"]})]})})]})]})}),e.jsx(S_,{open:C,title:"Create policy",subtitle:"Draft rule with basic conditions",onClose:()=>S(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Draft policies must be reviewed before activation."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ul,{variant:"outline",onClick:()=>S(!1),children:"Cancel"}),e.jsxs(Ul,{variant:"primary",onClick:be,children:[e.jsx(He,{className:"h-4 w-4"})," Create"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Draft"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:z,onChange:q=>$(q.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Module"}),e.jsx("div",{className:"mt-1",children:e.jsx(Yo,{value:he,onChange:V,options:["CorporatePay","E-Commerce","Services","EV Charging","Rides & Logistics","Shoppable Adz"]})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Amount gte (UGX)"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{value:xe,onChange:q=>pe(q.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Action"}),e.jsx("div",{className:"mt-1",children:e.jsx(Yo,{value:D,onChange:q=>W(q),options:["Allow","Require approval","Require attestation","Block"]})})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Out-of-policy handling is chosen automatically for the draft, but can be customized in Admin Console."})]})})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Preview"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Name"}),e.jsx("span",{className:"font-semibold",children:z})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Module"}),e.jsx("span",{className:"font-semibold",children:he})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Threshold"}),e.jsx("span",{className:"font-semibold",children:eg(Number(xe.replace(/[^0-9]/g,""))||0)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Decision"}),e.jsx("span",{className:"font-semibold",children:D})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(Aa,{label:"Draft",tone:"warn"})," ",e.jsx(Aa,{label:"Audit-ready",tone:"neutral"})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(Ul,{variant:"outline",onClick:()=>K("new"),children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced editor"]})})]})]})]})})]})}const Nx="corporate_pay_approval_flows",ag=[{id:"F-1",name:"CorporatePay purchases",status:"Active",appliesTo:"Purchases",thresholdCurrency:"UGX",thresholdAmount:1e5,stages:[{id:"S-1",name:"Manager approval",type:"Manager",requiredApprovers:1,delegatesAllowed:!0,escalationAfter:"2h",notifyChannels:["In-app","Email","WhatsApp"],note:"First line approval"},{id:"S-2",name:"Finance approval",type:"Finance",requiredApprovers:1,delegatesAllowed:!0,escalationAfter:"4h",notifyChannels:["In-app","Email","WeChat"],note:"Final approval"}],lastEdited:"Today"}],Rr={getAll:()=>{try{const t=localStorage.getItem(Nx);return t?JSON.parse(t):(localStorage.setItem(Nx,JSON.stringify(ag)),ag)}catch{return ag}},getById:t=>Rr.getAll().find(s=>s.id===t),save:t=>{const s=Rr.getAll(),a=s.findIndex(l=>l.id===t.id);a>=0?s[a]={...t,lastEdited:"Just now"}:s.unshift({...t,lastEdited:"Just now"}),localStorage.setItem(Nx,JSON.stringify(s))},delete:t=>{const s=Rr.getAll().filter(a=>a.id!==t);localStorage.setItem(Nx,JSON.stringify(s))}},ch={green:"#03CD8C",orange:"#F77F00"};function Gy(...t){return t.filter(Boolean).join(" ")}function E_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Z1(t){return`UGX ${Math.abs(t).toLocaleString(void 0,{maximumFractionDigits:0})}`}function Ba({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Gy("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function P_(t){return t==="Active"?"good":t==="Deposit depleted"||t==="Needs verification"?"warn":"bad"}function Ln({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"},d=t==="primary"?{background:ch.green}:t==="accent"?{background:ch.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Gy(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function M_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Gy("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function ek({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function tk({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l,children:l},l))})}function bA(){const t=ot(),[s,a]=c.useState([]),l=b=>{const C=E_("toast");a(S=>[{id:C,...b},...S].slice(0,4)),window.setTimeout(()=>a(S=>S.filter(z=>z.id!==C)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin",status:"Active"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer",status:"Deposit depleted"}],[]),[r,i]=c.useState(n[0].name),o=c.useMemo(()=>n.find(b=>b.name===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),[u,x]=c.useState([]),[p,h]=c.useState(""),j=()=>{const b=Rr.getAll();x(b),b.length>0&&!b.find(C=>C.name===p)&&h(b[0].name)};c.useEffect(()=>{j()},[]),c.useEffect(()=>{const b=()=>j();return window.addEventListener("focus",b),()=>window.removeEventListener("focus",b)},[]);const y=c.useMemo(()=>u.find(b=>b.name===p)||u[0],[u,p]),f=(b="new")=>t(`/console/settings/approvals/workflows/${b}/edit`),I=()=>{if(!d||!y){l({kind:"warn",title:"Admin required"});return}const b={...y,status:y.status==="Active"?"Archived":"Active"};Rr.save(b),j(),l({kind:"success",title:"Status updated"})},A=(b,C)=>{if(!d||!y){l({kind:"warn",title:"Admin required"});return}const S=y.stages.map($=>{if($.id!==b)return $;const D=$.notifyChannels.includes(C);return{...$,notifyChannels:D?$.notifyChannels.filter(W=>W!==C):[...$.notifyChannels,C]}}),z={...y,stages:S};Rr.save(z),j(),l({kind:"success",title:"Channels updated"})};return y?e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(M_,{toasts:s,onDismiss:b=>a(C=>C.filter(S=>S.id!==b))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:ch.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Approval Workflow Builder"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Multi-stage approvals, escalation, delegation, SLA, and channels"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ba,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Ba,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Ba,{label:o.status,tone:P_(o.status)}),e.jsx(Ba,{label:`Flow: ${y.name}`,tone:"neutral"}),e.jsx(Ba,{label:y.status,tone:y.status==="Active"?"good":y.status==="Draft"?"warn":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(tk,{value:r,onChange:i,options:n.map(b=>b.name)})}),e.jsx("div",{className:"min-w-[260px]",children:e.jsx(tk,{value:p,onChange:h,options:u.map(b=>b.name)})}),e.jsxs(Ln,{variant:"primary",disabled:!d,title:d?"New":"Admin required",onClick:()=>f("new"),children:[e.jsx(ft,{className:"h-4 w-4"})," New flow"]})]})]}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"View-only access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Editing flows requires Admin or Finance role."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(ek,{title:"Flow configuration",subtitle:"Stages, thresholds, and eligibility",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ln,{variant:y.status==="Active"?"outline":"primary",disabled:!d,title:d?"Toggle":"Admin required",onClick:I,children:y.status==="Active"?"Archive":"Activate"}),e.jsxs(Ln,{variant:"outline",onClick:()=>f(y.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit"]})]}),children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Auto-approve threshold"}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:y.thresholdCurrency}),e.jsx(Ba,{label:"Auto",tone:"good"}),e.jsx(Ba,{label:`Under ${Z1(y.thresholdAmount)}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Auto-approve transactions under this threshold"})]}),e.jsx(Ln,{variant:"outline",onClick:()=>f(y.id),className:"px-3 py-2",children:e.jsx(ue,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Stages (",y.stages.length,")"]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Multi-stage approvals with escalation and delegation"})]}),e.jsxs(Ln,{variant:"outline",onClick:()=>f(y.id),children:[e.jsx(ft,{className:"h-4 w-4"})," Edit stages"]})]}),e.jsx("div",{className:"mt-3 space-y-2",children:y.stages.map(b=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:b.name}),e.jsx(Ba,{label:b.type,tone:"neutral"}),e.jsx(Ba,{label:`${b.requiredApprovers} approver(s)`,tone:"info"}),e.jsx(Ba,{label:b.delegatesAllowed?"Delegation":"No delegation",tone:"neutral"}),e.jsx(Ba,{label:`Escalate ${b.escalationAfter}`,tone:"warn"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:b.note}),e.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:b.notifyChannels.map(C=>e.jsx(Ba,{label:C,tone:C==="WhatsApp"||C==="WeChat"?"info":"neutral"},C))})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["In-app","Email","WhatsApp","WeChat"].map(C=>e.jsx(Ln,{variant:b.notifyChannels.includes(C)?"primary":"outline",className:"px-3 py-2",disabled:!d,title:d?"Toggle":"Admin required",onClick:()=>A(b.id,C),children:C},C))})]})},b.id))}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Changes to channels are saved immediately. Click Edit to manage stages."})]})})]})]})}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(ek,{title:"Scenario simulation",subtitle:"Test workflow behavior",right:e.jsx(Ba,{label:"Ready",tone:"good"}),children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-3xl border border-emerald-200 bg-emerald-50 p-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-emerald-700",children:e.jsx(pa,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Workflow active"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:[y.stages.length," stage(s) configured"]}),e.jsxs("div",{className:"mt-2 text-xs text-emerald-600",children:["Auto-approve under ",Z1(y.thresholdAmount)]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Ln,{variant:"outline",onClick:()=>t("/console/settings/approvals/workflows/preview"),children:[e.jsx(ue,{className:"h-4 w-4"})," Preview"]}),e.jsxs(Ln,{variant:"outline",onClick:()=>t("/console/receipt/approval-demo"),children:[e.jsx(ue,{className:"h-4 w-4"})," Receipt"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use simulation to test delegation, escalation, and channel rules."})]})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:ch.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium approvals"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Escalation, delegation, SLA, and multi-channel."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(Ba,{label:"SLA",tone:"neutral"}),e.jsx(Ba,{label:"Delegation",tone:"neutral"}),e.jsx(Ba,{label:"WeChat",tone:"info"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(Ln,{variant:"outline",onClick:()=>f(y.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Edit Workflow"]})})]})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Enable auto-approve under threshold for low-value requests to reduce workload."})]})]}),e.jsxs(Ln,{variant:"primary",disabled:!d,title:d?"New":"Admin required",onClick:()=>f("new"),children:[e.jsx(ft,{className:"h-4 w-4"})," New flow"]})]})})]})]})})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("p",{className:"text-slate-500",children:["No workflows found. ",e.jsx("button",{onClick:()=>f("new"),className:"text-emerald-600 underline",children:"Create one"})]})})}const lg="corporate_pay_approvals",ng=[{id:"AP-1001",orgId:"org_acme",orgName:"Acme Group Ltd",module:"CorporatePay",requestType:"Purchase",requester:"Procurement",amount:54e4,currency:"UGX",status:"Pending",createdAt:"Today 08:00",policyWhy:"Above UGX 500,000 approval threshold. Cost center required.",attachments:2,comments:3,sla:{dueIn:"1h 10m",breached:!1,target:"4h"},escalationPath:"Approver  Finance  Admin",auditTrail:[{when:"Today 08:00",who:"Procurement",action:"Submitted request"},{when:"Today 08:10",who:"Approver",action:"Approved stage 1"},{when:"Now",who:"Finance",action:"Pending"}],workflow:"CorporatePay purchases"},{id:"AP-1002",orgId:"org_acme",orgName:"Acme Group Ltd",module:"Wallet",requestType:"Payout",requester:"Finance Desk",amount:12e5,currency:"UGX",status:"Escalated",createdAt:"Today 06:40",policyWhy:"High value payout requires dual-control and verified beneficiary.",attachments:1,comments:2,sla:{dueIn:"Breached",breached:!0,target:"2h"},escalationPath:"Finance  Admin  EVzone Support",auditTrail:[{when:"Today 06:40",who:"Finance Desk",action:"Submitted payout"},{when:"Today 07:10",who:"System",action:"Escalated due to SLA"}],workflow:"Payout approvals"},{id:"AP-1003",orgId:"org_khl",orgName:"Kampala Holdings",module:"CorporatePay",requestType:"Purchase",requester:"Member",amount:18e4,currency:"UGX",status:"Pending",createdAt:"Yesterday",policyWhy:"Org wallet deposit depleted. Alternative method required or funding request.",attachments:0,comments:1,sla:{dueIn:"6h",breached:!1,target:"24h"},escalationPath:"Approver  Admin",auditTrail:[{when:"Yesterday",who:"Member",action:"Submitted"}],workflow:"CorporatePay purchases"},{id:"AP-1004",orgId:"org_acme",orgName:"Acme Group Ltd",module:"E-Commerce",requestType:"Refund",requester:"Support Agent",amount:22e4,currency:"UGX",status:"Pending",createdAt:"2 days ago",policyWhy:"Refund above UGX 150,000 requires evidence attachment and attestation.",attachments:1,comments:0,sla:{dueIn:"10h",breached:!1,target:"24h"},escalationPath:"Support  Finance",auditTrail:[{when:"2 days ago",who:"Support Agent",action:"Requested refund approval"}],workflow:"Refund approvals"}],Sr={getAll:()=>{try{const t=localStorage.getItem(lg);return t?JSON.parse(t):(localStorage.setItem(lg,JSON.stringify(ng)),ng)}catch{return ng}},getById:t=>Sr.getAll().find(s=>s.id===t),updateStatus:(t,s,a)=>{const l=Sr.getAll(),n=l.findIndex(r=>r.id===t);if(n>=0){const r=l[n];r.status=s,r.auditTrail.push({when:"Just now",who:"Current User",action:`${s}${a?`: ${a}`:""}`}),l[n]=r,localStorage.setItem(lg,JSON.stringify(l))}},getWorkflows:()=>{const t=Sr.getAll();return Array.from(new Set(t.map(s=>s.workflow).filter(Boolean)))}},Ab={green:"#03CD8C",orange:"#F77F00"};function fo(...t){return t.filter(Boolean).join(" ")}function T_(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function R_(t,s){const a=Math.abs(t),n=s==="UGX"?0:2,r=a.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n});return`${s} ${r}`}function Qo({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:fo("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function ql({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Ab.green}:t==="accent"?{background:Ab.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:fo(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function D_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:fo("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function sk({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function O_(t){return t==="Approved"?"good":t==="Rejected"?"bad":t==="Escalated"?"warn":"info"}function $_(){const t=ot(),[s,a]=c.useState([]),l=K=>{const re=T_("toast");a(q=>[{id:re,...K},...q].slice(0,4)),window.setTimeout(()=>a(q=>q.filter(L=>L.id!==re)),3200)},[n,r]=c.useState([]),[i,o]=c.useState(!1),d=()=>r(Sr.getAll());c.useEffect(()=>{d()},[]),c.useMemo(()=>{const K=Array.from(new Map(n.map(re=>[re.orgId,re.orgName])).entries()).map(([re,q])=>({value:re,label:q}));return[{value:"ALL",label:"All organizations"},...K]},[n]);const[u,x]=c.useState({q:"",status:"ALL",orgId:"ALL",period:"all",customStart:"",customEnd:""}),p=c.useMemo(()=>{const K=u.q.trim().toLowerCase();return n.filter(re=>!(!i&&(re.status==="Approved"||re.status==="Rejected"))).filter(re=>u.status==="ALL"?!0:re.status===u.status).filter(re=>u.orgId==="ALL"?!0:re.orgId===u.orgId).filter(re=>K?`${re.id} ${re.orgName} ${re.module} ${re.requestType} ${re.requester} ${re.policyWhy}`.toLowerCase().includes(K):!0)},[n,u,i]),h=c.useMemo(()=>{const K=n.filter(L=>L.status==="Pending").length,re=n.filter(L=>L.status==="Escalated").length,q=n.filter(L=>L.status==="Approved"||L.status==="Rejected").length;return{pending:K,escalated:re,completed:q}},[n]),[j,y]=c.useState([]),f=p.length>0&&j.length===p.length;c.useEffect(()=>{y(K=>K.filter(re=>p.some(q=>q.id===re)))},[p]);const I=K=>{y(re=>re.includes(K)?re.filter(q=>q!==K):[...re,K])},A=()=>{y(f?[]:p.map(K=>K.id))},[b,C]=c.useState(!1),[S,z]=c.useState(null),[$,D]=c.useState(""),[W,he]=c.useState(null),V=(K,re)=>{he(K),z(re),D(""),C(!0)},xe=()=>{if(!W||!S)return;const K=S==="Approve"?"Approved":"Rejected";Sr.updateStatus(W.id,K,$||void 0),d(),l({kind:"success",title:`${S}d`,message:`${W.id} updated successfully.`}),C(!1)},pe=K=>{if(!j.length){l({kind:"warn",title:"No items selected"});return}const re=K==="Approve"?"Approved":"Rejected";j.forEach(q=>Sr.updateStatus(q,re)),d(),l({kind:"success",title:`Batch ${K}`,message:`${j.length} item(s) processed.`}),y([])},be=K=>{Sr.updateStatus(K.id,"Pending","Action reverted"),d(),l({kind:"info",title:"Reverted",message:`${K.id} set back to Pending.`})},fe=()=>{const K=n.filter(q=>q.status==="Approved"||q.status==="Rejected").map(q=>q.id);if(!K.length){l({kind:"warn",title:"Nothing to clear"});return}const re=n.filter(q=>q.status!=="Approved"&&q.status!=="Rejected");localStorage.setItem("corporate_pay_approvals",JSON.stringify(re)),d(),l({kind:"success",title:"Cleared",message:`${K.length} completed item(s) removed.`})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(D_,{toasts:s,onDismiss:K=>a(re=>re.filter(q=>q.id!==K))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Ab.green},children:e.jsx(Ra,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Approvals Inbox"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Approve and reject queue with SLA monitoring"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Qo,{label:`Pending: ${h.pending}`,tone:h.pending?"warn":"neutral"}),e.jsx(Qo,{label:`Escalated: ${h.escalated}`,tone:h.escalated?"warn":"neutral"}),e.jsx(Qo,{label:`Completed: ${h.completed}`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ql,{variant:"outline",onClick:()=>t("/console/settings/approvals/workflows"),children:[e.jsx(ue,{className:"h-4 w-4"})," Workflows"]}),e.jsxs(ql,{variant:"primary",onClick:d,children:[e.jsx(Dl,{className:"h-4 w-4"})," Refresh"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:u.q,onChange:K=>x(re=>({...re,q:K.target.value})),placeholder:"Search...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(sk,{value:u.status,onChange:K=>x(re=>({...re,status:K})),options:[{value:"ALL",label:"All statuses"},{value:"Pending",label:"Pending"},{value:"Escalated",label:"Escalated"},{value:"Approved",label:"Approved"},{value:"Rejected",label:"Rejected"}]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(sk,{value:u.period,onChange:K=>x(re=>({...re,period:K})),options:[{value:"all",label:"All time"},{value:"today",label:"Today"},{value:"week",label:"This week"},{value:"month",label:"This month"},{value:"year",label:"This year"},{value:"custom",label:"Custom range"}]})}),u.period==="custom"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"date",value:u.customStart,onChange:K=>x(re=>({...re,customStart:K.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("input",{type:"date",value:u.customEnd,onChange:K=>x(re=>({...re,customEnd:K.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100"})})]}),e.jsxs("div",{className:fo("flex flex-wrap items-center gap-2",u.period==="custom"?"md:col-span-1":"md:col-span-5"),children:[e.jsxs(ql,{variant:"outline",onClick:A,children:[e.jsx(He,{className:"h-4 w-4"})," ",f?"Clear":"Select"]}),e.jsx(ql,{variant:"primary",onClick:()=>pe("Approve"),disabled:!j.length,children:e.jsx(nr,{className:"h-4 w-4"})}),e.jsx(ql,{variant:"accent",onClick:()=>pe("Reject"),disabled:!j.length,children:e.jsx(_e,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3",children:[e.jsxs("button",{onClick:()=>o(!i),className:fo("flex items-center gap-2 rounded-xl px-3 py-2 text-sm font-semibold transition",i?"bg-slate-100 text-slate-900":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"),children:[i?e.jsx(YS,{className:"h-4 w-4"}):e.jsx(QS,{className:"h-4 w-4"}),i?"Hide completed":"Show completed"]}),e.jsxs(ql,{variant:"danger",onClick:fe,disabled:h.completed===0,children:[e.jsx(bs,{className:"h-4 w-4"})," Clear completed"]})]})]}),e.jsx("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Queue"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Tap an item to review"})]}),e.jsx(Qo,{label:`${p.length} item(s)`,tone:p.length?"neutral":"warn"})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[p.map(K=>{const re=K.status==="Approved"||K.status==="Rejected";return e.jsx("div",{className:fo("rounded-3xl border p-6 transition-colors",re?"border-slate-100 bg-slate-50":"border-slate-200 bg-white hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("button",{type:"button",onClick:()=>I(K.id),className:fo("mt-1 grid h-6 w-6 place-items-center rounded-lg border flex-shrink-0",j.includes(K.id)?"border-emerald-300 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-400"),children:j.includes(K.id)?e.jsx(He,{className:"h-4 w-4"}):null}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[e.jsxs("div",{className:"text-base font-semibold text-slate-900",children:[K.requestType,": ",K.module]}),e.jsx(Qo,{label:K.status,tone:O_(K.status)}),e.jsx(Qo,{label:K.orgName,tone:"info"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-1",children:"Amount"}),e.jsx("div",{className:"text-lg font-bold text-slate-900",children:R_(K.amount,K.currency)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-1",children:"SLA Status"}),K.sla.breached?e.jsxs("div",{className:"flex items-center gap-2 text-rose-600 font-semibold",children:[e.jsx(at,{className:"h-4 w-4"})," Breached"]}):e.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[e.jsx(pa,{className:"h-4 w-4"})," Due in ",K.sla.dueIn]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-1",children:"Policy Reason"}),e.jsx("div",{className:"text-sm text-slate-700 bg-slate-50 rounded-xl p-3 border border-slate-100",children:K.policyWhy})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-slate-500",children:[e.jsxs("span",{children:["Requester: ",K.requester]}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-300"}),e.jsx("span",{children:K.createdAt})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[re?e.jsxs(ql,{variant:"outline",onClick:()=>be(K),className:"w-full",children:[e.jsx(GL,{className:"h-4 w-4"})," Revert"]}):e.jsxs(e.Fragment,{children:[e.jsxs(ql,{variant:"primary",onClick:()=>V(K,"Approve"),className:"w-full",children:[e.jsx(nr,{className:"h-4 w-4"})," Approve"]}),e.jsxs(ql,{variant:"accent",onClick:()=>V(K,"Reject"),className:"w-full",children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]})]}),e.jsxs(ql,{variant:"outline",onClick:()=>t(`/console/approvals/${K.id}`),className:"w-full",children:[e.jsx(ue,{className:"h-4 w-4"})," Details"]})]})]})},K.id)}),!p.length&&e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 text-sm text-slate-600 text-center",children:i?"No approvals match your filters.":"No pending approvals. Click 'Show completed' to view processed items."})]})]})})]})}),e.jsx(qe,{children:b&&e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1)}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(600px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-lg font-semibold text-slate-900",children:["Confirm ",S]}),W&&e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:[W.id," - ",W.requestType]})]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:()=>C(!1),children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5 space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-500",children:S==="Reject"?"Rejection Reason":"Comment (Optional)"}),e.jsx("textarea",{value:$,onChange:K=>D(K.target.value),rows:3,placeholder:"Add notes for audit trail...",className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 transition focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})}),e.jsxs("div",{className:"border-t border-slate-200 px-5 py-4 flex justify-end gap-3",children:[e.jsx(ql,{variant:"ghost",onClick:()=>C(!1),children:"Cancel"}),e.jsxs(ql,{variant:S==="Approve"?"primary":"accent",onClick:xe,children:[S==="Approve"?e.jsx(nr,{className:"h-4 w-4"}):e.jsx(_e,{className:"h-4 w-4"}),"Confirm ",S]})]})]})]})})]})}function Wy(...t){return t.filter(Boolean).join(" ")}function Fn({variant:t="outline",className:s,children:a,onClick:l}){const n="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",r={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"};return e.jsx("button",{onClick:l,className:Wy(n,r[t],s),children:a})}function I_({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200",info:"bg-blue-50 text-blue-700 ring-blue-200"};return e.jsx("span",{className:Wy("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-semibold ring-1",a[s]||a.neutral),children:t})}function jA(){const t=ot(),{userId:s}=na(),[a,l]=c.useState("overview"),{user:n}=qy(s),r=[{id:"overview",label:"Overview",icon:$y},{id:"security",label:"Security",icon:Tt},{id:"permissions",label:"Permissions",icon:yr},{id:"activity",label:"Activity Log",icon:_r}],i=o=>{l(o)};return n?e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-5xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Fn,{variant:"ghost",onClick:()=>t("/console/users"),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:n.name}),e.jsx("div",{className:"text-sm text-slate-500",children:n.email})]}),e.jsx("div",{className:"flex-1"}),e.jsx(Fn,{variant:"outline",onClick:()=>t(`/console/users/${s}/edit`),children:"Edit Profile"}),e.jsx(Fn,{variant:"danger",onClick:()=>alert("Suspend user action triggered"),children:"Suspend User"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto border-b border-slate-200 pb-1",children:r.map(o=>e.jsxs("button",{onClick:()=>i(o.id),className:Wy("flex items-center gap-2 rounded-t-xl border-b-2 px-4 py-2 text-sm font-semibold transition",a===o.id?"border-[#03CD8C] text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"),children:[e.jsx(o.icon,{className:"h-4 w-4"}),o.label]},o.id))}),e.jsxs("div",{className:"grid gap-6",children:[a==="overview"&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"User Details"}),e.jsx(I_,{label:n.status,tone:n.status==="Active"?"good":"warn"})]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Full Name"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:n.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Email Address"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:n.email})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Role"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:n.role})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Joined"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:n.joined})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Access Summary"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-emerald-100 p-2 text-emerald-700",children:e.jsx(yr,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Permissions"})]}),e.jsx(Fn,{variant:"ghost",className:"text-xs h-8 px-2",onClick:()=>t(`/console/users/${s}/permissions`),children:"Manage"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl bg-slate-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-lg bg-blue-100 p-2 text-blue-700",children:e.jsx(Tt,{className:"h-4 w-4"})}),e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Security"})]}),e.jsx(Fn,{variant:"ghost",className:"text-xs h-8 px-2",onClick:()=>t(`/console/users/${s}/security`),children:"Configure"})]})]})]})]}),a==="security"&&e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Security Settings"}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between border-b border-slate-100 pb-6",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-3",children:e.jsx(Tm,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Two-Factor Authentication"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Secure the account with 2FA"})]})]}),e.jsx(Fn,{onClick:()=>t(`/console/users/${s}/security`),children:"Configure"})]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"rounded-full bg-slate-100 p-3",children:e.jsx(tA,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Active Sessions"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Manage logged in devices"})]})]}),e.jsx(Fn,{onClick:()=>t(`/console/users/${s}/security`),children:"View Sessions"})]})]})]}),a==="permissions"&&e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Assigned Permissions"}),e.jsx(Fn,{onClick:()=>t(`/console/users/${s}/permissions`),children:"Edit Permissions"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-slate-50",children:[e.jsx(yr,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"View Reports"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-slate-50",children:[e.jsx(yr,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Create Purchase Requests"})]}),n.role==="Owner"&&e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-slate-50",children:[e.jsx(yr,{className:"h-4 w-4 text-emerald-600"}),e.jsx("span",{className:"text-sm text-slate-700",children:"Manage Users & Funding"})]})]})]}),a==="activity"&&e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Recent Activity"}),e.jsx(Fn,{onClick:()=>t(`/console/users/${s}/activity`),children:"View Full Log"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-emerald-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Logged in"}),e.jsx("div",{className:"text-xs text-slate-500",children:n.lastActive})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-slate-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Updated profile"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Yesterday"})]})]})]})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"User not found"}),e.jsx(Fn,{className:"mt-4",onClick:()=>t("/console/users"),children:"Back to Users"})]})})}function L_(...t){return t.filter(Boolean).join(" ")}function rg({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"};return e.jsx("button",{onClick:l,disabled:n,className:L_(r,i[t],n&&"opacity-50 cursor-not-allowed",s),children:a})}function ak({label:t,value:s,onChange:a,icon:l}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:s,onChange:n=>a(n.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white pl-10 pr-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100"}),l&&e.jsx(l,{className:"absolute left-3 top-2.5 h-5 w-5 text-slate-400"})]})]})}function lk({label:t,value:s,onChange:a,options:l}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-slate-500 mb-1",children:t}),e.jsx("select",{value:s,onChange:n=>a(n.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:l.map(n=>e.jsx("option",{value:n,children:n},n))})]})}function yA(){const t=ot(),{userId:s}=na(),{user:a,updateUser:l}=qy(s),[n,r]=c.useState(""),[i,o]=c.useState(""),[d,u]=c.useState("Member"),[x,p]=c.useState("Active");c.useEffect(()=>{a&&(r(a.name),o(a.email),u(a.role),p(a.status))},[a]);const h=()=>{s&&l({name:n,email:i,role:d,status:x}),t(-1)};return a?e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(rg,{variant:"ghost",onClick:()=>t(-1),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"Edit Profile"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Update user details"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm space-y-6",children:[e.jsx(ak,{label:"Full Name",value:n,onChange:r,icon:or}),e.jsx(ak,{label:"Email Address",value:i,onChange:o,icon:os}),e.jsx(lk,{label:"Role",value:d,onChange:j=>u(j),options:["Owner","Admin","Finance","Approver","Member","Viewer"]}),e.jsx(lk,{label:"Status",value:x,onChange:p,options:["Active","Disabled","Suspended"]}),e.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[e.jsx(rg,{variant:"outline",onClick:()=>t(-1),children:"Cancel"}),e.jsxs(rg,{variant:"primary",onClick:h,children:[e.jsx(Vr,{className:"h-4 w-4"})," Save Changes"]})]})]})]})}):null}function F_(...t){return t.filter(Boolean).join(" ")}function wx({variant:t="outline",className:s,children:a,onClick:l}){const n="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",r={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"};return e.jsx("button",{onClick:l,className:F_(n,r[t],s),children:a})}function NA(){const t=ot(),{userId:s}=na(),[a,l]=c.useState(!0);return e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-3xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(wx,{variant:"ghost",onClick:()=>t(-1),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"Security Settings"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Manage account security and sessions"})]})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"rounded-full bg-emerald-50 p-3 text-emerald-600",children:e.jsx(Tt,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Two-Factor Authentication"}),e.jsx("div",{className:"text-sm text-slate-500 mt-1",children:"Add an extra layer of security to your account."}),e.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[e.jsx(wx,{variant:a?"outline":"primary",onClick:()=>l(!a),children:a?"Disable 2FA":"Enable 2FA"}),a&&e.jsxs("span",{className:"text-sm font-medium text-emerald-600 flex items-center gap-1",children:[e.jsx(He,{className:"h-4 w-4"})," Enabled"]})]})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"font-semibold text-slate-900 mb-4",children:"Active Sessions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-xl bg-slate-100 p-2",children:e.jsx(tA,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Chrome on macOS"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Kampala, UG  Current Session"})]})]}),e.jsx("div",{className:"text-xs font-semibold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-lg",children:"Active"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"rounded-xl bg-slate-100 p-2",children:e.jsx(Tm,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Safari on iPhone"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Kampala, UG  2 hours ago"})]})]}),e.jsx(wx,{variant:"outline",className:"text-xs py-1 h-8",children:"Revoke"})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-slate-100",children:e.jsxs(wx,{variant:"danger",className:"w-full justify-center",children:[e.jsx(Nr,{className:"h-4 w-4"})," Sign out of all other sessions"]})})]})]})})}function __(...t){return t.filter(Boolean).join(" ")}function ig({variant:t="outline",className:s,children:a,onClick:l}){const n="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",r={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"};return e.jsx("button",{onClick:l,className:__(n,r[t],s),children:a})}const V_=["View wallet","Pay","Request","Approve","Withdraw","Manage beneficiaries","Batch payouts","Refunds","Export reports","Manage users","Manage policies"];function wA(){const t=ot(),{userId:s}=na(),{user:a,updateUser:l}=qy(s),[n,r]=c.useState([]);c.useEffect(()=>{a&&r(V_.map(d=>{var u;return{id:d,label:d,enabled:((u=a.permissions)==null?void 0:u.includes(d))||!1}}))},[a]);const i=d=>{r(u=>u.map(x=>x.id===d?{...x,enabled:!x.enabled}:x))},o=()=>{const d=n.filter(u=>u.enabled).map(u=>u.id);s&&l({permissions:d}),t(-1)};return a?e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-2xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ig,{variant:"ghost",onClick:()=>t(-1),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"Permissions"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Fine-tune user access"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"rounded-lg bg-emerald-50 p-2 text-emerald-600",children:e.jsx(yr,{className:"h-5 w-5"})}),e.jsx("div",{className:"text-sm text-slate-600",children:`Permissions are initially set by the user's role. Custom overrides will mark the user as "Custom".`})]}),e.jsx("div",{className:"space-y-1",children:n.map(d=>e.jsxs("button",{onClick:()=>i(d.id),className:"flex w-full items-center justify-between rounded-xl px-4 py-3 hover:bg-slate-50",children:[e.jsx("span",{className:"font-medium text-slate-900",children:d.label}),d.enabled?e.jsx(nA,{className:"h-6 w-6 text-[#03CD8C]"}):e.jsx(rA,{className:"h-6 w-6 text-slate-300"})]},d.id))}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 flex justify-end gap-3",children:[e.jsx(ig,{variant:"outline",onClick:()=>t(-1),children:"Cancel"}),e.jsxs(ig,{variant:"primary",onClick:o,children:[e.jsx(Vr,{className:"h-4 w-4"})," Save Permissions"]})]})]})]})}):null}function B_(...t){return t.filter(Boolean).join(" ")}function og({variant:t="outline",className:s,children:a,onClick:l}){const n="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4",r={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"};return e.jsx("button",{onClick:l,className:B_(n,r[t],s),children:a})}function kA(){const t=ot(),{userId:s}=na(),a=[{id:1,action:"Logged in",device:"Chrome on macOS",time:"Just now",ip:"192.168.1.1"},{id:2,action:"Created purchase request",detail:"Software License #PR-921",time:"2 hours ago"},{id:3,action:"Updated profile",detail:"Changed phone number",time:"Yesterday, 14:30"},{id:4,action:"Logged in",device:"Safari on iPhone",time:"Yesterday, 09:12",ip:"10.0.0.5"},{id:5,action:"Enabled 2FA",detail:"SMS Authentication",time:"Oct 24, 2023"}];return e.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(og,{variant:"ghost",onClick:()=>t(-1),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"Activity Log"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Timeline of user actions"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2 flex-1",children:[e.jsx(js,{className:"h-4 w-4 text-slate-400"}),e.jsx("input",{placeholder:"Search activity...",className:"flex-1 bg-transparent text-sm outline-none"})]}),e.jsxs(og,{children:[e.jsx(cr,{className:"h-4 w-4"})," Filter"]}),e.jsxs(og,{children:[e.jsx(_r,{className:"h-4 w-4"})," Date Range"]})]}),e.jsx("div",{className:"relative border-l border-slate-200 ml-3 space-y-8 pl-8 py-2",children:a.map(l=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[39px] top-1 h-5 w-5 rounded-full border-4 border-white bg-slate-200"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:l.action}),l.detail&&e.jsx("div",{className:"text-sm text-slate-600",children:l.detail}),l.device&&e.jsxs("div",{className:"text-xs text-slate-500",children:[l.device,"  ",l.ip]}),e.jsx("div",{className:"mt-1 text-xs text-slate-400",children:l.time})]})]},l.id))})]})]})})}function um(...t){return t.filter(Boolean).join(" ")}function Ic({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",i={primary:"bg-[#03CD8C] text-white hover:opacity-90 focus:ring-emerald-200 shadow-lg",outline:"border border-slate-200 bg-white text-slate-800 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"};return e.jsx("button",{onClick:l,disabled:n,className:um(r,i[t],s),children:a})}function U_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"fixed right-4 top-4 z-50 w-[min(400px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:um("rounded-2xl border p-4 shadow-lg backdrop-blur",a.type==="success"?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:um("grid h-8 w-8 place-items-center rounded-xl",a.type==="success"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"),children:a.type==="success"?e.jsx(He,{className:"h-5 w-5"}):e.jsx(_e,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex-1 text-sm font-medium text-slate-900",children:a.message}),e.jsx("button",{onClick:()=>s(a.id),className:"rounded-lg p-1 hover:bg-white/50 text-slate-500",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}const dg=["View wallet","Pay","Request","Approve","Withdraw","Manage beneficiaries","Batch payouts","Refunds","Export reports","Manage users","Manage policies"];function CA(){const t=ot(),{roleName:s}=na(),{role:a,updateRole:l}=f_(s),[n,r]=c.useState([]),[i,o]=c.useState(""),[d,u]=c.useState(""),[x,p]=c.useState(dg),[h,j]=c.useState([]);c.useEffect(()=>{if(a){r(a.permissions),o(a.summary);const b=a.permissions.filter(C=>!dg.includes(C));b.length>0&&p([...dg,...b])}},[a]);const y=(b,C="success")=>{const S=`toast-${Date.now()}`;j(z=>[...z,{id:S,message:b,type:C}]),setTimeout(()=>{j(z=>z.filter($=>$.id!==S))},3e3)},f=b=>{r(C=>C.includes(b)?C.filter(S=>S!==b):[...C,b])},I=()=>{const b=d.trim();if(!b){y("Permission name cannot be empty","error");return}if(x.includes(b)){y("This permission already exists","error");return}const C=b;p(S=>[...S,C]),r(S=>[...S,C]),u(""),y(`Added permission: ${b}`,"success")},A=()=>{a&&(l({permissions:n,summary:i}),y("Role updated successfully!","success"),setTimeout(()=>t(-1),1e3))};return a?e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.12), rgba(255,255,255,0))"},children:[e.jsx(U_,{toasts:h,onDismiss:b=>j(C=>C.filter(S=>S.id!==b))}),e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ic,{variant:"ghost",onClick:()=>t(-1),className:"rounded-full p-2",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-xl font-bold text-slate-900",children:["Edit Role: ",a.role]}),e.jsx("div",{className:"text-sm text-slate-500",children:"Customize permissions for this role"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-[0_20px_70px_rgba(2,8,23,0.15)]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"rounded-2xl bg-emerald-50 p-3 text-emerald-600",children:e.jsx(Tt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-slate-900",children:[a.role," Role"]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Toggle permissions for this role"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Role Summary"}),e.jsx("input",{type:"text",value:i,onChange:b=>o(b.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-2.5 text-sm font-medium text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"Brief description of this role"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"text-sm font-semibold text-slate-700",children:["Permissions (",n.length," selected)"]})}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 mb-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600 mb-2",children:"Add Custom Permission"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:b=>u(b.target.value),onKeyPress:b=>b.key==="Enter"&&I(),className:"flex-1 rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-medium text-slate-900 focus:outline-none focus:ring-2 focus:ring-emerald-200",placeholder:"e.g., Create invoices"}),e.jsxs(Ic,{variant:"primary",onClick:I,children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})]})]}),e.jsx("div",{className:"space-y-1 max-h-[400px] overflow-y-auto",children:x.map(b=>e.jsxs("button",{onClick:()=>f(b),className:um("flex w-full items-center justify-between rounded-xl px-4 py-3 transition",n.includes(b)?"bg-emerald-50 border border-emerald-200":"hover:bg-slate-50 border border-transparent"),children:[e.jsx("span",{className:um("font-medium",n.includes(b)?"text-emerald-900":"text-slate-700"),children:b}),n.includes(b)?e.jsx(nA,{className:"h-5 w-5 text-[#03CD8C]"}):e.jsx(rA,{className:"h-5 w-5 text-slate-300"})]},b))})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-slate-100 flex justify-end gap-3",children:[e.jsx(Ic,{variant:"outline",onClick:()=>t(-1),children:"Cancel"}),e.jsxs(Ic,{variant:"primary",onClick:A,children:[e.jsx(Vr,{className:"h-4 w-4"})," Save Changes"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-emerald-200 bg-emerald-50/50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-emerald-900",children:" Quick Tip"}),e.jsx("div",{className:"mt-1 text-sm text-emerald-800",children:"Changes to role permissions will affect all users assigned to this role across your organization. Custom permissions can be used for specialized workflows."})]})]})]}):e.jsx("div",{className:"min-h-screen bg-slate-50 p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-slate-900",children:"Role not found"}),e.jsx(Ic,{className:"mt-4",onClick:()=>t("/console/settings/roles"),children:"Back to Roles"})]})})}function En(...t){return t.filter(Boolean).join(" ")}function Lc(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function uu(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}const mp=["Operations","Sales","Finance","Admin","Procurement"],SA=["E-Commerce","EVs & Charging","Rides & Logistics","Medical & Health Care","Travel & Tourism","Finance & Payments","All Modules"];function Di({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold transition focus:outline-none focus:ring-4 disabled:opacity-50 disabled:cursor-not-allowed",i={primary:"bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-200",accent:"bg-orange-500 text-white hover:bg-orange-600 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-200"};return e.jsx("button",{onClick:l,disabled:n,className:En(r,i[t],s),children:a})}function E0({open:t,onClose:s,title:a,children:l,footer:n}){return e.jsx(qe,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40 bg-black/40",onClick:s}),e.jsx(ke.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:e.jsxs("div",{className:"pointer-events-auto w-full max-w-lg rounded-3xl bg-white shadow-2xl overflow-hidden flex flex-col max-h-[85vh]",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 px-6 py-4 bg-white sticky top-0 z-10",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:a}),e.jsx("button",{onClick:s,className:"rounded-full p-2 text-slate-400 hover:bg-slate-100 hover:text-slate-600",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6 overflow-y-auto",children:l}),n&&e.jsx("div",{className:"border-t border-slate-100 bg-slate-50 px-6 py-4 rounded-b-3xl sticky bottom-0 z-10",children:n})]})})]})})}function q_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"fixed top-4 right-4 z-[60] flex flex-col gap-2 pointer-events-none",children:e.jsx(qe,{children:t.map(a=>e.jsxs(ke.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"pointer-events-auto flex items-start gap-3 rounded-2xl bg-white p-4 shadow-xl border border-slate-100 w-80",children:[e.jsx("div",{className:En("mt-0.5 rounded-full p-1",a.kind==="success"?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-600"),children:a.kind==="success"?e.jsx(He,{className:"h-4 w-4"}):e.jsx(rt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:a.message})]}),e.jsx("button",{onClick:()=>s(a.id),className:"text-slate-400 hover:text-slate-600",children:e.jsx(_e,{className:"h-4 w-4"})})]},a.id))})})}function z_({open:t,onClose:s,onSave:a}){const[l,n]=c.useState(""),[r,i]=c.useState(mp[0]),[o,d]=c.useState("Monthly"),[u,x]=c.useState(!0);c.useEffect(()=>{t&&(n(""),i(mp[0]),d("Monthly"),x(!0))},[t]);const p=()=>{l&&a({amountUGX:parseInt(l.replace(/,/g,"")),group:r,period:o,hardCap:u,capType:u?"Hard":"Soft"})};return e.jsx(E0,{open:t,onClose:s,title:"Issue New Budget",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Di,{variant:"ghost",onClick:s,children:"Cancel"}),e.jsx(Di,{variant:"primary",onClick:p,disabled:!l,children:"Confirm Issuance"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Select Group"}),e.jsx("select",{value:r,onChange:h=>i(h.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100",children:mp.map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Service Module (optional)"}),e.jsxs("select",{className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{value:"All",children:"All Modules"}),SA.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Budget Amount (UGX)"}),e.jsx("input",{type:"number",value:l,onChange:h=>n(h.target.value),placeholder:"e.g. 5000000",className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-lg font-bold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Period"}),e.jsxs("select",{value:o,onChange:h=>d(h.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{value:"Weekly",children:"Weekly"}),e.jsx("option",{value:"Monthly",children:"Monthly"}),e.jsx("option",{value:"Quarterly",children:"Quarterly"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Cap Type"}),e.jsxs("button",{onClick:()=>x(!u),className:En("mt-2 flex w-full items-center justify-between rounded-2xl border px-3 py-3 text-sm font-semibold transition-all",u?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-slate-200 bg-white text-slate-600"),children:[e.jsx("span",{children:u?"Hard Cap":"Soft Cap"}),u?e.jsx(Tt,{className:"h-4 w-4"}):e.jsx(rt,{className:"h-4 w-4"})]})]})]})]})})}function G_({budget:t,onClose:s,onSave:a}){const[l,n]=c.useState(t.amountUGX.toString()),[r,i]=c.useState(t.hardCap);return e.jsx(E0,{open:!0,onClose:s,title:`Edit ${t.group} Budget`,footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Di,{variant:"ghost",onClick:s,children:"Cancel"}),e.jsx(Di,{variant:"primary",onClick:()=>a({amountUGX:Number(l),hardCap:r}),children:"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Current Allocation"}),e.jsx("div",{className:"text-xl font-bold text-slate-900",children:uu(t.amountUGX)}),e.jsxs("div",{className:"text-xs text-slate-500",children:[t.period,"  ",t.module||"All Modules"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"New Amount (UGX)"}),e.jsx("input",{type:"number",value:l,onChange:o=>n(o.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-lg font-bold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 p-4 bg-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Hard Cap"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Prevent spending above limit"})]}),e.jsx("button",{onClick:()=>i(!r),className:En("relative h-6 w-11 rounded-full border transition-colors",r?"border-emerald-500 bg-emerald-500":"border-slate-300 bg-slate-200"),children:e.jsx("span",{className:En("absolute top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform",r?"left-[22px]":"left-0.5")})})]})]})})}function W_({user:t,onClose:s,onSave:a}){const[l,n]=c.useState(t.limit.toString()),[r,i]=c.useState(t.autoApprove);return e.jsx(E0,{open:!0,onClose:s,title:`Edit Limits for ${t.name}`,footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Di,{variant:"ghost",onClick:s,children:"Cancel"}),e.jsx(Di,{variant:"primary",onClick:()=>a({limit:Number(l),autoApprove:r}),children:"Save Changes"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 rounded-2xl bg-slate-50 p-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-700 font-bold",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900",children:t.name}),e.jsxs("div",{className:"text-xs text-slate-500",children:[t.role,"  ",t.group]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500",children:"Spending Limit (UGX)"}),e.jsx("input",{type:"number",value:l,onChange:o=>n(o.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-3 text-lg font-bold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-slate-200 p-4 bg-white",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Auto-Approval Eligibility"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Allow system to auto-approve safe requests"})]}),e.jsx("button",{onClick:()=>i(!r),className:En("relative h-6 w-11 rounded-full border transition-colors",r?"border-emerald-500 bg-emerald-500":"border-slate-300 bg-slate-200"),children:e.jsx("span",{className:En("absolute top-0.5 h-5 w-5 rounded-full bg-white shadow transition-transform",r?"left-[22px]":"left-0.5")})})]})]})})}function H_({open:t,onClose:s,history:a,onClear:l}){return e.jsx(E0,{open:t,onClose:s,title:"Budget History",footer:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsx(Di,{variant:"danger",onClick:l,children:"Clear Log"}),e.jsx(Di,{variant:"primary",onClick:s,children:"Done"})]}),children:e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:"No history recorded yet."}):a.map(n=>e.jsxs("div",{className:"flex gap-3 border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[e.jsx("div",{className:"mt-1 h-2 w-2 rounded-full bg-emerald-500 shrink-0"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[n.action," ",e.jsxs("span",{className:"font-normal text-slate-500",children:["by ",n.actor]})]}),e.jsx("div",{className:"text-xs text-slate-600",children:n.details}),e.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:new Date(n.ts).toLocaleString()})]})]},n.id))})})}function AA(){const t=ot(),[s,a]=c.useState([]),l=(ie,Oe,Ae="info")=>{const ee=Lc();a(Ne=>[...Ne,{id:ee,title:ie,message:Oe,kind:Ae}]),setTimeout(()=>a(Ne=>Ne.filter(Ce=>Ce.id!==ee)),4e3)},[n,r]=c.useState([{id:"B-1",scope:"Group",group:"Operations",module:"All Modules",marketplace:"All",amountUGX:5e6,period:"Monthly",hardCap:!0,capType:"Hard",usedUGX:32e5,updatedAt:Date.now(),updatedBy:"Admin"},{id:"B-2",scope:"Group",group:"Sales",module:"Rides & Logistics",marketplace:"All",amountUGX:25e5,period:"Monthly",hardCap:!1,capType:"Soft",usedUGX:21e5,updatedAt:Date.now(),updatedBy:"Admin"},{id:"B-3",scope:"Group",group:"Finance",module:"All Modules",marketplace:"All",amountUGX:8e6,period:"Quarterly",hardCap:!0,capType:"Hard",usedUGX:12e5,updatedAt:Date.now(),updatedBy:"Admin"},{id:"B-4",scope:"Group",group:"Operations",module:"E-Commerce",marketplace:"MyLiveDealz",amountUGX:15e5,period:"Monthly",hardCap:!0,capType:"Hard",usedUGX:0,updatedAt:Date.now(),updatedBy:"Admin"},{id:"B-5",scope:"Group",group:"Operations",module:"All Modules",marketplace:"All",amountUGX:5e6,period:"Monthly",hardCap:!0,capType:"Hard",usedUGX:5e6,updatedAt:Date.now(),updatedBy:"Admin"}]),[i,o]=c.useState([{id:"U-1",name:"Mary N.",group:"Operations",role:"Manager",limit:2e6,autoApprove:!0,period:"Monthly",updatedAt:Date.now()},{id:"U-2",name:"John S.",group:"Sales",role:"Employee",limit:5e5,autoApprove:!1,period:"Monthly",updatedAt:Date.now()-864e5},{id:"U-3",name:"Irene K.",group:"Operations",role:"Coordinator",limit:15e5,autoApprove:!0,period:"Monthly",updatedAt:Date.now()-1728e5},{id:"U-4",name:"Daisy O.",group:"Finance",role:"Accountant",limit:5e6,autoApprove:!0,period:"Monthly",updatedAt:Date.now()-6048e5}]),[d,u]=c.useState([{id:"H-1",ts:Date.now()-1e5,actor:"Admin",action:"Created",details:"Initial budget allocation for Operations"}]),[x,p]=c.useState("All"),[h,j]=c.useState("All"),[y,f]=c.useState("All"),[I,A]=c.useState(""),[b,C]=c.useState(""),[S,z]=c.useState("All"),[$,D]=c.useState(""),[W,he]=c.useState(""),[V,xe]=c.useState(""),[pe,be]=c.useState(!1),[fe,K]=c.useState(null),[re,q]=c.useState(null),[L,M]=c.useState(!1),k=c.useMemo(()=>n.filter(ie=>{if(h!=="All"&&ie.group!==h||y!=="All"&&ie.module!==y)return!1;const Oe=new Date(ie.updatedAt),Ae=new Date;if(x==="Today")return Oe.toDateString()===Ae.toDateString();if(x==="Week")return Ae.getTime()-Oe.getTime()<7*864e5;if(x==="Month")return Oe.getMonth()===Ae.getMonth()&&Oe.getFullYear()===Ae.getFullYear();if(x==="Year")return Oe.getFullYear()===Ae.getFullYear();if(x==="Custom"&&I&&b){const ee=new Date(I),Ne=new Date(b);return Ne.setHours(23,59,59),Oe>=ee&&Oe<=Ne}return!0}),[n,h,y,x,I,b]),P=c.useMemo(()=>i.filter(ie=>{if(V&&!ie.name.toLowerCase().includes(V.toLowerCase()))return!1;const Oe=new Date(ie.updatedAt),Ae=new Date;if(S==="Today")return Oe.toDateString()===Ae.toDateString();if(S==="Week")return Ae.getTime()-Oe.getTime()<7*864e5;if(S==="Month")return Oe.getMonth()===Ae.getMonth()&&Oe.getFullYear()===Ae.getFullYear();if(S==="Year")return Oe.getFullYear()===Ae.getFullYear();if(S==="Custom"&&$&&W){const ee=new Date($),Ne=new Date(W);return Ne.setHours(23,59,59),Oe>=ee&&Oe<=Ne}return!0}),[i,V,S,$,W]),Y=()=>{if(x==="All"&&h==="All"&&y==="All"){confirm("Clear ALL budgets? This cannot be undone.")&&(r([]),l("Cleared","All budgets removed","success"));return}if(confirm("Clear budgets matching current filters?")){const ie=new Set(k.map(Oe=>Oe.id));r(n.filter(Oe=>!ie.has(Oe.id))),l("Cleared",`${ie.size} budgets removed`,"success")}},F=()=>{if(S==="All"&&!V){confirm("Clear ALL user limits? This cannot be undone.")&&(o([]),l("Cleared","All user limits removed","success"));return}if(confirm("Clear user limits matching current filters?")){const ie=new Set(P.map(Oe=>Oe.id));o(i.filter(Oe=>!ie.has(Oe.id))),l("Cleared",`${ie.size} user limits removed`,"success")}},G=ie=>{const Oe={id:Lc("B"),scope:"Group",period:"Monthly",capType:"Hard",hardCap:!0,amountUGX:0,usedUGX:0,updatedAt:Date.now(),updatedBy:"You",group:"Operations",module:"All Modules",marketplace:"All",...ie};r([Oe,...n]),be(!1),l("Budget Issued",`Allocated ${uu(Oe.amountUGX)} to ${Oe.group}`,"success"),u(Ae=>[{id:Lc("H"),ts:Date.now(),actor:"You",action:"Issued Budget",details:`Allocated ${uu(Oe.amountUGX)}`},...Ae])},ve=(ie,Oe)=>{r(n.map(Ae=>Ae.id===ie?{...Ae,...Oe,updatedAt:Date.now()}:Ae)),K(null),l("Budget Updated","Changes saved successfully","success"),u(Ae=>[{id:Lc("H"),ts:Date.now(),actor:"You",action:"Updated Budget",details:`Modified budget ${ie}`},...Ae])},Te=(ie,Oe)=>{o(i.map(Ae=>Ae.id===ie?{...Ae,...Oe,updatedAt:Date.now()}:Ae)),q(null),l("User Updated","Limits and permissions updated","success"),u(Ae=>[{id:Lc("H"),ts:Date.now(),actor:"You",action:"Updated User",details:`Modified user ${ie}`},...Ae])},ye=ie=>{confirm("Are you sure you want to delete this budget?")&&(r(n.filter(Oe=>Oe.id!==ie)),l("Budget Deleted","Budget removed successfully","success"))};return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-20",children:[e.jsx(q_,{toasts:s,onDismiss:ie=>a(Oe=>Oe.filter(Ae=>Ae.id!==ie))}),e.jsx("div",{className:"sticky top-0 z-10 border-b border-slate-200 bg-white/95 px-4 py-4 backdrop-blur-sm md:px-6",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-500 hover:bg-slate-50",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Issued Budgets"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Manage and audit budget allocations"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>M(!0),className:"hidden h-10 items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 hover:bg-slate-50 sm:flex",children:[e.jsx(JS,{className:"h-4 w-4"})," History"]}),e.jsxs("button",{className:"flex h-10 items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs("button",{onClick:()=>be(!0),className:"flex h-10 items-center gap-2 rounded-xl bg-emerald-600 px-4 text-sm font-semibold text-white hover:bg-emerald-700 shadow-md shadow-emerald-200",children:[e.jsx(ft,{className:"h-4 w-4"})," Issue New"]})]})]})}),e.jsxs("div",{className:"mx-auto mt-8 max-w-7xl px-4 md:px-6",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx("div",{className:"flex overflow-x-auto rounded-xl bg-slate-100 p-1",children:["All","Today","Week","Month","Year","Custom"].map(ie=>e.jsx("button",{onClick:()=>p(ie),className:En("rounded-lg px-4 py-1.5 text-xs font-semibold transition-all whitespace-nowrap",x===ie?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-900"),children:ie==="All"?"All time":ie},ie))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:h,onChange:ie=>j(ie.target.value),className:"h-9 appearance-none rounded-xl border border-slate-200 bg-white pl-3 pr-8 text-xs font-semibold text-slate-700 outline-none hover:border-slate-300",children:[e.jsx("option",{value:"All",children:"All Groups"}),mp.map(ie=>e.jsx("option",{value:ie,children:ie},ie))]}),e.jsx(Dl,{className:"pointer-events-none absolute right-2.5 top-2.5 h-4 w-4 text-slate-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:y,onChange:ie=>f(ie.target.value),className:"h-9 appearance-none rounded-xl border border-slate-200 bg-white pl-3 pr-8 text-xs font-semibold text-slate-700 outline-none hover:border-slate-300",children:[e.jsx("option",{value:"All",children:"All Modules"}),SA.map(ie=>e.jsx("option",{value:ie,children:ie},ie))]}),e.jsx(Dl,{className:"pointer-events-none absolute right-2.5 top-2.5 h-4 w-4 text-slate-500"})]}),x==="Custom"&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs",children:[e.jsx("input",{type:"date",value:I,onChange:ie=>A(ie.target.value),className:"bg-transparent outline-none"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:b,onChange:ie=>C(ie.target.value),className:"bg-transparent outline-none"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200"}),e.jsxs("button",{onClick:Y,className:En("flex items-center gap-2 rounded-xl border px-3 py-1.5 text-xs font-semibold hover:bg-opacity-80 transition",x==="All"&&h==="All"&&y==="All"?"border-rose-200 bg-rose-50 text-rose-700":"border-orange-200 bg-orange-50 text-orange-700"),children:[e.jsx(bs,{className:"h-3 w-3"}),x==="All"&&h==="All"&&y==="All"?"Clear All":"Clear Period"]}),e.jsxs("button",{onClick:()=>{j("All"),f("All"),p("All"),A(""),C("")},className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-500 hover:bg-slate-50 hover:text-slate-900",children:[e.jsx(om,{className:"h-3 w-3"})," Reset Filters"]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:k.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"grid h-16 w-16 place-items-center rounded-full bg-slate-50 text-slate-300",children:e.jsx(Kd,{className:"h-8 w-8"})}),e.jsx("h3",{className:"mt-4 text-lg font-bold text-slate-900",children:"No budgets found"}),e.jsx("p",{className:"max-w-xs text-sm text-slate-500",children:"Try adjusting your filters or issue a new budget."}),e.jsx("button",{onClick:()=>be(!0),className:"mt-6 text-sm font-semibold text-emerald-600 hover:text-emerald-700",children:"Issue Budget"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Group"}),e.jsx("th",{className:"px-6 py-4",children:"Module"}),e.jsx("th",{className:"px-6 py-4",children:"Marketplace"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Period"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Hard Cap"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Issued At"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:k.map(ie=>e.jsxs("tr",{className:"group hover:bg-slate-50/80 cursor-pointer transition-colors",onClick:()=>K(ie),children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-slate-900",children:ie.group}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:e.jsx("span",{className:"inline-flex items-center gap-1.5 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-medium",children:ie.module==="All"||!ie.module?"All Modules":ie.module})}),e.jsx("td",{className:"px-6 py-4 text-slate-500",children:ie.marketplace||"All"}),e.jsx("td",{className:"px-6 py-4 text-right font-bold text-emerald-600",children:uu(ie.amountUGX)}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:ie.period}),e.jsx("td",{className:"px-6 py-4 text-center",children:ie.hardCap?e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-600",children:[e.jsx(He,{className:"h-3 w-3"})," Enabled"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"Disabled"})}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-500",children:new Date(ie.updatedAt).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),K(ie)},className:"rounded-lg p-2 text-slate-400 hover:bg-emerald-50 hover:text-emerald-600",title:"Edit Budget",children:e.jsx(jt,{className:"h-4 w-4"})}),e.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),ye(ie.id)},className:"rounded-lg p-2 text-slate-400 hover:bg-rose-50 hover:text-rose-600",title:"Delete Budget",children:e.jsx(bs,{className:"h-4 w-4"})})]})})]},ie.id))})]})})}),e.jsxs("div",{className:"text-center text-xs text-slate-400",children:["Showing ",k.length," of ",n.length," total records"]})]}),e.jsxs("div",{className:"mt-12 grid gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"User Spend Limits"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Individual caps and auto-approval eligibility"})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-400"}),e.jsx("input",{value:V,onChange:ie=>xe(ie.target.value),placeholder:"Search users...",className:"h-10 w-64 rounded-xl border border-slate-200 bg-white pl-9 pr-4 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100"})]})})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx("div",{className:"flex overflow-x-auto rounded-xl bg-slate-100 p-1",children:["All","Today","Week","Month","Year","Custom"].map(ie=>e.jsx("button",{onClick:()=>z(ie),className:En("rounded-lg px-4 py-1.5 text-xs font-semibold transition-all whitespace-nowrap",S===ie?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-900"),children:ie==="All"?"All time":ie},ie))}),S==="Custom"&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-slate-50 px-3 py-1.5 text-xs",children:[e.jsx("input",{type:"date",value:$,onChange:ie=>D(ie.target.value),className:"bg-transparent outline-none"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:W,onChange:ie=>he(ie.target.value),className:"bg-transparent outline-none"})]}),e.jsxs("button",{onClick:F,className:En("flex items-center gap-2 rounded-xl border px-3 py-1.5 text-xs font-semibold hover:bg-opacity-80 transition",S==="All"&&!V?"border-rose-200 bg-rose-50 text-rose-700":"border-orange-200 bg-orange-50 text-orange-700"),children:[e.jsx(bs,{className:"h-3 w-3"}),S==="All"&&!V?"Clear All":"Clear Period"]}),S!=="All"&&e.jsxs("button",{onClick:()=>{z("All"),D(""),he(""),xe("")},className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-500 hover:bg-slate-50 hover:text-slate-900",children:[e.jsx(om,{className:"h-3 w-3"})," Reset Filters"]})]})}),e.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold text-slate-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"User"}),e.jsx("th",{className:"px-6 py-4",children:"Role"}),e.jsx("th",{className:"px-6 py-4",children:"Group"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Limit"}),e.jsx("th",{className:"px-6 py-4",children:"Period"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Auto-Approve"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-slate-500",children:"No users found matching filters."})}):P.map(ie=>e.jsxs("tr",{className:"group hover:bg-slate-50/80 cursor-pointer transition-colors",onClick:()=>q(ie),children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-slate-900",children:ie.name}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:ie.role}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:e.jsx("span",{className:"inline-flex items-center gap-1.5 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-medium",children:ie.group})}),e.jsx("td",{className:"px-6 py-4 text-right font-bold text-emerald-600",children:uu(ie.limit)}),e.jsx("td",{className:"px-6 py-4 text-slate-600",children:ie.period}),e.jsx("td",{className:"px-6 py-4 text-center",children:ie.autoApprove?e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-600",children:[e.jsx(He,{className:"h-3 w-3"})," Eligible"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"-"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),q(ie)},className:"rounded-lg p-2 text-slate-400 hover:bg-emerald-50 hover:text-emerald-600",title:"Edit User Limits",children:e.jsx(jt,{className:"h-4 w-4"})})})})]},ie.id))})]})})})]})]}),e.jsx(z_,{open:pe,onClose:()=>be(!1),onSave:G}),fe&&e.jsx(G_,{budget:fe,onClose:()=>K(null),onSave:ie=>ve(fe.id,ie)}),re&&e.jsx(W_,{user:re,onClose:()=>q(null),onSave:ie=>Te(re.id,ie)}),e.jsx(H_,{open:L,onClose:()=>M(!1),history:d,onClear:()=>u([])})]})}const oc={green:"#03CD8C",orange:"#F77F00"};function go(...t){return t.filter(Boolean).join(" ")}function nk(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Zr(t){const s=Math.abs(t).toLocaleString(void 0,{maximumFractionDigits:0});return`${t<0?"-":""}UGX ${s}`}function K_(t,s){const a=Math.abs(t),n=s==="UGX"?0:2,r=a.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n});return`${t<0?"-":""}${s} ${r}`}function Ts({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:go("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Rt({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:oc.green}:t==="accent"?{background:oc.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:go(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function X_({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:go("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Hi({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function Y_({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function Q_({value:t,max:s}){const a=s<=0?0:Math.max(0,Math.min(1,t/s)),l=Math.round(a*100),n=l>=85?oc.orange:oc.green;return e.jsx("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${l}%`,background:n}})})}function J_(t){return t==="Blocked"?"bad":t==="Warning"?"warn":"info"}function Z_(){const[t,s]=c.useState([]),a=P=>{const Y=nk("toast");s(F=>[{id:Y,...P},...F].slice(0,4)),window.setTimeout(()=>s(F=>F.filter(G=>G.id!==Y)),3200)},l=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin",status:"Active",model:"Wallet + Credit",walletBalances:{UGX:98e5,USD:0,CNY:1800,KES:0},prepaidBalanceUGX:0,creditLimitUGX:1e7,creditUsedUGX:42e5,enforcement:[{flag:"Risk hold",severity:"Warning",reason:"Large payouts require maker-checker"},{flag:"Compliance lock",severity:"Info",reason:"KYC in review for one entity"}]},{id:"org_khl",name:"Kampala Holdings",role:"Finance",status:"Paused",model:"Prepaid",walletBalances:{UGX:0,USD:0,CNY:0,KES:0},prepaidBalanceUGX:0,creditLimitUGX:0,creditUsedUGX:0,enforcement:[{flag:"Deposit depleted",severity:"Blocked",reason:"Prepaid deposit is depleted. CorporatePay paused."}]},{id:"org_demo",name:"EVzone Demo Org",role:"Approver",status:"Suspended",model:"Credit",walletBalances:{UGX:0,USD:0,CNY:0,KES:0},prepaidBalanceUGX:0,creditLimitUGX:5e6,creditUsedUGX:54e5,enforcement:[{flag:"Credit exceeded",severity:"Blocked",reason:"Credit limit exceeded or invoices overdue"}]}],[]),[n,r]=c.useState(l[0].id),i=c.useMemo(()=>l.find(P=>P.id===n)||l[0],[l,n]),o=c.useMemo(()=>["Owner","Admin","Finance"].includes(i.role),[i.role]),d=Math.max(0,i.creditLimitUGX-i.creditUsedUGX);i.creditLimitUGX>0&&i.creditUsedUGX/i.creditLimitUGX;const[u,x]=c.useState([{id:"AT-1",enabled:!0,triggerBelowUGX:2e5,topUpAmountUGX:1e6,method:"Bank transfer",cooldown:"24h",note:"Top up prepaid when balance is low"}]),[p,h]=c.useState([{id:"SR-1",scope:"Organization",target:"Acme Group Ltd",currency:"USD",note:"Reporting and settlement default"},{id:"SR-2",scope:"Module",target:"CorporatePay",currency:"UGX",note:"Local procurement"},{id:"SR-3",scope:"Beneficiary",target:"China settlement",currency:"CNY",note:"Supplier settlement"}]),[j]=c.useState([{id:"R-1",when:"Today 09:10",severity:"Warning",title:"High value payout attempt",detail:"Payout above threshold triggered maker-checker"},{id:"R-2",when:"Yesterday",severity:"Info",title:"Provider delay",detail:"Bank payouts delayed due to maintenance"},{id:"R-3",when:"Last week",severity:"Critical",title:"Billing delinquency",detail:"Invoice overdue. Credit line paused."}]),[y,f]=c.useState([{id:"FR-101",when:"Today 08:40",type:"Top up prepaid",amountUGX:2e6,status:"Pending",requestedBy:"Member",note:"Deposit depleted"},{id:"FR-102",when:"Yesterday",type:"Increase credit",amountUGX:5e6,status:"Pending",requestedBy:"Finance Desk",note:"Scaling procurement"},{id:"FR-103",when:"2 weeks ago",type:"Unlock wallet",amountUGX:0,status:"Approved",requestedBy:"Owner",note:"Lock cleared"}]),I=()=>a({kind:"info",title:"Open Admin Console",message:"Deep link to CorporatePay Admin Console."}),A=P=>{f(Y=>Y.map(F=>F.id===P?{...F,status:"Approved"}:F)),a({kind:"success",title:"Approved",message:P})},b=P=>{f(Y=>Y.map(F=>F.id===P?{...F,status:"Rejected"}:F)),a({kind:"info",title:"Rejected",message:P})},C=P=>{x(Y=>Y.map(F=>F.id===P?{...F,enabled:!F.enabled}:F)),a({kind:"success",title:"Auto top-up updated"})},[S,z]=c.useState("8000000"),[$,D]=c.useState("30"),W=c.useMemo(()=>{var ye,ie;const P=Number(S.replace(/[^0-9]/g,""))||0,Y=Number($.replace(/[^0-9]/g,""))||30,F=Y>0?Math.round(P/Y):0,G=((ye=u[0])==null?void 0:ye.triggerBelowUGX)??0,ve=((ie=u[0])==null?void 0:ie.topUpAmountUGX)??0,Te=ve>0?Math.max(0,Math.round((P-G)/ve)):0;return{spend:P,days:Y,perDay:F,expectedTopUps:Te}},[S,$,u]),[he,V]=c.useState(!1),[xe,pe]=c.useState("Module"),[be,fe]=c.useState("E-Commerce"),[K,re]=c.useState("UGX"),[q,L]=c.useState("Default"),M=()=>{if(!be.trim()){a({kind:"warn",title:"Target required"});return}h(P=>[{id:nk("SR"),scope:xe,target:be.trim(),currency:K,note:q.trim()},...P]),V(!1),a({kind:"success",title:"Rule added"})},k=P=>P==="Critical"?"bad":P==="Warning"?"warn":"info";return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(X_,{toasts:t,onDismiss:P=>s(Y=>Y.filter(F=>F.id!==P))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:oc.green},children:e.jsx(Ia,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Organization Wallet, Funding Models & Enforcement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Manage wallet, credit, prepaid, enforcement, multi-currency, and settlement rules"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ts,{label:`Org: ${i.name}`,tone:"info"}),e.jsx(Ts,{label:`Role: ${i.role}`,tone:o?"info":"neutral"}),e.jsx(Ts,{label:`Status: ${i.status}`,tone:i.status==="Active"?"good":i.status==="Paused"?"warn":"bad"}),e.jsx(Ts,{label:`Model: ${i.model}`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(Y_,{value:n,onChange:r,options:l.map(P=>({value:P.id,label:P.name}))})}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Wallet Switcher",message:"This would open Wallet Switcher."}),children:[e.jsx(ue,{className:"h-4 w-4"})," Switch"]}),e.jsxs(Rt,{variant:"outline",onClick:I,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(Rt,{variant:"primary",onClick:()=>a({kind:"success",title:"Refreshed"}),children:[e.jsx(Rn,{className:"h-4 w-4"})," Refresh"]})]})]}),o?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"View-only"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Editing funding model and enforcement requires Admin or Finance role."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsxs(Hi,{title:"Funding model",subtitle:"Wallet, prepaid, credit and combined models",right:e.jsx(Ts,{label:i.model,tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Prepaid"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Deposit-backed funding"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(al,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:["Balance: ",Zr(i.prepaidBalanceUGX)]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",disabled:!o,title:o?"Request top-up":"Admin required",onClick:()=>a({kind:"info",title:"Funding request",message:"Create prepaid top-up request"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Request top-up"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"History",message:"Open funding history"}),children:[e.jsx(ue,{className:"h-4 w-4"})," History"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Credit line"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Invoice-backed funding"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(k0,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:["Limit: ",Zr(i.creditLimitUGX)]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Used: ",Zr(i.creditUsedUGX),"  Available: ",Zr(d)]}),e.jsx(Q_,{value:i.creditUsedUGX,max:i.creditLimitUGX||1}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",disabled:!o,title:o?"Request increase":"Admin required",onClick:()=>a({kind:"info",title:"Funding request",message:"Create credit increase request"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Increase"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Statements",message:"Open credit statements"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Statements"]})]})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Funding model affects checkout eligibility, approvals, and enforcement. Show reasons in receipt drawer."})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Policy builder",message:"Deep link to Policy Builder"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Policy"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Approvals",message:"Deep link to Approval Inbox"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Approvals"]}),e.jsxs(Rt,{variant:"outline",onClick:I,children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced"]})]})]}),e.jsx(Hi,{title:"Multi-currency balances",subtitle:"Recommended extension: show balances and settlement currency rules",right:e.jsx(Ts,{label:"Multi-currency",tone:"info"}),children:e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:Object.keys(i.walletBalances).map(P=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P}),P==="UGX"?e.jsx(Ts,{label:"Primary",tone:"info"}):e.jsx(Ts,{label:"Other",tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:K_(i.walletBalances[P],P)}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Available balance"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(nn,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"FX",message:"Open FX & Multi-Currency"}),children:[e.jsx(ue,{className:"h-4 w-4"})," FX"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Settlement",message:"Scroll to settlement rules"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Settlement"]})]})]},P))})}),e.jsx(Hi,{title:"Settlement currency rules",subtitle:"Preferences to control payout and reporting currency",right:e.jsxs(Rt,{variant:"primary",disabled:!o,title:o?"Add":"Admin required",onClick:()=>V(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]}),children:e.jsxs("div",{className:"space-y-2",children:[p.map(P=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.target}),e.jsx(Ts,{label:P.scope,tone:"neutral"}),e.jsx(Ts,{label:P.currency,tone:"info"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:P.note})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Edit",message:"Edit rule in Admin Console"}),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(Rt,{variant:"outline",disabled:!o,title:o?"Delete":"Admin required",onClick:()=>{h(Y=>Y.filter(F=>F.id!==P.id)),a({kind:"info",title:"Deleted",message:P.id})},children:"Delete"})]})]})},P.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Learn",message:"Explain rule precedence"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Learn"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Open FX",message:"Open FX & Multi-Currency"}),children:[e.jsx(ue,{className:"h-4 w-4"})," FX"]})]})]})}),e.jsx(Hi,{title:"Funding requests",subtitle:"Requests, approvals, and audit",right:e.jsx(Ts,{label:`${y.filter(P=>P.status==="Pending").length} pending`,tone:y.some(P=>P.status==="Pending")?"warn":"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[y.map(P=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.type}),e.jsx(Ts,{label:P.status,tone:P.status==="Approved"?"good":P.status==="Rejected"?"bad":"warn"}),e.jsx(Ts,{label:P.id,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Requested by ",P.requestedBy,"  ",P.when]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:P.note})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.amountUGX?Zr(P.amountUGX):"No amount"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center justify-end gap-2",children:[e.jsx(Rt,{variant:"primary",disabled:!o||P.status!=="Pending",title:o?"Approve":"Admin required",onClick:()=>A(P.id),children:e.jsx(He,{className:"h-4 w-4"})}),e.jsx(Rt,{variant:"accent",disabled:!o||P.status!=="Pending",title:o?"Reject":"Admin required",onClick:()=>b(P.id),children:e.jsx(_e,{className:"h-4 w-4"})})]})]})]})},P.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Approvals",message:"Open Approvals Inbox"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Approvals inbox"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"New request",message:"Create funding request"}),children:[e.jsx(ue,{className:"h-4 w-4"})," New"]})]})]})})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(Hi,{title:"Enforcement summary",subtitle:"Reasons why org wallet may be blocked",right:e.jsx(Ts,{label:`${i.enforcement.length} signal(s)`,tone:i.enforcement.some(P=>P.severity==="Blocked")?"bad":i.enforcement.some(P=>P.severity==="Warning")?"warn":"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[i.enforcement.map((P,Y)=>e.jsx("div",{className:go("rounded-3xl border p-4",P.severity==="Blocked"?"border-rose-200 bg-rose-50":P.severity==="Warning"?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:go("grid h-10 w-10 place-items-center rounded-2xl",P.severity==="Blocked"?"bg-white text-rose-700":P.severity==="Warning"?"bg-white text-amber-800":"bg-white text-blue-700"),children:P.severity==="Blocked"?e.jsx(as,{className:"h-5 w-5"}):P.severity==="Warning"?e.jsx(Ld,{className:"h-5 w-5"}):e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.flag}),e.jsx(Ts,{label:P.severity,tone:J_(P.severity)})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-800",children:P.reason}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:P.severity==="Blocked"?"accent":"outline",onClick:()=>a({kind:"info",title:"Resolve",message:"Open resolution steps"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Resolve"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Policy",message:"Show enforcement policy"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Policy"]})]})]})]})},Y)),i.enforcement.length?null:e.jsx("div",{className:"text-sm text-slate-600",children:"No enforcement signals."})]})}),e.jsx(Hi,{title:"Auto top-up",subtitle:"Rules and simulation",right:e.jsx(Ts,{label:u.some(P=>P.enabled)?"Enabled":"Disabled",tone:u.some(P=>P.enabled)?"info":"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[u.map(P=>e.jsx("div",{className:go("rounded-3xl border p-4",P.enabled?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Rule ",P.id]}),e.jsx(Ts,{label:P.enabled?"Enabled":"Disabled",tone:P.enabled?"good":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Trigger below ",Zr(P.triggerBelowUGX)," then top up ",Zr(P.topUpAmountUGX)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Method: ",P.method,"  Cooldown: ",P.cooldown]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:P.note})]}),e.jsx(Rt,{variant:P.enabled?"primary":"outline",disabled:!o,title:o?"Toggle":"Admin required",onClick:()=>C(P.id),className:"px-3 py-2",children:P.enabled?"ON":"OFF"})]})},P.id)),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Simulation"}),e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"Estimate how often auto top-up would run"}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Spend per period (UGX)"}),e.jsx("input",{value:S,onChange:P=>z(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Days"}),e.jsx("input",{value:$,onChange:P=>D(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsxs("div",{children:["Estimated daily spend: ",Zr(W.perDay)]}),e.jsxs("div",{className:"mt-1",children:["Expected top-ups: ",W.expectedTopUps," per period"]})]})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Simulate",message:"Run simulation suite"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Scenario suite"]}),e.jsxs(Rt,{variant:"outline",onClick:I,children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced"]})]})]})]})}),e.jsx(Hi,{title:"Risk event feed",subtitle:"Signals across funding and enforcement",right:e.jsx(Ts,{label:`${j.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[j.map(P=>e.jsx("div",{className:go("rounded-3xl border p-4",P.severity==="Critical"?"border-rose-200 bg-rose-50":P.severity==="Warning"?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.title}),e.jsx(Ts,{label:P.severity,tone:k(P.severity)})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-800",children:P.detail}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:P.when})]}),e.jsx(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Open",message:P.id}),className:"px-3 py-2",children:e.jsx(ue,{className:"h-4 w-4"})})]})},P.id)),e.jsx("div",{className:"pt-2",children:e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Export",message:"Export risk feed"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:oc.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium org wallet management"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Multi-currency, settlement rules, enforcement reasons, and auto top-up simulations."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(Ts,{label:"Multi-currency",tone:"neutral"}),e.jsx(Ts,{label:"Settlement rules",tone:"neutral"}),e.jsx(Ts,{label:"Enforcement",tone:"neutral"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rt,{variant:"outline",onClick:I,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Approvals",message:"Open Approvals Inbox"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Approvals"]})]})]})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700",children:e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Expose settlement rules and multi-currency balances in wallet.evzone.app to match your wallet plan."})]})]}),e.jsxs(Rt,{variant:"outline",onClick:()=>a({kind:"info",title:"Help",message:"Open help"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Help"]})]})})]})]})}),e.jsx(eV,{open:he,title:"Add settlement rule",subtitle:"Set settlement currency by beneficiary, module, or organization",onClose:()=>V(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Rules apply in order of specificity."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rt,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsxs(Rt,{variant:"primary",disabled:!o,title:o?"Add":"Admin required",onClick:M,children:[e.jsx(He,{className:"h-4 w-4"})," Add"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Rule"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Scope"}),e.jsx("select",{value:xe,onChange:P=>pe(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["Beneficiary","Module","Organization"].map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Target"}),e.jsx("input",{value:be,onChange:P=>fe(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"CorporatePay"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Currency"}),e.jsx("select",{value:K,onChange:P=>re(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["UGX","USD","CNY","KES"].map(P=>e.jsx("option",{value:P,children:P},P))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Note"}),e.jsx("input",{value:q,onChange:P=>L(P.target.value),className:"mt-1 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"Reason"})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Preview"}),e.jsxs("div",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Scope"}),e.jsx("span",{className:"font-semibold",children:xe})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Target"}),e.jsx("span",{className:"font-semibold",children:be||""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Currency"}),e.jsx("span",{className:"font-semibold",children:K})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Note"}),e.jsx("span",{className:"font-semibold",children:q})]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Beneficiary rules override module rules. Module rules override org defaults."})]})})]})]})]})})]})}function eV({open:t,title:s,subtitle:a,onClose:l,children:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?l():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,l]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:l,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:n}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}const yn={green:"#03CD8C",orange:"#F77F00"};function Fa(...t){return t.filter(Boolean).join(" ")}function Ki(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function cg(t,s,a){return Math.max(s,Math.min(a,t))}function wr(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function co(t){return t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function xp(t,s){const a=new Date(t);return a.setDate(a.getDate()+s),a}function EA(t){const[s,a]=t.split("-").map(l=>Number(l));return new Date(s,(a||1)-1,1,10,0,0,0)}function PA(t){const s=EA(t),a=new Date(s);return a.setMonth(a.getMonth()+1),a.setDate(0),a}function tV(t){return PA(t).getDate()}function sV(t,s){const a=tV(s);return t==="Daily"?a:t==="Weekly"?Math.max(1,Math.round(a/7)):t==="Monthly"?1:2}function rk(t,s){const a=EA(s);return t==="Monthly"?a:t==="Weekly"?xp(a,6):t==="Daily"?xp(a,0):xp(a,14)}function ik(t,s){return s.mode==="DueOnReceipt"?t:s.mode==="EOM"?PA(`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`):xp(t,Math.max(0,s.netDays))}function MA(t,s){if(!t.vatEnabled||t.vatRatePct<=0)return{vat:0,subtotal:s};const a=t.vatRatePct/100;if(t.vatInclusive){const r=s-s/(1+a),i=s-r;return{vat:r,subtotal:i}}return{vat:s*a,subtotal:s}}function hs({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Fa("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Kt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:yn.green}:t==="accent"?{background:yn.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Fa(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Xi({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Fa("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Fa("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function ca({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Fa(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Fa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function ei({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Fa(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Fa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function _n({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Fa(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Fa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i,children:i},i))})]})}function Jo({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:Fa(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:Fa("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function pp({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null),[n,r]=c.useState({top:0,left:0,up:!1});return c.useEffect(()=>{if(s&&l.current){const i=l.current.getBoundingClientRect(),o=t.length*40+20,u=window.innerHeight-i.bottom<o&&i.top>o;r({top:u?i.top-8:i.bottom+8,left:i.right,up:u});const x=()=>a(!1);return window.addEventListener("scroll",x,{capture:!0}),window.addEventListener("resize",x),()=>{window.removeEventListener("scroll",x,{capture:!0}),window.removeEventListener("resize",x)}}},[s,t.length]),e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 focus:bg-slate-100 focus:outline-none",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&Cj.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>a(!1)}),e.jsx("div",{className:"fixed z-[9999] w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl ring-1 ring-slate-200",style:{top:n.up?"auto":n.top,bottom:n.up?window.innerHeight-n.top:"auto",left:n.left-192},children:t.map((i,o)=>e.jsx("button",{onClick:()=>{i.onClick(),a(!1)},className:Fa("block w-full px-4 py-2.5 text-left text-sm font-medium transition hover:bg-slate-50",i.variant==="danger"?"text-rose-700 hover:bg-rose-50":"text-slate-700"),children:i.label},o))})]}),document.body)]})}function kx({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-1",children:[o?e.jsx(pp,{actions:o}):null,e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function aV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Fa("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(rt,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function ti({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function lV({entity:t,template:s,invoiceNo:a,issueDate:l,dueDate:n,terms:r,lines:i}){const o=c.useMemo(()=>{let u=0,x=0;for(const h of i){const j=MA(t,h.amountUGX);u+=j.subtotal,x+=j.vat}const p=(t.vatEnabled&&!t.vatInclusive,u+x);return{subtotal:u,vat:x,total:p}},[t,i]),d=c.useMemo(()=>r.mode==="DueOnReceipt"?"Due on receipt":r.mode==="EOM"?"Due end of month":`Net ${r.netDays}`,[r]);return e.jsxs("div",{className:"overflow-hidden rounded-[24px] border border-slate-200 bg-white",children:[e.jsxs("div",{className:"px-5 py-4",style:{background:"linear-gradient(135deg, rgba(3,205,140,0.12), rgba(255,255,255,0))"},children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Fa("grid h-11 w-11 place-items-center rounded-2xl text-white",s.showLogo?"":"opacity-70"),style:{background:s.accent||yn.green},children:e.jsx(jt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s.brandName||"CorporatePay"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Invoice"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Invoice No"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:a})]})]}),s.headerNote?e.jsx("div",{className:"mt-3 rounded-2xl bg-white/70 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:s.headerNote}):null]}),e.jsxs("div",{className:"px-5 py-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"From"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:t.legalName}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:[t.address1,t.address2?`, ${t.address2}`:"",e.jsx("br",{}),t.city,", ",t.country,e.jsx("br",{}),"Tax ID: ",t.taxId||"-","  VAT: ",t.vatNo||"-"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Dates"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Issue: ",e.jsx("span",{className:"font-semibold text-slate-900",children:co(l)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Due: ",e.jsx("span",{className:"font-semibold text-slate-900",children:co(n)})]}),e.jsx("div",{className:"mt-2",children:e.jsx(hs,{label:d,tone:"info"})})]})]}),e.jsx("div",{className:"mt-4 overflow-hidden rounded-2xl border border-slate-200",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Description"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"})]})}),e.jsxs("tbody",{children:[i.slice(0,6).map(u=>e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:u.description}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[u.module,u.marketplace?`  ${u.marketplace}`:""]}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:wr(u.amountUGX)})]},u.id)),i.length>6?e.jsx("tr",{className:"border-t border-slate-100",children:e.jsxs("td",{className:"px-4 py-3 text-xs text-slate-600",colSpan:3,children:["+ ",i.length-6," more line(s)"]})}):null]})]})}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Payment instructions"}),e.jsx("div",{className:"mt-1 text-slate-700",children:s.paymentInstructions||"-"})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold",children:"Subtotal"}),e.jsx("span",{className:"font-semibold text-slate-900",children:wr(o.subtotal)})]}),s.showVatLine?e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold",children:"VAT"}),e.jsx("span",{className:"font-semibold text-slate-900",children:wr(o.vat)})]}):null,e.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-slate-900",children:[e.jsx("span",{className:"font-semibold",children:"Total"}),e.jsx("span",{className:"font-semibold",children:wr(o.total)})]})]})]}),s.footerText?e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:s.footerText}):null]})]})}function TA(){const t=ot(),[s,a]=c.useState([]),l=m=>{const w=Ki("toast");a(oe=>[{id:w,...m},...oe].slice(0,4)),window.setTimeout(()=>a(oe=>oe.filter(me=>me.id!==w)),3200)},[n,r]=c.useState("invoiceGroups"),[i,o]=c.useState({mode:"Net",netDays:7,earlyDiscountPct:0,earlyDiscountDays:0,lateFeeText:"Late fees apply as per agreement."}),[d,u]=c.useState(()=>[{id:"ENT-UG",name:"Uganda HQ",legalName:"Acme Group Limited (Uganda)",country:"Uganda",city:"Kampala",address1:"Plot 12, Nkrumah Road",address2:"Suite 5",currency:"UGX",taxId:"TIN-123-456-789",vatNo:"VAT-UG-00991",vatEnabled:!0,vatRatePct:18,vatInclusive:!1,billingEmail:"ap-ug@acme.com",phone:"+256 700 000 000",isPrimary:!0},{id:"ENT-CN",name:"China Branch",legalName:"Acme Group Co., Ltd. (China)",country:"China",city:"Wuxi",address1:"Room 265, No. 3 Gaolang East Road",address2:"Xinwu District",currency:"CNY",taxId:"CN-TAX-0001",vatNo:"CN-VAT-0001",vatEnabled:!0,vatRatePct:13,vatInclusive:!1,billingEmail:"ap-cn@acme.com",phone:"+86 177 0000 0000",isPrimary:!1}]),[x,p]=c.useState(()=>[{id:"TPL-01",name:"Default modern",brandName:"EVzone CorporatePay",accent:yn.green,showLogo:!0,headerNote:"Thank you for your business.",footerText:"This invoice is generated electronically and is valid without signature.",paymentInstructions:"Pay via bank transfer. Reference the invoice number.",showVatLine:!0,layout:"Modern"},{id:"TPL-02",name:"Finance classic",brandName:"EVzone CorporatePay",accent:yn.orange,showLogo:!0,headerNote:"Accounts Payable: please include cost code on remittance advice.",footerText:"Payment terms apply as agreed.",paymentInstructions:"Bank transfer only. Contact finance for details.",showVatLine:!0,layout:"Classic"}]),[h,j]=c.useState(()=>{const m=Date.now();return[{id:"IG-MAIN-UG",name:"Main corporate",entityId:"ENT-UG",frequency:"Weekly",customRule:"",apTo:"ap@acme.com",apCc:"finance@acme.com",costCode:"ACME-MAIN",templateId:"TPL-01",prefix:"ACME",nextSequence:1042,paymentTermsOverrideEnabled:!1,status:"Active",lastInvoicedAt:m-7*24*60*60*1e3,nextInvoiceAt:m+2*24*60*60*1e3,notes:"Primary stream for Uganda HQ."},{id:"IG-SALES-TRAVEL",name:"Sales travel",entityId:"ENT-UG",frequency:"Monthly",customRule:"",apTo:"sales-ap@acme.com",apCc:"finance@acme.com",costCode:"ACME-SALES",templateId:"TPL-02",prefix:"ACME-SALES",nextSequence:88,paymentTermsOverrideEnabled:!0,paymentTermsOverride:{mode:"Net",netDays:14,earlyDiscountPct:0,earlyDiscountDays:0,lateFeeText:"Late fees apply."},status:"Active",lastInvoicedAt:m-28*24*60*60*1e3,nextInvoiceAt:m+3*24*60*60*1e3,notes:"Sales commutes and client rides."},{id:"IG-CN-PROC",name:"China procurement",entityId:"ENT-CN",frequency:"Weekly",customRule:"",apTo:"ap-cn@acme.com",apCc:"finance@acme.com",costCode:"CN-PROC",templateId:"TPL-01",prefix:"ACME-CN",nextSequence:221,paymentTermsOverrideEnabled:!1,status:"Active",lastInvoicedAt:m-8*24*60*60*1e3,nextInvoiceAt:m+1*24*60*60*1e3,notes:"Separate legal entity stream."}]}),y=c.useMemo(()=>{const m=(w,oe,me,Me,Ve)=>({id:w,description:oe,module:me,marketplace:Ve,amountUGX:Me});return{"IG-MAIN-UG":[m("L1","Corporate rides","Rides & Logistics",82e5),m("L2","EV charging credits","EVs & Charging",41e5),m("L3","EVmart purchases","E-Commerce",24e5,"EVmart"),m("L4","MyLiveDealz deals","E-Commerce",31e5,"MyLiveDealz")],"IG-SALES-TRAVEL":[m("L1","Sales travel rides","Rides & Logistics",52e5)],"IG-CN-PROC":[m("L1","GadgetMart procurement","E-Commerce",6e6,"GadgetMart"),m("L2","ExpressMart logistics","E-Commerce",11e5,"ExpressMart")]}},[]),[f,I]=c.useState(()=>{const m=new Date,w=new Date(m);return w.setMonth(w.getMonth()+1),`${w.getFullYear()}-${String(w.getMonth()+1).padStart(2,"0")}`}),[A,b]=c.useState(!0),[C,S]=c.useState(()=>JSON.parse(JSON.stringify(y))),[z,$]=c.useState(!1),[D,W]=c.useState(()=>({id:"",name:"",legalName:"",country:"",city:"",address1:"",address2:"",currency:"UGX",taxId:"",vatNo:"",vatEnabled:!0,vatRatePct:18,vatInclusive:!1,billingEmail:"",phone:"",isPrimary:!1})),[he,V]=c.useState(!1),[xe,pe]=c.useState(()=>({id:"",name:"",brandName:"EVzone CorporatePay",accent:yn.green,showLogo:!0,headerNote:"",footerText:"",paymentInstructions:"",showVatLine:!0,layout:"Modern"})),[be,fe]=c.useState(!1),[K,re]=c.useState(()=>({id:"",name:"",entityId:"ENT-UG",frequency:"Monthly",customRule:"",apTo:"",apCc:"",costCode:"",templateId:"TPL-01",prefix:"INV",nextSequence:1,paymentTermsOverrideEnabled:!1,paymentTermsOverride:void 0,status:"Active",notes:""})),[q,L]=c.useState(()=>{var m;return((m=h[0])==null?void 0:m.id)||""}),[M,k]=c.useState(!1),[P,Y]=c.useState({...i}),F=c.useMemo(()=>{const m={};return d.forEach(w=>m[w.id]=w),m},[d]),G=c.useMemo(()=>{const m={};return x.forEach(w=>m[w.id]=w),m},[x]),ve=c.useMemo(()=>{const m={};return h.forEach(w=>m[w.id]=w),m},[h]),Te=c.useMemo(()=>{const m=h.filter(w=>w.status==="Active"&&w.nextInvoiceAt).map(w=>w.nextInvoiceAt).sort((w,oe)=>w-oe);return m.length?new Date(m[0]):null},[h]),ye=c.useMemo(()=>h.filter(m=>m.status==="Active").map(m=>{const w=F[m.entityId],oe=C[m.id]||[],me=sV(m.frequency,f);let Me=0,Ve=0;for(const Xe of oe){const Ie=MA(w,Xe.amountUGX);Me+=Ie.subtotal,Ve+=Ie.vat}const Ze=rk(m.frequency,f),E=m.paymentTermsOverrideEnabled&&m.paymentTermsOverride?m.paymentTermsOverride:i,J=ik(Ze,E),g=Me,H=A?Ve:0,N=g+H,U=Math.round(g/Math.max(1,me)),ce=Math.round(H/Math.max(1,me)),O=U+ce,je=m.nextSequence,we=`${m.prefix}-${f.replace("-","")}-${String(je).padStart(4,"0")}`;return{invoiceGroupId:m.id,entityId:m.entityId,month:f,cyclesInMonth:me,monthSubtotal:g,monthVat:H,monthTotal:N,perCycleSubtotal:U,perCycleVat:ce,perCycleTotal:O,invoiceNoPreview:we,issueDate:Ze,dueDate:J,lineItems:oe}}).sort((m,w)=>m.entityId.localeCompare(w.entityId)||m.invoiceGroupId.localeCompare(w.invoiceGroupId)),[h,F,C,f,A,i]),ie=c.useMemo(()=>ye.reduce((m,w)=>m+w.monthTotal,0),[ye]),Oe=()=>{const m={entities:d,templates:x,invoiceGroups:h,paymentTerms:i,simulation:{month:f,includeVat:A,linesByGroup:C},exportedAt:new Date().toISOString()},w=JSON.stringify(m,null,2),oe=new Blob([w],{type:"application/json"}),me=URL.createObjectURL(oe),Me=document.createElement("a");Me.href=me,Me.download="corporatepay-billing-setup.json",Me.click(),URL.revokeObjectURL(me),l({title:"Exported",message:"Downloaded billing configuration.",kind:"success"})},Ae=()=>l({title:"Saved",message:"Billing setup saved (demo).",kind:"success"}),ee=()=>{W({id:"",name:"",legalName:"",country:"",city:"",address1:"",address2:"",currency:"UGX",taxId:"",vatNo:"",vatEnabled:!0,vatRatePct:18,vatInclusive:!1,billingEmail:"",phone:"",isPrimary:!1}),$(!0)},Ne=m=>{W(JSON.parse(JSON.stringify(m))),$(!0)},Ce=()=>{if(!D.name.trim()||!D.legalName.trim()||!D.country.trim()){l({title:"Missing fields",message:"Entity name, legal name, and country are required.",kind:"warn"});return}const m=D.id||Ki("ENT");u(w=>{let oe=w.slice();D.isPrimary&&(oe=oe.map(Ve=>({...Ve,isPrimary:!1})));const me=oe.findIndex(Ve=>Ve.id===m),Me={...D,id:m};return me>=0?oe[me]=Me:oe.unshift(Me),oe}),l({title:"Saved",message:"Entity saved.",kind:"success"}),$(!1)},Ee=m=>{const w=d.find(me=>me.id===m);if(w!=null&&w.isPrimary){l({title:"Blocked",message:"You cannot delete the primary entity.",kind:"warn"});return}if(h.some(me=>me.entityId===m)){l({title:"Blocked",message:"Entity is used by an invoice group.",kind:"warn"});return}u(me=>me.filter(Me=>Me.id!==m)),l({title:"Deleted",message:"Entity deleted.",kind:"info"})},Ue=()=>{pe({id:"",name:"",brandName:"EVzone CorporatePay",accent:yn.green,showLogo:!0,headerNote:"",footerText:"",paymentInstructions:"Pay via bank transfer. Reference the invoice number.",showVatLine:!0,layout:"Modern"}),V(!0)},Ye=m=>{pe(JSON.parse(JSON.stringify(m))),V(!0)},De=()=>{if(!xe.name.trim()){l({title:"Missing name",message:"Template name is required.",kind:"warn"});return}const m=xe.id||Ki("TPL"),w={...xe,id:m};p(oe=>{const me=oe.slice(),Me=me.findIndex(Ve=>Ve.id===m);return Me>=0?me[Me]=w:me.unshift(w),me}),l({title:"Saved",message:"Template saved.",kind:"success"}),V(!1)},Be=m=>{if(h.some(oe=>oe.templateId===m)){l({title:"Blocked",message:"Template is used by an invoice group.",kind:"warn"});return}p(oe=>oe.filter(me=>me.id!==m)),l({title:"Deleted",message:"Template deleted.",kind:"info"})},$e=m=>{const w=x.find(me=>me.id===m);if(!w)return;const oe={...JSON.parse(JSON.stringify(w)),id:Ki("TPL"),name:`${w.name} (Copy)`};p(me=>[oe,...me]),l({title:"Duplicated",message:"Template duplicated.",kind:"success"})},_=()=>{var m,w,oe;re({id:"",name:"",entityId:((m=d.find(me=>me.isPrimary))==null?void 0:m.id)||((w=d[0])==null?void 0:w.id)||"",frequency:"Monthly",customRule:"",apTo:"",apCc:"",costCode:"",templateId:((oe=x[0])==null?void 0:oe.id)||"",prefix:"INV",nextSequence:1,paymentTermsOverrideEnabled:!1,paymentTermsOverride:void 0,status:"Active",notes:""}),fe(!0)},te=m=>{re(JSON.parse(JSON.stringify(m))),fe(!0)},Re=()=>{if(!K.name.trim()||!K.apTo.trim()||!K.costCode.trim()){l({title:"Missing fields",message:"Group name, AP recipient, and cost code are required.",kind:"warn"});return}const m=K.id||Ki("IG"),w={...K,id:m};w.paymentTermsOverrideEnabled&&!w.paymentTermsOverride&&(w.paymentTermsOverride={...i}),j(oe=>{const me=oe.slice(),Me=me.findIndex(Ve=>Ve.id===m);return Me>=0?me[Me]=w:me.unshift(w),me}),l({title:"Saved",message:"Invoice group saved.",kind:"success"}),fe(!1)},Fe=m=>{j(w=>w.filter(oe=>oe.id!==m)),l({title:"Deleted",message:"Invoice group deleted.",kind:"info"})},T=m=>{const w=h.find(me=>me.id===m);if(!w)return;const oe={...JSON.parse(JSON.stringify(w)),id:Ki("IG"),name:`${w.name} (Copy)`,nextSequence:1};j(me=>[oe,...me]),l({title:"Cloned",message:"Invoice group cloned.",kind:"success"})},Z=m=>{j(w=>w.map(oe=>oe.id===m?{...oe,status:oe.status==="Active"?"Paused":"Active"}:oe)),l({title:"Updated",message:"Invoice group status updated.",kind:"info"})},B=()=>{const m=ve[K.id||""],w=K.paymentTermsOverride||((m==null?void 0:m.paymentTermsOverride)??i);Y({...w}),k(!0)},ne=()=>{re(m=>({...m,paymentTermsOverride:{...P},paymentTermsOverrideEnabled:!0})),k(!1),l({title:"Applied",message:"Payment terms override applied to group draft.",kind:"success"})},X=(m,w,oe)=>{S(me=>{const Me={...me},Ve=(Me[m]||[]).map(Ze=>Ze.id===w?{...Ze,...oe}:Ze);return Me[m]=Ve,Me})},ge=m=>{S(w=>{const oe={...w},me=oe[m]?oe[m].slice():[];return me.push({id:Ki("LI"),description:"New line",module:"Rides & Logistics",marketplace:"",amountUGX:0}),oe[m]=me,oe})},Le=(m,w)=>{S(oe=>{const me={...oe};return me[m]=(me[m]||[]).filter(Me=>Me.id!==w),me})},ae=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(ye,null,2)),l({title:"Copied",message:"Simulation JSON copied to clipboard.",kind:"success"})}catch{l({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},le=c.useMemo(()=>{const m=h.find(g=>g.id===q)||h[0];if(!m)return null;const w=F[m.entityId]||d[0],oe=G[m.templateId]||x[0],me=ye.find(g=>g.invoiceGroupId===m.id),Me=(me==null?void 0:me.invoiceNoPreview)||`${m.prefix}-${f.replace("-","")}-${String(m.nextSequence).padStart(4,"0")}`,Ve=(me==null?void 0:me.issueDate)||rk(m.frequency,f),Ze=(me==null?void 0:me.dueDate)||ik(Ve,m.paymentTermsOverrideEnabled&&m.paymentTermsOverride?m.paymentTermsOverride:i),E=(me==null?void 0:me.lineItems)||C[m.id]||[],J=m.paymentTermsOverrideEnabled&&m.paymentTermsOverride?m.paymentTermsOverride:i;return{entity:w,template:oe,invoiceNo:Me,issueDate:Ve,dueDate:Ze,terms:J,lines:E}},[q,h,F,G,d,x,ye,f,C,i]),R=c.useMemo(()=>i.mode==="DueOnReceipt"?"Due on receipt":i.mode==="EOM"?"Due end of month":`Net ${i.netDays}`,[i]),se=c.useMemo(()=>d.map(m=>m.id),[d]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(aV,{toasts:s,onDismiss:m=>a(w=>w.filter(oe=>oe.id!==m))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:yn.green},children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Billing Setup and Invoice Groups"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Invoice schedules, invoice groups, multi-entity tax settings, branded templates, and invoice simulations."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(hs,{label:`Entities: ${d.length}`,tone:"neutral"}),e.jsx(hs,{label:`Invoice groups: ${h.length}`,tone:"neutral"}),e.jsx(hs,{label:`Terms: ${R}`,tone:"info"}),Te?e.jsx(hs,{label:`Next invoice: ${co(Te)}`,tone:"neutral"}):e.jsx(hs,{label:"No upcoming invoices",tone:"warn"}),e.jsx(hs,{label:`Next month estimate: ${wr(ie)}`,tone:ie>0?"good":"neutral"}),e.jsx(hs,{label:"Premium simulations",tone:"info"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Kt,{variant:"outline",onClick:Oe,children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs(Kt,{variant:"outline",onClick:Ae,children:[e.jsx(Vr,{className:"h-4 w-4"})," Save"]}),e.jsxs(Kt,{variant:"outline",onClick:ae,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy simulation"]}),e.jsxs(Kt,{variant:"outline",onClick:Ue,children:[e.jsx(w1,{className:"h-4 w-4"})," New template"]}),e.jsxs(Kt,{variant:"primary",onClick:_,children:[e.jsx(ft,{className:"h-4 w-4"})," New invoice group"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"invoiceGroups",label:"Invoice groups"},{id:"entities",label:"Entities and tax"},{id:"templates",label:"Templates"},{id:"simulation",label:"Billing simulation"},{id:"terms",label:"Payment terms"}].map(m=>e.jsx("button",{className:Fa("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",n===m.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:n===m.id?{background:yn.green}:void 0,onClick:()=>r(m.id),children:m.label},m.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(qe,{mode:"wait",children:[n==="invoiceGroups"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(ti,{title:"Invoice groups",subtitle:"Different AP recipients, cost codes, templates, and frequencies. Each group is tied to a legal entity stream.",right:e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsxs(Kt,{variant:"outline",onClick:_,children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]})}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Entity"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Frequency"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"AP recipients"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Cost code"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Template"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Next invoice"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[h.map(m=>{const w=F[m.entityId],oe=G[m.templateId];return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:m.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[m.prefix,"  Seq ",m.nextSequence]})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:w?w.name:m.entityId}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(hs,{label:m.frequency,tone:"neutral"}),m.frequency==="Custom"&&m.customRule?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:m.customRule}):null]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[e.jsxs("div",{className:"text-xs",children:["To: ",e.jsx("span",{className:"font-semibold",children:m.apTo})]}),m.apCc?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["CC: ",m.apCc]}):null]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.costCode}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:oe?oe.name:m.templateId}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(hs,{label:m.status,tone:m.status==="Active"?"good":"warn"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.nextInvoiceAt?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:co(new Date(m.nextInvoiceAt))}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Last: ",m.lastInvoicedAt?co(new Date(m.lastInvoicedAt)):"-"]})]}):e.jsx("div",{className:"text-xs text-slate-500",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(pp,{actions:[{label:"Preview",onClick:()=>{L(m.id),l({title:"Preview",message:"Invoice preview updated.",kind:"info"})}},{label:"Edit",onClick:()=>te(m)},{label:"Clone",onClick:()=>T(m.id)},{label:m.status==="Active"?"Pause":"Activate",onClick:()=>Z(m.id)},{label:"Delete",onClick:()=>Fe(m.id),variant:"danger"}]})})]},m.id)}),h.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No invoice groups configured."})})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: each legal entity can have separate invoice streams. Use different invoice groups tied to each entity."})]})},"invoiceGroups"):null,n==="entities"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(ti,{title:"Entities and tax, VAT",subtitle:"Tax and VAT settings are per entity or branch.",right:e.jsxs(Kt,{variant:"primary",onClick:ee,children:[e.jsx(ft,{className:"h-4 w-4"})," Add entity"]}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Entity"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Country"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Currency"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Tax ID"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"VAT"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Billing contact"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Primary"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(m=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:m.name}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:m.legalName})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.country}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.currency}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.taxId||"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(hs,{label:m.vatEnabled?"VAT on":"VAT off",tone:m.vatEnabled?"good":"neutral"}),m.vatEnabled?e.jsx(hs,{label:`${m.vatRatePct}%`,tone:"info"}):null,m.vatEnabled?e.jsx(hs,{label:m.vatInclusive?"Inclusive":"Exclusive",tone:"neutral"}):null]})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.billingEmail||"-"}),e.jsx("td",{className:"px-4 py-3",children:m.isPrimary?e.jsx(hs,{label:"Primary",tone:"good"}):e.jsx(hs,{label:"No",tone:"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(pp,{actions:[{label:"Edit",onClick:()=>Ne(m)},{label:"Delete",onClick:()=>Ee(m.id),variant:"danger"}]})})]},m.id))})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: VAT inclusive means VAT is included in item amounts. VAT exclusive adds VAT on top."})]})},"entities"):null,n==="templates"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(ti,{title:"Invoice templates",subtitle:"Premium: branded templates per invoice group.",right:e.jsxs(Kt,{variant:"primary",onClick:Ue,children:[e.jsx(ft,{className:"h-4 w-4"})," New"]}),children:[e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:x.map(m=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsx(hs,{label:m.layout,tone:"neutral"}),e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full bg-slate-50 px-3 py-2 text-xs font-semibold text-slate-700 ring-1 ring-slate-200",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{background:m.accent}}),"Accent"]})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Brand: ",m.brandName]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(hs,{label:m.showVatLine?"VAT line":"No VAT line",tone:m.showVatLine?"info":"neutral"}),e.jsx(hs,{label:m.showLogo?"Logo":"No logo",tone:m.showLogo?"good":"neutral"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Kt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ye(m),children:[e.jsx(Au,{className:"h-4 w-4"})," Edit"]}),e.jsxs(Kt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>$e(m.id),children:[e.jsx(jl,{className:"h-4 w-4"})," Duplicate"]}),e.jsx(Kt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>Be(m.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]}),m.headerNote?e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:m.headerNote}):null]},m.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: assign templates per invoice group for separate branded streams."})]})},"templates"):null,n==="simulation"?e.jsx(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:e.jsxs(ti,{title:"Billing simulation",subtitle:"Premium: what would next month invoice look like by invoice group and entity.",right:e.jsx(hs,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(ca,{label:"Simulation month",value:f,onChange:I,placeholder:"YYYY-MM",hint:"Example: 2026-02"}),e.jsx(Xi,{enabled:A,onChange:b,label:"Include VAT",description:"Uses entity VAT settings"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Estimate"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:wr(ie)}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"All entities combined"})]})]}),e.jsx("div",{className:"mt-4 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Entity"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Frequency"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Cycles"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Month total"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Per-cycle estimate"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice preview"})]})}),e.jsx("tbody",{children:ye.map(m=>{const w=ve[m.invoiceGroupId],oe=F[m.entityId];return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(oe==null?void 0:oe.name)||m.entityId}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(w==null?void 0:w.name)||m.invoiceGroupId}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Cost code: ",(w==null?void 0:w.costCode)||"-"]})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(w==null?void 0:w.frequency)||"-"}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:m.cyclesInMonth}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:wr(m.monthTotal)}),A?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["VAT: ",wr(m.monthVat)]}):e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"VAT not included"})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:wr(m.perCycleTotal)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Issue: ",co(m.issueDate),"  Due: ",co(m.dueDate)]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(pp,{actions:[{label:"Preview",onClick:()=>L(m.invoiceGroupId)},{label:"Add line item",onClick:()=>{ge(m.invoiceGroupId),l({title:"Added",message:"Line item added.",kind:"success"})}}]})})]},`${m.invoiceGroupId}-${m.entityId}`)})})]})}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Edit line items"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Adjust forecast inputs. Totals update automatically."})]}),e.jsx(hs,{label:q||"Select a group",tone:"info"})]}),q?e.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Description"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Marketplace"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[(C[q]||[]).map(m=>e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:m.description,onChange:w=>X(q,m.id,{description:w.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:m.module,onChange:w=>X(q,m.id,{module:w.target.value}),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:m.marketplace||"",onChange:w=>X(q,m.id,{marketplace:w.target.value}),placeholder:"Optional",className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",value:m.amountUGX,onChange:w=>X(q,m.id,{amountUGX:Number(w.target.value||0)}),className:"w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Kt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>Le(q,m.id),children:e.jsx(bs,{className:"h-4 w-4"})})})]},m.id)),(C[q]||[]).length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No line items. Add one above."})})]})]})}):e.jsx("div",{className:"mt-3 rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"Select an invoice group to edit its simulation inputs."})]})]})},"simulation"):null,n==="terms"?e.jsxs(ke.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.18},className:"space-y-4",children:[e.jsxs(ti,{title:"Payment terms",subtitle:"Global default terms. Invoice groups can override if needed.",right:e.jsx(hs,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(_n,{label:"Mode",value:i.mode,onChange:m=>o(w=>({...w,mode:m})),options:["Net","DueOnReceipt","EOM"],hint:"Due date rule"}),e.jsx(ei,{label:"Net days",value:i.netDays,onChange:m=>o(w=>({...w,netDays:Math.max(0,m)})),disabled:i.mode!=="Net",hint:i.mode!=="Net"?"Not used":"Applies to all groups"}),e.jsx(ei,{label:"Early discount percent",value:i.earlyDiscountPct,onChange:m=>o(w=>({...w,earlyDiscountPct:cg(m,0,100)})),hint:"Optional"}),e.jsx(ei,{label:"Early discount days",value:i.earlyDiscountDays,onChange:m=>o(w=>({...w,earlyDiscountDays:Math.max(0,m)})),disabled:i.earlyDiscountPct<=0,hint:"Optional"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Late fee text",value:i.lateFeeText,onChange:m=>o(w=>({...w,lateFeeText:m})),placeholder:"Late fees apply...",rows:3})})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: invoice groups can have different terms if required by a specific AP desk."})]}),e.jsx(ti,{title:"Group overrides",subtitle:"View and edit overrides by invoice group.",right:e.jsx(hs,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Override"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Terms"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:h.map(m=>{const w=m.paymentTermsOverrideEnabled&&m.paymentTermsOverride?m.paymentTermsOverride:i,oe=w.mode==="DueOnReceipt"?"Due on receipt":w.mode==="EOM"?"EOM":`Net ${w.netDays}`;return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:m.name}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(hs,{label:m.paymentTermsOverrideEnabled?"Yes":"No",tone:m.paymentTermsOverrideEnabled?"info":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:oe}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(Kt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{re(JSON.parse(JSON.stringify(m))),Y({...m.paymentTermsOverride||i}),k(!0),fe(!0),l({title:"Edit",message:"Edit group and apply override.",kind:"info"})},children:[e.jsx(Au,{className:"h-4 w-4"})," Edit"]})})]},m.id)})})]})})})]},"terms"):null]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(ti,{title:"Invoice preview",subtitle:"Branded template preview for the selected invoice group.",right:e.jsx(hs,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(_n,{label:"Preview invoice group",value:q,onChange:L,options:h.map(m=>m.id),hint:"Choose a group"}),le?e.jsx(lV,{entity:le.entity,template:le.template,invoiceNo:le.invoiceNo,issueDate:le.issueDate,dueDate:le.dueDate,terms:le.terms,lines:le.lines}):e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No preview available."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Kt,{variant:"outline",onClick:()=>l({title:"PDF",message:"In production, this exports PDF.",kind:"info"}),children:[e.jsx(jt,{className:"h-4 w-4"})," Export PDF"]}),e.jsxs(Kt,{variant:"outline",onClick:()=>l({title:"Send",message:"In production, this sends to AP recipients.",kind:"info"}),children:[e.jsx(os,{className:"h-4 w-4"})," Send test"]}),e.jsxs(Kt,{variant:"outline",onClick:()=>l({title:"Numbering",message:"Invoice number preview is based on prefix and sequence.",kind:"info"}),children:[e.jsx(Fy,{className:"h-4 w-4"})," Numbering"]})]})]}),e.jsxs(ti,{title:"Premium billing simulation",subtitle:"How next month could look per entity and invoice group.",right:e.jsx(lt,{className:"h-5 w-5 text-emerald-700"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) Uses VAT settings per entity"}),e.jsx("li",{children:"2) Uses frequency to estimate cycles per month"}),e.jsx("li",{children:"3) Uses payment terms to compute due date"}),e.jsx("li",{children:"4) Uses template and invoice group prefix for number preview"})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Kt,{variant:"primary",onClick:()=>r("simulation"),children:[e.jsx(Tn,{className:"h-4 w-4"})," Open simulation"]}),e.jsxs(Kt,{variant:"outline",onClick:()=>r("templates"),children:[e.jsx(w1,{className:"h-4 w-4"})," Edit templates"]})]})]})]})]}),e.jsx("div",{className:"mt-4 text-xs text-slate-500",children:"N Billing Setup and Invoice Groups v2: invoice frequency, invoice groups, entity tax and VAT, payment terms, branded templates, multi-entity invoice streams, and next month billing simulations."})]})]})}),e.jsx(kx,{open:z,title:D.id?"Edit entity":"New entity",subtitle:"Tax and VAT settings are configured per entity or branch.",onClose:()=>$(!1),actions:[{label:"Save",onClick:Ce}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Kt,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsxs(Kt,{variant:"primary",onClick:Ce,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ca,{label:"Entity name",value:D.name,onChange:m=>W(w=>({...w,name:m})),placeholder:"Uganda HQ"}),e.jsx(ca,{label:"Legal name",value:D.legalName,onChange:m=>W(w=>({...w,legalName:m})),placeholder:"Legal registered name"}),e.jsx(ca,{label:"Country",value:D.country,onChange:m=>W(w=>({...w,country:m})),placeholder:"Uganda"}),e.jsx(ca,{label:"City",value:D.city,onChange:m=>W(w=>({...w,city:m})),placeholder:"Kampala"}),e.jsx(ca,{label:"Address line 1",value:D.address1,onChange:m=>W(w=>({...w,address1:m})),placeholder:"Street, building"}),e.jsx(ca,{label:"Address line 2",value:D.address2,onChange:m=>W(w=>({...w,address2:m})),placeholder:"Suite, floor"}),e.jsx(_n,{label:"Currency",value:D.currency,onChange:m=>W(w=>({...w,currency:m})),options:["UGX","USD","EUR","CNY"]}),e.jsx(ca,{label:"Billing email",value:D.billingEmail,onChange:m=>W(w=>({...w,billingEmail:m})),placeholder:"ap@company.com"}),e.jsx(ca,{label:"Phone",value:D.phone,onChange:m=>W(w=>({...w,phone:m})),placeholder:"+256..."}),e.jsx(ca,{label:"Tax ID",value:D.taxId,onChange:m=>W(w=>({...w,taxId:m})),placeholder:"TIN..."}),e.jsx(ca,{label:"VAT number",value:D.vatNo,onChange:m=>W(w=>({...w,vatNo:m})),placeholder:"VAT..."}),e.jsx(Xi,{enabled:D.vatEnabled,onChange:m=>W(w=>({...w,vatEnabled:m})),label:"VAT enabled",description:"If off, VAT line can be hidden"}),e.jsx(ei,{label:"VAT rate percent",value:D.vatRatePct,onChange:m=>W(w=>({...w,vatRatePct:cg(m,0,100)})),disabled:!D.vatEnabled}),e.jsx(Xi,{enabled:D.vatInclusive,onChange:m=>W(w=>({...w,vatInclusive:m})),label:"VAT inclusive",description:"If on, VAT is included in amounts"}),e.jsx(Xi,{enabled:D.isPrimary,onChange:m=>W(w=>({...w,isPrimary:m})),label:"Primary entity",description:"Used for defaults"})]})}),e.jsx(kx,{open:he,title:xe.id?"Edit template":"New template",subtitle:"Premium: branded invoice templates per invoice group.",onClose:()=>V(!1),actions:[{label:"Save",onClick:De}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Kt,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Kt,{variant:"primary",onClick:De,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ca,{label:"Template name",value:xe.name,onChange:m=>pe(w=>({...w,name:m})),placeholder:"Default modern"}),e.jsx(ca,{label:"Brand name",value:xe.brandName,onChange:m=>pe(w=>({...w,brandName:m})),placeholder:"EVzone CorporatePay"}),e.jsx(_n,{label:"Layout",value:xe.layout,onChange:m=>pe(w=>({...w,layout:m})),options:["Modern","Classic"]}),e.jsx(_n,{label:"Accent color",value:xe.accent,onChange:m=>pe(w=>({...w,accent:m})),options:[yn.green,yn.orange,"#2563EB","#0F172A","#7C3AED"],hint:"Pick a preset"}),e.jsx(Xi,{enabled:xe.showLogo,onChange:m=>pe(w=>({...w,showLogo:m})),label:"Show logo"}),e.jsx(Xi,{enabled:xe.showVatLine,onChange:m=>pe(w=>({...w,showVatLine:m})),label:"Show VAT line"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Header note",value:xe.headerNote,onChange:m=>pe(w=>({...w,headerNote:m})),placeholder:"Optional note",rows:3})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Payment instructions",value:xe.paymentInstructions,onChange:m=>pe(w=>({...w,paymentInstructions:m})),placeholder:"How to pay",rows:3})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Footer text",value:xe.footerText,onChange:m=>pe(w=>({...w,footerText:m})),placeholder:"Footer",rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: set different templates for different AP recipients using invoice groups."})]})}),e.jsx(kx,{open:be,title:K.id?"Edit invoice group":"New invoice group",subtitle:"Frequency, AP recipients, cost codes, templates, and per-group terms.",onClose:()=>fe(!1),actions:[...K.id?[{label:"Delete",onClick:()=>{Fe(K.id),fe(!1)},variant:"danger"}]:[],{label:"Save",onClick:Re}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Kt,{variant:"outline",onClick:()=>fe(!1),children:"Cancel"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[K.id?e.jsxs(Kt,{variant:"danger",onClick:()=>{Fe(K.id),fe(!1)},children:[e.jsx(bs,{className:"h-4 w-4"})," Delete"]}):null,e.jsxs(Kt,{variant:"primary",onClick:Re,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ca,{label:"Group name",value:K.name,onChange:m=>re(w=>({...w,name:m})),placeholder:"Main corporate"}),e.jsx(_n,{label:"Entity stream",value:K.entityId,onChange:m=>re(w=>({...w,entityId:m})),options:se,hint:"Separate streams per entity"}),e.jsx(_n,{label:"Frequency",value:K.frequency,onChange:m=>re(w=>({...w,frequency:m})),options:["Daily","Weekly","Monthly","Custom"]}),e.jsx(ca,{label:"Custom rule",value:K.customRule,onChange:m=>re(w=>({...w,customRule:m})),placeholder:"Example: Every 15 days",disabled:K.frequency!=="Custom",hint:K.frequency!=="Custom"?"Not used":"Describe schedule"}),e.jsx(ca,{label:"AP to",value:K.apTo,onChange:m=>re(w=>({...w,apTo:m})),placeholder:"ap@company.com"}),e.jsx(ca,{label:"AP cc",value:K.apCc,onChange:m=>re(w=>({...w,apCc:m})),placeholder:"finance@company.com",hint:"Optional"}),e.jsx(ca,{label:"Cost code",value:K.costCode,onChange:m=>re(w=>({...w,costCode:m})),placeholder:"ACME-MAIN"}),e.jsx(_n,{label:"Template",value:K.templateId,onChange:m=>re(w=>({...w,templateId:m})),options:x.map(m=>m.id),hint:"Branded per group"}),e.jsx(ca,{label:"Invoice prefix",value:K.prefix,onChange:m=>re(w=>({...w,prefix:m})),placeholder:"ACME"}),e.jsx(ei,{label:"Next sequence",value:K.nextSequence,onChange:m=>re(w=>({...w,nextSequence:Math.max(1,m)})),hint:"Controls numbering"}),e.jsx(_n,{label:"Status",value:K.status,onChange:m=>re(w=>({...w,status:m})),options:["Active","Paused"]}),e.jsx(Xi,{enabled:K.paymentTermsOverrideEnabled,onChange:m=>re(w=>({...w,paymentTermsOverrideEnabled:m,paymentTermsOverride:m?w.paymentTermsOverride||{...i}:void 0})),label:"Override payment terms",description:"Different terms for this AP desk"}),e.jsx("div",{className:Fa("md:col-span-2",!K.paymentTermsOverrideEnabled&&"opacity-60"),children:e.jsxs(Kt,{variant:"outline",className:"w-full",disabled:!K.paymentTermsOverrideEnabled,onClick:B,children:[e.jsx(Tn,{className:"h-4 w-4"})," Edit override terms"]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Notes",value:K.notes,onChange:m=>re(w=>({...w,notes:m})),placeholder:"Optional notes",rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: invoice groups allow different templates and AP recipients per entity, enabling separate invoice streams."})]})}),e.jsx(kx,{open:M,title:"Payment terms override",subtitle:"This override is applied to the invoice group draft.",onClose:()=>k(!1),actions:[{label:"Apply",onClick:ne}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Kt,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs(Kt,{variant:"primary",onClick:ne,children:[e.jsx(et,{className:"h-4 w-4"})," Apply"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(_n,{label:"Mode",value:P.mode,onChange:m=>Y(w=>({...w,mode:m})),options:["Net","DueOnReceipt","EOM"]}),e.jsx(ei,{label:"Net days",value:P.netDays,onChange:m=>Y(w=>({...w,netDays:Math.max(0,m)})),disabled:P.mode!=="Net"}),e.jsx(ei,{label:"Early discount percent",value:P.earlyDiscountPct,onChange:m=>Y(w=>({...w,earlyDiscountPct:cg(m,0,100)}))}),e.jsx(ei,{label:"Early discount days",value:P.earlyDiscountDays,onChange:m=>Y(w=>({...w,earlyDiscountDays:Math.max(0,m)})),disabled:P.earlyDiscountPct<=0}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Jo,{label:"Late fee text",value:P.lateFeeText,onChange:m=>Y(w=>({...w,lateFeeText:m})),rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"This is a premium feature used when an invoice group requires special terms."})]})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"N Billing Setup and Invoice Groups v2. Core: invoice frequency, invoice groups, tax and VAT per entity, and payment terms. Premium: multi-entity invoice streams, branded templates per group, and next month billing simulation."})})]})}const uh={green:"#03CD8C",orange:"#F77F00"};function P0(...t){return t.filter(Boolean).join(" ")}function nV(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Fc(t,s){const a=Math.abs(t),n=s==="UGX"?0:2,r=a.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n});return`${s} ${r}`}function ua({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:P0("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function ok(t){return t==="Paid"?"good":t==="Overdue"?"bad":t==="Open"?"info":"warn"}function dl({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200"},d=t==="primary"?{background:uh.green}:t==="accent"?{background:uh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:P0(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function rV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:P0("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function ug({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function iV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?n():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.18},className:"fixed inset-y-0 right-0 z-50 w-full max-w-[560px] flex flex-col overflow-hidden border-l border-slate-200 bg-white shadow-[0_20px_70px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 truncate text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function _c({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function oV(){var M,k;const[t,s]=c.useState([]),a=P=>{const Y=nV("toast");s(F=>[{id:Y,...P},...F].slice(0,4)),window.setTimeout(()=>s(F=>F.filter(G=>G.id!==Y)),3200)},l=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Finance"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer"}],[]),[n,r]=c.useState(l[0].id),i=c.useMemo(()=>l.find(P=>P.id===n)||l[0],[l,n]),o=c.useMemo(()=>["Owner","Admin","Finance"].includes(i.role),[i.role]),d=c.useMemo(()=>[{id:"ent_ug",name:"Acme Uganda",country:"Uganda",currency:"UGX"},{id:"ent_cn",name:"Acme China",country:"China",currency:"CNY"}],[]),u=c.useMemo(()=>[{id:"inv_g1",name:"UG Operations",entityId:"ent_ug",billingEmail:"billing-ug@acme.ug"},{id:"inv_g2",name:"CN Procurement",entityId:"ent_cn",billingEmail:"billing-cn@acme.ug"}],[]),x=c.useMemo(()=>[{id:"INV-7001",entityId:"ent_ug",invoiceGroupId:"inv_g1",period:"Jan 1 to Jan 31",issuedAt:"Feb 1",dueAt:"Feb 10",status:"Open",currency:"UGX",total:128e4,balance:128e4,lineItems:[{label:"CorporatePay fees",amount:22e4},{label:"Payout fees",amount:68e3},{label:"FX spread",amount:12e3},{label:"Net settlement",amount:98e4}],references:{internal:"EVZ-INV-7001",provider:"PRV-INV-9001"}},{id:"INV-7002",entityId:"ent_ug",invoiceGroupId:"inv_g1",period:"Dec 1 to Dec 31",issuedAt:"Jan 1",dueAt:"Jan 10",status:"Paid",currency:"UGX",total:98e4,balance:0,lineItems:[{label:"CorporatePay fees",amount:18e4},{label:"Net settlement",amount:8e5}],references:{internal:"EVZ-INV-7002",provider:"PRV-INV-8891"}},{id:"INV-7003",entityId:"ent_cn",invoiceGroupId:"inv_g2",period:"Jan 1 to Jan 31",issuedAt:"Feb 1",dueAt:"Feb 10",status:"Refund pending",currency:"CNY",total:820,balance:820,lineItems:[{label:"China settlement fees",amount:9.84}],references:{internal:"EVZ-INV-7003"}}],[]),[p,h]=c.useState("ent_ug"),[j,y]=c.useState("inv_g1"),[f,I]=c.useState("Last 30 days"),[A,b]=c.useState("PDF"),[C,S]=c.useState(""),[z,$]=c.useState("ALL"),D=c.useMemo(()=>{const P=C.trim().toLowerCase();return x.filter(Y=>Y.entityId===p).filter(Y=>Y.invoiceGroupId===j).filter(Y=>z==="ALL"?!0:Y.status===z).filter(Y=>P?`${Y.id} ${Y.period} ${Y.references.internal} ${Y.references.provider??""}`.toLowerCase().includes(P):!0).sort((Y,F)=>Y.issuedAt<F.issuedAt?1:-1)},[x,p,j,z,C]),[W,he]=c.useState([{id:"JOB-100",createdAt:"Today 09:00",format:"PDF",scope:"UG Operations  Last 30 days",status:"Ready",note:"Statement"},{id:"JOB-101",createdAt:"Yesterday",format:"Forensics ZIP",scope:"UG Operations  Jan",status:"Running",note:"Forensics bundle"},{id:"JOB-102",createdAt:"Last week",format:"CSV",scope:"CN Procurement  Jan",status:"Failed",note:"Provider timeout"}]),[V,xe]=c.useState(!1),[pe,be]=c.useState(null),fe=P=>{be(P),xe(!0)},K=()=>{var F;if(!o){a({kind:"warn",title:"Permission required",message:"Finance role required for exports."});return}const P=`JOB-${Math.floor(200+Math.random()*900)}`,Y=`${((F=u.find(G=>G.id===j))==null?void 0:F.name)??j}  ${f}`;he(G=>[{id:P,createdAt:"Just now",format:A,scope:Y,status:"Queued",note:"Export job"},...G]),a({kind:"success",title:"Export queued",message:`${A}  ${Y}`}),window.setTimeout(()=>he(G=>G.map(ve=>ve.id===P?{...ve,status:"Running"}:ve)),900),window.setTimeout(()=>he(G=>G.map(ve=>ve.id===P?{...ve,status:"Ready"}:ve)),2100)},re=P=>{a({kind:"info",title:"Download",message:`Would download ${P}`})},q=async P=>{try{await navigator.clipboard.writeText(P),a({kind:"success",title:"Copied"})}catch{a({kind:"warn",title:"Copy failed",message:"Clipboard blocked."})}},L=()=>a({kind:"info",title:"Admin Console",message:"Deep link to invoices module"});return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(rV,{toasts:t,onDismiss:P=>s(Y=>Y.filter(F=>F.id!==P))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:uh.green},children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Invoices & Statements"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Statements by entity and invoice group with forensics-ready exports"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(ua,{label:`Org: ${i.name}`,tone:"info"}),e.jsx(ua,{label:`Role: ${i.role}`,tone:o?"info":"neutral"}),e.jsx(ua,{label:`Entity: ${((M=d.find(P=>P.id===p))==null?void 0:M.name)??p}`,tone:"neutral"}),e.jsx(ua,{label:`Group: ${((k=u.find(P=>P.id===j))==null?void 0:k.name)??j}`,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(_c,{value:n,onChange:r,options:l.map(P=>({value:P.id,label:P.name}))})}),e.jsxs(dl,{variant:"outline",onClick:L,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(dl,{variant:"primary",onClick:K,disabled:!o,title:o?"Export":"Finance required",children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(_c,{value:p,onChange:h,options:d.map(P=>({value:P.id,label:`${P.name} (${P.currency})`}))})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(_c,{value:j,onChange:y,options:u.filter(P=>P.entityId===p).map(P=>({value:P.id,label:`${P.name}  ${P.billingEmail}`}))})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(_c,{value:f,onChange:I,options:[{value:"Last 7 days",label:"Last 7 days"},{value:"Last 30 days",label:"Last 30 days"},{value:"Jan",label:"January"},{value:"Feb",label:"February"},{value:"YTD",label:"Year to date"}]})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(_c,{value:A,onChange:P=>b(P),options:[{value:"PDF",label:"Statement PDF"},{value:"CSV",label:"CSV"},{value:"JSON",label:"JSON"},{value:"Forensics ZIP",label:"Forensics ZIP"}]})}),e.jsx("div",{className:"md:col-span-4",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:C,onChange:P=>S(P.target.value),placeholder:"Search invoice id or reference",className:"w-full bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("select",{value:z,onChange:P=>$(P.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["ALL","Open","Paid","Overdue","Refund pending"].map(P=>e.jsx("option",{value:P,children:P},P))})}),e.jsxs("div",{className:"md:col-span-6 flex flex-wrap items-center gap-2",children:[e.jsxs(dl,{variant:o?"primary":"outline",disabled:!o,title:o?"Export":"Finance required",onClick:K,children:[e.jsx(ct,{className:"h-4 w-4"})," Export job"]}),e.jsxs(dl,{variant:"outline",onClick:()=>a({kind:"info",title:"Forensics",message:"Forensics ZIP includes raw provider reports, receipts, and hashes."}),children:[e.jsx(ue,{className:"h-4 w-4"})," Forensics details"]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsx(ug,{title:"Invoices",subtitle:"By entity and invoice group",right:e.jsx(ua,{label:`${D.length} invoice(s)`,tone:D.length?"neutral":"warn"}),children:e.jsxs("div",{className:"space-y-2",children:[D.map(P=>e.jsx("button",{type:"button",onClick:()=>fe(P),className:"w-full rounded-3xl border border-slate-200 bg-white p-4 text-left hover:bg-slate-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.id}),e.jsx(ua,{label:P.status,tone:ok(P.status)}),e.jsx(ua,{label:P.currency,tone:"neutral"}),e.jsx(ua,{label:P.period,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Issued ",P.issuedAt,"  Due ",P.dueAt]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Internal ref ",P.references.internal,P.references.provider?`  Provider ${P.references.provider}`:""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Total ",Fc(P.total,P.currency)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Balance ",Fc(P.balance,P.currency)]})]})]})},P.id)),D.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No invoices match."})]})}),e.jsx(ug,{title:"Export jobs",subtitle:"Queued, running, ready, failed",right:e.jsx(ua,{label:`${W.length} job(s)`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:W.map(P=>e.jsx("div",{className:P0("rounded-3xl border p-4",P.status==="Ready"?"border-emerald-200 bg-emerald-50":P.status==="Failed"?"border-rose-200 bg-rose-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.id}),e.jsx(ua,{label:P.status,tone:P.status==="Ready"?"good":P.status==="Failed"?"bad":"neutral"}),e.jsx(ua,{label:P.format,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:P.scope}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[P.createdAt,"  ",P.note]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(dl,{variant:"outline",className:"px-3 py-2",onClick:()=>a({kind:"info",title:"Open",message:P.id}),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(dl,{variant:P.status==="Ready"?"primary":"outline",disabled:P.status!=="Ready",title:P.status!=="Ready"?"Not ready":"Download",onClick:()=>re(P.id),children:e.jsx(ct,{className:"h-4 w-4"})})]})]})},P.id))})})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:uh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Forensics-ready exports"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use Forensics ZIP when you need receipts, hashes, provider reports, and matching logs."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(ua,{label:"PDF",tone:"neutral"}),e.jsx(ua,{label:"CSV",tone:"neutral"}),e.jsx(ua,{label:"JSON",tone:"neutral"}),e.jsx(ua,{label:"Forensics ZIP",tone:"info"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(dl,{variant:"outline",onClick:L,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]})})]})]})}),e.jsx(ug,{title:"Compliance",subtitle:"Best practices",right:e.jsx(ua,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Keep statements consistent"}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Use invoice groups for billing separation"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Use forensics exports for investigations"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Store export jobs with audit"]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(dl,{variant:"outline",onClick:()=>a({kind:"info",title:"Audit",message:"Open audit log"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Audit"]})})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use statement exports together with reconciliation to keep ERP books clean."})]})]}),e.jsxs(dl,{variant:"primary",disabled:!o,onClick:K,children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]})]})})]})]})}),e.jsx(iV,{open:V,title:pe?`Invoice ${pe.id}`:"Invoice",subtitle:pe?`${pe.period}  ${pe.status}`:"",onClose:()=>xe(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Exports are audit-ready."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dl,{variant:"outline",onClick:()=>xe(!1),children:"Close"}),e.jsxs(dl,{variant:"primary",disabled:!o,title:o?"Download":"Finance required",onClick:()=>pe&&a({kind:"info",title:"Download",message:pe.id}),children:[e.jsx(ct,{className:"h-4 w-4"})," Download"]})]})]}),children:pe?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ua,{label:pe.status,tone:ok(pe.status)}),e.jsx(ua,{label:pe.currency,tone:"neutral"}),e.jsx(ua,{label:pe.period,tone:"neutral"})]}),e.jsxs("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:["Total ",Fc(pe.total,pe.currency)]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Balance ",Fc(pe.balance,pe.currency)]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Issued ",pe.issuedAt,"  Due ",pe.dueAt]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Line items"}),e.jsx("div",{className:"mt-3 space-y-2",children:pe.lineItems.map((P,Y)=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.label}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Fc(P.amount,pe.currency)})]})},Y))})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"References"}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Internal"}),e.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:pe.references.internal}),e.jsx(dl,{variant:"outline",className:"px-3 py-2",onClick:()=>q(pe.references.internal),children:e.jsx(Ot,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Provider"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:pe.references.provider??"Not available"})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(dl,{variant:"outline",onClick:()=>a({kind:"info",title:"Forensics",message:"Generate Forensics ZIP"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Forensics"]}),e.jsxs(dl,{variant:"outline",onClick:()=>a({kind:"info",title:"Reconciliation",message:"Open reconciliation"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Reconcile"]})]})]})]}):null})]})}const mh={green:"#03CD8C",orange:"#F77F00"};function ts(...t){return t.filter(Boolean).join(" ")}function Cx(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Zo(t,s,a){return Math.max(s,Math.min(a,t))}function ed(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function mg(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function dk(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function Vc(t,s){const a=Math.round(Number(t||0));try{return new Intl.NumberFormat(void 0,{style:"currency",currency:s,maximumFractionDigits:0}).format(a)}catch{return`${s} ${a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}}function dV(t){let s=2166136261;for(let a=0;a<t.length;a++)s^=t.charCodeAt(a),s=Math.imul(s,16777619);return(s>>>0)%1e3/1e3}function Je({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:ts("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function vt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:mh.green}:t==="accent"?{background:mh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:ts(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Bc({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:ts("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:ts("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function xg({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:ts(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:ts("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function td({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:ts(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:ts("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function pn({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:ts(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:ts("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function pg({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:ts(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:ts("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function RA({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null),[n,r]=c.useState({top:0,left:0,up:!1});return c.useEffect(()=>{if(s&&l.current){const i=l.current.getBoundingClientRect(),o=t.length*40+20,u=window.innerHeight-i.bottom<o&&i.top>o;r({top:u?i.top-8:i.bottom+8,left:i.right,up:u});const x=()=>a(!1);return window.addEventListener("scroll",x,{capture:!0}),window.addEventListener("resize",x),()=>{window.removeEventListener("scroll",x,{capture:!0}),window.removeEventListener("resize",x)}}},[s,t.length]),t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&Cj.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[9998]",onClick:()=>a(!1)}),e.jsx("div",{className:"fixed z-[9999] w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl ring-1 ring-slate-200",style:{top:n.up?"auto":n.top,bottom:n.up?window.innerHeight-n.top:"auto",left:n.left-192},children:t.map((i,o)=>e.jsxs("button",{onClick:()=>{i.onClick(),a(!1)},disabled:i.disabled,className:ts("flex w-full items-center gap-2 px-4 py-2.5 text-left text-sm font-medium transition hover:bg-slate-50 disabled:opacity-50",i.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[i.icon&&e.jsx("span",{className:"mr-2 h-4 w-4",children:i.icon}),i.label]},o))})]}),document.body)]}):null}function Sx({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-1",children:[o?e.jsx(RA,{actions:o}):null,e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function cV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"&&n();return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:16},animate:{opacity:1,x:0},exit:{opacity:0,x:16},transition:{duration:.18},className:ts("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[12vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[680px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function uV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:ts("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function sd(t){return t==="Email"?e.jsx(os,{className:"h-4 w-4"}):t==="WhatsApp"?e.jsx(_y,{className:"h-4 w-4"}):t==="WeChat"?e.jsx(nn,{className:"h-4 w-4"}):e.jsx(Tm,{className:"h-4 w-4"})}function Qt({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function ad({title:t,value:s,sub:a,icon:l,tone:n}){const r=n==="good"?"bg-emerald-50 text-emerald-700":n==="warn"?"bg-amber-50 text-amber-800":n==="bad"?"bg-rose-50 text-rose-700":n==="info"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-500",children:t}),e.jsx("div",{className:"mt-2 text-3xl font-semibold tracking-tight text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a})]}),e.jsx("div",{className:ts("grid h-12 w-12 place-items-center rounded-2xl",r),children:l})]})})}function hg(t){return t==="Paid"||t==="Resolved"?"good":t==="Overdue"||t==="Rejected"?"bad":t==="Draft"||t==="Open"||t==="In review"||t==="Pending"?"warn":t==="Sent"?"info":"neutral"}function ld(t){return t==="Full stopped"?"bad":t==="Soft paused"?"warn":"good"}function mV(t){return t==="High"?"bad":t==="Medium"?"warn":"good"}function xV(t){return t<45?"High":t<75?"Medium":"Low"}function pV(t){const{maxOverdueDays:s,overdueBalanceBase:a,openDisputes:l,failedDeliveries:n,pendingFinalNotices:r}=t;let i=100;return i-=Zo(s*3.2,0,55),i-=Zo(Math.log10(1+a)*9.5,0,22),i-=Zo(l*6,0,20),i-=Zo(n*2,0,10),i-=Zo(r*8,0,16),Math.round(Zo(i,0,100))}function ck(t,s,a){const r=t.filter(d=>d.balance>0&&d.status!=="Draft").map(d=>({inv:d,days:Math.max(0,Math.floor((a-d.dueDate)/864e5))})).filter(d=>d.days>0),i=r.length?Math.max(...r.map(d=>d.days)):0,o=r.length;return s.enabled?s.freezeAllServices?{mode:"Full stopped",reason:"Risk freeze enabled",maxOverdueDays:i,overdueCount:o}:i>=s.fullStopAfterOverdueDays&&o>0?{mode:"Full stopped",reason:`Overdue exceeded full stop threshold (${s.fullStopAfterOverdueDays} days)`,maxOverdueDays:i,overdueCount:o}:i>=s.softPauseAfterOverdueDays&&o>0?{mode:"Soft paused",reason:`Overdue exceeded soft pause threshold (${s.softPauseAfterOverdueDays} days)`,maxOverdueDays:i,overdueCount:o}:{mode:"Active",reason:"No enforcement triggers",maxOverdueDays:i,overdueCount:o}:{mode:"Active",reason:"Enforcement disabled",maxOverdueDays:i,overdueCount:o}}function Uc(t,s){return t==="Finance"?s.filter(a=>a.role==="Finance"||a.role==="AP"):t==="CFO"?s.filter(a=>a.role==="CFO"):s.filter(a=>a.role==="EVzone Support")}function hV(){var je,we,Xe,Ie;const t=["Email","WhatsApp","WeChat","SMS"],[s,a]=c.useState(()=>Date.now()),[l,n]=c.useState([]),r=v=>{const Q=Cx("toast");n(de=>[{id:Q,...v},...de].slice(0,4)),window.setTimeout(()=>n(de=>de.filter(Se=>Se.id!==Q)),3200)},[i,o]=c.useState("overview"),[d]=c.useState(()=>[{id:"ENT-UG",name:"Uganda HQ",currency:"UGX",vatEnabled:!0,vatRatePct:18},{id:"ENT-CN",name:"China Branch",currency:"CNY",vatEnabled:!0,vatRatePct:13}]),[u]=c.useState(()=>[{id:"IG-MAIN-UG",name:"Main corporate",entityId:"ENT-UG",apCode:"ACME-MAIN"},{id:"IG-SALES-TRAVEL",name:"Sales travel",entityId:"ENT-UG",apCode:"ACME-SALES"},{id:"IG-CN-PROC",name:"China procurement",entityId:"ENT-CN",apCode:"CN-PROC"}]),x=c.useMemo(()=>Object.fromEntries(d.map(v=>[v.id,v])),[d]),p=c.useMemo(()=>Object.fromEntries(u.map(v=>[v.id,v])),[u]),[h,j]=c.useState(()=>[{id:"C-AP",name:"Accounts Payable",role:"AP",email:"ap@acme.com",phone:"+256 701 000 000",channels:{Email:!0,WhatsApp:!1,WeChat:!1,SMS:!0}},{id:"C-FIN",name:"Finance Desk",role:"Finance",email:"finance@acme.com",phone:"+256 700 000 000",channels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}},{id:"C-CFO",name:"CFO",role:"CFO",email:"cfo@acme.com",phone:"+256 702 000 000",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0}},{id:"C-EVZ",name:"EVzone Support",role:"EVzone Support",email:"support@evzone.com",phone:"+256 703 000 000",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0}}]),y=24*60*60*1e3,[f,I]=c.useState(()=>[{id:"INV-0001",invoiceNo:"ACME-202601-1042",entityId:"ENT-UG",invoiceGroupId:"IG-MAIN-UG",issueDate:s-9*y,dueDate:s+1*y,status:"Sent",total:1652e4,paidAmount:0,balance:1652e4,openDisputes:1,lastReminderAt:s-16*60*60*1e3},{id:"INV-0002",invoiceNo:"ACME-SALES-202512-0088",entityId:"ENT-UG",invoiceGroupId:"IG-SALES-TRAVEL",issueDate:s-42*y,dueDate:s-24*y,status:"Overdue",total:6136e3,paidAmount:0,balance:6136e3,openDisputes:0,lastReminderAt:s-2*y},{id:"INV-0003",invoiceNo:"ACME-202512-1038",entityId:"ENT-UG",invoiceGroupId:"IG-MAIN-UG",issueDate:s-23*y,dueDate:s-16*y,status:"Paid",total:14396e3,paidAmount:14396e3,balance:0,openDisputes:0,lastReminderAt:void 0},{id:"INV-0004",invoiceNo:"ACME-CN-202512-0221",entityId:"ENT-CN",invoiceGroupId:"IG-CN-PROC",issueDate:s-15*y,dueDate:s-7*y,status:"Paid",total:76840,paidAmount:76840,balance:0,openDisputes:0},{id:"INV-0005",invoiceNo:"ACME-202601-1043",entityId:"ENT-UG",invoiceGroupId:"IG-MAIN-UG",issueDate:s-2*y,dueDate:s+6*y,status:"Draft",total:10748e3,paidAmount:0,balance:10748e3,openDisputes:0}]),[A,b]=c.useState(()=>[{id:"TPL-UPCOMING",name:"Upcoming due reminder",subject:"Upcoming invoice due: {invoiceNo}",body:"Hello {contactName}. Your invoice {invoiceNo} is due on {dueDate}. Amount due: {balance}. Please arrange payment to avoid service interruption.",enabledChannels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}},{id:"TPL-OVERDUE",name:"Overdue notice",subject:"Overdue invoice: {invoiceNo}",body:"Hello {contactName}. Invoice {invoiceNo} is overdue. Balance: {balance}. Please pay immediately. Continued delinquency may pause services.",enabledChannels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}},{id:"TPL-FINAL",name:"Final notice",subject:"Final notice: {invoiceNo}",body:"Hello {contactName}. Final notice for invoice {invoiceNo}. Balance: {balance}. Services may stop if payment is not received.",enabledChannels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}}]),[C,S]=c.useState(()=>[{id:"STG-1",name:"Upcoming due",trigger:"Upcoming due",offsetDaysFromDue:-2,templateId:"TPL-UPCOMING",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!1},escalation:"Finance",action:"None",enabled:!0},{id:"STG-2",name:"Overdue reminder",trigger:"Overdue",offsetDaysFromDue:1,templateId:"TPL-OVERDUE",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0},escalation:"Finance",action:"Soft pause",enabled:!0},{id:"STG-3",name:"Final notice",trigger:"Final notice",offsetDaysFromDue:7,templateId:"TPL-FINAL",channels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0},escalation:"CFO",action:"Full stop",enabled:!0},{id:"STG-4",name:"Escalate to EVzone support",trigger:"Final notice",offsetDaysFromDue:14,templateId:"TPL-FINAL",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0},escalation:"EVzone Support",action:"Full stop",enabled:!0}]),[z,$]=c.useState(()=>[]),[D,W]=c.useState(()=>({enabled:!0,softPauseAfterOverdueDays:3,fullStopAfterOverdueDays:10,finalNoticeAfterOverdueDays:7,autoReactivateAfterPayment:!0,freezeAllServices:!1,scope:"CorporatePay only"})),[he,V]=c.useState(()=>({firstResponseHours:4,resolutionHours:72})),[xe,pe]=c.useState(()=>[{id:"DSP-010",invoiceId:"INV-0001",status:"In review",createdAt:s-20*60*60*1e3,lastUpdatedAt:s-2*60*60*1e3,firstResponseAt:s-18*60*60*1e3},{id:"DSP-011",invoiceId:"INV-0002",status:"Open",createdAt:s-9*60*60*1e3,lastUpdatedAt:s-9*60*60*1e3}]),[be,fe]=c.useState(!1),[K,re]=c.useState(()=>({id:"",name:"",trigger:"Overdue",offsetDaysFromDue:1,templateId:"TPL-OVERDUE",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0},escalation:"Finance",action:"Soft pause",enabled:!0})),[q,L]=c.useState(!1),[M,k]=c.useState(()=>({id:"",name:"",subject:"",body:"",enabledChannels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}})),[P,Y]=c.useState(!1),[F,G]=c.useState(null),[ve,Te]=c.useState(!1),[ye,ie]=c.useState({invoiceId:"INV-0001",stageId:"STG-2",note:"Manual reminder"}),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState(""),[Ce,Ee]=c.useState("All"),[Ue,Ye]=c.useState("All"),[De,Be]=c.useState(()=>[{level:"Finance",notify:["Email","WhatsApp","SMS"]},{level:"CFO",notify:["Email","WhatsApp","SMS"]},{level:"EVzone Support",notify:["Email","WhatsApp"]}]),$e=c.useMemo(()=>F&&f.find(v=>v.id===F)||null,[F,f]),_=c.useMemo(()=>f.filter(v=>v.balance>0&&v.status!=="Draft"),[f]),te=c.useMemo(()=>f.filter(v=>v.balance>0&&v.status!=="Draft").map(v=>({inv:v,overdueDays:Math.max(0,Math.floor((s-v.dueDate)/y))})).filter(v=>v.overdueDays>0).sort((v,Q)=>Q.overdueDays-v.overdueDays),[f,s]),Re=c.useMemo(()=>f.filter(Q=>Q.balance>0&&Q.status!=="Draft").map(Q=>({inv:Q,daysToDue:Math.ceil((Q.dueDate-s)/y)})).filter(Q=>Q.daysToDue>=0&&Q.daysToDue<=3).sort((Q,de)=>Q.daysToDue-de.daysToDue),[f,s]),Fe=c.useMemo(()=>{var Q;const v={};for(const de of f){const Se=((Q=x[de.entityId])==null?void 0:Q.currency)||"UGX";v[Se]=v[Se]||{currency:Se,total:0,balance:0,overdueBalance:0},v[Se].total+=de.total,v[Se].balance+=de.balance;const We=Math.max(0,Math.floor((s-de.dueDate)/y));de.balance>0&&de.status!=="Draft"&&We>0&&(v[Se].overdueBalance+=de.balance)}return Object.values(v).sort((de,Se)=>Se.balance-de.balance)},[f,x,s]),T=c.useMemo(()=>ck(f,D,s),[f,D,s]),Z=c.useMemo(()=>te.filter(v=>v.overdueDays>=D.finalNoticeAfterOverdueDays).map(v=>v.inv.id),[te,D.finalNoticeAfterOverdueDays]),B=c.useMemo(()=>{const v={Email:{delivered:0,failed:0,queued:0},WhatsApp:{delivered:0,failed:0,queued:0},WeChat:{delivered:0,failed:0,queued:0},SMS:{delivered:0,failed:0,queued:0}};for(const Q of z)Q.status==="Delivered"&&(v[Q.channel].delivered+=1),Q.status==="Failed"&&(v[Q.channel].failed+=1),Q.status==="Queued"&&(v[Q.channel].queued+=1);return v},[z]),ne=c.useMemo(()=>{const v=xe.filter(ht=>ht.status==="Open"||ht.status==="In review"),Q=xe.filter(ht=>ht.status==="Resolved"||ht.status==="Rejected"),de=v.filter(ht=>{const ra=(s-ht.createdAt)/36e5;return ht.firstResponseAt?!1:ra>he.firstResponseHours}),Se=v.filter(ht=>(s-ht.createdAt)/36e5>he.resolutionHours),We=v.length?Math.round((v.length-de.length)/v.length*100):100,pt=v.length?Math.round((v.length-Se.length)/v.length*100):100;return{openCount:v.length,resolvedCount:Q.length,firstRespBreaches:de,resolutionBreaches:Se,complianceFirst:We,complianceResolution:pt}},[xe,he,s]),X=c.useMemo(()=>z.filter(v=>v.status==="Failed").length,[z]),ge=c.useMemo(()=>{const v=Fe.find(Q=>Q.currency==="UGX");return(v==null?void 0:v.overdueBalance)||0},[Fe]),Le=c.useMemo(()=>{const v=T.maxOverdueDays,Q=xe.filter(Se=>Se.status==="Open"||Se.status==="In review").length,de=Z.length;return pV({maxOverdueDays:v,overdueBalanceBase:ge,openDisputes:Q,failedDeliveries:X,pendingFinalNotices:de})},[T.maxOverdueDays,xe,Z.length,ge,X]),ae=c.useMemo(()=>xV(Le),[Le]),le=c.useMemo(()=>{const v=ee.trim().toLowerCase();return z.filter(Q=>Ce==="All"?!0:Q.channel===Ce).filter(Q=>Ue==="All"?!0:Q.status===Ue).filter(Q=>{if(!v)return!0;const de=f.find(pt=>pt.id===Q.invoiceId),Se=C.find(pt=>pt.id===Q.stageId);return`${Q.id} ${Q.status} ${Q.channel} ${Q.to} ${(de==null?void 0:de.invoiceNo)||Q.invoiceId} ${(Se==null?void 0:Se.name)||Q.stageId}`.toLowerCase().includes(v)}).slice().sort((Q,de)=>de.createdAt-Q.createdAt)},[z,ee,Ce,Ue,f,C]),R=v=>{G(v),Y(!0)},se=v=>{I(Q=>Q.map(de=>de.id!==v?de:{...de,status:"Paid",paidAmount:de.total,balance:0})),r({title:"Payment recorded",message:"Invoice marked paid. Reactivation rules will apply.",kind:"success"}),D.autoReactivateAfterPayment&&D.freezeAllServices&&r({title:"Still frozen",message:"Risk freeze is enabled. Turn it off to reactivate services.",kind:"warn"})},m=v=>z.some(de=>de.invoiceId===v.invoiceId&&de.stageId===v.stageId&&de.channel===v.channel)?!1:($(de=>[{id:Cx("DLV"),...v},...de]),!0),w=(v,Q,de)=>{const Se=f.find(At=>At.id===v),We=C.find(At=>At.id===Q);if(!Se||!We)return;if(!We.enabled){r({title:"Stage disabled",message:"Enable the stage to send.",kind:"warn"});return}const pt=A.find(At=>At.id===We.templateId);if(!pt){r({title:"Template missing",message:"Select a template for this stage.",kind:"warn"});return}const ht=Uc(We.escalation,h);if(!ht.length){r({title:"No recipients",message:"No contact found for the escalation level.",kind:"warn"});return}const ra=Date.now();let St=0;for(const At of t){if(!We.channels[At]||!pt.enabledChannels[At])continue;const ys=ht.find(Lo=>Lo.channels[At])||ht[0],dn=At==="Email"?ys.email:ys.phone,ur=`${v}-${Q}-${At}-${ra}`,cn=dV(ur)<.86?"Delivered":"Failed";m({createdAt:ra,invoiceId:v,stageId:Q,channel:At,to:dn,status:cn,error:cn==="Failed"?"Temporary delivery failure. Will retry.":void 0})&&(St+=1)}I(At=>At.map(ys=>ys.id===v?{...ys,lastReminderAt:ra}:ys)),r({title:"Reminder sent",message:`${St} delivery record(s) created${de?` (${de})`:""}.`,kind:St?"success":"info"})},oe=()=>{const v=s,Q=f.filter(We=>We.balance>0&&We.status!=="Draft"),de=C.filter(We=>We.enabled).slice().sort((We,pt)=>We.offsetDaysFromDue-pt.offsetDaysFromDue);let Se=0;for(const We of Q)for(const pt of de){const ht=We.dueDate+pt.offsetDaysFromDue*y;v<ht||pt.trigger==="Upcoming due"&&Math.max(0,Math.floor((v-We.dueDate)/y))>0||(w(We.id,pt.id),Se+=1)}r({title:"Dunning run completed",message:`Evaluated ${Q.length} invoice(s). Stages checked: ${de.length}.`,kind:Se?"success":"info"})},me=()=>{var v;re({id:"",name:"New stage",trigger:"Overdue",offsetDaysFromDue:1,templateId:((v=A[0])==null?void 0:v.id)||"TPL-OVERDUE",channels:{Email:!0,WhatsApp:!0,WeChat:!1,SMS:!0},escalation:"Finance",action:"Soft pause",enabled:!0}),fe(!0)},Me=v=>{re(JSON.parse(JSON.stringify(v))),fe(!0)},Ve=()=>{if(!K.name.trim()){r({title:"Missing name",message:"Stage name is required.",kind:"warn"});return}const v=K.id||Cx("STG"),Q={...K,id:v};S(de=>{const Se=de.findIndex(We=>We.id===v);if(Se>=0){const We=de.slice();return We[Se]=Q,We}return[Q,...de]}),fe(!1),r({title:"Saved",message:"Dunning stage saved.",kind:"success"})},Ze=v=>{S(Q=>Q.filter(de=>de.id!==v)),r({title:"Deleted",message:"Stage removed.",kind:"info"})},E=()=>{k({id:"",name:"New template",subject:"Reminder: {invoiceNo}",body:"Hello {contactName}. Invoice {invoiceNo} is due on {dueDate}. Balance: {balance}.",enabledChannels:{Email:!0,WhatsApp:!0,WeChat:!0,SMS:!0}}),L(!0)},J=v=>{k(JSON.parse(JSON.stringify(v))),L(!0)},g=()=>{if(!M.name.trim()){r({title:"Missing name",message:"Template name is required.",kind:"warn"});return}const v=M.id||Cx("TPL"),Q={...M,id:v};b(de=>{const Se=de.findIndex(We=>We.id===v);if(Se>=0){const We=de.slice();return We[Se]=Q,We}return[Q,...de]}),L(!1),r({title:"Saved",message:"Template saved.",kind:"success"})},H=v=>{if(C.some(de=>de.templateId===v)){r({title:"Blocked",message:"Template is used by a stage.",kind:"warn"});return}b(de=>de.filter(Se=>Se.id!==v)),r({title:"Deleted",message:"Template removed.",kind:"info"})},N=()=>{const v=le.map(St=>{const At=f.find(dn=>dn.id===St.invoiceId),ys=C.find(dn=>dn.id===St.stageId);return{id:St.id,createdAt:mg(St.createdAt),invoiceNo:(At==null?void 0:At.invoiceNo)||St.invoiceId,stage:(ys==null?void 0:ys.name)||St.stageId,channel:St.channel,to:St.to,status:St.status,error:St.error||""}}),Q=["id","createdAt","invoiceNo","stage","channel","to","status","error"].join(","),de=St=>{const At=String(St??"");return/[",\n]/.test(At)?`"${At.replace(/"/g,'""')}"`:At},Se=v.map(St=>[St.id,St.createdAt,St.invoiceNo,St.stage,St.channel,St.to,St.status,St.error].map(de).join(",")).join(`
`),We=`${Q}
${Se}`,pt=new Blob([We],{type:"text/csv"}),ht=URL.createObjectURL(pt),ra=document.createElement("a");ra.href=ht,ra.download="collections-delivery-logs.csv",ra.click(),URL.revokeObjectURL(ht),r({title:"Exported",message:"Delivery logs CSV downloaded.",kind:"success"})},U=async()=>{const v={enforcementCfg:D,disputeSlaCfg:he,escalationLadder:De,stages:C,templates:A,exportedAt:new Date().toISOString()},Q=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),de=URL.createObjectURL(Q),Se=document.createElement("a");Se.href=de,Se.download="corporatepay-collections-config.json",Se.click(),URL.revokeObjectURL(de),r({title:"Exported",message:"Collections config JSON downloaded.",kind:"success"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(uV,{toasts:l,onDismiss:v=>n(Q=>Q.filter(de=>de.id!==v))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:mh.green},children:e.jsx(Ei,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Collections, Reminders and Enforcement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Automated dunning, multi-channel reminders, service suspension, reactivation, escalation routing, and billing dispute SLAs."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Je,{label:`Enforcement: ${T.mode}`,tone:ld(T.mode)}),e.jsx(Je,{label:`Predicted risk: ${ae}`,tone:mV(ae)}),e.jsx(Je,{label:`Health: ${Le}/100`,tone:Le>=75?"good":Le>=45?"warn":"bad"}),e.jsx(Je,{label:`Disputes SLA: ${ne.complianceFirst}% first response`,tone:ne.complianceFirst>=90?"good":"warn"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",onClick:()=>a(Date.now()),children:[e.jsx(Rn,{className:"h-4 w-4"})," Refresh time"]}),e.jsxs(vt,{variant:"outline",onClick:oe,children:[e.jsx(pa,{className:"h-4 w-4"})," Run scheduler"]}),e.jsxs(vt,{variant:D.freezeAllServices?"danger":"outline",onClick:()=>{W(v=>({...v,freezeAllServices:!v.freezeAllServices})),r({title:D.freezeAllServices?"Freeze disabled":"Freeze enabled",message:D.freezeAllServices?"Services can resume if no overdue triggers.":"CorporatePay is frozen until disabled.",kind:D.freezeAllServices?"info":"warn"})},children:[D.freezeAllServices?e.jsx(nx,{className:"h-4 w-4"}):e.jsx(as,{className:"h-4 w-4"})," Freeze"]}),e.jsxs(vt,{variant:"outline",onClick:()=>Te(!0),children:[e.jsx(lt,{className:"h-4 w-4"})," Send now"]}),e.jsxs(vt,{variant:"outline",onClick:U,children:[e.jsx(ct,{className:"h-4 w-4"})," Export config"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(ad,{title:"Outstanding",value:Fe.map(v=>Vc(v.balance,v.currency)).join("  "),sub:"All invoices",icon:e.jsx(Tr,{className:"h-5 w-5"}),tone:Fe.some(v=>v.balance>0)?"neutral":"good"}),e.jsx(ad,{title:"Overdue invoices",value:`${te.length}`,sub:te.length?`Max ${T.maxOverdueDays} day(s)`:"No overdue",icon:e.jsx(at,{className:"h-5 w-5"}),tone:te.length?"bad":"good"}),e.jsx(ad,{title:"Due soon",value:`${Re.length}`,sub:"Within 3 days",icon:e.jsx(Tn,{className:"h-5 w-5"}),tone:Re.length?"warn":"good"}),e.jsx(ad,{title:"Pending final notices",value:`${Z.length}`,sub:`Threshold ${D.finalNoticeAfterOverdueDays} day(s)`,icon:e.jsx(Tt,{className:"h-5 w-5"}),tone:Z.length?"warn":"good"}),e.jsx(ad,{title:"Delivery failures",value:`${X}`,sub:"Across channels",icon:e.jsx(Mm,{className:"h-5 w-5"}),tone:X?"warn":"good"}),e.jsx(ad,{title:"Disputes",value:`${ne.openCount} open`,sub:`${ne.complianceResolution}% resolution SLA`,icon:e.jsx(Nb,{className:"h-5 w-5"}),tone:ne.openCount?"warn":"good"})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"dunning",label:"Dunning schedules"},{id:"reminders",label:"Reminders and logs"},{id:"enforcement",label:"Enforcement"},{id:"escalation",label:"Escalation routing"},{id:"health",label:"Health and SLA"}].map(v=>e.jsx("button",{className:ts("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",i===v.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:i===v.id?{background:mh.green}:void 0,onClick:()=>o(v.id),children:v.label},v.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[i==="overview"?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(Qt,{title:"Collections queue",subtitle:"Prioritize overdue items and upcoming due reminders.",right:e.jsx(Je,{label:`${_.length} unpaid`,tone:_.length?"warn":"good"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Entity"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Due"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Balance"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Reminders"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[f.filter(v=>v.balance>0&&v.status!=="Draft").slice().sort((v,Q)=>{const de=Math.max(0,Math.floor((s-v.dueDate)/y));return Math.max(0,Math.floor((s-Q.dueDate)/y))-de}).map(v=>{const Q=x[v.entityId],de=p[v.invoiceGroupId],Se=Math.max(0,Math.floor((s-v.dueDate)/y)),We=Se>=D.fullStopAfterOverdueDays?"bad":Se>=D.softPauseAfterOverdueDays?"warn":"neutral",pt=(Q==null?void 0:Q.currency)||"UGX";return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:v.invoiceNo}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:v.id}),v.openDisputes?e.jsx("div",{className:"mt-2",children:e.jsx(Je,{label:`${v.openDisputes} dispute`,tone:"warn"})}):null]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(Q==null?void 0:Q.name)||v.entityId}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(de==null?void 0:de.name)||v.invoiceGroupId}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Je,{label:ed(v.dueDate),tone:We}),e.jsx("div",{className:"text-xs text-slate-500",children:Se>0?`${Se} day(s) overdue`:`${Math.max(0,Math.ceil((v.dueDate-s)/y))} day(s) to due`})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.status,tone:hg(v.status)})}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:Vc(v.balance,pt)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.lastReminderAt?e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Last"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:dk(v.lastReminderAt)})]}):e.jsx(Je,{label:"None",tone:"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex justify-end",children:e.jsx(RA,{actions:[{label:"Open invoice",icon:e.jsx(ue,{className:"h-4 w-4"}),onClick:()=>R(v.id)},{label:"Send reminder",icon:e.jsx(lt,{className:"h-4 w-4"}),onClick:()=>{var ht;ie({invoiceId:v.id,stageId:((ht=C[0])==null?void 0:ht.id)||"STG-1",note:"Manual"}),Te(!0)}},{label:"Mark as paid",icon:e.jsx(He,{className:"h-4 w-4"}),onClick:()=>se(v.id)}]})})})]},v.id)}),_.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-12 text-center text-sm text-slate-600",children:"No unpaid invoices."})})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Core: upcoming due, overdue, and final notice reminders. Premium: escalation routing and health score."})]}),e.jsxs(Qt,{title:"Enforcement summary",subtitle:"Service suspension rules and reactivation after payment.",right:e.jsx(Je,{label:T.mode,tone:ld(T.mode)}),children:[e.jsxs("div",{className:ts("rounded-3xl border p-4",T.mode==="Full stopped"?"border-rose-200 bg-rose-50":T.mode==="Soft paused"?"border-amber-200 bg-amber-50":"border-emerald-200 bg-emerald-50"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.mode}),e.jsx("div",{className:"mt-1 text-xs text-slate-700",children:T.reason}),e.jsxs("div",{className:"mt-2 text-xs text-slate-700",children:["Scope:"," ",e.jsx("span",{className:"font-semibold",children:D.scope})]})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white/60 text-slate-700 ring-1 ring-slate-200",children:e.jsx(Tt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mt-3 text-xs text-slate-700",children:["Soft pause: CorporatePay is paused and users may be prompted to pay first.",e.jsx("br",{}),"Full stop: corporate-funded services are stopped until compliant."]})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-2",children:[e.jsx(Bc,{enabled:D.enabled,onChange:v=>W(Q=>({...Q,enabled:v})),label:"Enable enforcement",description:"Applies suspension rules based on overdue and risk controls."}),e.jsx(Bc,{enabled:D.autoReactivateAfterPayment,onChange:v=>W(Q=>({...Q,autoReactivateAfterPayment:v})),label:"Auto-reactivate after payment",description:"When balances are cleared, services can resume automatically."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",onClick:()=>o("enforcement"),children:[e.jsx(ue,{className:"h-4 w-4"})," Configure"]}),e.jsxs(vt,{variant:"outline",onClick:()=>{D.freezeAllServices?(W(v=>({...v,freezeAllServices:!1})),r({title:"Freeze disabled",message:"Enforcement can now resume normal evaluation.",kind:"info"})):r({title:"Not frozen",message:"Risk freeze is not enabled.",kind:"info"})},children:[e.jsx(nx,{className:"h-4 w-4"})," Unfreeze"]})]})]}),e.jsx(Qt,{title:"Channel delivery health",subtitle:"Delivery status per channel with logs.",right:e.jsxs(vt,{variant:"outline",onClick:()=>o("reminders"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open logs"]}),children:e.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(v=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[e.jsx("span",{className:"text-slate-600",children:sd(v)})," ",v]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Delivered"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:B[v].delivered})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(Je,{label:`Failed ${B[v].failed}`,tone:B[v].failed?"warn":"good"}),e.jsx(Je,{label:`Queued ${B[v].queued}`,tone:"neutral"})]})]})},v))})}),e.jsxs(Qt,{title:"Escalation ladder",subtitle:"Premium: finance to CFO to EVzone support.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-4",children:De.map((v,Q)=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Step ",Q+1,": ",v.level]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Notify: ",v.notify.join(", ")]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[Uc(v.level,h).slice(0,3).map(de=>e.jsx(Je,{label:de.name,tone:"neutral"},de.id)),Uc(v.level,h).length?null:e.jsx(Je,{label:"No contacts",tone:"warn"})]})]}),e.jsx(lt,{className:"h-5 w-5 text-emerald-700"})]})},v.level))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Escalation routing can be customized per stage in the Escalation tab."})]})]}):null,i==="dunning"?e.jsxs("div",{className:"flex flex-col-reverse gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Qt,{title:"Dunning schedules",subtitle:"Upcoming due, overdue, and final notice. Configure channels and actions per stage.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",onClick:E,children:[e.jsx(ft,{className:"h-4 w-4"})," Template"]}),e.jsxs(vt,{variant:"primary",onClick:me,children:[e.jsx(ft,{className:"h-4 w-4"})," Stage"]})]}),children:[e.jsxs("div",{className:"space-y-2",children:[C.slice().sort((v,Q)=>v.offsetDaysFromDue-Q.offsetDaysFromDue).map(v=>{const Q=A.find(de=>de.id===v.templateId);return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.name}),e.jsx(Je,{label:v.trigger,tone:"neutral"}),e.jsx(Je,{label:`Offset ${v.offsetDaysFromDue}d`,tone:"info"}),e.jsx(Je,{label:v.escalation,tone:v.escalation==="EVzone Support"?"warn":"neutral"}),e.jsx(Je,{label:v.action,tone:v.action==="Full stop"?"bad":v.action==="Soft pause"?"warn":"neutral"}),e.jsx(Je,{label:v.enabled?"Enabled":"Off",tone:v.enabled?"good":"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Template: ",e.jsx("span",{className:"font-semibold",children:(Q==null?void 0:Q.name)||v.templateId})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(de=>e.jsx(Je,{label:de,tone:v.channels[de]?"good":"neutral"},de))})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Me(v),children:[e.jsx(Au,{className:"h-4 w-4"})," Edit"]}),e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>S(de=>de.map(Se=>Se.id===v.id?{...Se,enabled:!Se.enabled}:Se)),children:[v.enabled?e.jsx(as,{className:"h-4 w-4"}):e.jsx(nx,{className:"h-4 w-4"})," ",v.enabled?"Disable":"Enable"]}),e.jsx(vt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>Ze(v.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]})},v.id)}),C.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No stages configured."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Best practice: ensure final notice includes all channels and escalates to CFO. EVzone support escalation is optional."})]}),e.jsx(Qt,{title:"Templates",subtitle:"Premium: templates can be branded and channel-aware.",right:e.jsx(Je,{label:`${A.length}`,tone:"neutral"}),children:e.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:A.map(v=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.name}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:v.id}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(Q=>e.jsx(Je,{label:Q,tone:v.enabledChannels[Q]?"good":"neutral"},Q))})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>J(v),children:[e.jsx(Au,{className:"h-4 w-4"})," Edit"]}),e.jsx(vt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>H(v.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold",children:"Subject"}),e.jsx("div",{className:"mt-1 text-slate-700",children:v.subject}),e.jsx("div",{className:"mt-3 font-semibold",children:"Body"}),e.jsx("div",{className:"mt-1 text-slate-700",children:v.body})]})]},v.id))})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Qt,{title:"Runbook",subtitle:"How dunning is executed.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) Scheduler checks invoices and stage trigger times"}),e.jsx("li",{children:"2) Stage channels send to escalation recipients"}),e.jsx("li",{children:"3) Delivery logs are recorded per channel"}),e.jsx("li",{children:"4) Enforcement evaluates overdue thresholds and risk freeze"}),e.jsx("li",{children:"5) Payment triggers reactivation when configured"})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"primary",onClick:oe,children:[e.jsx(pa,{className:"h-4 w-4"})," Run scheduler"]}),e.jsxs(vt,{variant:"outline",onClick:()=>Te(!0),children:[e.jsx(lt,{className:"h-4 w-4"})," Send now"]})]})]}),e.jsxs(Qt,{title:"Enforcement mapping",subtitle:"Soft pause vs full stop per stage.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:C.slice().sort((v,Q)=>v.offsetDaysFromDue-Q.offsetDaysFromDue).map(v=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:v.name}),e.jsxs("div",{className:"mt-0.5 text-xs text-slate-500",children:["Action: ",v.action]})]}),e.jsx(Je,{label:v.action,tone:v.action==="Full stop"?"bad":v.action==="Soft pause"?"warn":"neutral"})]})},v.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: enforcement is also driven by global thresholds in the Enforcement tab."})]})]})]}):null,i==="reminders"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Qt,{title:"Filters",subtitle:"Search delivery logs.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:[e.jsx(xg,{label:"Search",value:ee,onChange:Ne,placeholder:"invoice, stage, to..."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(pn,{label:"Channel",value:Ce,onChange:v=>Ee(v),options:[{value:"All",label:"All"},...t.map(v=>({value:v,label:v}))]}),e.jsx(pn,{label:"Status",value:Ue,onChange:v=>Ye(v),options:[{value:"All",label:"All"},{value:"Delivered",label:"Delivered"},{value:"Failed",label:"Failed"},{value:"Queued",label:"Queued"}]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",onClick:N,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(vt,{variant:"outline",onClick:()=>{Ne(""),Ee("All"),Ye("All"),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Delivery logs show per-channel status for Email, WhatsApp, WeChat, and SMS."})]}),e.jsx(Qt,{title:"Channel health",subtitle:"Delivery status summary.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"space-y-2",children:t.map(v=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-slate-900",children:[e.jsx("span",{className:"text-slate-600",children:sd(v)})," ",v]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Delivered"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:B[v].delivered})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(Je,{label:`Failed ${B[v].failed}`,tone:B[v].failed?"warn":"good"}),e.jsx(Je,{label:`Queued ${B[v].queued}`,tone:"neutral"})]})]})},v))})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(Qt,{title:"Delivery logs",subtitle:"Audit-ready logs per channel.",right:e.jsx(Je,{label:`${le.length}`,tone:"neutral"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Stage"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Channel"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"To"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Details"})]})}),e.jsxs("tbody",{children:[le.map(v=>{const Q=f.find(Se=>Se.id===v.invoiceId),de=C.find(Se=>Se.id===v.stageId);return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:mg(v.createdAt)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("button",{className:"text-left",onClick:()=>Q&&R(Q.id),children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(Q==null?void 0:Q.invoiceNo)||v.invoiceId}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:(Q==null?void 0:Q.status)||"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(de==null?void 0:de.name)||v.stageId}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"inline-flex items-center gap-2 text-slate-700",children:[e.jsx("span",{className:"text-slate-600",children:sd(v.channel)}),v.channel]})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.to}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.status,tone:v.status==="Delivered"?"good":v.status==="Failed"?"warn":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.error||"-"})]},v.id)}),le.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-sm text-slate-600",children:"No delivery logs."})})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: failed deliveries can trigger escalation routing and alternate channels."})]})})]}):null,i==="enforcement"?e.jsxs("div",{className:"flex flex-col-reverse gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(Qt,{title:"Simulation",subtitle:"Preview enforcement actions.",right:e.jsxs(vt,{variant:"outline",onClick:()=>r({title:"Simulation",message:"Preview updated.",kind:"info"}),children:[e.jsx(Rn,{className:"h-4 w-4"})," Run"]}),children:e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4",children:(()=>{const v=ck(f,D,s);return e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:ts("grid h-10 w-10 place-items-center rounded-2xl bg-slate-50",ld(v.mode)==="bad"?"bg-rose-100 text-rose-700":ld(v.mode)==="warn"?"bg-amber-100 text-amber-800":"bg-emerald-100 text-emerald-700"),children:v.mode==="Active"?e.jsx(He,{className:"h-5 w-5"}):v.mode==="Soft paused"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.mode}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:v.reason})]})]})})()})}),e.jsx(Qt,{title:"Enforcement audit log",subtitle:"Recent automated actions.",right:e.jsx(Je,{label:"5 events",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:ed(s-2*24*3600*1e3)}),": System changed status from Active to Soft paused (Risk alert)."]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-600",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:ed(s-5*24*3600*1e3)}),": Payment received (INV-001). Enforcement restored to Active."]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Qt,{title:"Service suspension rules",subtitle:"Soft pause vs full stop. Reactivation after payment.",right:e.jsx(Je,{label:T.mode,tone:ld(T.mode)}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Bc,{enabled:D.enabled,onChange:v=>W(Q=>({...Q,enabled:v})),label:"Enable enforcement",description:"Evaluates overdue and risk freeze rules."}),e.jsx(Bc,{enabled:D.autoReactivateAfterPayment,onChange:v=>W(Q=>({...Q,autoReactivateAfterPayment:v})),label:"Auto-reactivate after payment",description:"When balances clear, services can resume."}),e.jsx(td,{label:"Soft pause after overdue days",value:D.softPauseAfterOverdueDays,onChange:v=>W(Q=>({...Q,softPauseAfterOverdueDays:Math.max(0,v)})),hint:"Example: 3",disabled:!D.enabled}),e.jsx(td,{label:"Full stop after overdue days",value:D.fullStopAfterOverdueDays,onChange:v=>W(Q=>({...Q,fullStopAfterOverdueDays:Math.max(0,v)})),hint:"Example: 10",disabled:!D.enabled}),e.jsx(td,{label:"Final notice after overdue days",value:D.finalNoticeAfterOverdueDays,onChange:v=>W(Q=>({...Q,finalNoticeAfterOverdueDays:Math.max(0,v)})),hint:"Triggers stage and escalation",disabled:!D.enabled}),e.jsx(pn,{label:"Enforcement scope",value:D.scope,onChange:v=>W(Q=>({...Q,scope:v})),options:[{value:"CorporatePay only",label:"CorporatePay only"},{value:"All services",label:"All services"}],hint:"Soft pause affects checkout",disabled:!D.enabled})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Current evaluation"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Computed from invoices and rules."})]}),e.jsx(Je,{label:T.mode,tone:ld(T.mode)})]}),e.jsx("div",{className:"mt-2 text-sm text-slate-700",children:T.reason}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Max overdue: ",T.maxOverdueDays," day(s)  Overdue invoices: ",T.overdueCount]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:D.freezeAllServices?"danger":"outline",onClick:()=>W(v=>({...v,freezeAllServices:!v.freezeAllServices})),children:[D.freezeAllServices?e.jsx(nx,{className:"h-4 w-4"}):e.jsx(as,{className:"h-4 w-4"})," Risk freeze"]}),e.jsxs(vt,{variant:"outline",onClick:()=>{I(v=>v.map(Q=>Q.balance>0&&Q.status!=="Draft"?{...Q,status:"Sent"}:Q)),r({title:"Simulated",message:"Simulated compliance for unpaid invoices (demo).",kind:"info"})},children:[e.jsx(lt,{className:"h-4 w-4"})," Simulate compliance"]})]})]}),e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Reactivation occurs after payment when auto-reactivate is enabled and risk freeze is off."})]}),e.jsx(Qt,{title:"Reactivation after payment",subtitle:"Mark overdue invoices paid and observe the enforcement state.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[te.slice(0,5).map(v=>{const Q=v.inv,de=x[Q.entityId],Se=(de==null?void 0:de.currency)||"UGX";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Q.invoiceNo}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[v.overdueDays," day(s) overdue  Balance ",Vc(Q.balance,Se)]})]}),e.jsxs(vt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>se(Q.id),children:[e.jsx(He,{className:"h-4 w-4"})," Mark paid"]})]})},Q.id)}),te.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No overdue invoices."})]})})]}),e.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[e.jsx(Qt,{title:"Soft pause vs full stop",subtitle:"What each mode does.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Soft pause"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"CorporatePay is paused. Reminders continue. Users are prompted to resolve payment."})]}),e.jsx(Je,{label:"Soft paused",tone:"warn"})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Typical triggers: overdue beyond ",D.softPauseAfterOverdueDays," day(s), dispute in review, repeated reminder failures."]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Full stop"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Corporate-funded services are stopped until compliant. Escalations fire."})]}),e.jsx(Je,{label:"Full stopped",tone:"bad"})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Typical triggers: overdue beyond ",D.fullStopAfterOverdueDays," day(s), risk freeze, repeated failed collections."]})]})]})}),e.jsxs(Qt,{title:"Escalation integration",subtitle:"When enforcement changes, routing escalates.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) Upcoming due reminders go to Finance"}),e.jsx("li",{children:"2) Overdue reminders escalate to Finance and optionally CFO"}),e.jsx("li",{children:"3) Final notice escalates to CFO"}),e.jsx("li",{children:"4) Extended delinquency can involve EVzone support"})]})}),e.jsx("div",{className:"mt-3",children:e.jsxs(vt,{variant:"outline",onClick:()=>o("escalation"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open routing"]})})]})]})]}):null,i==="escalation"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-7 space-y-4",children:[e.jsxs(Qt,{title:"Escalation routing",subtitle:"Premium: finance to CFO to EVzone support.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:C.slice().sort((v,Q)=>v.offsetDaysFromDue-Q.offsetDaysFromDue).map(v=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.name}),e.jsx(Je,{label:v.trigger,tone:"neutral"}),e.jsx(Je,{label:`Offset ${v.offsetDaysFromDue}d`,tone:"info"}),e.jsx(Je,{label:`Escalation ${v.escalation}`,tone:v.escalation==="EVzone Support"?"warn":"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Recipients: ",Uc(v.escalation,h).map(Q=>Q.name).join(", ")||"None"]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(Q=>e.jsx(Je,{label:Q,tone:v.channels[Q]?"good":"neutral"},Q))})]}),e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Me(v),children:[e.jsx(Au,{className:"h-4 w-4"})," Edit stage"]})]})},v.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Escalation routing can include EVzone support as a role-gated support desk."})]}),e.jsxs(Qt,{title:"Contacts",subtitle:"Configure who receives reminders and escalations.",right:e.jsx(Je,{label:`${h.length}`,tone:"neutral"}),children:[e.jsx("div",{className:"space-y-2",children:h.map(v=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.name}),e.jsx(Je,{label:v.role,tone:v.role==="EVzone Support"?"warn":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[v.email,"  ",v.phone]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(Q=>e.jsx(Je,{label:Q,tone:v.channels[Q]?"good":"neutral"},Q))})]}),e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{j(Q=>Q.map(de=>de.id===v.id?{...de,channels:{...de.channels,WhatsApp:!de.channels.WhatsApp}}:de)),r({title:"Updated",message:"Updated contact channels (demo).",kind:"info"})},children:[e.jsx(Vs,{className:"h-4 w-4"})," Toggle WhatsApp"]})]})},v.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"In production, contacts come from Billing Contacts (D) and Invoice Groups (N)."})]})]}),e.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[e.jsxs(Qt,{title:"Routing ladder",subtitle:"Premium: who gets notified by escalation level.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:De.map((v,Q)=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:["Step ",Q+1,": ",v.level]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Notify channels: ",v.notify.join(", ")]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Uc(v.level,h).map(de=>e.jsx(Je,{label:de.name,tone:"neutral"},de.id))})]}),e.jsx(lt,{className:"h-5 w-5 text-emerald-700"})]}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:t.map(de=>{const Se=v.notify.includes(de);return e.jsxs("button",{type:"button",className:ts("inline-flex items-center gap-2 rounded-2xl border px-3 py-2 text-xs font-semibold",Se?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>{Be(We=>We.map(pt=>{if(pt.level!==v.level)return pt;const ht=new Set(pt.notify);return ht.has(de)?ht.delete(de):ht.add(de),{...pt,notify:Array.from(ht)}}))},children:[e.jsx("span",{className:"text-slate-600",children:sd(de)}),de]},de)})})]},v.level))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: routing can escalate based on repeated failures and dispute SLA breaches."})]}),e.jsx(Qt,{title:"Test routing",subtitle:"Pick an invoice and stage to simulate send.",right:e.jsx(Je,{label:"Demo",tone:"neutral"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(pn,{label:"Invoice",value:ye.invoiceId,onChange:v=>ie(Q=>({...Q,invoiceId:v})),options:f.map(v=>({value:v.id,label:v.invoiceNo}))}),e.jsx(pn,{label:"Stage",value:ye.stageId,onChange:v=>ie(Q=>({...Q,stageId:v})),options:C.map(v=>({value:v.id,label:`${v.name} (${v.offsetDaysFromDue}d)`}))}),e.jsxs(vt,{variant:"primary",onClick:()=>{w(ye.invoiceId,ye.stageId,"Routing test"),o("reminders")},children:[e.jsx(lt,{className:"h-4 w-4"})," Send test"]})]})})]})]}):null,i==="health"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-5 space-y-4",children:[e.jsxs(Qt,{title:"Customer health score",subtitle:"Premium: risk score and predicted delinquency.",right:e.jsx(Je,{label:`${Le}/100`,tone:Le>=75?"good":Le>=45?"warn":"bad"}),children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Predicted risk"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:ae}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Based on overdue, disputes, and delivery failures"})]}),e.jsx("div",{className:ts("grid h-12 w-12 place-items-center rounded-2xl ring-1",ae==="High"?"bg-rose-50 text-rose-700 ring-rose-200":ae==="Medium"?"bg-amber-50 text-amber-800 ring-amber-200":"bg-emerald-50 text-emerald-700 ring-emerald-200"),children:e.jsx(lt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3",children:[e.jsx(ce,{label:"Max overdue days",value:`${T.maxOverdueDays}`,tone:T.maxOverdueDays>=D.fullStopAfterOverdueDays?"bad":T.maxOverdueDays>=D.softPauseAfterOverdueDays?"warn":"good"}),e.jsx(ce,{label:"Overdue invoices",value:`${te.length}`,tone:te.length?"warn":"good"}),e.jsx(ce,{label:"Open disputes",value:`${xe.filter(v=>v.status==="Open"||v.status==="In review").length}`,tone:ne.openCount?"warn":"good"}),e.jsx(ce,{label:"Delivery failures",value:`${X}`,tone:X?"warn":"good"}),e.jsx(ce,{label:"Final notice candidates",value:`${Z.length}`,tone:Z.length?"warn":"good"})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: predicted delinquency can be improved with real historical payment patterns and external signals."})]}),e.jsxs(Qt,{title:"Dispute SLA controls",subtitle:"Premium: SLA compliance tracking for billing disputes.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(td,{label:"First response SLA (hours)",value:he.firstResponseHours,onChange:v=>V(Q=>({...Q,firstResponseHours:Math.max(1,v)}))}),e.jsx(td,{label:"Resolution SLA (hours)",value:he.resolutionHours,onChange:v=>V(Q=>({...Q,resolutionHours:Math.max(1,v)}))})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"First response compliance"}),e.jsxs("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:[ne.complianceFirst,"%"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Breaches: ",ne.firstRespBreaches.length]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Resolution compliance"}),e.jsxs("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:[ne.complianceResolution,"%"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Breaches: ",ne.resolutionBreaches.length]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Nb,{className:"h-4 w-4"})," View disputes"]}),e.jsxs(vt,{variant:"outline",onClick:()=>{const v="DSP-011";pe(Q=>Q.map(de=>de.id===v?{...de,firstResponseAt:Date.now(),lastUpdatedAt:Date.now(),status:"In review"}:de)),r({title:"Updated",message:"Simulated first response on a dispute.",kind:"success"})},children:[e.jsx(lt,{className:"h-4 w-4"})," Simulate response"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-7 space-y-4",children:[e.jsx(Qt,{title:"Recommendations",subtitle:"Premium next-best actions.",right:e.jsx(Je,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(O,{title:"Run scheduler",detail:"Send upcoming and overdue reminders across channels.",cta:"Run now",onClick:oe}),e.jsx(O,{title:"Escalate final notices",detail:`There are ${Z.length} invoice(s) past the final notice threshold.`,cta:"Open dunning",onClick:()=>o("dunning")}),e.jsx(O,{title:"Fix delivery failures",detail:`There are ${X} failed delivery attempts. Enable alternate channels or correct contact info.`,cta:"Open logs",onClick:()=>o("reminders")}),e.jsx(O,{title:"Dispute SLA",detail:`Open disputes: ${ne.openCount}. First response compliance: ${ne.complianceFirst}%.`,cta:"Open SLA",onClick:()=>Ae(!0)}),e.jsx(O,{title:"Enforcement rules",detail:`Current mode: ${T.mode}. Review thresholds and scope.`,cta:"Configure",onClick:()=>o("enforcement")})]})}),e.jsxs(Qt,{title:"Multi-channel coverage",subtitle:"Automated reminders via Email, WhatsApp, WeChat, and SMS.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Stage"}),t.map(v=>e.jsx("th",{className:"px-4 py-3 font-semibold",children:v},v)),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Escalation"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:C.slice().sort((v,Q)=>v.offsetDaysFromDue-Q.offsetDaysFromDue).map(v=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:v.name}),t.map(Q=>e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.channels[Q]?"On":"Off",tone:v.channels[Q]?"good":"neutral"})},Q)),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.escalation,tone:v.escalation==="EVzone Support"?"warn":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.action,tone:v.action==="Full stop"?"bad":v.action==="Soft pause"?"warn":"neutral"})})]},v.id))})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"For best results, enable at least two channels per stage and validate contact preferences."})]})]})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"P Collections, Reminders and Enforcement v2. Core: automated reminders on Email, WhatsApp, WeChat, SMS; dunning schedules; service suspension; reactivation after payment. Premium: escalation routing; customer health and predicted risk; dispute SLA compliance."})})]})}),e.jsx(Sx,{open:be,title:K.id?"Edit dunning stage":"New dunning stage",subtitle:"Configure trigger timing, channels, escalation routing, and enforcement action.",onClose:()=>fe(!1),actions:[{label:"Save",onClick:Ve}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(vt,{variant:"outline",onClick:()=>fe(!1),children:"Cancel"}),e.jsxs(vt,{variant:"primary",onClick:Ve,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(xg,{label:"Name",value:K.name,onChange:v=>re(Q=>({...Q,name:v})),placeholder:"Overdue reminder"}),e.jsx(Bc,{enabled:K.enabled,onChange:v=>re(Q=>({...Q,enabled:v})),label:"Enabled",description:"If off, scheduler will skip it."}),e.jsx(pn,{label:"Trigger",value:K.trigger,onChange:v=>re(Q=>({...Q,trigger:v})),options:[{value:"Upcoming due",label:"Upcoming due"},{value:"Overdue",label:"Overdue"},{value:"Final notice",label:"Final notice"}]}),e.jsx(td,{label:"Offset days from due",value:K.offsetDaysFromDue,onChange:v=>re(Q=>({...Q,offsetDaysFromDue:v})),hint:"Negative means before due"}),e.jsx(pn,{label:"Template",value:K.templateId,onChange:v=>re(Q=>({...Q,templateId:v})),options:A.map(v=>({value:v.id,label:v.name}))}),e.jsx(pn,{label:"Escalation",value:K.escalation,onChange:v=>re(Q=>({...Q,escalation:v})),options:[{value:"Finance",label:"Finance"},{value:"CFO",label:"CFO"},{value:"EVzone Support",label:"EVzone Support"}]}),e.jsx(pn,{label:"Enforcement action",value:K.action,onChange:v=>re(Q=>({...Q,action:v})),options:[{value:"None",label:"None"},{value:"Soft pause",label:"Soft pause"},{value:"Full stop",label:"Full stop"}]}),e.jsxs("div",{className:"md:col-span-2 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Channels"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Select the channels to send this stage."}),e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 sm:grid-cols-4",children:t.map(v=>{const Q=K.channels[v];return e.jsxs("button",{type:"button",className:ts("flex items-center justify-between gap-2 rounded-2xl border px-3 py-2 text-sm font-semibold",Q?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>re(de=>({...de,channels:{...de.channels,[v]:!de.channels[v]}})),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:ts("text-slate-600",Q&&"text-emerald-700"),children:sd(v)}),v]}),e.jsx(Je,{label:Q?"On":"Off",tone:Q?"good":"neutral"})]},v)})})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(vt,{variant:"outline",className:"w-full",onClick:()=>{fe(!1),r({title:"Tip",message:"Use Send now to test a stage.",kind:"info"})},children:[e.jsx(lt,{className:"h-4 w-4"})," Save and test later"]})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Note: stage actions are guidance. Global enforcement rules still apply."})]})}),e.jsx(Sx,{open:q,title:M.id?"Edit template":"New template",subtitle:"Templates support placeholders: {invoiceNo}, {dueDate}, {balance}, {contactName}",onClose:()=>L(!1),actions:[{label:"Save",onClick:g}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(vt,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),e.jsxs(vt,{variant:"primary",onClick:g,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(xg,{label:"Name",value:M.name,onChange:v=>k(Q=>({...Q,name:v})),placeholder:"Upcoming due reminder"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Enabled channels"}),e.jsx("div",{className:"mt-3 grid grid-cols-2 gap-2 sm:grid-cols-4",children:t.map(v=>e.jsxs("button",{type:"button",className:ts("flex items-center justify-between gap-2 rounded-2xl border px-3 py-2 text-sm font-semibold",M.enabledChannels[v]?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>k(Q=>({...Q,enabledChannels:{...Q.enabledChannels,[v]:!Q.enabledChannels[v]}})),children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:ts("text-slate-600",M.enabledChannels[v]&&"text-emerald-700"),children:sd(v)}),v]}),e.jsx(Je,{label:M.enabledChannels[v]?"On":"Off",tone:M.enabledChannels[v]?"good":"neutral"})]},v))})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(pg,{label:"Subject",value:M.subject,onChange:v=>k(Q=>({...Q,subject:v})),placeholder:"Upcoming invoice due: {invoiceNo}",hint:"Used for Email",rows:2})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(pg,{label:"Body",value:M.body,onChange:v=>k(Q=>({...Q,body:v})),placeholder:"Hello {contactName}...",rows:6})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: keep SMS short and actionable. Use WhatsApp for richer content."})]})}),e.jsx(Sx,{open:ve,title:"Send reminder now",subtitle:"Manual send for a specific invoice and stage.",onClose:()=>Te(!1),actions:[{label:"Send",onClick:()=>{w(ye.invoiceId,ye.stageId,ye.note||"Manual"),Te(!1)}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(vt,{variant:"outline",onClick:()=>Te(!1),children:"Cancel"}),e.jsxs(vt,{variant:"primary",onClick:()=>{w(ye.invoiceId,ye.stageId,ye.note||"Manual"),Te(!1)},children:[e.jsx(lt,{className:"h-4 w-4"})," Send"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(pn,{label:"Invoice",value:ye.invoiceId,onChange:v=>ie(Q=>({...Q,invoiceId:v})),options:f.map(v=>({value:v.id,label:v.invoiceNo}))}),e.jsx(pn,{label:"Stage",value:ye.stageId,onChange:v=>ie(Q=>({...Q,stageId:v})),options:C.map(v=>({value:v.id,label:`${v.name} (${v.offsetDaysFromDue}d)`}))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(pg,{label:"Note",value:ye.note,onChange:v=>ie(Q=>({...Q,note:v})),placeholder:"Why are you sending this now",rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Manual sends are logged per channel. Duplicate sends for the same stage and channel are prevented."})]})}),e.jsx(cV,{open:P,title:$e?$e.invoiceNo:"Invoice",subtitle:$e?`${((je=x[$e.entityId])==null?void 0:je.name)||$e.entityId}  ${((we=p[$e.invoiceGroupId])==null?void 0:we.name)||$e.invoiceGroupId}`:"",onClose:()=>Y(!1),footer:$e?e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Collections actions are audit logged in production."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",onClick:()=>{var v;ie({invoiceId:$e.id,stageId:((v=C[0])==null?void 0:v.id)||"STG-1",note:"Manual"}),Te(!0)},children:[e.jsx(lt,{className:"h-4 w-4"})," Remind"]}),e.jsxs(vt,{variant:"primary",onClick:()=>se($e.id),children:[e.jsx(He,{className:"h-4 w-4"})," Mark paid"]})]})]}):null,children:$e?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Je,{label:$e.status,tone:hg($e.status)}),e.jsx(Je,{label:`Issue ${ed($e.issueDate)}`,tone:"neutral"}),e.jsx(Je,{label:`Due ${ed($e.dueDate)}`,tone:$e.status==="Overdue"?"bad":"neutral"}),$e.openDisputes?e.jsx(Je,{label:`${$e.openDisputes} dispute`,tone:"warn"}):null]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Last reminder: ",$e.lastReminderAt?dk($e.lastReminderAt):"None"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Balance"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:Vc($e.balance,((Xe=x[$e.entityId])==null?void 0:Xe.currency)||"UGX")}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Total: ",Vc($e.total,((Ie=x[$e.entityId])==null?void 0:Ie.currency)||"UGX")]})]})]})}),e.jsx(Qt,{title:"Dunning timeline",subtitle:"Stages evaluated based on due date and offsets.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:C.slice().sort((v,Q)=>v.offsetDaysFromDue-Q.offsetDaysFromDue).map(v=>{const Q=$e.dueDate+v.offsetDaysFromDue*y,de=z.some(We=>We.invoiceId===$e.id&&We.stageId===v.id),Se=s>=Q;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v.name}),e.jsx(Je,{label:`Offset ${v.offsetDaysFromDue}d`,tone:"info"}),e.jsx(Je,{label:Se?"Eligible":"Not yet",tone:Se?"warn":"neutral"}),e.jsx(Je,{label:de?"Sent":"Not sent",tone:de?"good":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Trigger time: ",ed(Q)]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:t.map(We=>e.jsx(Je,{label:We,tone:v.channels[We]?"good":"neutral"},We))})]}),e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>w($e.id,v.id,"From invoice"),disabled:!v.enabled,children:[e.jsx(lt,{className:"h-4 w-4"})," Send"]})]})},v.id)})})}),e.jsx(Qt,{title:"Delivery records",subtitle:"Logs for this invoice.",right:e.jsx(Je,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Stage"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Channel"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"To"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Error"})]})}),e.jsxs("tbody",{children:[z.filter(v=>v.invoiceId===$e.id).slice().sort((v,Q)=>Q.createdAt-v.createdAt).map(v=>{var Q;return e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:mg(v.createdAt)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:((Q=C.find(de=>de.id===v.stageId))==null?void 0:Q.name)||v.stageId}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.channel}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.to}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.status,tone:v.status==="Delivered"?"good":v.status==="Failed"?"warn":"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:v.error||"-"})]},v.id)}),z.some(v=>v.invoiceId===$e.id)?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No delivery logs for this invoice."})})]})]})})})]}):null}),e.jsx(Sx,{open:Oe,title:"Billing disputes SLA",subtitle:"Premium: SLA compliance tracking for billing disputes.",onClose:()=>Ae(!1),footer:e.jsx("div",{className:"flex justify-end",children:e.jsx(vt,{variant:"outline",onClick:()=>Ae(!1),children:"Close"})}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Open disputes"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:ne.openCount}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Including In review"})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"First response breaches"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:ne.firstRespBreaches.length}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["SLA ",he.firstResponseHours,"h"]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Resolution breaches"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:ne.resolutionBreaches.length}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["SLA ",he.resolutionHours,"h"]})]})]}),e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Dispute"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Invoice"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Age"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"First response"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Resolution SLA"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[xe.slice().sort((v,Q)=>{const de=v.status==="Open"||v.status==="In review",Se=Q.status==="Open"||Q.status==="In review";return de!==Se?de?-1:1:Q.createdAt-v.createdAt}).map(v=>{const Q=f.find(pt=>pt.id===v.invoiceId),de=Math.round((s-v.createdAt)/(60*60*1e3)*10)/10,Se=!v.firstResponseAt&&de>he.firstResponseHours&&(v.status==="Open"||v.status==="In review"),We=de>he.resolutionHours&&(v.status==="Open"||v.status==="In review");return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:v.id}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(Q==null?void 0:Q.invoiceNo)||v.invoiceId}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.status,tone:hg(v.status)})}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[de,"h"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:v.firstResponseAt?"Done":Se?"Breached":"Pending",tone:v.firstResponseAt?"good":Se?"bad":"warn"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Je,{label:We?"Breached":"OK",tone:We?"bad":"good"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{pe(pt=>pt.map(ht=>ht.id===v.id?{...ht,firstResponseAt:ht.firstResponseAt||Date.now(),lastUpdatedAt:Date.now(),status:"In review"}:ht)),r({title:"Updated",message:"First response recorded.",kind:"success"})},disabled:!!v.firstResponseAt,children:[e.jsx(lt,{className:"h-4 w-4"})," First response"]}),e.jsxs(vt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>{pe(pt=>pt.map(ht=>ht.id===v.id?{...ht,status:"Resolved",lastUpdatedAt:Date.now()}:ht)),r({title:"Resolved",message:"Dispute resolved.",kind:"success"})},disabled:v.status==="Resolved",children:[e.jsx(He,{className:"h-4 w-4"})," Resolve"]})]})})]},v.id)}),xe.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-sm text-slate-600",children:"No disputes."})})]})]})}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: SLA breaches can trigger escalation routing and pause enforcement until reviewed."})]})})]});function ce({label:v,value:Q,tone:de}){const Se=de==="good"?"bg-emerald-50 text-emerald-900 ring-emerald-200":de==="warn"?"bg-amber-50 text-amber-900 ring-amber-200":"bg-rose-50 text-rose-900 ring-rose-200";return e.jsxs("div",{className:ts("flex items-center justify-between gap-3 rounded-2xl p-3 text-xs ring-1",Se),children:[e.jsx("div",{className:"font-semibold",children:v}),e.jsx("div",{className:"font-semibold",children:Q})]})}function O({title:v,detail:Q,cta:de,onClick:Se}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:Q})]}),e.jsxs(vt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:Se,children:[e.jsx(ue,{className:"h-4 w-4"})," ",de]})]})})}}const xh={green:"#03CD8C",orange:"#F77F00"};function vo(...t){return t.filter(Boolean).join(" ")}function fV(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function uk(t,s){const a=Math.abs(t),n=s==="UGX"?0:2,r=a.toLocaleString(void 0,{minimumFractionDigits:n,maximumFractionDigits:n});return`${t<0?"-":""}${s} ${r}`}function Bs({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:vo("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function gV(t){return t==="Matched"?"good":t==="Unmatched"?"warn":t==="Duplicate"?"bad":"info"}function vV(t){return t>=90?"good":t>=70?"info":t>=50?"warn":"bad"}function Rs({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:xh.green}:t==="accent"?{background:xh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:vo(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function bV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:vo("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Ax({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function jV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?n():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.18},className:"fixed inset-y-0 right-0 z-50 w-full max-w-[560px] flex flex-col overflow-hidden border-l border-slate-200 bg-white shadow-[0_20px_70px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 truncate text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function yV({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function NV(){const[t,s]=c.useState([]),a=q=>{const L=fV("toast");s(M=>[{id:L,...q},...M].slice(0,4)),window.setTimeout(()=>s(M=>M.filter(k=>k.id!==L)),3200)},l=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Finance"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer"}],[]),[n,r]=c.useState(l[0].id),i=c.useMemo(()=>l.find(q=>q.id===n)||l[0],[l,n]),o=c.useMemo(()=>["Owner","Admin","Finance"].includes(i.role),[i.role]),d=c.useMemo(()=>[{id:"TX-9006",when:"Today 08:00",type:"Payment",module:"CorporatePay",currency:"UGX",amount:-54e4,internalRef:"EVZ-INT-9006",providerRef:"PRV-7006",status:"Posted"},{id:"TX-9005",when:"Today 06:40",type:"Payout",module:"Wallet",currency:"UGX",amount:-28e4,internalRef:"EVZ-PO-3101",providerRef:"PRV-87911",status:"Posted"},{id:"TX-9004",when:"Yesterday",type:"Deposit",module:"Wallet",currency:"CNY",amount:820,internalRef:"EVZ-INT-9004",providerRef:"PRV-7004",status:"Posted"},{id:"TX-9008",when:"2 days ago",type:"Refund",module:"E-Commerce",currency:"UGX",amount:42e3,internalRef:"EVZ-INT-9008",providerRef:"PRV-7008",status:"Pending"}],[]),u=c.useMemo(()=>[{id:"L-1001",invoiceId:"INV-7001",vendor:"Acme Supplies",currency:"UGX",amount:54e4,due:"Today",status:"Open",description:"EV connectors + installation"},{id:"L-1002",invoiceId:"INV-7002",vendor:"Payroll",currency:"UGX",amount:28e4,due:"Today",status:"Paid",description:"Staff payout"},{id:"L-1003",invoiceId:"INV-7003",vendor:"Marketplace",currency:"UGX",amount:42e3,due:"Tomorrow",status:"Refund pending",description:"Refund case"}],[]),[x,p]=c.useState([{id:"M-1",txId:"TX-9006",lineId:"L-1001",state:"Needs review",confidence:78,reason:"Amount matches, vendor name partial match",createdAt:"Today"},{id:"M-2",txId:"TX-9005",lineId:"L-1002",state:"Matched",confidence:96,reason:"Exact reference match",createdAt:"Today"},{id:"M-3",txId:"TX-9008",lineId:"L-1003",state:"Unmatched",confidence:42,reason:"Refund is pending in provider",createdAt:"2 days ago"}]),[h,j]=c.useState([{id:"AR-1",name:"Exact reference",enabled:!0,logic:"Match provider_ref or internal_ref",note:"Highest confidence"},{id:"AR-2",name:"Amount + vendor",enabled:!0,logic:"Amount equals and vendor contains",note:"Medium confidence"},{id:"AR-3",name:"Duplicate detection",enabled:!0,logic:"Same amount and same provider_ref",note:"Flags duplicates"}]),[y,f]=c.useState([{id:"E-1",erp:"Odoo",object:"GL account",from:"CorporatePay",to:"6001 - Procurement",note:"Procurement spend",lastEdited:"Today"},{id:"E-2",erp:"Odoo",object:"Cost center",from:"CC-PROC",to:"CC-01",note:"Procurement cost center",lastEdited:"Yesterday"},{id:"E-3",erp:"Custom",object:"Tax code",from:"VAT",to:"VAT-STD",note:"Standard VAT",lastEdited:"Last week"}]),[I]=c.useState([{id:"A-1",when:"Today 09:10",actor:"Finance Desk",action:"Accepted match",target:"M-2",outcome:"Success",why:"Exact reference"},{id:"A-2",when:"Today 08:55",actor:"System",action:"Auto-match",target:"TX-9005L-1002",outcome:"Success",why:"Rule AR-1"},{id:"A-3",when:"Yesterday",actor:"Viewer",action:"Export",target:"Reconciliation report",outcome:"Blocked",why:"Permission boundary"}]),A=c.useMemo(()=>Array.from(new Set(d.map(q=>q.module))),[d]),[b,C]=c.useState({q:"",state:"ALL",currency:"ALL",module:"ALL",minConfidence:70}),S=c.useMemo(()=>{const q=b.q.trim().toLowerCase();return x.map(M=>{const k=d.find(Y=>Y.id===M.txId),P=u.find(Y=>Y.id===M.lineId);return{m:M,tx:k,li:P}}).filter(M=>!!M.tx&&!!M.li).filter(M=>b.state==="ALL"?!0:M.m.state===b.state).filter(M=>b.currency==="ALL"?!0:M.tx.currency===b.currency).filter(M=>b.module==="ALL"?!0:M.tx.module===b.module).filter(M=>M.m.confidence>=b.minConfidence).filter(M=>q?`${M.m.id} ${M.tx.id} ${M.tx.internalRef} ${M.tx.providerRef??""} ${M.li.invoiceId} ${M.li.vendor} ${M.m.reason}`.toLowerCase().includes(q):!0)},[x,d,u,b]),z=c.useMemo(()=>{const q=x.filter(P=>P.state==="Matched").length,L=x.filter(P=>P.state==="Needs review").length,M=x.filter(P=>P.state==="Unmatched").length,k=x.filter(P=>P.state==="Duplicate").length;return{matched:q,review:L,unmatched:M,dup:k}},[x]),[$,D]=c.useState(!1),[W,he]=c.useState(null),V=q=>{he(q),D(!0)},xe=q=>{if(!o){a({kind:"warn",title:"Permission required"});return}p(L=>L.map(M=>M.id===q?{...M,state:"Matched",confidence:Math.max(M.confidence,90),reason:`${M.reason}  accepted`}:M)),a({kind:"success",title:"Match accepted",message:q})},pe=q=>{if(!o){a({kind:"warn",title:"Permission required"});return}p(L=>L.map(M=>M.id===q?{...M,state:"Unmatched",confidence:Math.min(M.confidence,49),reason:`${M.reason}  rejected`}:M)),a({kind:"info",title:"Match rejected",message:q})},be=()=>{if(!o){a({kind:"warn",title:"Permission required"});return}a({kind:"success",title:"Auto-match run started",message:"Confidence scoring applied."}),p(q=>q.map(L=>L.state==="Unmatched"?{...L,state:"Needs review",confidence:71,reason:"Auto-match suggested based on amount and vendor"}:L))},fe=q=>{if(!o){a({kind:"warn",title:"Permission required"});return}j(L=>L.map(M=>M.id===q?{...M,enabled:!M.enabled}:M)),a({kind:"success",title:"Auto-match rule updated"})},K=async q=>{try{await navigator.clipboard.writeText(q),a({kind:"success",title:"Copied"})}catch{a({kind:"warn",title:"Copy failed",message:"Clipboard access blocked."})}},re=()=>a({kind:"info",title:"Admin Console",message:"Deep link to CorporatePay Admin Console: reconciliation module"});return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(bV,{toasts:t,onDismiss:q=>s(L=>L.filter(M=>M.id!==q))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:xh.green},children:e.jsx(BL,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Transactions Reconciliation & ERP Mapping"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Ledger-to-invoice matching, exceptions, confidence scoring, ERP mapping, audit logs"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Bs,{label:`Org: ${i.name}`,tone:"info"}),e.jsx(Bs,{label:`Role: ${i.role}`,tone:o?"info":"neutral"}),e.jsx(Bs,{label:`Matched: ${z.matched}`,tone:z.matched?"good":"neutral"}),e.jsx(Bs,{label:`Needs review: ${z.review}`,tone:z.review?"warn":"neutral"}),e.jsx(Bs,{label:`Unmatched: ${z.unmatched}`,tone:z.unmatched?"warn":"neutral"}),e.jsx(Bs,{label:`Duplicates: ${z.dup}`,tone:z.dup?"bad":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(yV,{value:n,onChange:r,options:l.map(q=>({value:q.id,label:q.name}))})}),e.jsxs(Rs,{variant:"outline",onClick:re,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(Rs,{variant:"primary",onClick:be,disabled:!o,title:o?"Run":"Finance required",children:[e.jsx(Rn,{className:"h-4 w-4"})," Auto-match"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-4",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:b.q,onChange:q=>C(L=>({...L,q:q.target.value})),placeholder:"Search refs, invoice, vendor",className:"w-full bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("select",{value:b.state,onChange:q=>C(L=>({...L,state:q.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["ALL","Matched","Needs review","Unmatched","Duplicate"].map(q=>e.jsx("option",{value:q,children:q},q))})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("select",{value:b.currency,onChange:q=>C(L=>({...L,currency:q.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["ALL","UGX","USD","CNY","KES"].map(q=>e.jsx("option",{value:q,children:q},q))})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx("select",{value:b.module,onChange:q=>C(L=>({...L,module:q.target.value})),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["ALL",...A].map(q=>e.jsx("option",{value:q,children:q},q))})}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Min confidence"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("input",{type:"range",min:0,max:100,value:b.minConfidence,onChange:q=>C(L=>({...L,minConfidence:Number(q.target.value)})),className:"w-full"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900 w-10 text-right",children:b.minConfidence})]})]})})]})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsxs(Ax,{title:"Ledger-to-invoice matches",subtitle:"Review exceptions and accept or reject matches",right:e.jsx(Bs,{label:`${S.length} row(s)`,tone:S.length?"neutral":"warn"}),children:[e.jsxs("div",{className:"space-y-2",children:[S.map(({m:q,tx:L,li:M})=>e.jsx("button",{type:"button",onClick:()=>V(q),className:"w-full rounded-3xl border border-slate-200 bg-white p-4 text-left hover:bg-slate-50",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[L.id,"  ",M.invoiceId]}),e.jsx(Bs,{label:q.state,tone:gV(q.state)}),e.jsx(Bs,{label:`${q.confidence}%`,tone:vV(q.confidence)}),e.jsx(Bs,{label:L.module,tone:"neutral"}),e.jsx(Bs,{label:L.currency,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:[M.vendor,"  ",M.description]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Reason: ",q.reason]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:uk(L.amount,L.currency)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Line: ",uk(M.amount,M.currency)]})]})]})},q.id)),S.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No matches meet your filter threshold."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Export",message:"Export reconciliation results (CSV/JSON)"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]}),e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Exceptions",message:"Open exceptions workflow"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Exceptions"]}),e.jsxs(Rs,{variant:"outline",onClick:re,children:[e.jsx(ue,{className:"h-4 w-4"})," Advanced"]})]})]}),e.jsx(Ax,{title:"Auto-match rules",subtitle:"Enable rules and run auto-match",right:e.jsx(Bs,{label:`${h.filter(q=>q.enabled).length}/${h.length} enabled`,tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[h.map(q=>e.jsx("div",{className:vo("rounded-3xl border p-4",q.enabled?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:q.name}),e.jsx(Bs,{label:q.id,tone:"neutral"}),e.jsx(Bs,{label:q.enabled?"Enabled":"Disabled",tone:q.enabled?"good":"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:q.logic}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:q.note})]}),e.jsx(Rs,{variant:q.enabled?"primary":"outline",disabled:!o,title:o?"Toggle":"Finance required",onClick:()=>fe(q.id),className:"px-3 py-2",children:q.enabled?"ON":"OFF"})]})},q.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rs,{variant:"primary",disabled:!o,onClick:be,children:[e.jsx(Rn,{className:"h-4 w-4"})," Run auto-match"]}),e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Confidence",message:"Explain confidence scoring"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Confidence scoring"]})]})]})})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(Ax,{title:"ERP mapping",subtitle:"Map modules and cost centers to ERP objects",right:e.jsx(Bs,{label:`${y.length} mappings`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[y.map(q=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:q.erp}),e.jsx(Bs,{label:q.object,tone:"neutral"}),e.jsx(Bs,{label:q.id,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:[q.from,"  ",q.to]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[q.note,"  ",q.lastEdited]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{variant:"outline",className:"px-3 py-2",onClick:()=>K(`${q.erp}:${q.object}:${q.from}:${q.to}`),children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(Rs,{variant:"outline",className:"px-3 py-2",onClick:re,children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},q.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Add mapping",message:"Create ERP mapping"}),disabled:!o,children:[e.jsx(ue,{className:"h-4 w-4"})," Add"]}),e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Export",message:"Export ERP mapping JSON"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]})]})]})}),e.jsx(Ax,{title:"Audit logs",subtitle:"Actions are traceable",right:e.jsx(Bs,{label:`${I.length} events`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[I.map(q=>e.jsx("div",{className:vo("rounded-3xl border p-4",q.outcome==="Blocked"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:q.action}),e.jsx(Bs,{label:q.outcome,tone:q.outcome==="Blocked"?"warn":"good"}),e.jsx(Bs,{label:q.actor,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:q.target}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[q.when,"  ",q.why]})]}),e.jsx(Rs,{variant:"outline",className:"px-3 py-2",onClick:()=>a({kind:"info",title:"Open audit",message:q.id}),children:e.jsx(ue,{className:"h-4 w-4"})})]})},q.id)),e.jsx("div",{className:"pt-2",children:e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Export",message:"Export audit log"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:xh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium reconciliation"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Confidence scoring, exceptions workflows, and ERP mapping for audit-ready finance."}),e.jsx("div",{className:"mt-3",children:e.jsxs(Rs,{variant:"outline",onClick:re,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]})})]})]})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Keep auto-match rules conservative and route low confidence matches to review."})]})]}),e.jsxs(Rs,{variant:"primary",disabled:!o,onClick:be,children:[e.jsx(Rn,{className:"h-4 w-4"})," Auto-match"]})]})})]})]})}),e.jsx(jV,{open:$,title:W?`Match ${W.id}`:"Match",subtitle:W?`${W.state}  ${W.confidence}%`:"",onClose:()=>D(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Changes are logged."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Rs,{variant:"outline",onClick:()=>D(!1),children:"Close"}),W?e.jsxs(e.Fragment,{children:[e.jsxs(Rs,{variant:"primary",disabled:!o,onClick:()=>xe(W.id),children:[e.jsx(He,{className:"h-4 w-4"})," Accept"]}),e.jsxs(Rs,{variant:"accent",disabled:!o,onClick:()=>pe(W.id),children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]})]}):null]})]}),children:W?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:vo("rounded-3xl border p-4",W.state==="Matched"?"border-emerald-200 bg-emerald-50":W.state==="Duplicate"?"border-rose-200 bg-rose-50":W.state==="Unmatched"?"border-amber-200 bg-amber-50":"border-blue-200 bg-blue-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:vo("grid h-10 w-10 place-items-center rounded-2xl bg-white",W.state==="Matched"?"text-emerald-700":W.state==="Duplicate"?"text-rose-700":W.state==="Unmatched"?"text-amber-800":"text-blue-700"),children:W.state==="Matched"?e.jsx(et,{className:"h-5 w-5"}):e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:W.state}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Confidence ",W.confidence,"%  ",W.reason]}),e.jsx("div",{className:"mt-2",children:e.jsx(Bs,{label:`Created: ${W.createdAt}`,tone:"neutral"})})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Actions"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Open tx",message:W.txId}),children:[e.jsx(ue,{className:"h-4 w-4"})," Transaction"]}),e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Open invoice",message:W.lineId}),children:[e.jsx(ue,{className:"h-4 w-4"})," Invoice"]}),e.jsxs(Rs,{variant:"outline",onClick:()=>a({kind:"info",title:"Exceptions",message:"Open exceptions workflow"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Exceptions"]})]})]})]}):null})]})}const ph={green:"#03CD8C",orange:"#F77F00"};function Oa(...t){return t.filter(Boolean).join(" ")}function nd(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Jn(t,s,a){return Math.max(s,Math.min(a,t))}function rd(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function mk(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function nt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Oa("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Nt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:ph.green}:t==="accent"?{background:ph.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Oa(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function wV({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Oa("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Oa("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function Nl({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Oa(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Oa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function qc({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Oa(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Oa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Yi({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Oa(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Oa("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function Ex({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4}){return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:i=>a(i.target.value),placeholder:l,rows:r,className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"})]})}function Hy({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:Oa("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function fg({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1040px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(Hy,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function kV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,actions:i}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:18},animate:{opacity:1,x:0},exit:{opacity:0,x:18},transition:{duration:.18},className:Oa("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[10vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[720px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(Hy,{actions:i}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function CV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Oa("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function zl({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function gg(t){return t==="Approved"?"good":t==="Blocked"?"bad":"warn"}function zc(t){return t==="High"?"bad":t==="Medium"?"warn":"good"}function SV(t){return t==="Verified"?"good":t==="Expired"?"bad":"warn"}function xr(t){return t<55?"High":t<80?"Medium":"Low"}function pr(t){const a=Jn(t.rating*10,0,50),l=Jn((t.slaOnTimePct-70)*.6,-20,18),n=Jn(t.negotiatedTerms.discountPct*.8,0,12),r=t.complianceDocs.reduce((u,x)=>x.status==="Expired"?u+18:x.status==="Pending"?u+8:u,0),i=t.status==="Blocked"?40:0,o=t.status==="Pending"?10:0,d=50+a+l+n-r-i-o;return Math.round(Jn(d,0,100))}function AV(t,s){const a=t.riskScore,l=t.preferred?6:0,n=t.negotiatedTerms.discountPct,r=t.slaOnTimePct,i=t.rating,o=h=>t.modules.includes(h),d=h=>t.marketplaces.includes(h);let u=0;s==="Corporate Rides"&&(u=o("Rides & Logistics")?100:0),s==="EV Charging"&&(u=o("EVs & Charging")?100:0),s==="Deals Procurement"&&(u=d("MyLiveDealz")?100:0),s==="Office Supplies"&&(u=d("EVmart")||d("LivingMart")||d("GeneratMart")?100:0),s==="IT Devices"&&(u=d("GadgetMart")?100:0),s==="Facilities Services"&&(u=d("ServiceMart")?100:0),s==="Travel Procurement"&&(u=o("Travel & Tourism")||d("ExpressMart")?100:0);const x=Jn(i*12+r*.25+n*1.2,0,100),p=t.status!=="Approved"?45:0;return Math.round(Jn(.45*u+.35*x+.2*a+l-p,0,100))}function EV(){const t=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],s=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],a=["Corporate Rides","EV Charging","Office Supplies","IT Devices","Facilities Services","Travel Procurement","Deals Procurement"],[l,n]=c.useState([]),r=T=>{const Z=nd("toast");n(B=>[{id:Z,...T},...B].slice(0,4)),window.setTimeout(()=>n(B=>B.filter(ne=>ne.id!==Z)),3200)},[i,o]=c.useState(()=>{const T=Date.now(),Z=(X,ge,Le,ae,le="")=>({id:nd("DOC"),type:X,name:ae,status:ge,issuedAt:T-120*24*60*60*1e3,expiresAt:T+Le*24*60*60*1e3,notes:le}),B=(X,ge,Le,ae,le)=>({id:nd("CTR"),title:X,startAt:T-Le*24*60*60*1e3,endAt:T+ae*24*60*60*1e3,paymentTerms:"Net 14",discountPct:ge,slaText:"On-time delivery 92%+, response < 2h",rateCardName:le,notes:"Negotiated for corporate volumes."});return[{id:"V-001",name:"EVzone Rides",country:"Uganda",city:"Kampala",status:"Approved",preferred:!0,categories:["Mobility","Corporate transport"],modules:["Rides & Logistics"],marketplaces:[],rating:4.6,slaOnTimePct:93,negotiatedTerms:{discountPct:7,paymentTerms:"Net 14",warrantyDays:0},riskScore:88,riskLevel:"Low",complianceDocs:[Z("License","Verified",200,"Operations license"),Z("Insurance","Verified",80,"Liability insurance")],contracts:[B("Ride services master agreement",7,120,240,"Ride rate card v3.pdf")],lastActiveAt:T-2*60*60*1e3,notes:"Preferred vendor for corporate rides."},{id:"V-002",name:"EVzone Charging",country:"Uganda",city:"Kampala",status:"Approved",preferred:!0,categories:["Energy","EV infrastructure"],modules:["EVs & Charging"],marketplaces:[],rating:4.3,slaOnTimePct:90,negotiatedTerms:{discountPct:5,paymentTerms:"Net 7",warrantyDays:0},riskScore:83,riskLevel:"Low",complianceDocs:[Z("License","Verified",180,"Energy operations license"),Z("Insurance","Verified",40,"Equipment insurance")],contracts:[B("Charging credits agreement",5,60,300,"Charging rate card.pdf")],lastActiveAt:T-7*60*60*1e3,notes:"Charging credits supplier."},{id:"V-003",name:"Kampala Office Mart",country:"Uganda",city:"Kampala",status:"Approved",preferred:!1,categories:["Office supplies","Consumables"],modules:["E-Commerce"],marketplaces:["EVmart","GeneratMart"],rating:4.1,slaOnTimePct:86,negotiatedTerms:{discountPct:3,paymentTerms:"Net 14",warrantyDays:14},riskScore:74,riskLevel:"Medium",complianceDocs:[Z("Tax/VAT","Verified",140,"VAT certificate"),Z("Business registration","Verified",320,"Registration")],contracts:[B("Office supplies agreement",3,30,200,"Office supplies rate card.xlsx")],lastActiveAt:T-2*24*60*60*1e3,notes:"Local supplier for office and general supplies."},{id:"V-004",name:"Shenzhen Store",country:"China",city:"Shenzhen",status:"Approved",preferred:!1,categories:["Imports","Electronics"],modules:["E-Commerce"],marketplaces:["MyLiveDealz","GadgetMart"],rating:4,slaOnTimePct:82,negotiatedTerms:{discountPct:8,paymentTerms:"Net 30",warrantyDays:90},riskScore:68,riskLevel:"Medium",complianceDocs:[Z("Business registration","Verified",300,"Business license"),Z("Insurance","Pending",120,"Cargo insurance","Pending verification")],contracts:[B("Cross-border procurement",8,10,180,"Imports rate card.pdf")],lastActiveAt:T-9*60*60*1e3,notes:"Used for deals procurement. Monitor compliance."},{id:"V-005",name:"ServicePro",country:"Uganda",city:"Kampala",status:"Pending",preferred:!1,categories:["Facilities","Maintenance"],modules:["E-Commerce"],marketplaces:["ServiceMart"],rating:3.8,slaOnTimePct:76,negotiatedTerms:{discountPct:0,paymentTerms:"Due on receipt",warrantyDays:30},riskScore:60,riskLevel:"Medium",complianceDocs:[Z("Insurance","Pending",60,"Liability insurance","Awaiting certificate"),Z("License","Pending",60,"Trade license")],contracts:[],lastActiveAt:T-14*24*60*60*1e3,notes:"Awaiting onboarding checks."},{id:"V-006",name:"Express CN",country:"China",city:"Wuxi",status:"Blocked",preferred:!1,categories:["Logistics"],modules:["E-Commerce"],marketplaces:["ExpressMart"],rating:2.9,slaOnTimePct:62,negotiatedTerms:{discountPct:0,paymentTerms:"Net 7",warrantyDays:0},riskScore:34,riskLevel:"High",complianceDocs:[Z("Insurance","Expired",-10,"Cargo insurance","Expired"),Z("Tax/VAT","Pending",90,"Tax certificate")],contracts:[],lastActiveAt:T-40*24*60*60*1e3,notes:"Blocked due to expired insurance and SLA breaches."}].map(X=>{const ge=pr(X);return{...X,riskScore:ge,riskLevel:xr(ge)}}).sort((X,ge)=>X.status!==ge.status?X.status==="Pending"?-1:1:ge.riskScore-X.riskScore)}),[d,u]=c.useState("directory"),[x,p]=c.useState(""),[h,j]=c.useState("All"),[y,f]=c.useState("All"),[I,A]=c.useState("All"),[b,C]=c.useState("All"),[S,z]=c.useState(!1),[$,D]=c.useState(!1),[W,he]=c.useState(null),V=c.useMemo(()=>W&&i.find(T=>T.id===W)||null,[W,i]),[xe,pe]=c.useState(!1),[be,fe]=c.useState(()=>({id:"",name:"",country:"Uganda",city:"Kampala",status:"Pending",preferred:!1,categories:[""],modules:["E-Commerce"],marketplaces:["Other Marketplace"],rating:4,slaOnTimePct:85,negotiatedTerms:{discountPct:0,paymentTerms:"Net 14",warrantyDays:30},riskScore:70,riskLevel:"Medium",complianceDocs:[],contracts:[],lastActiveAt:Date.now(),notes:""})),[K,re]=c.useState(!1),[q,L]=c.useState(()=>({id:"",type:"License",name:"",status:"Pending",issuedAt:Date.now(),expiresAt:Date.now()+180*24*60*60*1e3,notes:""})),[M,k]=c.useState(!1),[P,Y]=c.useState(()=>({id:"",title:"",startAt:Date.now()-7*24*60*60*1e3,endAt:Date.now()+180*24*60*60*1e3,paymentTerms:"Net 14",discountPct:0,slaText:"",rateCardName:"",notes:""})),F=c.useMemo(()=>{const T=i.length,Z=i.filter(ae=>ae.status==="Approved").length,B=i.filter(ae=>ae.status==="Pending").length,ne=i.filter(ae=>ae.status==="Blocked").length,X=i.filter(ae=>ae.preferred&&ae.status==="Approved").length,ge=i.filter(ae=>ae.riskLevel==="High").length,Le=i.reduce((ae,le)=>{const R=le.complianceDocs.some(se=>se.expiresAt&&se.expiresAt<Date.now()+2592e6&&se.status==="Verified");return ae+(R?1:0)},0);return{total:T,approved:Z,pending:B,blocked:ne,preferred:X,highRisk:ge,expiringDocs:Le}},[i]),G=c.useMemo(()=>{const T=x.trim().toLowerCase();return i.filter(Z=>h==="All"?!0:Z.status===h).filter(Z=>y==="All"?!0:Z.riskLevel===y).filter(Z=>S?Z.preferred:!0).filter(Z=>I==="All"?!0:Z.modules.includes(I)).filter(Z=>b==="All"?!0:Z.marketplaces.includes(b)).filter(Z=>T?`${Z.id} ${Z.name} ${Z.country} ${Z.city} ${Z.status} ${Z.categories.join(" ")} ${Z.modules.join(" ")} ${Z.marketplaces.join(" ")}`.toLowerCase().includes(T):!0).slice().sort((Z,B)=>Z.status!==B.status?Z.status==="Pending"?-1:1:Z.preferred!==B.preferred?Z.preferred?-1:1:B.riskScore-Z.riskScore)},[i,x,h,y,S,I,b]),ve=c.useMemo(()=>i.filter(T=>T.status==="Pending"),[i]),Te=c.useMemo(()=>i.map(Z=>{const B=Z.complianceDocs.filter(R=>R.status==="Expired").length,ne=Z.complianceDocs.filter(R=>R.status==="Pending").length,X=Z.complianceDocs.filter(R=>R.status==="Verified").length,ge=Z.complianceDocs.some(R=>R.type==="Insurance"&&R.status==="Verified"),Le=Z.complianceDocs.some(R=>R.type==="License"&&R.status==="Verified"),ae=Z.riskScore,le=(B>0?2:0)+(ne>1?1:0)+(ge?0:1)+(Le?0:1)+(Z.status==="Blocked"?2:0);return{vendor:Z,expired:B,pending:ne,verified:X,hasInsurance:ge,hasLicense:Le,score:ae,redFlags:le}}).sort((Z,B)=>B.redFlags-Z.redFlags||Z.score-B.score),[i]),ye=c.useMemo(()=>{const T=i.filter(Z=>Z.status==="Approved");return a.map(Z=>{const B=T.map(ne=>({vendor:ne,score:AV(ne,Z)})).filter(ne=>ne.score>0).sort((ne,X)=>X.score-ne.score);return{category:Z,top:B.slice(0,3)}})},[i]),ie=()=>{const T={vendors:i,exportedAt:new Date().toISOString()},Z=new Blob([JSON.stringify(T,null,2)],{type:"application/json"}),B=URL.createObjectURL(Z),ne=document.createElement("a");ne.href=B,ne.download="corporatepay-vendors.json",ne.click(),URL.revokeObjectURL(B),r({title:"Exported",message:"Vendors JSON downloaded.",kind:"success"})},Oe=async()=>{try{await navigator.clipboard.writeText(JSON.stringify(i,null,2)),r({title:"Copied",message:"Copied vendors JSON to clipboard.",kind:"success"})}catch{r({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},Ae=T=>{he(T),D(!0)},ee=T=>{o(Z=>Z.map(B=>{if(B.id!==T)return B;const ne=pr(B);return{...B,riskScore:ne,riskLevel:xr(ne)}})),r({title:"Risk updated",message:"Vendor risk score recalculated.",kind:"success"})},Ne=(T,Z)=>{o(B=>B.map(ne=>{if(ne.id!==T)return ne;const X={...ne,status:Z},ge=pr(X);return{...X,riskScore:ge,riskLevel:xr(ge)}})),r({title:"Updated",message:`Vendor status set to ${Z}.`,kind:"success"})},Ce=T=>{o(Z=>Z.map(B=>B.id!==T?B:{...B,preferred:!B.preferred})),r({title:"Updated",message:"Preferred vendor updated.",kind:"info"})},Ee=()=>{fe({id:"",name:"",country:"Uganda",city:"Kampala",status:"Pending",preferred:!1,categories:[""],modules:["E-Commerce"],marketplaces:["Other Marketplace"],rating:4,slaOnTimePct:85,negotiatedTerms:{discountPct:0,paymentTerms:"Net 14",warrantyDays:30},riskScore:70,riskLevel:"Medium",complianceDocs:[],contracts:[],lastActiveAt:Date.now(),notes:""}),pe(!0)},Ue=T=>{fe(JSON.parse(JSON.stringify(T))),pe(!0)},Ye=()=>{if(!be.name.trim()){r({title:"Missing name",message:"Vendor name is required.",kind:"warn"});return}const T=Date.now(),Z=!be.id,B=be.id||nd("V"),ne=be.categories.map(Le=>Le.trim()).filter(Boolean),X={...be,id:B,categories:ne.length?ne:["Other"],lastActiveAt:Z?T:be.lastActiveAt},ge=pr(X);X.riskScore=ge,X.riskLevel=xr(ge),o(Le=>{const ae=Le.findIndex(R=>R.id===B),le=Le.slice();return ae>=0?le[ae]=X:le.unshift(X),le}),r({title:"Saved",message:"Vendor saved.",kind:"success"}),pe(!1),he(B)},De=T=>{o(Z=>Z.filter(B=>B.id!==T)),W===T&&(he(null),D(!1)),r({title:"Deleted",message:"Vendor deleted.",kind:"info"})},Be=()=>{if(!V){r({title:"Select vendor",message:"Open a vendor first.",kind:"warn"});return}L({id:"",type:"License",name:"",status:"Pending",issuedAt:Date.now()-30*24*60*60*1e3,expiresAt:Date.now()+180*24*60*60*1e3,notes:""}),re(!0)},$e=()=>{if(!V)return;if(!q.name.trim()){r({title:"Missing",message:"Document name is required.",kind:"warn"});return}const T={...q,id:q.id||nd("DOC")};o(Z=>Z.map(B=>{if(B.id!==V.id)return B;const ne=B.complianceDocs.slice(),X=ne.findIndex(ae=>ae.id===T.id);X>=0?ne[X]=T:ne.unshift(T);const ge={...B,complianceDocs:ne},Le=pr(ge);return{...ge,riskScore:Le,riskLevel:xr(Le)}})),r({title:"Saved",message:"Compliance document saved.",kind:"success"}),re(!1)},_=T=>{V&&(o(Z=>Z.map(B=>{if(B.id!==V.id)return B;const ne={...B,complianceDocs:B.complianceDocs.filter(ge=>ge.id!==T)},X=pr(ne);return{...ne,riskScore:X,riskLevel:xr(X)}})),r({title:"Deleted",message:"Document removed.",kind:"info"}))},te=()=>{if(!V){r({title:"Select vendor",message:"Open a vendor first.",kind:"warn"});return}Y({id:"",title:"",startAt:Date.now()-7*24*60*60*1e3,endAt:Date.now()+180*24*60*60*1e3,paymentTerms:"Net 14",discountPct:0,slaText:"On-time delivery 90%+, response < 4h",rateCardName:"",notes:""}),k(!0)},Re=()=>{if(!V)return;if(!P.title.trim()){r({title:"Missing",message:"Contract title is required.",kind:"warn"});return}const T={...P,id:P.id||nd("CTR")};o(Z=>Z.map(B=>{if(B.id!==V.id)return B;const ne=B.contracts.slice(),X=ne.findIndex(ae=>ae.id===T.id);X>=0?ne[X]=T:ne.unshift(T);const ge={...B,contracts:ne,negotiatedTerms:{...B.negotiatedTerms,discountPct:Math.max(B.negotiatedTerms.discountPct,T.discountPct),paymentTerms:T.paymentTerms||B.negotiatedTerms.paymentTerms}},Le=pr(ge);return{...ge,riskScore:Le,riskLevel:xr(Le)}})),r({title:"Saved",message:"Contract saved.",kind:"success"}),k(!1)},Fe=T=>{V&&(o(Z=>Z.map(B=>{if(B.id!==V.id)return B;const ne={...B,contracts:B.contracts.filter(ge=>ge.id!==T)},X=pr(ne);return{...ne,riskScore:X,riskLevel:xr(X)}})),r({title:"Deleted",message:"Contract removed.",kind:"info"}))};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(CV,{toasts:l,onDismiss:T=>n(Z=>Z.filter(B=>B.id!==T))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:ph.green},children:e.jsx(Ia,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Vendor and Catalog Management"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Vendor directory across modules and marketplaces, allowlist and denylist, compliance docs, contracts, and preferred vendor recommendations."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(nt,{label:`Total: ${F.total}`,tone:"neutral"}),e.jsx(nt,{label:`Approved: ${F.approved}`,tone:"good"}),e.jsx(nt,{label:`Pending: ${F.pending}`,tone:F.pending?"warn":"good"}),e.jsx(nt,{label:`Blocked: ${F.blocked}`,tone:F.blocked?"bad":"good"}),e.jsx(nt,{label:`Preferred: ${F.preferred}`,tone:"info"}),e.jsx(nt,{label:`High risk: ${F.highRisk}`,tone:F.highRisk?"bad":"good"}),e.jsx(nt,{label:`Docs expiring: ${F.expiringDocs}`,tone:F.expiringDocs?"warn":"good"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy JSON"]}),e.jsxs(Nt,{variant:"outline",onClick:ie,children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs(Nt,{variant:"outline",onClick:()=>u("requests"),children:[e.jsx($L,{className:"h-4 w-4"})," Requests (",ve.length,")"]}),e.jsxs(Nt,{variant:"primary",onClick:Ee,children:[e.jsx(ft,{className:"h-4 w-4"})," New vendor"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"directory",label:"Directory"},{id:"requests",label:"Vendor requests"},{id:"risk",label:"Risk and compliance"},{id:"contracts",label:"Contracts and rate cards"},{id:"recommendations",label:"Preferred recommendations"}].map(T=>e.jsx("button",{className:Oa("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",d===T.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:d===T.id?{background:ph.green}:void 0,onClick:()=>u(T.id),children:T.label},T.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[d==="directory"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zl,{title:"Filters",subtitle:"Search and slice vendor directory.",right:e.jsx(nt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 py-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:x,onChange:T=>p(T.target.value),placeholder:"Vendor name, module, marketplace...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Yi,{label:"Status",value:h,onChange:T=>j(T),options:[{value:"All",label:"All"},{value:"Approved",label:"Approved"},{value:"Pending",label:"Pending"},{value:"Blocked",label:"Blocked"}]}),e.jsx(Yi,{label:"Risk",value:y,onChange:T=>f(T),options:[{value:"All",label:"All"},{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"}]}),e.jsx(Yi,{label:"Module",value:I,onChange:T=>A(T),options:[{value:"All",label:"All"},...t.map(T=>({value:T,label:T}))]}),e.jsx(Yi,{label:"Marketplace",value:b,onChange:T=>C(T),options:[{value:"All",label:"All"},...s.map(T=>({value:T,label:T}))],hint:"E-Commerce"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[e.jsx(wV,{enabled:S,onChange:z,label:"Preferred only",description:"Show preferred vendors first"}),e.jsxs(Nt,{variant:"outline",onClick:()=>{p(""),j("All"),f("All"),A("All"),C("All"),z(!1),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(Nt,{variant:"outline",onClick:()=>u("risk"),children:[e.jsx(Ld,{className:"h-4 w-4"})," Risk"]}),e.jsxs(Nt,{variant:"outline",onClick:()=>u("recommendations"),children:[e.jsx(Ga,{className:"h-4 w-4"})," Recommendations"]})]})]}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: Vendor risk scoring is logic-based initially. Later, you can enrich it with compliance signals and dispute history."})]}),e.jsx("div",{className:"w-full",children:e.jsxs(zl,{title:"Vendor directory",subtitle:"Approve vendors (allowlist) or block (denylist). Open a vendor to view compliance and contracts.",right:e.jsx(nt,{label:`${G.length} vendor(s)`,tone:"neutral"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Risk"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rating"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"SLA"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Terms"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Modules"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Marketplaces"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[G.map(T=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("button",{className:"text-left",onClick:()=>Ae(T.id),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.name}),T.preferred?e.jsx(nt,{label:"Preferred",tone:"info"}):null,e.jsx(nt,{label:T.id,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[T.city,", ",T.country,"  Active ",mk(T.lastActiveAt)]})]})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(nt,{label:T.status,tone:gg(T.status)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(nt,{label:`${T.riskLevel} (${T.riskScore})`,tone:zc(T.riskLevel)}),T.complianceDocs.some(Z=>Z.status==="Expired")?e.jsx(nt,{label:"Expired doc",tone:"bad"}):null]})}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:T.rating.toFixed(1)})," / 5"]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[e.jsxs("span",{className:"font-semibold text-slate-900",children:[T.slaOnTimePct,"%"]})," on-time"]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[e.jsxs("div",{className:"text-xs text-slate-600",children:["Discount ",e.jsxs("span",{className:"font-semibold text-slate-900",children:[T.negotiatedTerms.discountPct,"%"]})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Terms ",e.jsx("span",{className:"font-semibold text-slate-900",children:T.negotiatedTerms.paymentTerms})]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.modules.slice(0,2).map(Z=>e.jsx(nt,{label:Z,tone:"neutral"},Z)),T.modules.length>2?e.jsx(nt,{label:`+${T.modules.length-2}`,tone:"neutral"}):null]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[T.marketplaces.slice(0,2).map(Z=>e.jsx(nt,{label:Z,tone:"neutral"},Z)),T.marketplaces.length>2?e.jsx(nt,{label:`+${T.marketplaces.length-2}`,tone:"neutral"}):null,T.marketplaces.length?null:e.jsx(nt,{label:"-",tone:"neutral"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Hy,{actions:[{label:T.preferred?"Remove preferred":"Set preferred",onClick:()=>Ce(T.id),icon:e.jsx(Ga,{className:"h-4 w-4"}),disabled:T.status!=="Approved"},{label:"Edit",onClick:()=>Ue(T),icon:e.jsx(Dn,{className:"h-4 w-4"})},T.status!=="Approved"?{label:"Approve",onClick:()=>Ne(T.id,"Approved"),icon:e.jsx(Ra,{className:"h-4 w-4"})}:{label:"Block",onClick:()=>Ne(T.id,"Blocked"),icon:e.jsx(Ld,{className:"h-4 w-4"}),variant:"danger"},{label:"Open",onClick:()=>Ae(T.id),icon:e.jsx(ue,{className:"h-4 w-4"})}]})})]},T.id)),G.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:9,className:"px-4 py-12 text-center text-sm text-slate-600",children:"No vendors match your filters."})})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Core: allowlist and denylist. Premium: risk scoring, compliance docs, contracts, and preferred recommendations."})]})})]}):null,d==="requests"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(zl,{title:"Requests",subtitle:"Pending vendors awaiting approval.",right:e.jsx(nt,{label:`${ve.length}`,tone:ve.length?"warn":"good"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Approve vendors to add them to the allowlist. Block vendors to deny access."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"primary",onClick:Ee,children:[e.jsx(ft,{className:"h-4 w-4"})," New vendor"]}),e.jsxs(Nt,{variant:"outline",onClick:()=>u("directory"),children:[e.jsx(ue,{className:"h-4 w-4"})," Directory"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: onboarding can require compliance documents before approval."})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx(zl,{title:"Pending approvals",subtitle:"Approve or block.",right:e.jsx(nt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[ve.map(T=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.name}),e.jsx(nt,{label:T.id,tone:"neutral"}),e.jsx(nt,{label:`${T.riskLevel} (${T.riskScore})`,tone:zc(T.riskLevel)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[T.city,", ",T.country,"  Rating ",T.rating.toFixed(1),"  SLA ",T.slaOnTimePct,"%"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[T.modules.map(Z=>e.jsx(nt,{label:Z,tone:"neutral"},Z)),T.marketplaces.map(Z=>e.jsx(nt,{label:Z,tone:"neutral"},Z))]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Docs: ",T.complianceDocs.length,"  Contracts: ",T.contracts.length]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",onClick:()=>Ae(T.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]}),e.jsxs(Nt,{variant:"primary",onClick:()=>Ne(T.id,"Approved"),children:[e.jsx(Ra,{className:"h-4 w-4"})," Approve"]}),e.jsxs(Nt,{variant:"outline",onClick:()=>Ne(T.id,"Blocked"),children:[e.jsx(Ld,{className:"h-4 w-4"})," Block"]})]})]})},T.id)),ve.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No pending vendors."})]})})})]}):null,d==="risk"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs(zl,{title:"Risk hotspots",subtitle:"High risk or missing compliance.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:Te.slice(0,8).map(T=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("button",{className:"text-left",onClick:()=>Ae(T.vendor.id),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.vendor.name}),e.jsx(nt,{label:T.vendor.status,tone:gg(T.vendor.status)}),e.jsx(nt,{label:`${T.vendor.riskLevel} (${T.vendor.riskScore})`,tone:zc(T.vendor.riskLevel)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Expired: ",T.expired,"  Pending: ",T.pending,"  Verified: ",T.verified]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Insurance: ",T.hasInsurance?"Yes":"No","  License: ",T.hasLicense?"Yes":"No"]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>ee(T.vendor.id),children:[e.jsx(Ef,{className:"h-4 w-4"})," Recalc"]}),e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ae(T.vendor.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})]})]})},T.vendor.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: Attach compliance documents and mark them verified to improve risk score."})]})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsxs(zl,{title:"Compliance overview",subtitle:"Doc status across all vendors.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Docs"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Verified"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Pending"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Expired"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:i.slice().sort((T,Z)=>{const B=T.complianceDocs.filter(X=>X.status==="Expired").length;return Z.complianceDocs.filter(X=>X.status==="Expired").length-B||T.riskScore-Z.riskScore}).slice(0,10).map(T=>{const Z=T.complianceDocs.filter(X=>X.status==="Verified").length,B=T.complianceDocs.filter(X=>X.status==="Pending").length,ne=T.complianceDocs.filter(X=>X.status==="Expired").length;return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:T.name}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:T.complianceDocs.length}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(nt,{label:`${Z}`,tone:Z?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(nt,{label:`${B}`,tone:B?"warn":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(nt,{label:`${ne}`,tone:ne?"bad":"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ae(T.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]}),e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>ee(T.id),children:[e.jsx(Ef,{className:"h-4 w-4"})," Recalc"]})]})})]},T.id)})})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: For enterprise safety, require Insurance + License verified before approval for sensitive categories."})]})})]}):null,d==="contracts"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zl,{title:"Contracts and rate cards",subtitle:"Premium: contract + rate-card storage.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Open a vendor to add contract documents and rate cards. Use negotiated terms for approvals and savings insights."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",onClick:()=>u("directory"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open directory"]}),e.jsxs(Nt,{variant:"primary",onClick:()=>{!W&&i[0]&&he(i[0].id),D(!0)},children:[e.jsx(ue,{className:"h-4 w-4"})," Open vendor"]})]})]}),e.jsx(zl,{title:"Active contracts",subtitle:"Across all vendors.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[i.flatMap(T=>T.contracts.map(Z=>({vendor:T,contract:Z}))).sort((T,Z)=>Z.contract.startAt-T.contract.startAt).slice(0,12).map(({vendor:T,contract:Z})=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Z.title}),e.jsx(nt,{label:T.name,tone:"neutral"}),e.jsx(nt,{label:`${Z.discountPct}% discount`,tone:Z.discountPct?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[rd(Z.startAt),"  ",rd(Z.endAt),"  ",Z.paymentTerms]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Rate card: ",Z.rateCardName||"-"]}),Z.slaText?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["SLA: ",Z.slaText]}):null]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ae(T.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open vendor"]})})]})},Z.id)),i.some(T=>T.contracts.length)?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No contracts yet."})]})})]}):null,d==="recommendations"?e.jsxs("div",{className:"space-y-4",children:[e.jsx(zl,{title:"Recommended vendors",subtitle:"Top 3 per spend category.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"space-y-3",children:ye.map(T=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dm,{className:"h-4 w-4 text-slate-500"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.category})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Top vendors based on fit, savings, and risk."})]}),e.jsx(nt,{label:T.top.length?"Available":"No vendors",tone:T.top.length?"good":"warn"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[T.top.map(Z=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:Z.vendor.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Score ",Z.score,"/100"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(nt,{label:Z.vendor.riskLevel,tone:zc(Z.vendor.riskLevel)}),e.jsx(nt,{label:`${Z.vendor.rating.toFixed(1)}`,tone:"neutral"}),e.jsx(nt,{label:`${Z.vendor.slaOnTimePct}% SLA`,tone:"neutral"}),e.jsx(nt,{label:`${Z.vendor.negotiatedTerms.discountPct}% off`,tone:Z.vendor.negotiatedTerms.discountPct?"info":"neutral"})]})]}),Z.vendor.preferred?e.jsx(Ga,{className:"h-5 w-5 text-amber-500"}):e.jsx(Ga,{className:"h-5 w-5 text-slate-300"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ae(Z.vendor.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]}),e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ce(Z.vendor.id),disabled:Z.vendor.status!=="Approved",children:[e.jsx(Ga,{className:"h-4 w-4"})," Preferred"]})]})]},Z.vendor.id)),T.top.length?null:e.jsx("div",{className:"md:col-span-3 rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No approved vendors match this category yet."})]})]},T.category))})}),e.jsxs(zl,{title:"How recommendations work",subtitle:"Premium: preferred vendor recommendations by spend category.",right:e.jsx(nt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Recommendations are based on:",e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:"1) Vendor fit (module/marketplace coverage)"}),e.jsx("li",{children:"2) Quality (rating + SLA)"}),e.jsx("li",{children:"3) Savings (negotiated discount)"}),e.jsx("li",{children:"4) Risk score (compliance and history)"}),e.jsx("li",{children:"5) Preferred flag (admin curated)"})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Tip: Approvals can auto-route to preferred vendors, and non-preferred purchases can require additional approvals."})]})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"R Vendor and Catalog Management v2. Core: vendor directory, allowlist and denylist, metadata. Premium: risk scoring and compliance docs, contracts and rate cards, and preferred vendor recommendations."})})]})}),e.jsx(kV,{open:$,title:V?V.name:"Vendor",subtitle:V?`${V.city}, ${V.country}  ${V.status}  Risk ${V.riskScore}/100`:"",onClose:()=>D(!1),footer:V?e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsxs(Nt,{variant:"outline",onClick:()=>Ue(V),children:[e.jsx(Dn,{className:"h-4 w-4"})," Edit vendor"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",onClick:()=>ee(V.id),children:[e.jsx(Ef,{className:"h-4 w-4"})," Recalc risk"]}),e.jsxs(Nt,{variant:"outline",onClick:Be,children:[e.jsx(Mo,{className:"h-4 w-4"})," Add doc"]}),e.jsxs(Nt,{variant:"outline",onClick:te,children:[e.jsx(ft,{className:"h-4 w-4"})," Add contract"]})]})]}):null,children:V?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(nt,{label:V.status,tone:gg(V.status)}),e.jsx(nt,{label:V.preferred?"Preferred":"Standard",tone:V.preferred?"info":"neutral"}),e.jsx(nt,{label:`${V.riskLevel} (${V.riskScore})`,tone:zc(V.riskLevel)}),e.jsx(nt,{label:`${V.rating.toFixed(1)}`,tone:"neutral"}),e.jsx(nt,{label:`${V.slaOnTimePct}% SLA`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Categories: ",V.categories.join(", ")]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Last active: ",mk(V.lastActiveAt)]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ce(V.id),disabled:V.status!=="Approved",children:[e.jsx(Ga,{className:"h-4 w-4"})," ",V.preferred?"Unprefer":"Prefer"]}),V.status!=="Approved"?e.jsxs(Nt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Ne(V.id,"Approved"),children:[e.jsx(Ra,{className:"h-4 w-4"})," Approve"]}):e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Ne(V.id,"Blocked"),children:[e.jsx(Ld,{className:"h-4 w-4"})," Block"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Negotiated terms"}),e.jsxs("div",{className:"mt-2",children:["Discount: ",e.jsxs("span",{className:"font-semibold",children:[V.negotiatedTerms.discountPct,"%"]})]}),e.jsxs("div",{className:"mt-1",children:["Payment terms: ",e.jsx("span",{className:"font-semibold",children:V.negotiatedTerms.paymentTerms})]}),e.jsxs("div",{className:"mt-1",children:["Warranty: ",e.jsxs("span",{className:"font-semibold",children:[V.negotiatedTerms.warrantyDays," day(s)"]})]})]}),e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Coverage"}),e.jsxs("div",{className:"mt-2",children:["Modules: ",V.modules.join(", ")||"-"]}),e.jsxs("div",{className:"mt-1",children:["Marketplaces: ",V.marketplaces.join(", ")||"-"]})]})]}),V.notes?e.jsx("div",{className:"mt-3 rounded-2xl bg-white p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:V.notes}):null]}),e.jsx(zl,{title:"Compliance documents",subtitle:"Premium: licenses, insurance, and verification.",right:e.jsx(nt,{label:`${V.complianceDocs.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[V.complianceDocs.map(T=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(nt,{label:T.type,tone:"neutral"}),e.jsx(nt,{label:T.status,tone:SV(T.status)}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.name})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Issued ",T.issuedAt?rd(T.issuedAt):"-","  Expires ",T.expiresAt?rd(T.expiresAt):"-"]}),T.notes?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Notes: ",T.notes]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{const Z=T.status==="Pending"?"Verified":T.status==="Verified"?"Expired":"Pending";o(B=>B.map(ne=>{if(ne.id!==V.id)return ne;const X=ne.complianceDocs.map(ae=>ae.id===T.id?{...ae,status:Z}:ae),ge={...ne,complianceDocs:X},Le=pr(ge);return{...ge,riskScore:Le,riskLevel:xr(Le)}})),r({title:"Updated",message:"Document status updated.",kind:"success"})},children:[e.jsx(FL,{className:"h-4 w-4"})," Toggle status"]}),e.jsx(Nt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>_(T.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]})},T.id)),V.complianceDocs.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No compliance docs yet. Add License and Insurance for enterprise safety."})]})}),e.jsx(zl,{title:"Contracts and rate cards",subtitle:"Premium: store agreements and rate cards.",right:e.jsx(nt,{label:`${V.contracts.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[V.contracts.map(T=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T.title}),e.jsx(nt,{label:`${T.discountPct}% off`,tone:T.discountPct?"info":"neutral"}),e.jsx(nt,{label:T.paymentTerms,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[rd(T.startAt),"  ",rd(T.endAt)]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Rate card: ",T.rateCardName||"-"]}),T.slaText?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["SLA: ",T.slaText]}):null,T.notes?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Notes: ",T.notes]}):null]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Nt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Y(JSON.parse(JSON.stringify(T))),k(!0)},children:[e.jsx(Dn,{className:"h-4 w-4"})," Edit"]}),e.jsx(Nt,{variant:"danger",className:"px-3 py-2 text-xs",onClick:()=>Fe(T.id),children:e.jsx(bs,{className:"h-4 w-4"})})]})]})},T.id)),V.contracts.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No contracts. Add a contract and rate card for negotiated pricing."})]})})]}):e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"Select a vendor."})}),e.jsx(fg,{open:xe,title:be.id?"Edit vendor":"New vendor",subtitle:"Core: vendor directory and allowlist/denylist. Premium: compliance and contracts are added per vendor.",onClose:()=>pe(!1),actions:[{label:"Save",onClick:Ye},...be.id?[{label:"Delete",onClick:()=>{De(be.id),pe(!1)},variant:"danger"}]:[]],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Nt,{variant:"outline",onClick:()=>pe(!1),children:"Cancel"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[be.id?e.jsxs(Nt,{variant:"danger",onClick:()=>{De(be.id),pe(!1)},children:[e.jsx(bs,{className:"h-4 w-4"})," Delete"]}):null,e.jsxs(Nt,{variant:"primary",onClick:Ye,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Nl,{label:"Vendor name",value:be.name,onChange:T=>fe(Z=>({...Z,name:T})),placeholder:"Vendor name"}),e.jsx(Yi,{label:"Status",value:be.status,onChange:T=>fe(Z=>({...Z,status:T})),options:[{value:"Pending",label:"Pending"},{value:"Approved",label:"Approved"},{value:"Blocked",label:"Blocked"}]}),e.jsx(Nl,{label:"Country",value:be.country,onChange:T=>fe(Z=>({...Z,country:T})),placeholder:"Country"}),e.jsx(Nl,{label:"City",value:be.city,onChange:T=>fe(Z=>({...Z,city:T})),placeholder:"City"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Nl,{label:"Categories (comma separated)",value:be.categories.join(", "),onChange:T=>fe(Z=>({...Z,categories:T.split(",").map(B=>B.trim())})),placeholder:"Office supplies, Consumables",hint:"Metadata"})}),e.jsx(qc,{label:"Rating (0-5)",value:be.rating,onChange:T=>fe(Z=>({...Z,rating:Jn(T,0,5)})),hint:"Internal"}),e.jsx(qc,{label:"SLA on-time percent",value:be.slaOnTimePct,onChange:T=>fe(Z=>({...Z,slaOnTimePct:Jn(T,0,100)})),hint:"Internal"}),e.jsx(qc,{label:"Discount percent",value:be.negotiatedTerms.discountPct,onChange:T=>fe(Z=>({...Z,negotiatedTerms:{...Z.negotiatedTerms,discountPct:Jn(T,0,100)}}))}),e.jsx(qc,{label:"Warranty days",value:be.negotiatedTerms.warrantyDays,onChange:T=>fe(Z=>({...Z,negotiatedTerms:{...Z.negotiatedTerms,warrantyDays:Math.max(0,T)}}))}),e.jsx(Nl,{label:"Payment terms",value:be.negotiatedTerms.paymentTerms,onChange:T=>fe(Z=>({...Z,negotiatedTerms:{...Z.negotiatedTerms,paymentTerms:T}})),placeholder:"Net 14"}),e.jsxs("div",{className:"md:col-span-2 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Modules"}),e.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:t.map(T=>{const Z=be.modules.includes(T);return e.jsxs("button",{type:"button",className:Oa("rounded-2xl border px-3 py-3 text-left",Z?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>fe(B=>({...B,modules:Z?B.modules.filter(ne=>ne!==T):[...B.modules,T]})),children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:Z?"Enabled":"Disabled"})]},T)})})]}),e.jsxs("div",{className:Oa("md:col-span-2 rounded-3xl border border-slate-200 bg-white p-4",be.modules.includes("E-Commerce")?"":"opacity-60"),children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Marketplaces"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Only relevant when E-Commerce is enabled."}),e.jsx("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:s.map(T=>{const Z=be.marketplaces.includes(T),B=!be.modules.includes("E-Commerce");return e.jsxs("button",{type:"button",disabled:B,className:Oa("rounded-2xl border px-3 py-3 text-left",Z?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50",B&&"cursor-not-allowed"),onClick:()=>{B||fe(ne=>({...ne,marketplaces:Z?ne.marketplaces.filter(X=>X!==T):[...ne.marketplaces,T]}))},children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:T}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:Z?"Enabled":"Disabled"})]},T)})})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Ex,{label:"Notes",value:be.notes,onChange:T=>fe(Z=>({...Z,notes:T})),placeholder:"Vendor notes",rows:3})})]})}),e.jsx(fg,{open:K,title:q.id?"Edit compliance doc":"Add compliance doc",subtitle:"Premium: store and verify licenses, insurance, and other compliance documents.",onClose:()=>re(!1),actions:[{label:"Save",onClick:$e}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Nt,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),e.jsxs(Nt,{variant:"primary",onClick:$e,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Yi,{label:"Type",value:q.type,onChange:T=>L(Z=>({...Z,type:T})),options:["Business registration","Tax/VAT","License","Insurance","KYC","Other"].map(T=>({value:T,label:T}))}),e.jsx(Yi,{label:"Status",value:q.status,onChange:T=>L(Z=>({...Z,status:T})),options:["Pending","Verified","Expired"].map(T=>({value:T,label:T}))}),e.jsx(Nl,{label:"Document name",value:q.name,onChange:T=>L(Z=>({...Z,name:T})),placeholder:"Insurance certificate"}),e.jsx(Nl,{label:"Issued date",value:q.issuedAt?new Date(q.issuedAt).toISOString().slice(0,10):"",onChange:T=>L(Z=>({...Z,issuedAt:new Date(T).getTime()})),type:"date"}),e.jsx(Nl,{label:"Expiry date",value:q.expiresAt?new Date(q.expiresAt).toISOString().slice(0,10):"",onChange:T=>L(Z=>({...Z,expiresAt:new Date(T).getTime()})),type:"date"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Ex,{label:"Notes",value:q.notes,onChange:T=>L(Z=>({...Z,notes:T})),placeholder:"Verification notes",rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Upload is simulated here. In production this stores file metadata and secure URLs."})]})}),e.jsx(fg,{open:M,title:P.id?"Edit contract":"Add contract",subtitle:"Premium: contract + rate card storage and negotiated pricing.",onClose:()=>k(!1),actions:[{label:"Save",onClick:Re}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Nt,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs(Nt,{variant:"primary",onClick:Re,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Nl,{label:"Title",value:P.title,onChange:T=>Y(Z=>({...Z,title:T})),placeholder:"Master services agreement"}),e.jsx(Nl,{label:"Rate card name",value:P.rateCardName,onChange:T=>Y(Z=>({...Z,rateCardName:T})),placeholder:"Rate card.pdf"}),e.jsx(Nl,{label:"Start date",type:"date",value:new Date(P.startAt).toISOString().slice(0,10),onChange:T=>Y(Z=>({...Z,startAt:new Date(T).getTime()}))}),e.jsx(Nl,{label:"End date",type:"date",value:new Date(P.endAt).toISOString().slice(0,10),onChange:T=>Y(Z=>({...Z,endAt:new Date(T).getTime()}))}),e.jsx(Nl,{label:"Payment terms",value:P.paymentTerms,onChange:T=>Y(Z=>({...Z,paymentTerms:T})),placeholder:"Net 14"}),e.jsx(qc,{label:"Discount percent",value:P.discountPct,onChange:T=>Y(Z=>({...Z,discountPct:Jn(T,0,100)}))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Ex,{label:"SLA text",value:P.slaText,onChange:T=>Y(Z=>({...Z,slaText:T})),placeholder:"On-time 92%+, response < 2h",rows:3})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Ex,{label:"Notes",value:P.notes,onChange:T=>Y(Z=>({...Z,notes:T})),placeholder:"Optional",rows:3})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Rate card upload is simulated. In production you store files with access control."})]})})]})}const Mu={green:"#03CD8C",orange:"#F77F00"};function Gs(...t){return t.filter(Boolean).join(" ")}function qs(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function PV(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function Qi(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function xk(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function cl(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function id(t,s){const a=Math.round(Number(t||0));try{return new Intl.NumberFormat(void 0,{style:"currency",currency:s,maximumFractionDigits:0}).format(a)}catch{return`${s} ${a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}}function ut({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Gs("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function gt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Mu.green}:t==="accent"?{background:Mu.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Gs(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Gl({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Gs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Gs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Gc({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Gs(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Gs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Ji({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Gs(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Gs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function Wc({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:Gs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:Gs("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function va({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function od({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function MV({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700 focus:bg-slate-100 focus:outline-none",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:Gs("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function Px({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1020px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(MV,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function TV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Gs("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function RV(){return["Delivery inspection completed","Warranty documents received","Commissioning completed","Training provided","Acceptance signed"].map(s=>({id:qs("CHK"),label:s,done:!1}))}function DV(){return`ASSET-${Math.floor(1e3+Math.random()*9e3)}`}function vg(t,s,a,l){const n={Manager:"Manager",Finance:"Finance Desk",CFO:"CFO",CEO:"CEO","EVzone Support":"EVzone Support"};let r=t.steps.slice();if(t.appliesTo==="Any"&&l>=15e6&&!r.some(i=>i.role==="CFO")&&(r=[...r,{role:"CFO",slaHours:24}]),a==="CapEx"){const i=r.some(d=>d.role==="CFO"),o=r.some(d=>d.role==="CEO");i||(r=[...r,{role:"CFO",slaHours:24}]),o||(r=[...r,{role:"CEO",slaHours:24}])}return r.map(i=>({id:qs("APR"),role:i.role,assignee:n[i.role]||i.role,status:"Pending",slaHours:i.slaHours,requestedAt:s}))}function OV(){var J,g,H;const t=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],s=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],[a,l]=c.useState([]),n=N=>{const U=qs("toast");l(ce=>[{id:U,...N},...ce].slice(0,4)),window.setTimeout(()=>l(ce=>ce.filter(O=>O.id!==U)),3200)},[r,i]=c.useState(()=>[{id:"TPL-OPEX",name:"Standard OpEx",appliesTo:"OpEx",minAmountUGX:0,description:"Manager then Finance approval. Suitable for routine procurement.",steps:[{role:"Manager",slaHours:8},{role:"Finance",slaHours:12}]},{id:"TPL-CAPEX",name:"Executive CapEx",appliesTo:"CapEx",minAmountUGX:0,description:"Manager then CFO then CEO. For high value assets and CapEx.",steps:[{role:"Manager",slaHours:8},{role:"CFO",slaHours:24},{role:"CEO",slaHours:24}]},{id:"TPL-HIGH",name:"High Value OpEx",appliesTo:"Any",minAmountUGX:1e7,description:"Manager and Finance. CFO added automatically when estimate is high.",steps:[{role:"Manager",slaHours:8},{role:"Finance",slaHours:12}]}]),[o]=c.useState(()=>[{id:"V-001",name:"EVzone Rides",country:"Uganda",rating:4.6,status:"Approved",riskLevel:"Low",riskScore:88,categories:["Mobility","Corporate transport"],modules:["Rides & Logistics"],marketplaces:[],negotiatedDiscountPct:7,slaOnTimePct:93},{id:"V-002",name:"EVzone Charging",country:"Uganda",rating:4.3,status:"Approved",riskLevel:"Low",riskScore:83,categories:["Energy","EV infrastructure"],modules:["EVs & Charging"],marketplaces:[],negotiatedDiscountPct:5,slaOnTimePct:90},{id:"V-010",name:"Shenzhen EV Motors",country:"China",rating:4.2,status:"Approved",riskLevel:"Medium",riskScore:74,categories:["Vehicles","Fleet"],modules:["E-Commerce"],marketplaces:["MyLiveDealz","EVmart"],negotiatedDiscountPct:10,slaOnTimePct:84},{id:"V-011",name:"Kampala Auto Supplier",country:"Uganda",rating:4,status:"Approved",riskLevel:"Medium",riskScore:70,categories:["Vehicles","Service"],modules:["E-Commerce"],marketplaces:["EVmart","ServiceMart"],negotiatedDiscountPct:4,slaOnTimePct:86},{id:"V-020",name:"Express CN",country:"China",rating:2.9,status:"Blocked",riskLevel:"High",riskScore:34,categories:["Logistics"],modules:["E-Commerce"],marketplaces:["ExpressMart"],negotiatedDiscountPct:0,slaOnTimePct:62}]),[d]=c.useState(()=>({opExMonthlyLimitUGX:12e6,opExMonthlyUsedUGX:98e5,capExAnnualLimitUGX:15e7,capExAnnualUsedUGX:42e6})),u=Math.max(0,d.opExMonthlyLimitUGX-d.opExMonthlyUsedUGX),x=Math.max(0,d.capExAnnualLimitUGX-d.capExAnnualUsedUGX),[p,h]=c.useState(()=>{const N=Date.now(),U={id:"RFQ-001",title:"Company vehicle procurement",createdAt:N-6*24*60*60*1e3,createdBy:"Procurement Desk",status:"Sent",fundingType:"CapEx",serviceModule:"E-Commerce",marketplace:"EVmart",category:"Vehicle",specs:"Electric SUV. Minimum 400km range. Right-hand drive. Warranty 5 years.",quantity:1,unit:"Unit",deliveryLocation:"Millennium House, Nsambya Road 472, Kampala",warrantyNeeds:"5 years vehicle, 8 years battery",attachments:[{id:qs("AT"),name:"Vehicle specs.pdf",note:"Initial specs",uploadedAt:N-6*24*60*60*1e3,uploadedBy:"Procurement Desk"}],estimatedBudgetUGX:9e7,capexJustification:"High value asset cannot fit monthly OpEx. Requires CapEx approval.",approvalTemplateId:"TPL-CAPEX",approvals:vg({appliesTo:"CapEx",steps:[{role:"Manager",slaHours:8},{role:"CFO",slaHours:24},{role:"CEO",slaHours:24}]},N-6*24*60*60*1e3,"CapEx",9e7).map((O,je)=>({...O,status:je<3?"Approved":"Pending",decidedAt:N-5*24*60*60*1e3,decisionNote:"Approved"})),invited:[{vendorId:"V-010",status:"Invited",invitedAt:N-5*24*60*60*1e3,lastSeenAt:N-4*24*60*60*1e3},{vendorId:"V-011",status:"Quoted",invitedAt:N-5*24*60*60*1e3,lastSeenAt:N-2*24*60*60*1e3}],qna:[{id:qs("QNA"),at:N-4*24*60*60*1e3,by:"Buyer",message:"Confirm charging standard and warranty terms.",attachments:[]},{id:qs("QNA"),at:N-4*24*60*60*1e3+3*60*60*1e3,by:"Vendor",vendorId:"V-011",message:"Supports CCS2. Warranty 5y vehicle and 8y battery.",attachments:[]}],quotes:[{id:"QT-001",rfqId:"RFQ-001",vendorId:"V-011",createdAt:N-2*24*60*60*1e3,status:"Submitted",currency:"UGX",total:88e6,leadTimeDays:30,warrantyMonths:60,paymentTerms:"30% deposit, 60% on delivery, 10% commissioning",notes:"Includes delivery and registration assistance.",attachments:[{id:qs("AT"),name:"Quote.pdf",note:"Quotation",uploadedAt:N-2*24*60*60*1e3,uploadedBy:"Kampala Auto Supplier"}],lineItems:[{description:"Electric SUV",qty:1,unitPrice:88e6}]}],selectedQuoteId:"QT-001",po:{id:"PO-001",rfqId:"RFQ-001",vendorId:"V-011",createdAt:N-1*24*60*60*1e3,status:"Issued",total:88e6,currency:"UGX",deliverTo:"Millennium House, Nsambya Road 472, Kampala",deliverByDays:30,shippingTerms:"DAP Kampala",milestones:[{id:qs("MS"),name:"Deposit",pct:30,dueInDays:2,status:"Invoiced"},{id:qs("MS"),name:"Delivery",pct:60,dueInDays:30,status:"Planned"},{id:qs("MS"),name:"Commissioning",pct:10,dueInDays:40,status:"Planned"}],notes:"Milestone payments required."},assets:[]},ce={id:"RFQ-002",title:"Office generator replacement",createdAt:N-3*24*60*60*1e3,createdBy:"Admin",status:"Approval pending",fundingType:"OpEx",serviceModule:"E-Commerce",marketplace:"ServiceMart",category:"Equipment",specs:"Backup generator 50kVA, installation required.",quantity:1,unit:"Unit",deliveryLocation:"Kampala HQ",warrantyNeeds:"Minimum 1 year",attachments:[],estimatedBudgetUGX:18e6,capexJustification:"",approvalTemplateId:"TPL-HIGH",approvals:vg({appliesTo:"Any",steps:[{role:"Manager",slaHours:8},{role:"Finance",slaHours:12}]},N-3*24*60*60*1e3,"OpEx",18e6),invited:[],qna:[],quotes:[],assets:[]};return[U,ce]}),[j,y]=c.useState(()=>"RFQ-001"),f=c.useMemo(()=>p.find(N=>N.id===j)||null,[p,j]),[I,A]=c.useState("rfqs"),[b,C]=c.useState("Overview"),[S,z]=c.useState(0),[$,D]=c.useState(()=>({title:"",fundingType:"OpEx",serviceModule:"E-Commerce",marketplace:"EVmart",category:"Vehicle",specs:"",quantity:1,unit:"Unit",deliveryLocation:"",warrantyNeeds:"",estimatedBudgetUGX:0,capexJustification:"",approvalTemplateId:"TPL-OPEX",vendorIds:[],attachments:[]})),[W,he]=c.useState(!1),[V,xe]=c.useState({name:"",note:""}),[pe,be]=c.useState(!1),[fe,K]=c.useState("Please submit your quotation with lead time and warranty."),[re,q]=c.useState(!1),[L,M]=c.useState({vendorId:"",total:0,leadTimeDays:30,warrantyMonths:12,paymentTerms:"Net 14",notes:""}),[k,P]=c.useState(!1),[Y,F]=c.useState({type:"Vehicle",description:"",serialNo:"",location:"Kampala HQ",assignedTo:""}),[G,ve]=c.useState(""),[Te,ye]=c.useState(""),ie=c.useMemo(()=>{const N=p.filter(je=>je.status!=="Closed").length,U=p.filter(je=>je.status==="Approval pending").length,ce=p.reduce((je,we)=>je+we.quotes.length,0),O=p.filter(je=>je.fundingType==="CapEx").length;return{active:N,pendingApprovals:U,quotes:ce,capex:O}},[p]),Oe=c.useMemo(()=>($.estimatedBudgetUGX||0)<=u,[$.estimatedBudgetUGX,u]),Ae=c.useMemo(()=>{const N=$.estimatedBudgetUGX||0;return N<=0?$.fundingType:N>u?"CapEx":"OpEx"},[$.fundingType,$.estimatedBudgetUGX,u]),ee=(N,U)=>{h(ce=>ce.map(O=>O.id===N?{...O,...U}:O))},Ne=(N,U)=>{h(ce=>ce.map(O=>O.id===N?{...O,attachments:[U,...O.attachments]}:O))},Ce=N=>n({title:N,message:"Downloaded file.",kind:"success"}),Ee=()=>{if(!f)return;const N={rfq:f,exportedAt:new Date().toISOString()},U=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),ce=URL.createObjectURL(U),O=document.createElement("a");O.href=ce,O.download=`rfq-${f.id}.json`,O.click(),URL.revokeObjectURL(ce),Ce("Exported")},Ue=()=>{if(!f)return;const N=f.quotes.map(v=>{const Q=o.find(de=>de.id===v.vendorId);return{rfqId:f.id,vendor:(Q==null?void 0:Q.name)||v.vendorId,currency:v.currency,total:v.total,leadTimeDays:v.leadTimeDays,warrantyMonths:v.warrantyMonths,paymentTerms:v.paymentTerms,notes:v.notes}}),U=v=>{const Q=String(v??"");return/[",\n]/.test(Q)?`"${Q.replace(/"/g,'""')}"`:Q},ce=["rfqId","vendor","currency","total","leadTimeDays","warrantyMonths","paymentTerms","notes"].join(","),O=N.map(v=>[v.rfqId,v.vendor,v.currency,v.total,v.leadTimeDays,v.warrantyMonths,v.paymentTerms,v.notes].map(U).join(",")).join(`
`),je=`${ce}
${O}`,we=new Blob([je],{type:"text/csv"}),Xe=URL.createObjectURL(we),Ie=document.createElement("a");Ie.href=Xe,Ie.download=`rfq-${f.id}-quotes.csv`,Ie.click(),URL.revokeObjectURL(Xe),Ce("Exported")},Ye=()=>{if(!f)return;const N=`
      <html>
        <head>
          <title>RFQ ${f.id}</title>
          <style>
            body{font-family: ui-sans-serif, system-ui; padding:24px;}
            .muted{color:#64748b;font-size:12px}
            h2{margin:0}
            table{width:100%; border-collapse:collapse; margin-top:16px}
            th,td{border:1px solid #e2e8f0; padding:10px; font-size:12px}
            th{background:#f8fafc; text-align:left}
          </style>
        </head>
        <body>
          <h2>RFQ ${f.id} - ${f.title}</h2>
          <div class="muted">Status: ${f.status}  Funding: ${f.fundingType}  Created: ${PV(f.createdAt)}</div>
          <div class="muted">Module: ${f.serviceModule}${f.marketplace?`  Marketplace: ${f.marketplace}`:""}</div>
          <div class="muted">Delivery: ${f.deliveryLocation}</div>
          <h3 style="margin-top:16px">Specs</h3>
          <div>${f.specs}</div>
          <h3 style="margin-top:16px">Quotes</h3>
          <table>
            <thead>
              <tr><th>Vendor</th><th>Total</th><th>Lead time</th><th>Warranty</th><th>Terms</th></tr>
            </thead>
            <tbody>
              ${f.quotes.map(ce=>{const O=o.find(je=>je.id===ce.vendorId);return`<tr><td>${(O==null?void 0:O.name)||ce.vendorId}</td><td>${ce.currency} ${ce.total}</td><td>${ce.leadTimeDays} days</td><td>${ce.warrantyMonths} months</td><td>${ce.paymentTerms}</td></tr>`}).join("")}
            </tbody>
          </table>
          <div class="muted" style="margin-top:16px">Generated by EVzone CorporatePay</div>
        </body>
      </html>
    `,U=window.open("","_blank");if(!U){n({title:"Popup blocked",message:"Allow popups to print/export PDF.",kind:"warn"});return}U.document.open(),U.document.write(N),U.document.close(),U.focus(),U.print(),n({title:"Print ready",message:"Use Print to PDF to save.",kind:"info"})},De=()=>{if(!$.title.trim()){n({title:"Missing",message:"Add an RFQ title.",kind:"warn"});return}if(!$.deliveryLocation.trim()){n({title:"Missing",message:"Add a delivery location.",kind:"warn"});return}if(!$.specs.trim()){n({title:"Missing",message:"Add specifications.",kind:"warn"});return}if($.estimatedBudgetUGX<=0){n({title:"Missing",message:"Add an estimated budget.",kind:"warn"});return}const N=Date.now(),U=`RFQ-${String(100+Math.floor(Math.random()*900))}`,ce=r.find(Ie=>Ie.id===$.approvalTemplateId)||r[0],O=$.fundingType,je=vg(ce,N,O,$.estimatedBudgetUGX),we=($.vendorIds.length?$.vendorIds:o.filter(Ie=>Ie.status==="Approved").slice(0,2).map(Ie=>Ie.id)).map(Ie=>({vendorId:Ie,status:"Not invited"})),Xe={id:U,title:$.title.trim(),createdAt:N,createdBy:"You",status:"Approval pending",fundingType:O,serviceModule:$.serviceModule,marketplace:$.serviceModule==="E-Commerce"?$.marketplace:void 0,category:$.category.trim()||"High value asset",specs:$.specs.trim(),quantity:Math.max(1,$.quantity),unit:$.unit.trim()||"Unit",deliveryLocation:$.deliveryLocation.trim(),warrantyNeeds:$.warrantyNeeds.trim(),attachments:$.attachments,estimatedBudgetUGX:$.estimatedBudgetUGX,capexJustification:O==="CapEx"?$.capexJustification.trim():"",approvalTemplateId:ce.id,approvals:je,invited:we,qna:[],quotes:[],assets:[]};h(Ie=>[Xe,...Ie]),y(U),A("rfqs"),C("Approvals"),n({title:"Submitted",message:"RFQ created and sent for approval.",kind:"success"})},Be=N=>{const U=Date.now();h(ce=>ce.map(O=>{if(O.id!==N)return O;const je=O.approvals.findIndex(Ie=>Ie.status==="Pending");if(je<0)return O;const we=O.approvals.slice();we[je]={...we[je],status:"Approved",decidedAt:U,decisionNote:"Approved"};const Xe=we.every(Ie=>Ie.status==="Approved");return{...O,approvals:we,status:Xe?"Approved":O.status}})),n({title:"Approved",message:"Approval step approved.",kind:"success"})},$e=N=>{const U=Date.now();h(ce=>ce.map(O=>{if(O.id!==N)return O;const je=O.approvals.findIndex(Xe=>Xe.status==="Pending");if(je<0)return O;const we=O.approvals.slice();return we[je]={...we[je],status:"Rejected",decidedAt:U,decisionNote:"Rejected"},{...O,approvals:we,status:"Draft"}})),n({title:"Rejected",message:"Approval rejected. RFQ moved back to Draft.",kind:"warn"})},_=N=>{const U=Date.now();h(ce=>ce.map(O=>{if(O.id!==N||O.status!=="Approved"&&O.status!=="Sent")return O;const je=O.invited.map(we=>we.status==="Not invited"?{...we,status:"Invited",invitedAt:U,lastSeenAt:U}:we);return{...O,invited:je,status:"Sent"}})),n({title:"Sent",message:"RFQ sent to invited vendors.",kind:"success"})},te=(N,U)=>{const ce=Date.now();h(O=>O.map(je=>{if(je.id!==N)return je;const we=je.invited.map(Xe=>Xe.vendorId===U?{...Xe,status:Xe.status==="Invited"?"Viewed":Xe.status,lastSeenAt:ce}:Xe);return{...je,invited:we}})),n({title:"Updated",message:"Vendor marked as viewed.",kind:"info"})},Re=N=>{f&&(M({vendorId:N,total:f.estimatedBudgetUGX||0,leadTimeDays:30,warrantyMonths:24,paymentTerms:"30/60/10",notes:""}),q(!0))},Fe=()=>{if(!f)return;if(!L.vendorId){n({title:"Missing",message:"Select a vendor.",kind:"warn"});return}if(L.total<=0){n({title:"Missing",message:"Add a quote total.",kind:"warn"});return}const N=Date.now(),U={id:qs("QT"),rfqId:f.id,vendorId:L.vendorId,createdAt:N,status:"Submitted",currency:"UGX",total:L.total,leadTimeDays:Math.max(1,L.leadTimeDays),warrantyMonths:Math.max(0,L.warrantyMonths),paymentTerms:L.paymentTerms.trim()||"Net 14",notes:L.notes.trim(),attachments:[{id:qs("AT"),name:"Quote.pdf",note:"Uploaded",uploadedAt:N,uploadedBy:"Vendor"}],lineItems:[{description:f.category||"Item",qty:f.quantity,unitPrice:L.total/Math.max(1,f.quantity)}]};h(ce=>ce.map(O=>{if(O.id!==f.id)return O;const je=[U,...O.quotes],we=O.invited.map(Xe=>Xe.vendorId===U.vendorId?{...Xe,status:"Quoted",lastSeenAt:N}:Xe);return{...O,quotes:je,invited:we}})),n({title:"Submitted",message:"Quote added.",kind:"success"}),q(!1),C("Quotes")},T=N=>{f&&(ee(f.id,{selectedQuoteId:N}),n({title:"Selected",message:"Winning quote selected.",kind:"success"}))},Z=()=>{if(!f)return;const N=f.quotes.find(O=>O.id===f.selectedQuoteId);if(!N){n({title:"Select quote",message:"Select a winning quote first.",kind:"warn"});return}const U=Date.now(),ce={id:qs("PO"),rfqId:f.id,vendorId:N.vendorId,createdAt:U,status:"Draft",total:N.total,currency:N.currency,deliverTo:f.deliveryLocation,deliverByDays:N.leadTimeDays,shippingTerms:"DAP",milestones:[{id:qs("MS"),name:"Deposit",pct:30,dueInDays:2,status:"Planned"},{id:qs("MS"),name:"Delivery",pct:60,dueInDays:N.leadTimeDays,status:"Planned"},{id:qs("MS"),name:"Commissioning",pct:10,dueInDays:N.leadTimeDays+10,status:"Planned"}],notes:"Milestone payments required."};h(O=>O.map(je=>je.id===f.id?{...je,po:ce,status:"Awarded"}:je)),n({title:"Created",message:"Purchase order created.",kind:"success"}),C("PO")},B=N=>{f!=null&&f.po&&(h(U=>U.map(ce=>ce.id===f.id?{...ce,po:{...ce.po,status:N}}:ce)),n({title:"Updated",message:`PO status set to ${N}.`,kind:"info"}))},ne=N=>{f!=null&&f.po&&(h(U=>U.map(ce=>{if(ce.id!==f.id||!ce.po)return ce;const O=ce.po.milestones.map(je=>je.id===N?{...je,status:je.status==="Paid"?"Planned":"Paid"}:je);return{...ce,po:{...ce.po,milestones:O}}})),n({title:"Updated",message:"Milestone updated.",kind:"success"}))},X=()=>{if(!(f!=null&&f.po)){n({title:"PO required",message:"Create a PO before adding assets.",kind:"warn"});return}F({type:f.category.toLowerCase().includes("vehicle")?"Vehicle":"Equipment",description:f.title,serialNo:"",location:f.deliveryLocation,assignedTo:""}),P(!0)},ge=()=>{if(!f)return;if(!Y.description.trim()){n({title:"Missing",message:"Asset description is required.",kind:"warn"});return}const N=Date.now(),U={id:qs("AS"),tag:DV(),type:Y.type,description:Y.description.trim(),serialNo:Y.serialNo.trim(),location:Y.location.trim()||f.deliveryLocation,assignedTo:Y.assignedTo.trim(),createdAt:N,checklist:RV(),attachments:[]};h(ce=>ce.map(O=>O.id===f.id?{...O,assets:[U,...O.assets]}:O)),n({title:"Created",message:"Asset record created.",kind:"success"}),P(!1),C("Assets")},Le=(N,U)=>{f&&h(ce=>ce.map(O=>{if(O.id!==f.id)return O;const je=O.assets.map(we=>{if(we.id!==N)return we;const Xe=we.checklist.map(Ie=>Ie.id===U?{...Ie,done:!Ie.done}:Ie);return{...we,checklist:Xe}});return{...O,assets:je}}))},ae=()=>{if(!f)return;if(!G.trim()){n({title:"Empty",message:"Write a message.",kind:"warn"});return}const N=Date.now(),U={id:qs("QNA"),at:N,by:Te?"Vendor":"Buyer",vendorId:Te||void 0,message:G.trim(),attachments:[]};h(ce=>ce.map(O=>O.id===f.id?{...O,qna:[...O.qna,U]}:O)),ve(""),n({title:"Sent",message:"Message added.",kind:"success"})},le=()=>{if(!V.name.trim()){n({title:"Missing",message:"Attachment name required.",kind:"warn"});return}const N=Date.now(),U={id:qs("AT"),name:V.name.trim(),note:V.note.trim(),uploadedAt:N,uploadedBy:"You"};D(ce=>({...ce,attachments:[U,...ce.attachments]})),xe({name:"",note:""}),he(!1),n({title:"Added",message:"Attachment added to draft.",kind:"success"})},R=()=>{if(!f)return;if(!V.name.trim()){n({title:"Missing",message:"Attachment name required.",kind:"warn"});return}const N=Date.now(),U={id:qs("AT"),name:V.name.trim(),note:V.note.trim(),uploadedAt:N,uploadedBy:"You"};Ne(f.id,U),xe({name:"",note:""}),he(!1),n({title:"Added",message:"Attachment added.",kind:"success"})},se=()=>{$.estimatedBudgetUGX>0&&$.estimatedBudgetUGX>u&&(D(N=>({...N,fundingType:"CapEx"})),n({title:"Suggested",message:"Estimate exceeds monthly OpEx. Switched to CapEx.",kind:"info"}))},m=N=>N==="Approved"||N==="Awarded"?"good":N==="Approval pending"?"warn":N==="Sent"?"info":"neutral",w=N=>N==="Quoted"?"good":N==="Invited"||N==="Viewed"?"info":N==="Declined"?"bad":"neutral",oe=N=>N==="Approved"?"good":N==="Rejected"?"bad":"warn",me=c.useMemo(()=>f!=null&&f.quotes.length?f.quotes.slice().sort((N,U)=>N.total-U.total)[0]:null,[f]),Me=c.useMemo(()=>f!=null&&f.selectedQuoteId&&f.quotes.find(N=>N.id===f.selectedQuoteId)||null,[f]),Ve=c.useMemo(()=>{if(!f||!Me)return null;const N=me;if(!N)return null;const U=Me.total-N.total;return{best:N.total,selected:Me.total,diff:U}},[f,Me,me]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(TV,{toasts:a,onDismiss:N=>l(U=>U.filter(ce=>ce.id!==N))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Mu.green},children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"RFQ and Quote Requests (High Value Assets)"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"RFQ creation, approvals, vendor Q and A, quote comparison, PO conversion, milestone payments, and asset handover."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(ut,{label:`Active RFQs: ${ie.active}`,tone:"neutral"}),e.jsx(ut,{label:`Approvals pending: ${ie.pendingApprovals}`,tone:ie.pendingApprovals?"warn":"good"}),e.jsx(ut,{label:`Quotes received: ${ie.quotes}`,tone:ie.quotes?"info":"neutral"}),e.jsx(ut,{label:`CapEx: ${ie.capex}`,tone:"info"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:()=>A("rfqs"),children:[e.jsx(ue,{className:"h-4 w-4"})," RFQs"]}),e.jsxs(gt,{variant:"primary",onClick:()=>{A("create"),z(0),n({title:"Create",message:"Start RFQ creation.",kind:"info"})},children:[e.jsx(ft,{className:"h-4 w-4"})," New RFQ"]}),e.jsxs(gt,{variant:"outline",onClick:()=>A("templates"),children:[e.jsx(Tt,{className:"h-4 w-4"})," Approval templates"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"OpEx remaining"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:cl(u)}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Monthly budget"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700 ring-1 ring-slate-200",children:e.jsx(al,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"CapEx remaining"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:cl(x)}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Annual allocation"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-blue-50 text-blue-700 ring-1 ring-blue-200",children:e.jsx(Tr,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Preferred vendors"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:o.filter(N=>N.status==="Approved"&&N.riskLevel!=="High").length}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Allowlisted vendors"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-amber-50 text-amber-800 ring-1 ring-amber-200",children:e.jsx(Ga,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"High value workflow"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold text-slate-900",children:"CapEx and milestones"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Executive approvals"})]}),e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200",children:e.jsx(et,{className:"h-5 w-5"})})]})})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"rfqs",label:"RFQs"},{id:"create",label:"Create RFQ"},{id:"templates",label:"Approval templates"}].map(N=>e.jsx("button",{className:Gs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",I===N.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:I===N.id?{background:Mu.green}:void 0,onClick:()=>A(N.id),children:N.label},N.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[I==="rfqs"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsx(va,{title:"RFQ list",subtitle:"Select an RFQ to manage approvals, vendors, quotes, and conversion.",right:e.jsx(ut,{label:`${p.length} total`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[p.map(N=>{const U=N.id===j;return e.jsx("button",{type:"button",onClick:()=>{y(N.id),C("Overview")},className:Gs("w-full rounded-3xl border bg-white p-4 text-left hover:bg-slate-50",U?"border-emerald-300 ring-4 ring-emerald-100":"border-slate-200"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:N.title}),e.jsx(ut,{label:N.status,tone:m(N.status)}),e.jsx(ut,{label:N.fundingType,tone:N.fundingType==="CapEx"?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[N.id,"  Created ",xk(N.createdAt),"  By ",N.createdBy]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[N.serviceModule,N.marketplace?`  ${N.marketplace}`:""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Estimate"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:cl(N.estimatedBudgetUGX)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Quotes ",N.quotes.length]})]})]})},N.id)}),p.length?null:e.jsx(od,{title:"No RFQs",subtitle:"Create an RFQ to start procurement."})]})}),e.jsx(va,{title:"Quick actions",subtitle:"Common flows.",right:e.jsx(ut,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(gt,{variant:"primary",onClick:()=>{A("create"),z(0)},children:[e.jsx(ft,{className:"h-4 w-4"})," New RFQ"]}),e.jsxs(gt,{variant:"outline",onClick:()=>{f&&(C("Approvals"),n({title:"Approvals",message:"Open approvals tab.",kind:"info"}))},disabled:!f,children:[e.jsx(Tt,{className:"h-4 w-4"})," Approvals"]}),e.jsxs(gt,{variant:"outline",onClick:()=>C("Quotes"),disabled:!f,children:[e.jsx(Tr,{className:"h-4 w-4"})," Quote comparison"]}),e.jsxs(gt,{variant:"outline",onClick:()=>C("PO"),disabled:!f,children:[e.jsx(jt,{className:"h-4 w-4"})," PO and invoices"]})]})})]}),e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsx(va,{title:"RFQ details",subtitle:"Manage the selected RFQ.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:Ee,disabled:!f,children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs(gt,{variant:"outline",onClick:Ye,disabled:!f,children:[e.jsx(jt,{className:"h-4 w-4"})," Export PDF"]})]}),children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:["Overview","Approvals","Vendors","Quotes","PO","Assets"].map(N=>e.jsx("button",{className:Gs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",b===N?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:b===N?{background:Mu.green}:void 0,onClick:()=>C(N),children:N},N))}),b==="Overview"?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:f.title}),e.jsx(ut,{label:f.status,tone:m(f.status)}),e.jsx(ut,{label:f.fundingType,tone:f.fundingType==="CapEx"?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[f.id,"  Created ",Qi(f.createdAt),"  By ",f.createdBy]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(ut,{label:f.serviceModule,tone:"neutral"}),f.marketplace?e.jsx(ut,{label:f.marketplace,tone:"neutral"}):null,e.jsx(ut,{label:`Qty ${f.quantity} ${f.unit}`,tone:"neutral"}),e.jsx(ut,{label:`Estimate ${cl(f.estimatedBudgetUGX)}`,tone:"info"})]}),e.jsxs("div",{className:"mt-3 text-sm text-slate-700",children:["Delivery: ",e.jsx("span",{className:"font-semibold",children:f.deliveryLocation})]}),f.warrantyNeeds?e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Warranty: ",e.jsx("span",{className:"font-semibold",children:f.warrantyNeeds})]}):null]}),e.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Budget check"}),e.jsxs("div",{className:"mt-1",children:["OpEx remaining: ",e.jsx("span",{className:"font-semibold",children:cl(u)})]}),e.jsxs("div",{className:"mt-1",children:["CapEx remaining: ",e.jsx("span",{className:"font-semibold",children:cl(x)})]}),f.fundingType==="OpEx"&&f.estimatedBudgetUGX>u?e.jsx("div",{className:"mt-2 text-rose-700 font-semibold",children:"Does not fit OpEx. Consider CapEx."}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"primary",onClick:()=>Be(f.id),disabled:f.status!=="Approval pending"||!f.approvals.some(N=>N.status==="Pending"),children:[e.jsx(He,{className:"h-4 w-4"})," Approve next"]}),e.jsxs(gt,{variant:"outline",onClick:()=>_(f.id),disabled:!(f.status==="Approved"||f.status==="Sent"),children:[e.jsx(os,{className:"h-4 w-4"})," Send RFQ"]})]})]})]})}),e.jsx(va,{title:"Specifications",subtitle:"What vendors will quote against.",right:e.jsx(ut,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-700 ring-1 ring-slate-200 whitespace-pre-wrap",children:f.specs})}),e.jsx(va,{title:"Attachments",subtitle:"Specs, drawings, or requirements.",right:e.jsxs(gt,{variant:"outline",onClick:()=>{xe({name:"",note:""}),he(!0)},children:[e.jsx(Mo,{className:"h-4 w-4"})," Add"]}),children:e.jsxs("div",{className:"space-y-2",children:[f.attachments.map(N=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:N.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[Qi(N.uploadedAt),"  ",N.uploadedBy]}),N.note?e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Note: ",N.note]}):null]}),e.jsx(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:async()=>{try{await navigator.clipboard.writeText(N.name),n({title:"Copied",message:"Attachment name copied.",kind:"success"})}catch{n({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},children:e.jsx(Ot,{className:"h-4 w-4"})})]})},N.id)),f.attachments.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No attachments."})]})})]}):null,b==="Approvals"?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs(va,{title:"Approval chain",subtitle:"Required approvals before sending RFQ.",right:e.jsx(ut,{label:((J=r.find(N=>N.id===f.approvalTemplateId))==null?void 0:J.name)||f.approvalTemplateId,tone:"info"}),children:[e.jsxs("div",{className:"space-y-2",children:[f.approvals.map((N,U)=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ut,{label:`Step ${U+1}`,tone:"neutral"}),e.jsx(ut,{label:N.role,tone:"neutral"}),e.jsx(ut,{label:N.status,tone:oe(N.status)}),e.jsx(ut,{label:`SLA ${N.slaHours}h`,tone:"info"})]}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:["Assignee: ",N.assignee]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Requested ",Qi(N.requestedAt)]}),N.decidedAt?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Decided ",Qi(N.decidedAt),"  ",N.decisionNote||""]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Be(f.id),disabled:N.status!=="Pending"||f.status!=="Approval pending",children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]}),e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>$e(f.id),disabled:N.status!=="Pending"||f.status!=="Approval pending",children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]})]})]})},N.id)),f.approvals.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No approvals configured."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: Executive approval chain templates are used for CapEx and very high value purchases."})]}),e.jsx(va,{title:"Send readiness",subtitle:"RFQ can only be sent after approval.",right:e.jsx(ut,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Checklist"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(Ze,{ok:!!f.specs.trim(),label:"Specs provided"}),e.jsx(Ze,{ok:!!f.deliveryLocation.trim(),label:"Delivery location"}),e.jsx(Ze,{ok:f.invited.length>0,label:"Vendors selected"}),e.jsx(Ze,{ok:f.approvals.every(N=>N.status==="Approved"),label:"Approvals completed"})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Actions"}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Only available once approved."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"primary",onClick:()=>_(f.id),disabled:!f.approvals.every(N=>N.status==="Approved"),children:[e.jsx(os,{className:"h-4 w-4"})," Send RFQ"]}),e.jsxs(gt,{variant:"outline",onClick:()=>C("Vendors"),children:[e.jsx(Vs,{className:"h-4 w-4"})," Vendors"]})]}),f.fundingType==="CapEx"?e.jsx("div",{className:"mt-3 rounded-2xl bg-blue-50 p-3 text-xs text-blue-700 ring-1 ring-blue-200",children:"CapEx: milestone payments and asset handover will be enabled after quote award."}):null]})]})})]}):null,b==="Vendors"?e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(va,{title:"Vendor invitations",subtitle:"Invite vendors to quote and track status.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:()=>be(!0),children:[e.jsx(os,{className:"h-4 w-4"})," Invite"]}),e.jsxs(gt,{variant:"outline",onClick:()=>n({title:"Tip",message:"Use vendor allowlist from Vendor Management (R).",kind:"info"}),children:[e.jsx(rt,{className:"h-4 w-4"})," Tip"]})]}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rating"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Risk"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Last seen"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[f.invited.map(N=>{const U=o.find(O=>O.id===N.vendorId),ce=(U==null?void 0:U.riskLevel)==="High"?"bad":(U==null?void 0:U.riskLevel)==="Medium"?"warn":"good";return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(U==null?void 0:U.name)||N.vendorId}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:(U==null?void 0:U.country)||"-"})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ut,{label:N.status,tone:w(N.status)})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:U?`${U.rating.toFixed(1)} / 5`:"-"}),e.jsx("td",{className:"px-4 py-3",children:U?e.jsx(ut,{label:`${U.riskLevel} (${U.riskScore})`,tone:ce}):e.jsx(ut,{label:"-",tone:"neutral"})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:N.lastSeenAt?xk(N.lastSeenAt):"-"}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>te(f.id,N.vendorId),disabled:N.status!=="Invited",children:[e.jsx(ue,{className:"h-4 w-4"})," Mark viewed"]}),e.jsxs(gt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Re(N.vendorId),disabled:N.status==="Declined",children:[e.jsx(ft,{className:"h-4 w-4"})," Add quote"]})]})})]},N.vendorId)}),f.invited.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10",children:e.jsx(od,{title:"No vendors",subtitle:"Invite vendors to start receiving quotes."})})})]})]})})}),e.jsxs(va,{title:"Q and A thread",subtitle:"Clarify requirements with vendors.",right:e.jsx(ut,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"space-y-2",children:[f.qna.map(N=>{const U=N.vendorId?o.find(O=>O.id===N.vendorId):null,ce=N.by==="Buyer"?"bg-emerald-50 border-emerald-200":"bg-white border-slate-200";return e.jsx("div",{className:Gs("rounded-3xl border p-4",ce),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ut,{label:N.by,tone:N.by==="Buyer"?"good":"neutral"}),U?e.jsx(ut,{label:U.name,tone:"info"}):null]}),e.jsx("div",{className:"mt-2 text-sm text-slate-800 whitespace-pre-wrap",children:N.message}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:Qi(N.at)})]}),e.jsx(Mm,{className:"h-5 w-5 text-slate-400"})]})},N.id)}),f.qna.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No messages yet."})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(Ji,{label:"Post as",value:Te,onChange:ye,options:[{value:"",label:"Buyer"},...f.invited.map(N=>{var U;return{value:N.vendorId,label:((U=o.find(ce=>ce.id===N.vendorId))==null?void 0:U.name)||N.vendorId}})],hint:"Simulate vendor reply"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Wc,{label:"Message",value:G,onChange:ve,placeholder:"Ask a question or reply",rows:3})}),e.jsx("div",{className:"md:col-span-3 flex justify-end",children:e.jsxs(gt,{variant:"primary",onClick:ae,children:[e.jsx(He,{className:"h-4 w-4"})," Send"]})})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: Q and A can require attachments and can be audit logged."})]})]}):null,b==="Quotes"?e.jsx("div",{className:"mt-4 space-y-4",children:e.jsxs(va,{title:"Quote comparison",subtitle:"Compare vendor quotes and select a winner.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:Ue,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(gt,{variant:"primary",onClick:Z,children:[e.jsx(jt,{className:"h-4 w-4"})," Convert to PO"]})]}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Lead time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Warranty"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Terms"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Select"})]})}),e.jsxs("tbody",{children:[f.quotes.slice().sort((N,U)=>N.total-U.total).map(N=>{const U=o.find(je=>je.id===N.vendorId),ce=f.selectedQuoteId===N.id,O=(me==null?void 0:me.id)===N.id;return e.jsxs("tr",{className:Gs("border-t border-slate-100 hover:bg-slate-50/60",ce&&"bg-emerald-50/40"),children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(U==null?void 0:U.name)||N.vendorId}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[N.id,O?"  Best":""]})]}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:id(N.total,N.currency)}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[N.leadTimeDays," days"]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[N.warrantyMonths," months"]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:N.paymentTerms}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ut,{label:N.status,tone:"neutral"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(gt,{variant:ce?"primary":"outline",className:"px-3 py-2 text-xs",onClick:()=>T(N.id),children:[e.jsx(He,{className:"h-4 w-4"})," ",ce?"Selected":"Select"]})})]},N.id)}),f.quotes.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10",children:e.jsx(od,{title:"No quotes",subtitle:"Invite vendors and add quotes."})})})]})]})}),Ve?e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Savings analysis"}),e.jsxs("div",{className:"mt-1",children:["Best quote: ",e.jsx("span",{className:"font-semibold",children:id(Ve.best,"UGX")})]}),e.jsxs("div",{className:"mt-1",children:["Selected: ",e.jsx("span",{className:"font-semibold",children:id(Ve.selected,"UGX")})]}),e.jsxs("div",{className:"mt-1",children:["Difference: ",e.jsx("span",{className:Gs("font-semibold",Ve.diff<=0?"text-emerald-700":"text-rose-700"),children:id(Ve.diff,"UGX")})]})]}):null,e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: quote comparison can include compliance and contract checks and can recommend preferred vendors."})]})}):null,b==="PO"?e.jsx("div",{className:"mt-4 space-y-4",children:e.jsx(va,{title:"Purchase order",subtitle:"Convert quote to PO then track milestone payments and invoices.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:Z,children:[e.jsx(ft,{className:"h-4 w-4"})," Create PO"]}),e.jsxs(gt,{variant:"outline",onClick:()=>n({title:"Invoices",message:"In production, each milestone generates an invoice.",kind:"info"}),children:[e.jsx(jt,{className:"h-4 w-4"})," Invoice schedule"]})]}),children:f.po?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:f.po.id}),e.jsx(ut,{label:f.po.status,tone:f.po.status==="Accepted"?"good":f.po.status==="Issued"?"info":"neutral"}),Me?e.jsx(ut,{label:((g=o.find(N=>N.id===Me.vendorId))==null?void 0:g.name)||Me.vendorId,tone:"neutral"}):null]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",Qi(f.po.createdAt),"  Deliver by ",f.po.deliverByDays," day(s)"]}),e.jsxs("div",{className:"mt-2 text-sm text-slate-700",children:["Deliver to: ",e.jsx("span",{className:"font-semibold",children:f.po.deliverTo})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Shipping: ",e.jsx("span",{className:"font-semibold",children:f.po.shippingTerms})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Total"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:id(f.po.total,f.po.currency)}),e.jsxs("div",{className:"mt-2 flex flex-wrap justify-end gap-2",children:[e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>B("Issued"),children:[e.jsx(os,{className:"h-4 w-4"})," Issue"]}),e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>B("Accepted"),children:[e.jsx(et,{className:"h-4 w-4"})," Accept"]}),e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>B("Closed"),children:[e.jsx(He,{className:"h-4 w-4"})," Close"]})]})]})]})}),e.jsxs(va,{title:"Milestone payments",subtitle:"Premium: deposit, delivery, commissioning.",right:e.jsx(ut,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Milestone"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Percent"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Due in"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsx("tbody",{children:f.po.milestones.map(N=>{const U=Math.round(f.po.total*N.pct/100),ce=N.status==="Paid"?"good":N.status==="Invoiced"?"info":"neutral";return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:N.name}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[N.pct,"%"]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[N.dueInDays," day(s)"]}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:id(U,f.po.currency)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(ut,{label:N.status,tone:ce})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>ne(N.id),children:[e.jsx(pa,{className:"h-4 w-4"})," Toggle paid"]})})]},N.id)})})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"In production, each milestone produces an invoice and reconciles in Transactions."})]})]}):e.jsx(od,{title:"No PO",subtitle:"Select a winning quote and convert to a purchase order."})})}):null,b==="Assets"?e.jsx("div",{className:"mt-4 space-y-4",children:e.jsx(va,{title:"Assets and handover",subtitle:"Premium: asset tagging and handover checklist for vehicles and equipment.",right:e.jsxs(gt,{variant:"primary",onClick:X,children:[e.jsx(dm,{className:"h-4 w-4"})," New asset"]}),children:e.jsxs("div",{className:"space-y-3",children:[f.assets.map(N=>{const U=N.checklist.filter(O=>O.done).length,ce=N.checklist.length;return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ut,{label:N.type,tone:"neutral"}),e.jsx(ut,{label:N.tag,tone:"info"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:N.description})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",Qi(N.createdAt)]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Serial: ",N.serialNo||"-","  Location: ",N.location]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Assigned to: ",N.assignedTo||"-"]})]}),e.jsx("div",{className:"text-right",children:e.jsx(ut,{label:`${U}/${ce} complete`,tone:U===ce?"good":U>0?"warn":"neutral"})})]}),e.jsx("div",{className:"mt-4 grid grid-cols-1 gap-2",children:N.checklist.map(O=>e.jsxs("label",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("span",{className:Gs("text-sm font-semibold",O.done?"text-emerald-700":"text-slate-800"),children:O.label}),e.jsx("input",{type:"checkbox",checked:O.done,onChange:()=>Le(N.id,O.id),className:"h-4 w-4 rounded border-slate-300"})]},O.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: handover checklist can require uploads, signatures, and audit trails."})]},N.id)}),f.assets.length?null:e.jsx(od,{title:"No assets",subtitle:"Create an asset record after PO award to track tagging and handover."})]})})}):null]}):e.jsx(od,{title:"Select an RFQ",subtitle:"Choose an RFQ from the list to view details."})})})]}):null,I==="create"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(va,{title:"Create RFQ",subtitle:"Wizard for high value procurement.",right:e.jsx(ut,{label:`Step ${S+1}/5`,tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:[{i:0,label:"Basics"},{i:1,label:"Specs"},{i:2,label:"Vendors"},{i:3,label:"Budget and approvals"},{i:4,label:"Review"}].map(N=>e.jsx("button",{type:"button",className:Gs("w-full rounded-3xl border bg-white p-4 text-left hover:bg-slate-50",S===N.i?"border-emerald-300 ring-4 ring-emerald-100":"border-slate-200"),onClick:()=>z(N.i),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:N.label}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Configure ",N.label.toLowerCase()]})]}),S===N.i?e.jsx(ue,{className:"h-5 w-5 text-emerald-700"}):null]})},N.i))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: if estimate exceeds OpEx remaining, CapEx is recommended with executive approvals and milestones."})]})}),e.jsx("div",{className:"space-y-4",children:e.jsx(va,{title:"Budget snapshot",subtitle:"Helps decide OpEx vs CapEx.",right:e.jsx(ut,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"OpEx remaining"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:cl(u)}),e.jsx("div",{className:"mt-3 text-xs text-slate-500",children:"CapEx remaining"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:cl(x)}),$.estimatedBudgetUGX>0?e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Estimate: ",e.jsx("span",{className:"font-semibold",children:cl($.estimatedBudgetUGX)}),e.jsxs("div",{className:"mt-1",children:["Suggested: ",e.jsx("span",{className:"font-semibold",children:Ae})]}),Ae==="CapEx"?e.jsx("div",{className:"mt-1 text-rose-700 font-semibold",children:"Does not fit monthly OpEx."}):e.jsx("div",{className:"mt-1 text-emerald-700 font-semibold",children:"Fits monthly OpEx."})]}):null]})})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(va,{title:"RFQ draft",subtitle:"Complete all steps then request approvals.",right:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(gt,{variant:"outline",onClick:()=>{xe({name:"",note:""}),he(!0)},children:[e.jsx(Mo,{className:"h-4 w-4"})," Attachment"]}),e.jsxs(gt,{variant:"primary",onClick:De,title:"Creates RFQ and sends for approvals",children:[e.jsx(Tt,{className:"h-4 w-4"})," Request approvals"]})]}),children:[S===0?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Gl,{label:"Title",value:$.title,onChange:N=>D(U=>({...U,title:N})),placeholder:"Example: Company vehicle procurement"}),e.jsx(Ji,{label:"Funding type",value:$.fundingType,onChange:N=>D(U=>({...U,fundingType:N})),options:[{value:"OpEx",label:"OpEx"},{value:"CapEx",label:"CapEx"}],hint:$.estimatedBudgetUGX>0?`Suggested: ${Ae}`:""}),e.jsx(Ji,{label:"Service module",value:$.serviceModule,onChange:N=>D(U=>({...U,serviceModule:N})),options:t.map(N=>({value:N,label:N}))}),e.jsx(Ji,{label:"Marketplace",value:$.marketplace,onChange:N=>D(U=>({...U,marketplace:N})),options:s.map(N=>({value:N,label:N})),disabled:$.serviceModule!=="E-Commerce",hint:$.serviceModule!=="E-Commerce"?"Only for E-Commerce":""}),e.jsx(Gl,{label:"Category",value:$.category,onChange:N=>D(U=>({...U,category:N})),placeholder:"Vehicle, equipment, service"}),e.jsx(Gc,{label:"Quantity",value:$.quantity,onChange:N=>D(U=>({...U,quantity:Math.max(1,N)}))}),e.jsx(Gl,{label:"Unit",value:$.unit,onChange:N=>D(U=>({...U,unit:N})),placeholder:"Unit"}),e.jsx(Gc,{label:"Estimated budget (UGX)",value:$.estimatedBudgetUGX,onChange:N=>D(U=>({...U,estimatedBudgetUGX:Math.max(0,N)})),hint:"Used for approvals"}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs(gt,{variant:"outline",onClick:se,children:[e.jsx(rt,{className:"h-4 w-4"})," Apply suggested funding"]})})]}):null,S===1?e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx(Wc,{label:"Specifications",value:$.specs,onChange:N=>D(U=>({...U,specs:N})),placeholder:"Detailed requirements",rows:8}),e.jsx(Gl,{label:"Delivery location",value:$.deliveryLocation,onChange:N=>D(U=>({...U,deliveryLocation:N})),placeholder:"Address"}),e.jsx(Gl,{label:"Warranty needs",value:$.warrantyNeeds,onChange:N=>D(U=>({...U,warrantyNeeds:N})),placeholder:"Warranty requirements"})]}):null,S===2?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Select vendors"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Only approved vendors are recommended."}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:o.filter(N=>N.status!=="Blocked").map(N=>{const U=$.vendorIds.includes(N.id);return e.jsx("button",{type:"button",className:Gs("rounded-3xl border p-4 text-left",U?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>D(ce=>({...ce,vendorIds:U?ce.vendorIds.filter(O=>O!==N.id):[...ce.vendorIds,N.id]})),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:N.name}),e.jsx(ut,{label:N.riskLevel,tone:N.riskLevel==="High"?"bad":N.riskLevel==="Medium"?"warn":"good"}),e.jsx(ut,{label:`${N.rating.toFixed(1)}`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[N.country,"  SLA ",N.slaOnTimePct,"%  Discount ",N.negotiatedDiscountPct,"%"]})]}),e.jsx(ut,{label:U?"Selected":"Select",tone:U?"good":"neutral"})]})},N.id)})})]}),e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:["Selected vendors: ",$.vendorIds.length?$.vendorIds.map(N=>{var U;return((U=o.find(ce=>ce.id===N))==null?void 0:U.name)||N}).join(", "):"None"]})]}):null,S===3?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Ji,{label:"Approval template",value:$.approvalTemplateId,onChange:N=>D(U=>({...U,approvalTemplateId:N})),options:r.filter(N=>N.appliesTo==="Any"||N.appliesTo===$.fundingType).map(N=>({value:N.id,label:`${N.name} (min ${cl(N.minAmountUGX)})`})),hint:"Executive chain for CapEx"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Budget mode"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"OpEx uses monthly cap. CapEx uses annual allocation."}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[e.jsx(ut,{label:`OpEx remaining ${cl(u)}`,tone:u?"neutral":"warn"}),e.jsx(ut,{label:`CapEx remaining ${cl(x)}`,tone:x?"neutral":"warn"})]}),$.estimatedBudgetUGX>0&&!Oe?e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"This estimate does not fit monthly OpEx. Use CapEx with executive approvals."}):null]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Wc,{label:"CapEx justification",value:$.capexJustification,onChange:N=>D(U=>({...U,capexJustification:N})),placeholder:"Required for CapEx",rows:4,disabled:$.fundingType!=="CapEx",hint:$.fundingType==="CapEx"?"Explain why monthly budget cannot cover":"Not required"})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: CapEx vs OpEx budgeting supports assets that cannot fit monthly budgets."})]}):null,S===4?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Review"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 md:grid-cols-2",children:[e.jsx(E,{label:"Title",value:$.title||"-"}),e.jsx(E,{label:"Funding",value:$.fundingType}),e.jsx(E,{label:"Service module",value:$.serviceModule}),e.jsx(E,{label:"Marketplace",value:$.serviceModule==="E-Commerce"?$.marketplace:"-"}),e.jsx(E,{label:"Estimate",value:$.estimatedBudgetUGX?cl($.estimatedBudgetUGX):"-"}),e.jsx(E,{label:"Delivery",value:$.deliveryLocation||"-"}),e.jsx(E,{label:"Quantity",value:`${$.quantity} ${$.unit}`}),e.jsx(E,{label:"Vendors",value:$.vendorIds.length?$.vendorIds.map(N=>{var U;return((U=o.find(ce=>ce.id===N))==null?void 0:U.name)||N}).join(", "):"Auto pick"}),e.jsx(E,{label:"Template",value:((H=r.find(N=>N.id===$.approvalTemplateId))==null?void 0:H.name)||$.approvalTemplateId}),e.jsx(E,{label:"Attachments",value:`${$.attachments.length}`})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200 whitespace-pre-wrap",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Specs"}),e.jsx("div",{className:"mt-2",children:$.specs||"-"})]})]}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Clicking Request approvals will create the RFQ and start the approval workflow."})]}):null]})})]}):null,I==="templates"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(va,{title:"Templates",subtitle:"Executive approval chain templates.",right:e.jsx(ut,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:r.slice().sort((N,U)=>N.minAmountUGX-U.minAmountUGX).map(N=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:N.name}),e.jsx(ut,{label:N.appliesTo,tone:N.appliesTo==="CapEx"?"info":"neutral"}),e.jsx(ut,{label:`Min ${cl(N.minAmountUGX)}`,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:N.id}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:N.description}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:N.steps.map((U,ce)=>e.jsx(ut,{label:`${ce+1}. ${U.role} (${U.slaHours}h)`,tone:"neutral"},`${N.id}-${ce}`))})]}),e.jsxs(gt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{const U={...N,id:qs("TPL"),name:`${N.name} Copy`};i(ce=>[U,...ce]),n({title:"Duplicated",message:"Template duplicated.",kind:"success"})},children:[e.jsx(Ot,{className:"h-4 w-4"})," Duplicate"]})]})},N.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: chain templates can vary by module, marketplace, vendor risk, and funding type."})]}),e.jsxs(va,{title:"Template guidance",subtitle:"How to choose templates.",right:e.jsx(ut,{label:"Info",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) OpEx uses Manager then Finance for routine purchases."}),e.jsx("li",{children:"2) CapEx uses Manager then CFO then CEO for high value assets."}),e.jsx("li",{children:"3) High value OpEx can add CFO automatically when estimate is above threshold."}),e.jsx("li",{children:"4) Vendor risk score can require extra approvals."})]})}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Next suggested additions"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:" Template per Service Module (Travel, Medical) with stricter SLA"}),e.jsx("li",{children:" Template that includes EVzone Support for regulated categories"}),e.jsx("li",{children:" Escalation if SLA breached"})]})]})]})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"S RFQ and Quote Requests v2. Core: RFQ flow, vendor invitations and Q and A, quote comparison, convert quote to PO and invoice. Premium: CapEx vs OpEx budgeting, milestone payments, asset tagging and handover checklist, executive approval templates."})})]})}),e.jsx(Px,{open:W,title:"Add attachment",subtitle:I==="create"?"Adds attachment to draft.":"Adds attachment to RFQ.",onClose:()=>he(!1),actions:[{label:"Add",onClick:()=>{I==="create"?le():R()}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gt,{variant:"outline",onClick:()=>he(!1),children:"Cancel"}),e.jsxs(gt,{variant:"primary",onClick:()=>{I==="create"?le():R()},children:[e.jsx(et,{className:"h-4 w-4"})," Add"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Gl,{label:"File name",value:V.name,onChange:N=>xe(U=>({...U,name:N})),placeholder:"Specs.pdf"}),e.jsx(Gl,{label:"Note",value:V.note,onChange:N=>xe(U=>({...U,note:N})),placeholder:"Optional"}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Upload is simulated. In production, files are stored securely with access control."})]})}),e.jsxs(Px,{open:pe,title:"Invite vendors",subtitle:"Send RFQ invite with message.",onClose:()=>be(!1),actions:[{label:"Send",onClick:()=>{f&&(_(f.id),be(!1))}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gt,{variant:"outline",onClick:()=>be(!1),children:"Cancel"}),e.jsxs(gt,{variant:"primary",onClick:()=>{f&&(_(f.id),be(!1))},children:[e.jsx(os,{className:"h-4 w-4"})," Send"]})]}),children:[e.jsx(Wc,{label:"Invite message",value:fe,onChange:K,rows:4}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"In production, invites are delivered via Email, WhatsApp, WeChat, and SMS, with delivery logs."})]}),e.jsx(Px,{open:re,title:"Add quote",subtitle:"Enter quote details for comparison and award.",onClose:()=>q(!1),actions:[{label:"Save",onClick:Fe}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gt,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsxs(gt,{variant:"primary",onClick:Fe,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Ji,{label:"Vendor",value:L.vendorId,onChange:N=>M(U=>({...U,vendorId:N})),options:((f==null?void 0:f.invited)||[]).map(N=>{var U;return{value:N.vendorId,label:((U=o.find(ce=>ce.id===N.vendorId))==null?void 0:U.name)||N.vendorId}})}),e.jsx(Gc,{label:"Total (UGX)",value:L.total,onChange:N=>M(U=>({...U,total:Math.max(0,N)}))}),e.jsx(Gc,{label:"Lead time (days)",value:L.leadTimeDays,onChange:N=>M(U=>({...U,leadTimeDays:Math.max(1,N)}))}),e.jsx(Gc,{label:"Warranty (months)",value:L.warrantyMonths,onChange:N=>M(U=>({...U,warrantyMonths:Math.max(0,N)}))}),e.jsx(Gl,{label:"Payment terms",value:L.paymentTerms,onChange:N=>M(U=>({...U,paymentTerms:N})),placeholder:"30/60/10 or Net 14"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Wc,{label:"Notes",value:L.notes,onChange:N=>M(U=>({...U,notes:N})),rows:4})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: quotes can include compliance checks and rate card links."})]})}),e.jsx(Px,{open:k,title:"Create asset record",subtitle:"Asset tagging and handover checklist.",onClose:()=>P(!1),actions:[{label:"Create",onClick:ge}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(gt,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsxs(gt,{variant:"primary",onClick:ge,children:[e.jsx(dm,{className:"h-4 w-4"})," Create"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Ji,{label:"Asset type",value:Y.type,onChange:N=>F(U=>({...U,type:N})),options:[{value:"Vehicle",label:"Vehicle"},{value:"Equipment",label:"Equipment"},{value:"Other",label:"Other"}]}),e.jsx(Gl,{label:"Serial number",value:Y.serialNo,onChange:N=>F(U=>({...U,serialNo:N})),placeholder:"Optional"}),e.jsx(Gl,{label:"Description",value:Y.description,onChange:N=>F(U=>({...U,description:N})),placeholder:"Vehicle or equipment description"}),e.jsx(Gl,{label:"Location",value:Y.location,onChange:N=>F(U=>({...U,location:N})),placeholder:"Site"}),e.jsx(Gl,{label:"Assigned to",value:Y.assignedTo,onChange:N=>F(U=>({...U,assignedTo:N})),placeholder:"Department or person"}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"After creation, complete the handover checklist and attach warranty documents."})]})})]});function Ze({ok:N,label:U}){return e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:U}),N?e.jsx(ut,{label:"Done",tone:"good"}):e.jsx(ut,{label:"Pending",tone:"warn"})]})}function E({label:N,value:U}){return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:N}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:U})]})}}const hh={green:"#03CD8C",orange:"#F77F00"};function Hs(...t){return t.filter(Boolean).join(" ")}function wl(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function bg(t,s,a){return Math.max(s,Math.min(a,t))}function pk(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function hn(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function $V(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function hk(t,s){const a=Math.round(Number(t||0));try{return new Intl.NumberFormat(void 0,{style:"currency",currency:s,maximumFractionDigits:0}).format(a)}catch{return`${s} ${a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}}function fk(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function it({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Hs("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function bt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:hh.green}:t==="accent"?{background:hh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Hs(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function dd({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Hs("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Hs("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function gk({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Hs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Hs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function jg({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Hs(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Hs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Vn({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Hs(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Hs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function yg({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:Hs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:Hs("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function DA({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:Hs("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function Ng({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1020px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(DA,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function IV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,actions:i}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:18},animate:{opacity:1,x:0},exit:{opacity:0,x:18},transition:{duration:.18},className:Hs("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[10vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[760px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(DA,{actions:i}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function LV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Hs("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Ua({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function cd({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function wg(t){return t==="Completed"?"good":t==="In progress"||t==="Confirmed"?"info":t==="Cancelled"||t==="Refunded"?"bad":t==="Rebooked"?"warn":"neutral"}function vk(t){return t==="Critical"?"bad":t==="Warning"?"warn":"info"}function FV(t){return t==="Resolved"?"good":t==="In review"?"info":"warn"}function si(t,s){if(t.status==="Cancelled"||t.status==="Refunded")return{breached:!1,overdueDays:0,lateDays:0};if(t.completedAt){const l=Math.max(0,Math.ceil((t.completedAt-t.dueAt)/864e5));return{breached:l>0,overdueDays:0,lateDays:l}}const a=Math.max(0,Math.ceil((s-t.dueAt)/(24*60*60*1e3)));return{breached:a>0,overdueDays:a,lateDays:0}}function kg(t,s){if(!s||t.currency!=="UGX")return 0;const a=Math.round(t.total*s.penaltyPct/100);return Math.min(a,Math.max(0,s.penaltyCapUGX))}function _V(){var le;const t=Date.now(),s=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],a=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],[l,n]=c.useState([]),r=R=>{const se=wl("toast");n(m=>[{id:se,...R},...m].slice(0,4)),window.setTimeout(()=>n(m=>m.filter(w=>w.id!==se)),3200)},[i,o]=c.useState(()=>({autoDisputeOnSlaBreach:!0,autoPenaltyCalc:!0,penaltyApprovalThresholdUGX:5e5,requireApprovalForPenalty:!0})),[d,u]=c.useState(()=>[{id:"V-011",name:"Kampala Auto Supplier",country:"Uganda",status:"Approved",ratingAvg:4.1,ratingCount:28,slaOnTimeTargetPct:90,penaltyPct:2,penaltyCapUGX:25e5,categories:["Vehicles","Fleet"],modules:["E-Commerce"],marketplaces:["EVmart","ServiceMart"]},{id:"V-010",name:"Shenzhen EV Motors",country:"China",status:"Approved",ratingAvg:4.2,ratingCount:41,slaOnTimeTargetPct:85,penaltyPct:1,penaltyCapUGX:3e6,categories:["Vehicles","Imports"],modules:["E-Commerce"],marketplaces:["MyLiveDealz","EVmart"]},{id:"V-001",name:"EVzone Rides",country:"Uganda",status:"Approved",ratingAvg:4.6,ratingCount:290,slaOnTimeTargetPct:95,penaltyPct:1,penaltyCapUGX:8e5,categories:["Mobility"],modules:["Rides & Logistics"],marketplaces:[]},{id:"V-002",name:"EVzone Charging",country:"Uganda",status:"Approved",ratingAvg:4.3,ratingCount:120,slaOnTimeTargetPct:92,penaltyPct:1,penaltyCapUGX:6e5,categories:["Energy"],modules:["EVs & Charging"],marketplaces:[]},{id:"V-020",name:"Express CN",country:"China",status:"Blocked",ratingAvg:2.9,ratingCount:15,slaOnTimeTargetPct:80,penaltyPct:2,penaltyCapUGX:15e5,categories:["Logistics"],modules:["E-Commerce"],marketplaces:["ExpressMart"]}]),x=c.useMemo(()=>Object.fromEntries(d.map(R=>[R.id,R])),[d]),p=(R,se)=>{const m=R.map(w=>({id:wl("TL"),label:w}));return m[0]={...m[0],at:se,note:"Created"},m},[h,j]=c.useState(()=>{const se=Date.now(),m=se-8*864e5,w=se+24*864e5,oe=se-2*864e5,me=se-1*864e5+2*60*60*1e3,Me=se-12*864e5,Ve=se-2*864e5,Ze=se-5*864e5,E=se-2*864e5;return[{id:"FUL-PO-001",ref:"PO-001",type:"Purchase Order",status:"In progress",createdAt:m,dueAt:w,module:"E-Commerce",marketplace:"EVmart",vendorId:"V-011",currency:"UGX",total:88e6,description:"Electric SUV procurement (high value asset)",location:"Millennium House, Nsambya Road 472, Kampala",timeline:p(["PO created","PO issued","Vendor accepted","Deposit paid","In transit","Delivered","Commissioned","Closed"],m),currentStep:4,proofs:[{id:wl("PR"),name:"PO.pdf",type:"Other",note:"Purchase order document",addedAt:m+2*60*60*1e3,addedBy:"Procurement"},{id:wl("PR"),name:"Deposit receipt.jpg",type:"Photo",note:"Deposit paid proof",addedAt:m+4*864e5,addedBy:"Finance"}]},{id:"FUL-RIDE-101",ref:"SCH-RIDE-101",type:"Ride Schedule",status:"Completed",createdAt:oe,scheduledAt:oe+2*60*60*1e3,dueAt:me,completedAt:me-12*60*1e3,module:"Rides & Logistics",vendorId:"V-001",currency:"UGX",total:165e3,description:"Airport pickup schedule for visiting client",location:"Entebbe Airport  Kampala HQ",timeline:p(["Scheduled","Driver assigned","Picked up","Dropped off"],oe),currentStep:3,proofs:[{id:wl("PR"),name:"Trip receipt.pdf",type:"Trip receipt",note:"Receipt and route",addedAt:me,addedBy:"System"}],rating:{stars:5,comment:"On time and professional.",at:me+10*60*1e3}},{id:"FUL-DEL-009",ref:"DEL-009",type:"Delivery",status:"Cancelled",createdAt:Me,dueAt:Ve,module:"E-Commerce",marketplace:"ExpressMart",vendorId:"V-020",currency:"UGX",total:34e4,description:"Document courier to branch",location:"Kampala HQ  Jinja",timeline:p(["Created","Pickup","In transit","Delivered"],Me),currentStep:1,proofs:[]},{id:"FUL-SVC-044",ref:"SVC-044",type:"Service Booking",status:"Completed",createdAt:Ze,dueAt:E,completedAt:E-3*60*60*1e3,module:"E-Commerce",marketplace:"ServiceMart",vendorId:"V-011",currency:"UGX",total:54e4,description:"Office maintenance service booking",location:"Kampala HQ",timeline:p(["Booked","Confirmed","In service","Completed"],Ze),currentStep:3,proofs:[{id:wl("PR"),name:"Completion log.txt",type:"Completion log",note:"Work completed and signed",addedAt:E-2*60*60*1e3,addedBy:"Vendor"},{id:wl("PR"),name:"Signature.png",type:"Signature",note:"Site sign-off",addedAt:E-2*60*60*1e3,addedBy:"Admin"}],rating:{stars:4,comment:"Good work. Arrived slightly earlier.",at:E-30*60*1e3}}]}),[y,f]=c.useState(()=>[{id:"EX-001",createdAt:Date.now()-2*24*60*60*1e3,kind:"Cancellation",status:"Open",severity:"Warning",fulfillmentId:"FUL-DEL-009",title:"Delivery cancelled",detail:"Delivery request was cancelled after pickup delay.",recommendedAction:"Refund or rebook with an approved vendor."}]),[I,A]=c.useState(()=>[]),[b,C]=c.useState("overview"),[S,z]=c.useState(""),[$,D]=c.useState("All"),[W,he]=c.useState("All"),[V,xe]=c.useState("All"),[pe,be]=c.useState("All"),[fe,K]=c.useState(!1),[re,q]=c.useState(!1),[L,M]=c.useState(null),k=c.useMemo(()=>L&&h.find(R=>R.id===L)||null,[L,h]),P=c.useMemo(()=>k?x[k.vendorId]:null,[k,x]),[Y,F]=c.useState(!1),[G,ve]=c.useState(()=>({type:"Purchase Order",module:"E-Commerce",marketplace:"EVmart",vendorId:"V-011",currency:"UGX",total:0,description:"",location:"",dueInDays:7})),[Te,ye]=c.useState(!1),[ie,Oe]=c.useState({type:"Photo",name:"",note:""}),[Ae,ee]=c.useState(!1),[Ne,Ce]=c.useState({stars:5,comment:"",acknowledge:!1}),Ee=c.useMemo(()=>{const R=h.filter(me=>!["Completed","Cancelled","Refunded"].includes(me.status)).length,se=h.filter(me=>me.completedAt&&Date.now()-me.completedAt<7*24*60*60*1e3).length,m=h.filter(me=>si(me,t).breached).length,w=y.filter(me=>me.status==="Open").length,oe=I.filter(me=>me.status!=="Resolved").length;return{open:R,completed7d:se,breached:m,openExceptions:w,openDisputes:oe}},[h,y,I,t]),Ue=c.useMemo(()=>{const R=S.trim().toLowerCase();return h.filter(se=>$==="All"?!0:se.type===$).filter(se=>W==="All"?!0:se.status===W).filter(se=>V==="All"?!0:se.module===V).filter(se=>pe==="All"?!0:se.vendorId===pe).filter(se=>fe?si(se,t).breached:!0).filter(se=>{if(!R)return!0;const m=x[se.vendorId];return`${se.id} ${se.ref} ${se.type} ${se.status} ${se.module} ${se.marketplace||""} ${(m==null?void 0:m.name)||""} ${se.description} ${se.location}`.toLowerCase().includes(R)}).slice().sort((se,m)=>m.createdAt-se.createdAt)},[h,S,$,W,V,pe,fe,x,t]),Ye=c.useMemo(()=>{const R={};for(const se of h){const m=x[se.vendorId];R[se.vendorId]=R[se.vendorId]||{totalCompleted:0,onTime:0,breached:0,penaltiesUGX:0},si(se,t).breached&&(R[se.vendorId].breached+=1,i.autoPenaltyCalc&&(R[se.vendorId].penaltiesUGX+=kg(se,m))),se.status==="Completed"&&(R[se.vendorId].totalCompleted+=1,(!se.completedAt||se.completedAt<=se.dueAt)&&(R[se.vendorId].onTime+=1))}return d.map(se=>{const m=R[se.id]||{totalCompleted:0,onTime:0,breached:0,penaltiesUGX:0},w=m.totalCompleted?Math.round(m.onTime/m.totalCompleted*100):100;return{vendor:se,...m,onTimePct:w}}).sort((se,m)=>m.penaltiesUGX-se.penaltiesUGX||m.breached-se.breached||se.vendor.name.localeCompare(m.vendor.name))},[h,d,x,i.autoPenaltyCalc,t]),De=R=>{M(R),q(!0)},Be=R=>{const se={id:wl("EX"),createdAt:R.createdAt??Date.now(),status:R.status??"Open",...R};return f(m=>[se,...m]),se},$e=()=>{let R=0,se=0;for(const m of h){const w=si(m,t);if(!w.breached)continue;if(!y.some(me=>me.kind==="SLA breach"&&me.fulfillmentId===m.id)){const me=m.completedAt?`Completed ${w.lateDays} day(s) late.`:`Overdue by ${w.overdueDays} day(s).`;Be({kind:"SLA breach",severity:"Critical",fulfillmentId:m.id,title:"SLA breach detected",detail:me,recommendedAction:"Review penalty and open a dispute if needed."}),se+=1}i.autoDisputeOnSlaBreach&&(I.some(Me=>Me.fulfillmentId===m.id&&Me.reason.toLowerCase().includes("sla breach"))||(A(Me=>[{id:wl("DSP"),createdAt:Date.now(),fulfillmentId:m.id,status:"Open",reason:"SLA breach auto-trigger",autoTriggered:!0,evidence:[]},...Me]),R+=1))}r({title:"SLA scan completed",message:`Exceptions created: ${se}. Disputes created: ${R}.`,kind:se||R?"success":"info"})},_=()=>{const R=Ue.map(E=>{const J=x[E.vendorId],g=si(E,t),H=i.autoPenaltyCalc?kg(E,J):0;return{id:E.id,ref:E.ref,type:E.type,status:E.status,module:E.module,marketplace:E.marketplace||"-",vendor:(J==null?void 0:J.name)||E.vendorId,dueAt:hn(E.dueAt),completedAt:E.completedAt?hn(E.completedAt):"-",currency:E.currency,total:E.total,slaBreach:g.breached?"Yes":"No",penaltyUGX:H,location:E.location}}),se=["id","ref","type","status","module","marketplace","vendor","dueAt","completedAt","currency","total","slaBreach","penaltyUGX","location"],m=E=>{const J=String(E??"");return/[",\n]/.test(J)?`"${J.replace(/"/g,'""')}"`:J},w=se.join(","),oe=R.map(E=>se.map(J=>m(E[J])).join(",")).join(`
`),me=`${w}
${oe}`,Me=new Blob([me],{type:"text/csv"}),Ve=URL.createObjectURL(Me),Ze=document.createElement("a");Ze.href=Ve,Ze.download="corporatepay-fulfillment.csv",Ze.click(),URL.revokeObjectURL(Ve),r({title:"Exported",message:"Fulfillment CSV downloaded.",kind:"success"})},te=()=>{const R={items:h,exceptions:y,disputes:I,vendors:d,settings:i,exportedAt:new Date().toISOString()},se=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),m=URL.createObjectURL(se),w=document.createElement("a");w.href=m,w.download="corporatepay-fulfillment.json",w.click(),URL.revokeObjectURL(m),r({title:"Exported",message:"Fulfillment JSON downloaded.",kind:"success"})},Re=()=>{if(!G.description.trim()){r({title:"Missing",message:"Add a description.",kind:"warn"});return}if(!G.location.trim()){r({title:"Missing",message:"Add a location.",kind:"warn"});return}if(!G.total||G.total<=0){r({title:"Missing",message:"Add a total amount showing expected cost.",kind:"warn"});return}const R=24*60*60*1e3,se=Date.now(),m=se+bg(G.dueInDays,0,365)*R,w=G.type,me=(w==="Purchase Order"?["Created","Confirmed","In progress","Delivered","Completed"]:w==="Service Booking"?["Booked","Confirmed","In service","Completed"]:w==="Delivery"?["Created","Picked up","In transit","Delivered"]:["Scheduled","Driver assigned","Picked up","Dropped off"]).map(Ve=>({id:wl("TL"),label:Ve}));me[0]={...me[0],at:se,note:"Created"};const Me={id:wl("FUL"),ref:`${w==="Purchase Order"?"PO":w==="Service Booking"?"SVC":w==="Delivery"?"DEL":"SCH"}-${Math.floor(100+Math.random()*900)}`,type:w,status:"Pending",createdAt:se,dueAt:m,module:G.module,marketplace:G.module==="E-Commerce"?G.marketplace:void 0,vendorId:G.vendorId,currency:G.currency,total:Math.round(G.total),description:G.description.trim(),location:G.location.trim(),timeline:me,currentStep:0,proofs:[]};j(Ve=>[Me,...Ve]),F(!1),C("items"),r({title:"Created",message:"New request created.",kind:"success"})},Fe=R=>{j(se=>se.map(m=>{if(m.id!==R||m.status==="Cancelled"||m.status==="Refunded")return m;const w=Math.min(m.timeline.length-1,m.currentStep+1),oe=m.timeline.slice();oe[w].at||(oe[w]={...oe[w],at:Date.now()});let me=m.status;w===0?me="Pending":w===m.timeline.length-1?me="Completed":w>=1&&w<=2?me="Confirmed":me="In progress";const Me=me==="Completed"?Date.now():m.completedAt;return{...m,timeline:oe,currentStep:w,status:me,completedAt:Me}})),r({title:"Updated",message:"Status advanced.",kind:"success"})},T=R=>{j(se=>se.map(m=>m.id===R?{...m,status:"Cancelled"}:m)),Be({kind:"Cancellation",severity:"Warning",fulfillmentId:R,title:"Cancelled",detail:"Request was cancelled by admin.",recommendedAction:"Rebook if needed."}),r({title:"Cancelled",message:"Item cancelled.",kind:"warn"})},Z=R=>{j(se=>se.map(m=>m.id===R?{...m,status:"Refunded"}:m)),Be({kind:"Refund",severity:"Warning",fulfillmentId:R,title:"Refund initiated",detail:"Refund recorded (demo).",recommendedAction:"Verify refund settlement in Transactions."}),r({title:"Refunded",message:"Refund recorded.",kind:"info"})},B=R=>{j(se=>se.map(m=>m.id===R?{...m,status:"Rebooked"}:m)),Be({kind:"Rebooking",severity:"Info",fulfillmentId:R,title:"Rebook requested",detail:"Item rebook requested. Create a new request to replace it.",recommendedAction:"Create a new booking and link reference."}),r({title:"Rebooked",message:"Rebooking logged.",kind:"info"})},ne=()=>{if(!k)return;if(!ie.name.trim()){r({title:"Missing",message:"Add a proof name.",kind:"warn"});return}const R={id:wl("PR"),name:ie.name.trim(),type:ie.type,note:ie.note.trim(),addedAt:Date.now(),addedBy:"You"};j(se=>se.map(m=>m.id===k.id?{...m,proofs:[R,...m.proofs]}:m)),ye(!1),r({title:"Added",message:"Proof attached.",kind:"success"})},X=(R,se=!1)=>{if(!k)return;if(!R.trim()){r({title:"Missing",message:"Add a dispute reason.",kind:"warn"});return}const m={id:wl("DSP"),createdAt:Date.now(),fulfillmentId:k.id,status:"Open",reason:R.trim(),autoTriggered:se,evidence:[]};A(w=>[m,...w]),r({title:"Dispute opened",message:"Dispute created.",kind:"success"})},ge=()=>{k&&(Ce({stars:5,comment:"",acknowledge:!1}),ee(!0))},Le=()=>{if(!k)return;if(!Ne.acknowledge){r({title:"Required",message:"Acknowledge that rating is recorded.",kind:"warn"});return}const R=bg(Math.round(Ne.stars),1,5),se=Ne.comment.trim(),m=Date.now();j(w=>w.map(oe=>oe.id===k.id?{...oe,rating:{stars:R,comment:se,at:m}}:oe)),u(w=>w.map(oe=>{if(oe.id!==k.vendorId)return oe;const me=oe.ratingCount+1,Me=(oe.ratingAvg*oe.ratingCount+R)/me;return{...oe,ratingAvg:Math.round(Me*10)/10,ratingCount:me}})),ee(!1),r({title:"Thanks",message:"Vendor feedback recorded.",kind:"success"})};return c.useEffect(()=>{ee(!1)},[L]),e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(LV,{toasts:l,onDismiss:R=>n(se=>se.filter(m=>m.id!==R))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:hh.green},children:e.jsx(jt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Orders, Service Requests and Fulfillment"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Track POs, bookings, deliveries, and ride schedules with timelines, proofs, exceptions, SLAs, and dispute triggers."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:`Open: ${Ee.open}`,tone:Ee.open?"warn":"good"}),e.jsx(it,{label:`Completed 7d: ${Ee.completed7d}`,tone:"good"}),e.jsx(it,{label:`SLA breaches: ${Ee.breached}`,tone:Ee.breached?"bad":"good"}),e.jsx(it,{label:`Exceptions: ${Ee.openExceptions}`,tone:Ee.openExceptions?"warn":"good"}),e.jsx(it,{label:`Disputes: ${Ee.openDisputes}`,tone:Ee.openDisputes?"warn":"good"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:$e,children:[e.jsx(pa,{className:"h-4 w-4"})," SLA scan"]}),e.jsxs(bt,{variant:"outline",onClick:_,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(bt,{variant:"outline",onClick:te,children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs(bt,{variant:"primary",onClick:()=>F(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," New"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"items",label:"All fulfillment"},{id:"exceptions",label:"Exceptions"},{id:"sla",label:"SLA and penalties"},{id:"disputes",label:"Disputes"}].map(R=>e.jsx("button",{className:Hs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",b===R.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:b===R.id?{background:hh.green}:void 0,onClick:()=>C(R.id),children:R.label},R.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[b==="overview"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs(Ua,{title:"Fulfillment health",subtitle:"Status timelines and proofs for end-to-end operational visibility.",right:e.jsx(it,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(ae,{title:"Open items",value:`${Ee.open}`,sub:"Pending, confirmed, in progress",icon:e.jsx(Tn,{className:"h-5 w-5"}),tone:Ee.open?"warn":"good"}),e.jsx(ae,{title:"Completed",value:`${Ee.completed7d}`,sub:"Last 7 days",icon:e.jsx(He,{className:"h-5 w-5"}),tone:"good"}),e.jsx(ae,{title:"SLA breaches",value:`${Ee.breached}`,sub:"Overdue or late",icon:e.jsx(at,{className:"h-5 w-5"}),tone:Ee.breached?"bad":"good"}),e.jsx(ae,{title:"Disputes",value:`${Ee.openDisputes}`,sub:"Open or in review",icon:e.jsx(Tt,{className:"h-5 w-5"}),tone:Ee.openDisputes?"warn":"good"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Item"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Due"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"SLA"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Proofs"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsxs("tbody",{children:[Ue.slice(0,6).map(R=>{const se=x[R.vendorId],m=si(R,t);return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:R.ref}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[R.module,R.marketplace?`  ${R.marketplace}`:""]})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:R.type}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(se==null?void 0:se.name)||R.vendorId}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(it,{label:R.status,tone:wg(R.status)})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:pk(R.dueAt)}),e.jsxs("td",{className:"px-4 py-3",children:[m.breached?e.jsx(it,{label:"Breached",tone:"bad"}):e.jsx(it,{label:"OK",tone:"good"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:m.overdueDays?`${m.overdueDays} day(s) overdue`:m.lateDays?`${m.lateDays} day(s) late`:"On track"})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:R.proofs.length}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(bt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>De(R.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})})]},R.id)}),h.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10",children:e.jsx(cd,{title:"No fulfillment",subtitle:"Create your first order or booking."})})})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: SLA breaches can auto-create disputes and calculate penalties."})]}),e.jsxs(Ua,{title:"Automation settings",subtitle:"Premium controls for dispute triggers and penalty calculations.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(dd,{enabled:i.autoDisputeOnSlaBreach,onChange:R=>o(se=>({...se,autoDisputeOnSlaBreach:R})),label:"Auto dispute on SLA breach",description:"Creates a dispute record when overdue or late."}),e.jsx(dd,{enabled:i.autoPenaltyCalc,onChange:R=>o(se=>({...se,autoPenaltyCalc:R})),label:"Auto penalty calculation",description:"Estimates penalty amounts per vendor terms."}),e.jsx(dd,{enabled:i.requireApprovalForPenalty,onChange:R=>o(se=>({...se,requireApprovalForPenalty:R})),label:"Require approval for penalties",description:"If penalty exceeds threshold, route to approval chain."}),e.jsx("div",{className:Hs(!i.requireApprovalForPenalty&&"opacity-60"),children:e.jsx(jg,{label:"Penalty approval threshold",value:i.penaltyApprovalThresholdUGX,onChange:R=>o(se=>({...se,penaltyApprovalThresholdUGX:Math.max(0,R)})),hint:"UGX",disabled:!i.requireApprovalForPenalty})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"primary",onClick:$e,children:[e.jsx(pa,{className:"h-4 w-4"})," Run SLA scan"]}),e.jsxs(bt,{variant:"outline",onClick:()=>C("sla"),children:[e.jsx(ue,{className:"h-4 w-4"})," View SLA"]}),e.jsxs(bt,{variant:"outline",onClick:()=>C("disputes"),children:[e.jsx(ue,{className:"h-4 w-4"})," View disputes"]})]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs(Ua,{title:"Exceptions snapshot",subtitle:"Open issues needing attention.",right:e.jsx(it,{label:`${y.filter(R=>R.status==="Open").length}`,tone:y.filter(R=>R.status==="Open").length?"warn":"good"}),children:[e.jsxs("div",{className:"space-y-2",children:[y.filter(R=>R.status==="Open").slice(0,5).map(R=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:R.kind,tone:"neutral"}),e.jsx(it,{label:R.severity,tone:vk(R.severity)})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:R.title}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[$V(R.createdAt),"  ",R.fulfillmentId]}),e.jsx("div",{className:"mt-2 text-sm text-slate-700",children:R.detail})]}),e.jsxs(bt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{De(R.fulfillmentId),C("items")},children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})]})},R.id)),y.filter(R=>R.status==="Open").length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No open exceptions."})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(bt,{variant:"outline",className:"w-full",onClick:()=>C("exceptions"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open exceptions"]})})]}),e.jsxs(Ua,{title:"Quality feedback",subtitle:"Premium: vendor rating loop after fulfillment.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:d.filter(R=>R.status==="Approved").slice(0,5).map(R=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:R.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Rating ",R.ratingAvg.toFixed(1),"  ",R.ratingCount," reviews"]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(it,{label:`SLA target ${R.slaOnTimeTargetPct}%`,tone:"neutral"}),e.jsx(it,{label:`Penalty ${R.penaltyPct}%`,tone:"neutral"})]})]}),e.jsx(Ga,{className:"h-5 w-5 text-amber-500"})]})},R.id))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Ratings can be required after completion for specific categories."})]})]})]}):null,b==="items"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(Ua,{title:"Filters",subtitle:"Search and filter all fulfillment.",right:e.jsx(it,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 py-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:S,onChange:R=>z(R.target.value),placeholder:"ref, vendor, location...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(Vn,{label:"Type",value:$,onChange:R=>D(R),options:[{value:"All",label:"All"},...["Purchase Order","Service Booking","Delivery","Ride Schedule"].map(R=>({value:R,label:R}))]}),e.jsx(Vn,{label:"Status",value:W,onChange:R=>he(R),options:[{value:"All",label:"All"},...["Pending","Confirmed","In progress","Completed","Cancelled","Refunded","Rebooked"].map(R=>({value:R,label:R}))]}),e.jsx(Vn,{label:"Module",value:V,onChange:R=>xe(R),options:[{value:"All",label:"All"},...s.map(R=>({value:R,label:R}))]}),e.jsx(Vn,{label:"Vendor",value:pe,onChange:be,options:[{value:"All",label:"All"},...d.map(R=>({value:R.id,label:R.name}))]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(dd,{enabled:fe,onChange:K,label:"SLA breach only",description:"Overdue or completed late"})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:()=>{z(""),D("All"),he("All"),xe("All"),be("All"),K(!1),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(bt,{variant:"outline",onClick:_,children:[e.jsx(ct,{className:"h-4 w-4"})," CSV"]})]})]}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Proofs are required for delivery and completion confirmation in regulated programs."})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx(Ua,{title:"All fulfillment",subtitle:"Track orders, bookings, deliveries, and ride schedules with proofs and exceptions.",right:e.jsx(it,{label:`${Ue.length}`,tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Ref"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Due"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"SLA"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Proofs"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[Ue.map(R=>{const se=x[R.vendorId],m=si(R,t);return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:R.ref}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[R.module,R.marketplace?`  ${R.marketplace}`:""]})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:R.type}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(se==null?void 0:se.name)||R.vendorId}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(it,{label:R.status,tone:wg(R.status)})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:pk(R.dueAt)}),e.jsxs("td",{className:"px-4 py-3",children:[m.breached?e.jsx(it,{label:"Breached",tone:"bad"}):e.jsx(it,{label:"OK",tone:"good"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:m.overdueDays?`${m.overdueDays} overdue`:m.lateDays?`${m.lateDays} late`:""})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:R.proofs.length}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>De(R.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]}),e.jsxs(bt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Fe(R.id),disabled:R.status==="Completed"||R.status==="Cancelled"||R.status==="Refunded",title:R.status==="Completed"?"Already completed":"Advance timeline",children:[e.jsx(He,{className:"h-4 w-4"})," Advance"]})]})})]},R.id)}),Ue.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10",children:e.jsx(cd,{title:"No results",subtitle:"Try changing your filters."})})})]})]})})})})]}):null,b==="exceptions"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(Ua,{title:"Exceptions",subtitle:"Cancellations, refunds, rebooking, SLA breaches.",right:e.jsx(it,{label:"Core",tone:"neutral"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Use this queue to resolve exceptions and keep the audit trail clean."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:$e,children:[e.jsx(pa,{className:"h-4 w-4"})," Scan SLA"]}),e.jsxs(bt,{variant:"outline",onClick:()=>C("items"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open fulfillment"]})]})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx(Ua,{title:"Exceptions queue",subtitle:"Resolve, refund, rebook, or dispute.",right:e.jsx(it,{label:`${y.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[y.map(R=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:R.kind,tone:"neutral"}),e.jsx(it,{label:R.severity,tone:vk(R.severity)}),e.jsx(it,{label:R.status,tone:R.status==="Resolved"?"good":"warn"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:R.title}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[hn(R.createdAt),"  ",R.fulfillmentId]}),e.jsx("div",{className:"mt-2 text-sm text-slate-700",children:R.detail}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Recommended: ",R.recommendedAction]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>De(R.fulfillmentId),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]}),R.status==="Open"?e.jsxs(bt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>{f(se=>se.map(m=>m.id===R.id?{...m,status:"Resolved"}:m)),r({title:"Resolved",message:"Exception resolved.",kind:"success"})},children:[e.jsx(He,{className:"h-4 w-4"})," Resolve"]}):null]})]})},R.id)),y.length?null:e.jsx(cd,{title:"No exceptions",subtitle:"Everything is running smoothly."})]})})})]}):null,b==="sla"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(Ua,{title:"SLA and penalties",subtitle:"Premium: vendor SLA tracking and penalties.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Penalty calculations are estimates. In production, you can require approvals and generate credit notes."}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(dd,{enabled:i.autoPenaltyCalc,onChange:R=>o(se=>({...se,autoPenaltyCalc:R})),label:"Auto calculate penalties",description:"Uses vendor penalty terms"}),e.jsx(dd,{enabled:i.autoDisputeOnSlaBreach,onChange:R=>o(se=>({...se,autoDisputeOnSlaBreach:R})),label:"Auto dispute on breach",description:"Creates disputes when breach detected"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(bt,{variant:"primary",className:"w-full",onClick:$e,children:[e.jsx(pa,{className:"h-4 w-4"})," Run SLA scan"]})})]})}),e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsxs(Ua,{title:"Vendor SLA tracking",subtitle:"On-time rate, breaches, penalties, and ratings.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Target"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"On-time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Breaches"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Penalty estimate"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rating"})]})}),e.jsxs("tbody",{children:[Ye.map(R=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:R.vendor.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[R.vendor.country,"  ",R.vendor.status]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(it,{label:`${R.vendor.slaOnTimeTargetPct}%`,tone:"neutral"})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(it,{label:`${R.onTimePct}%`,tone:R.onTimePct>=R.vendor.slaOnTimeTargetPct?"good":R.onTimePct>=R.vendor.slaOnTimeTargetPct-5?"warn":"bad"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[R.totalCompleted," completed"]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(it,{label:`${R.breached}`,tone:R.breached?"warn":"good"})}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:fk(R.penaltiesUGX)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"font-semibold text-slate-900",children:R.vendor.ratingAvg.toFixed(1)}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",R.vendor.ratingCount,")"]})]})})]},R.vendor.id)),Ye.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10",children:e.jsx(cd,{title:"No vendors",subtitle:"No vendor stats available."})})})]})]})}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: penalties can create credit notes or adjustments in Invoices and Statements."})]})})]}):null,b==="disputes"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(Ua,{title:"Disputes",subtitle:"Auto triggers on SLA breach and manual disputes.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Disputes can be triggered automatically on SLA breach or opened manually with evidence."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:$e,children:[e.jsx(pa,{className:"h-4 w-4"})," Scan SLA"]}),e.jsxs(bt,{variant:"outline",onClick:()=>C("items"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open fulfillment"]})]})]})}),e.jsx("div",{className:"lg:col-span-8",children:e.jsx(Ua,{title:"Dispute list",subtitle:"Open, review, resolve.",right:e.jsx(it,{label:`${I.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[I.map(R=>{const se=h.find(w=>w.id===R.fulfillmentId),m=se?x[se.vendorId]:null;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:R.status,tone:FV(R.status)}),e.jsx(it,{label:R.autoTriggered?"Auto":"Manual",tone:R.autoTriggered?"info":"neutral"}),se?e.jsx(it,{label:se.ref,tone:"neutral"}):null]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:R.reason}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",hn(R.createdAt)]}),se?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Vendor: ",(m==null?void 0:m.name)||se.vendorId,"  Type: ",se.type,"  Total: ",hk(se.total,se.currency)]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[se?e.jsxs(bt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>De(se.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open item"]}):null,R.status!=="Resolved"?e.jsxs(bt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>{A(w=>w.map(oe=>oe.id===R.id?{...oe,status:"Resolved"}:oe)),r({title:"Resolved",message:"Dispute resolved.",kind:"success"})},children:[e.jsx(He,{className:"h-4 w-4"})," Resolve"]}):null]})]})},R.id)}),I.length?null:e.jsx(cd,{title:"No disputes",subtitle:"Run SLA scan or create a dispute from an item."})]})})})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"T Orders, Service Requests and Fulfillment v2. Core: track POs, bookings, deliveries, and ride schedules with timelines and proofs plus exception handling. Premium: vendor SLA tracking and penalties, quality feedback loop, and automated dispute triggers."})})]})}),e.jsx(Ng,{open:Y,title:"Create request",subtitle:"Create a PO, service booking, delivery, or ride schedule for tracking.",onClose:()=>F(!1),actions:[{label:"Create",onClick:Re}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(bt,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsxs(bt,{variant:"primary",onClick:Re,children:[e.jsx(et,{className:"h-4 w-4"})," Create"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Vn,{label:"Type",value:G.type,onChange:R=>ve(se=>({...se,type:R})),options:["Purchase Order","Service Booking","Delivery","Ride Schedule"].map(R=>({value:R,label:R}))}),e.jsx(Vn,{label:"Module",value:G.module,onChange:R=>ve(se=>({...se,module:R})),options:s.map(R=>({value:R,label:R}))}),e.jsx(Vn,{label:"Marketplace",value:G.marketplace,onChange:R=>ve(se=>({...se,marketplace:R})),options:a.map(R=>({value:R,label:R})),disabled:G.module!=="E-Commerce",hint:G.module!=="E-Commerce"?"Only for E-Commerce":""}),e.jsx(Vn,{label:"Vendor",value:G.vendorId,onChange:R=>ve(se=>({...se,vendorId:R})),options:d.map(R=>({value:R.id,label:`${R.name} (${R.status})`}))}),e.jsx(Vn,{label:"Currency",value:G.currency,onChange:R=>ve(se=>({...se,currency:R})),options:["UGX","USD","EUR","CNY"].map(R=>({value:R,label:R}))}),e.jsx(jg,{label:"Total",value:G.total,onChange:R=>ve(se=>({...se,total:Math.max(0,R)})),hint:"Expected cost"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(gk,{label:"Location",value:G.location,onChange:R=>ve(se=>({...se,location:R})),placeholder:"Delivery or service location"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(yg,{label:"Description",value:G.description,onChange:R=>ve(se=>({...se,description:R})),placeholder:"What needs to be delivered or done",rows:4})}),e.jsx(jg,{label:"Due in (days)",value:G.dueInDays,onChange:R=>ve(se=>({...se,dueInDays:bg(R,0,365)})),hint:"SLA baseline"}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"For high value items, create RFQ first, then convert to PO. This page focuses on tracking and fulfillment."})]})}),e.jsx(Ng,{open:Te,title:"Add proof",subtitle:"Upload delivery confirmations or completion logs (simulated).",onClose:()=>ye(!1),actions:[{label:"Add",onClick:ne}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(bt,{variant:"outline",onClick:()=>ye(!1),children:"Cancel"}),e.jsxs(bt,{variant:"primary",onClick:ne,children:[e.jsx(et,{className:"h-4 w-4"})," Add"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Vn,{label:"Proof type",value:ie.type,onChange:R=>Oe(se=>({...se,type:R})),options:["Delivery confirmation","Completion log","Trip receipt","Signature","Photo","Other"].map(R=>({value:R,label:R}))}),e.jsx(gk,{label:"File name",value:ie.name,onChange:R=>Oe(se=>({...se,name:R})),placeholder:"photo.jpg"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(yg,{label:"Note",value:ie.note,onChange:R=>Oe(se=>({...se,note:R})),rows:3,placeholder:"Optional"})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"In production, files are stored securely and referenced by signed URLs."})]})}),e.jsx(Ng,{open:Ae,title:"Rate vendor",subtitle:"Premium: quality feedback loop after fulfillment.",onClose:()=>ee(!1),actions:[{label:"Submit",onClick:Le}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(bt,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),e.jsxs(bt,{variant:"primary",onClick:Le,children:[e.jsx(Ga,{className:"h-4 w-4"})," Submit"]})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Stars"}),e.jsx("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[1,2,3,4,5].map(R=>e.jsxs("button",{type:"button",className:Hs("inline-flex items-center gap-2 rounded-2xl border px-4 py-2 text-sm font-semibold",Ne.stars>=R?"border-amber-200 bg-amber-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>Ce(se=>({...se,stars:R})),children:[e.jsx(Ga,{className:Hs("h-4 w-4",Ne.stars>=R?"text-amber-500":"text-slate-300")}),R]},R))})]}),e.jsx(yg,{label:"Comment",value:Ne.comment,onChange:R=>Ce(se=>({...se,comment:R})),placeholder:"Optional feedback",rows:4}),e.jsxs("label",{className:"flex items-start gap-3 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 h-4 w-4 rounded border-slate-300",checked:Ne.acknowledge,onChange:R=>Ce(se=>({...se,acknowledge:R.target.checked}))}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Acknowledge"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"This feedback is stored and can be used to improve vendor performance."})]})]})]})}),e.jsx(IV,{open:re,title:k?`${k.ref}  ${k.type}`:"Fulfillment",subtitle:k?`${k.module}${k.marketplace?`  ${k.marketplace}`:""}  ${((le=x[k.vendorId])==null?void 0:le.name)||k.vendorId}`:"",onClose:()=>q(!1),footer:k?e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"Actions are audit logged in production."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:()=>{Oe({type:"Photo",name:"",note:""}),ye(!0)},children:[e.jsx(ft,{className:"h-4 w-4"})," Add proof"]}),e.jsxs(bt,{variant:"outline",onClick:()=>{k&&(X("Manual dispute",!1),C("disputes"))},children:[e.jsx(Tt,{className:"h-4 w-4"})," Dispute"]}),e.jsxs(bt,{variant:"primary",onClick:()=>Fe(k.id),disabled:k.status==="Completed"||k.status==="Cancelled"||k.status==="Refunded",children:[e.jsx(He,{className:"h-4 w-4"})," Advance"]})]})]}):null,children:k?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:k.status,tone:wg(k.status)}),e.jsx(it,{label:k.currency,tone:"neutral"}),P?e.jsx(it,{label:`Vendor SLA ${P.slaOnTimeTargetPct}%`,tone:"neutral"}):null]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:k.description}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",hn(k.createdAt),"  Due ",hn(k.dueAt)]}),e.jsxs("div",{className:"mt-2 text-sm text-slate-700",children:["Location: ",e.jsx("span",{className:"font-semibold",children:k.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Total"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:hk(k.total,k.currency)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Proofs ",k.proofs.length]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsxs(bt,{variant:"outline",onClick:()=>T(k.id),disabled:k.status==="Completed"||k.status==="Cancelled"||k.status==="Refunded",children:[e.jsx(_e,{className:"h-4 w-4"})," Cancel"]}),e.jsxs(bt,{variant:"outline",onClick:()=>Z(k.id),disabled:k.status==="Refunded",children:[e.jsx(al,{className:"h-4 w-4"})," Refund"]}),e.jsxs(bt,{variant:"outline",onClick:()=>B(k.id),disabled:k.status==="Rebooked",children:[e.jsx(Tn,{className:"h-4 w-4"})," Rebook"]})]})]}),e.jsx(Ua,{title:"SLA status",subtitle:"Overdue checks and penalty estimate.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:(()=>{const R=si(k,t),se=i.autoPenaltyCalc?kg(k,P||void 0):0,m=i.requireApprovalForPenalty&&se>=i.penaltyApprovalThresholdUGX;return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[R.breached?e.jsx(it,{label:"Breached",tone:"bad"}):e.jsx(it,{label:"OK",tone:"good"}),R.overdueDays?e.jsx(it,{label:`${R.overdueDays} day(s) overdue`,tone:"warn"}):null,R.lateDays?e.jsx(it,{label:`${R.lateDays} day(s) late`,tone:"warn"}):null]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Due: ",hn(k.dueAt),k.completedAt?`  Completed: ${hn(k.completedAt)}`:""]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Penalty estimate"}),e.jsx("div",{className:"mt-1 text-lg font-semibold text-slate-900",children:fk(se)}),m?e.jsx("div",{className:"mt-1 text-xs font-semibold text-amber-700",children:"Approval required"}):e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"No approval needed"})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(bt,{variant:"outline",onClick:()=>X("SLA breach dispute",!0),disabled:!R.breached,children:[e.jsx(Tt,{className:"h-4 w-4"})," Open dispute"]}),e.jsxs(bt,{variant:"outline",onClick:()=>{r({title:"Penalty",message:"In production, penalties can create credit notes or adjustments.",kind:"info"})},disabled:!R.breached||!i.autoPenaltyCalc,children:[e.jsx(jt,{className:"h-4 w-4"})," Create credit note"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Automated dispute triggers run via SLA scan. You can run the scan from the page header."})]})})()}),e.jsx(Ua,{title:"Status timeline",subtitle:"Timeline plus completion logs.",right:e.jsx(it,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:k.timeline.map((R,se)=>{const m=se<k.currentStep,w=se===k.currentStep;return e.jsx("div",{className:Hs("rounded-3xl border p-4",w?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:`Step ${se+1}`,tone:"neutral"}),m?e.jsx(it,{label:"Done",tone:"good"}):w?e.jsx(it,{label:"Current",tone:"info"}):e.jsx(it,{label:"Next",tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:R.label}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[R.at?hn(R.at):"Not reached",R.note?`  ${R.note}`:""]})]}),w&&k.status!=="Completed"&&k.status!=="Cancelled"&&k.status!=="Refunded"?e.jsxs(bt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Fe(k.id),children:[e.jsx(He,{className:"h-4 w-4"})," Advance"]}):null]})},R.id)})})}),e.jsx(Ua,{title:"Proofs",subtitle:"Delivery confirmations, completion logs, receipts.",right:e.jsxs(bt,{variant:"outline",onClick:()=>{Oe({type:"Photo",name:"",note:""}),ye(!0)},children:[e.jsx(ft,{className:"h-4 w-4"})," Add"]}),children:e.jsxs("div",{className:"space-y-2",children:[k.proofs.map(R=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(it,{label:R.type,tone:"neutral"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:R.name})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Added ",hn(R.addedAt),"  ",R.addedBy]}),R.note?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Note: ",R.note]}):null]}),e.jsx(bt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:async()=>{try{await navigator.clipboard.writeText(R.name),r({title:"Copied",message:"Proof filename copied.",kind:"success"})}catch{r({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},children:e.jsx(Ot,{className:"h-4 w-4"})})]})},R.id)),k.proofs.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No proofs attached."})]})}),e.jsx(Ua,{title:"Vendor feedback",subtitle:"Rate vendor after completion.",right:e.jsx(it,{label:"Premium",tone:"info"}),children:k.status==="Completed"?e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:k.rating?e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"h-5 w-5 text-amber-500"}),e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[k.rating.stars," star(s)"]}),e.jsx(it,{label:hn(k.rating.at),tone:"neutral"})]}),k.rating.comment?e.jsx("div",{className:"mt-2 text-sm text-slate-700",children:k.rating.comment}):e.jsx("div",{className:"mt-2 text-sm text-slate-600",children:"No comment."})]}),e.jsxs(bt,{variant:"outline",onClick:ge,children:[e.jsx(Ga,{className:"h-4 w-4"})," Update"]})]}):e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"No rating yet"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Premium: ratings can be required for some modules."})]}),e.jsxs(bt,{variant:"primary",onClick:ge,children:[e.jsx(Ga,{className:"h-4 w-4"})," Rate now"]})]})}):e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Rating is available once the item is completed."})})]}):e.jsx(cd,{title:"No item selected",subtitle:"Select a fulfillment item to view details."})})]});function ae({title:R,value:se,sub:m,icon:w,tone:oe}){const me=oe==="good"?"bg-emerald-50 text-emerald-700":oe==="warn"?"bg-amber-50 text-amber-800":oe==="bad"?"bg-rose-50 text-rose-700":oe==="info"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:R}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:se}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:m})]}),e.jsx("div",{className:Hs("grid h-10 w-10 place-items-center rounded-2xl",me),children:w})]})})}}const Tu={green:"#03CD8C",orange:"#F77F00"};function Cs(...t){return t.filter(Boolean).join(" ")}function Bn(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Mx(t,s,a){return Math.max(s,Math.min(a,t))}function ud(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function fn(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Cg(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function VV(t){const s=new Date(t),a=d=>String(d).padStart(2,"0"),l=s.getFullYear(),n=a(s.getMonth()+1),r=a(s.getDate()),i=a(s.getHours()),o=a(s.getMinutes());return`${l}-${n}-${r}T${i}:${o}`}function BV(t){const s=new Date(t).getTime();return Number.isFinite(s)?s:Date.now()}function Ke({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Cs("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function wt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Tu.green}:t==="accent"?{background:Tu.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Cs(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Hc({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Cs("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Cs("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function ul({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Cs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Cs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Sg({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Cs(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Cs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Wl({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Cs(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Cs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function bk({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:Cs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:Cs("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function OA({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:Cs("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function Ag({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1040px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(OA,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function UV({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,actions:i}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:18},animate:{opacity:1,x:0},exit:{opacity:0,x:18},transition:{duration:.18},className:Cs("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[10vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[760px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(OA,{actions:i}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function qV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Cs("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Zs({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function ai({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(PL,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function Eg(t){return t==="Completed"?"good":t==="Confirmed"?"info":t==="Pending approval"?"warn":t==="Cancelled"?"bad":"neutral"}function Kc(t){return t==="Approved"?"good":t==="Rejected"?"bad":"warn"}function Xc(t,s="06:00",a="22:00"){const l=new Date(t),n=l.getHours(),r=l.getMinutes(),i=n*60+r,o=x=>{const[p,h]=x.split(":").map(j=>Number(j));return(p||0)*60+(h||0)},d=o(s),u=o(a);return i<d||i>u}function zV(t){return new Date(t).getHours()}function Zi(t){return`${t}-${Math.floor(100+Math.random()*900)}`}function jk(t){const s=t.some(n=>n.includes("VIP")||n.includes("Premium")||n.includes("CapEx")||n.includes("Executive")),a=t.some(n=>n.includes("CEO")),l=[{role:"Manager",slaHours:8},{role:"Finance",slaHours:12}];return s&&!l.some(n=>n.role==="CFO")&&l.push({role:"CFO",slaHours:24}),a&&l.push({role:"CEO",slaHours:24}),l}function GV(){const t=Date.now(),s=["Client meeting","Airport","Office commute","Event","Visitor","Other"],[a,l]=c.useState([]),n=m=>{const w=Bn("toast");l(oe=>[{id:w,...m},...oe].slice(0,4)),window.setTimeout(()=>l(oe=>oe.filter(me=>me.id!==w)),3200)},[r,i]=c.useState(()=>({workStart:"06:00",workEnd:"22:00",requirePurpose:!0,requireProjectTag:!0,requireCostCenter:!0,premiumRequiresApproval:!0,vipPremiumAllowedWithApproval:!0,enforceVisitorHost:!0,peakHourThreshold:6})),[o]=c.useState(()=>[{id:"E-001",name:"Mary N.",group:"Operations",costCenter:"OPS-001",vip:!1,email:"mary@acme.com"},{id:"E-002",name:"John S.",group:"Sales",costCenter:"SALES-TRAVEL",vip:!1,email:"john@acme.com"},{id:"E-003",name:"Irene K.",group:"Operations",costCenter:"OPS-001",vip:!0,email:"irene@acme.com"},{id:"E-004",name:"Daisy O.",group:"Finance",costCenter:"FIN-OPS",vip:!1,email:"daisy@acme.com"},{id:"E-005",name:"Procurement Desk",group:"Procurement",costCenter:"PROC-001",vip:!1}]),[d,u]=c.useState(()=>[{id:"VST-01",name:"Alex Chen",company:"Shenzhen Motors",hostEmployeeId:"E-003",vip:!0,phone:"+86 177 0000 0000"},{id:"VST-02",name:"Sarah Kato",company:"Partner Co",hostEmployeeId:"E-001",vip:!1,phone:"+256 701 222 222"}]),x=c.useMemo(()=>Object.fromEntries(o.map(m=>[m.id,m])),[o]),p=c.useMemo(()=>Object.fromEntries(d.map(m=>[m.id,m])),[d]),[h,j]=c.useState(()=>{const w=t+1728e5+36e6;return[{id:"EVT-001",name:"Investor Roadshow",location:"Kampala Serena",startAt:w,endAt:w+3*60*60*1e3,organizer:"Travel Coordinator",attendees:[{type:"Employee",id:"E-001"},{type:"Employee",id:"E-002"},{type:"Employee",id:"E-003"},{type:"Visitor",id:"VST-01"}],notes:"Bulk bookings required. VIP guest attending."}]}),[y,f]=c.useState(()=>[{id:"RC-001",name:"Office commute - Operations",days:["Mon","Tue","Wed","Thu","Fri"],timeLocal:"07:30",pickup:"Home",dropoff:"Kampala HQ",category:"Standard",purpose:"Office commute",tags:["Commute"],employees:["E-001","E-003"],enabled:!0},{id:"RC-002",name:"Airport run - Sales",days:["Mon","Wed","Fri"],timeLocal:"05:30",pickup:"Kampala HQ",dropoff:"Entebbe Airport",category:"Premium",purpose:"Airport",tags:["Airport"],employees:["E-002"],enabled:!1}]),[I,A]=c.useState(()=>{const oe=t+864e5+324e5,me=t+2*864e5+8*36e5,Me=t+2*864e5+18*36e5;return[{id:"BK-001",ref:Zi("TRV"),travelerType:"Visitor",travelerId:"VST-01",bookedBy:"Travel Coordinator",createdAt:t-5*36e5,scheduledAt:oe,pickup:"Entebbe Airport",dropoff:"Kampala HQ",category:"Premium",purpose:"Visitor",tags:["VIP","Airport"],costCenter:"SALES-TRAVEL",projectTag:"Roadshow",module:"Rides & Logistics",status:"Pending approval",vipRequested:!0,policyNotes:["Premium requested","VIP traveler"],proofs:[]},{id:"BK-002",ref:Zi("TRV"),travelerType:"Employee",travelerId:"E-001",bookedBy:"Travel Coordinator",createdAt:t-2*36e5,scheduledAt:me,pickup:"Kampala HQ",dropoff:"Kampala Serena",category:"Standard",purpose:"Event",tags:["Event"],costCenter:"OPS-001",projectTag:"Investor Roadshow",module:"Rides & Logistics",status:"Confirmed",eventId:"EVT-001",vipRequested:!1,policyNotes:[],proofs:[]},{id:"BK-003",ref:Zi("TRV"),travelerType:"Employee",travelerId:"E-002",bookedBy:"Travel Coordinator",createdAt:t-90*60*1e3,scheduledAt:Me,pickup:"Kampala Serena",dropoff:"Kampala HQ",category:"Standard",purpose:"Event",tags:["Event","Return"],costCenter:"SALES-TRAVEL",projectTag:"Investor Roadshow",module:"Rides & Logistics",status:"Confirmed",eventId:"EVT-001",vipRequested:!1,policyNotes:[],proofs:[]}]}),[b,C]=c.useState(()=>[{id:"VX-001",travelerType:"Employee",travelerId:"E-003",exceptionType:"Premium rides",validFrom:t-3*864e5,validTo:t+30*864e5,status:"Approved",requestedBy:"Org Admin",reason:"Executive travel allowance",approvalId:"APR-EX-001"}]),[S,z]=c.useState(()=>{const w=(me,Me)=>{const Ve=jk(me),Ze={Manager:"Manager",Finance:"Finance Desk",CFO:"CFO",CEO:"CEO"};return Ve.map(E=>({id:Bn("AS"),role:E.role,assignee:Ze[E.role],status:"Pending",requestedAt:Me,slaHours:E.slaHours}))},oe=t-18e6;return[{id:"APR-001",createdAt:oe,createdBy:"Travel Coordinator",status:"Pending",scope:"Booking",scopeId:"BK-001",reason:"VIP airport pickup requires premium category",policyFlags:["VIP traveler","Premium requested"],steps:w(["VIP","Premium"],oe)}]}),[$,D]=c.useState("overview"),[W,he]=c.useState(""),[V,xe]=c.useState("All"),[pe,be]=c.useState("All"),[fe,K]=c.useState(!1),[re,q]=c.useState(null),L=c.useMemo(()=>re&&I.find(m=>m.id===re)||null,[re,I]),[M,k]=c.useState(!1),[P,Y]=c.useState(0),[F,G]=c.useState(()=>({travelerType:"Employee",travelerId:"E-001",bookedBy:"Travel Coordinator",scheduledAt:VV(t+24*60*60*1e3),pickup:"Kampala HQ",dropoff:"Entebbe Airport",category:"Standard",purpose:"Airport",purposeOther:"",tags:"Airport,Client",costCenter:"OPS-001",projectTag:"Business travel",module:"Rides & Logistics",vipRequested:!1})),[ve,Te]=c.useState(!1),[ye,ie]=c.useState(()=>({eventId:"EVT-001",pickup:"Kampala HQ",dropoff:"Kampala Serena",category:"Standard",createReturn:!0,returnPickup:"Kampala Serena",returnDropoff:"Kampala HQ",offsetMinsBeforeStart:30,returnMinsAfterEnd:15,purpose:"Event",tags:"Event",costCenter:"OPS-001",projectTag:"Investor Roadshow"})),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState(()=>({travelerType:"Employee",travelerId:"E-003",exceptionType:"Premium rides",validDays:30,reason:""})),Ce=(m,w)=>{var oe,me;return m==="Employee"?((oe=x[w])==null?void 0:oe.name)||w:((me=p[w])==null?void 0:me.name)||w},Ee=(m,w)=>{var oe,me;return m==="Employee"?!!((oe=x[w])!=null&&oe.vip):!!((me=p[w])!=null&&me.vip)},Ue=m=>{var oe;const w=p[m];return w?((oe=x[w.hostEmployeeId])==null?void 0:oe.name)||w.hostEmployeeId:"-"},Ye=c.useMemo(()=>I.filter(m=>m.scheduledAt>t&&m.status!=="Cancelled"),[I,t]),De=c.useMemo(()=>S.filter(m=>m.status==="Pending").length,[S]),Be=c.useMemo(()=>h.filter(m=>m.startAt>t).sort((m,w)=>m.startAt-w.startAt),[h,t]),$e=c.useMemo(()=>{const m=W.trim().toLowerCase();return I.filter(w=>V==="All"?!0:w.status===V).filter(w=>pe==="All"?!0:w.travelerType===pe).filter(w=>m?`${w.ref} ${w.id} ${Ce(w.travelerType,w.travelerId)} ${w.pickup} ${w.dropoff} ${w.purpose} ${w.tags.join(" ")} ${w.costCenter} ${w.projectTag}`.toLowerCase().includes(m):!0).slice().sort((w,oe)=>w.scheduledAt-oe.scheduledAt)},[I,W,V,pe,x,p]),_=c.useMemo(()=>{const m=Array.from({length:24},()=>0);for(const w of Ye)m[zV(w.scheduledAt)]+=1;return m},[Ye]),te=c.useMemo(()=>{let m=0,w=-1;return _.forEach((oe,me)=>{oe>w&&(w=oe,m=me)}),{hour:m,count:w}},[_]),Re=te.count>=r.peakHourThreshold,Fe=c.useMemo(()=>{const m=I.filter(me=>["Draft","Pending approval","Confirmed"].includes(me.status)).length,w=I.filter(me=>{const Me=new Date(me.scheduledAt),Ve=new Date(t);return Me.getFullYear()===Ve.getFullYear()&&Me.getMonth()===Ve.getMonth()&&Me.getDate()===Ve.getDate()}).length,oe=S.filter(me=>me.status==="Pending"&&me.policyFlags.some(Me=>Me.toLowerCase().includes("vip"))).length;return{open:m,dueToday:w,vipPending:oe}},[I,S,t]),T=c.useMemo(()=>{const m=BV(F.scheduledAt),w=[],oe=Ee(F.travelerType,F.travelerId),me=Xc(m,r.workStart,r.workEnd);if(r.requirePurpose&&(!F.purpose||F.purpose==="Other"&&!F.purposeOther.trim())&&w.push("Purpose required"),r.requireProjectTag&&!F.projectTag.trim()&&w.push("Project tag required"),r.requireCostCenter&&!F.costCenter.trim()&&w.push("Cost center required"),F.travelerType==="Visitor"&&r.enforceVisitorHost){const g=p[F.travelerId];g!=null&&g.hostEmployeeId||w.push("Visitor host required")}me&&w.push("After-hours");const Me=b.some(g=>{if(g.status!=="Approved"||g.travelerType!==F.travelerType||g.travelerId!==F.travelerId||g.exceptionType!=="After-hours"&&g.exceptionType!=="Premium rides")return!1;const H=m;return H>=g.validFrom&&H<=g.validTo}),Ve=F.category==="Premium";Ve&&r.premiumRequiresApproval&&w.push("Premium requested"),(F.vipRequested||oe)&&w.push("VIP traveler");const Ze=w.some(g=>["After-hours","Premium requested","VIP traveler"].includes(g))&&!Me,E=w.filter(g=>g.endsWith("required"));return{scheduledAt:m,flags:w,errors:E,needsApproval:Ze,hasActiveVipException:Me,afterHours:me,premium:Ve,tVip:oe}},[F,r,b,p,Ee]),Z=m=>{q(m),K(!0)},B=m=>{const w=Date.now(),oe=jk(m.flags),me={Manager:"Manager",Finance:"Finance Desk",CFO:"CFO",CEO:"CEO"},Me=oe.map(Ze=>({id:Bn("AS"),role:Ze.role,assignee:me[Ze.role],status:"Pending",requestedAt:w,slaHours:Ze.slaHours})),Ve={id:Bn("APR"),createdAt:w,createdBy:m.createdBy,status:"Pending",scope:m.scope,scopeId:m.scopeId,reason:m.reason,policyFlags:m.flags,steps:Me};return z(Ze=>[Ve,...Ze]),Ve},ne=()=>{const m=T;if(m.errors.length){n({title:"Fix required fields",message:m.errors.join("  "),kind:"warn"});return}const w=Date.now(),oe=Bn("BK"),me=F.tags.split(",").map(Ze=>Ze.trim()).filter(Boolean).slice(0,10),Me=F.purpose==="Other"?F.purposeOther.trim():void 0,Ve={id:oe,ref:Zi("TRV"),travelerType:F.travelerType,travelerId:F.travelerId,bookedBy:F.bookedBy,createdAt:w,scheduledAt:m.scheduledAt,pickup:F.pickup.trim(),dropoff:F.dropoff.trim(),category:F.category,purpose:F.purpose,purposeOther:Me,tags:me,costCenter:F.costCenter.trim(),projectTag:F.projectTag.trim(),module:F.module,status:m.needsApproval?"Pending approval":"Confirmed",vipRequested:F.vipRequested||m.tVip,policyNotes:m.flags.filter(Ze=>!Ze.endsWith("required")),proofs:[]};A(Ze=>[Ve,...Ze]),m.needsApproval&&B({scope:"Booking",scopeId:Ve.id,createdBy:F.bookedBy,reason:"Policy exception required for this booking",flags:m.flags.filter(Ze=>!Ze.endsWith("required"))}),n({title:"Created",message:m.needsApproval?"Booking created and sent for approval.":"Booking confirmed.",kind:"success"}),k(!1),Y(0),D("bookings")},X=()=>{const m=h.find(J=>J.id===ye.eventId);if(!m){n({title:"Missing",message:"Select an event.",kind:"warn"});return}const w=m.startAt,oe=m.endAt,me=[],Me=w-ye.offsetMinsBeforeStart*60*1e3,Ve=oe+ye.returnMinsAfterEnd*60*1e3,Ze=Date.now();for(const J of m.attendees){Ce(J.type,J.id);const g=Ee(J.type,J.id),H=[];ye.category==="Premium"&&r.premiumRequiresApproval&&H.push("Premium requested"),g&&H.push("VIP traveler"),Xc(Me,r.workStart,r.workEnd)&&H.push("After-hours");const N=H.length>0;if(me.push({id:Bn("BK"),ref:Zi("EVT"),travelerType:J.type,travelerId:J.id,bookedBy:"Travel Coordinator",createdAt:Ze,scheduledAt:Me,pickup:ye.pickup,dropoff:ye.dropoff,category:ye.category,purpose:ye.purpose,tags:ye.tags.split(",").map(U=>U.trim()).filter(Boolean),costCenter:ye.costCenter,projectTag:ye.projectTag,module:"Rides & Logistics",status:N?"Pending approval":"Confirmed",eventId:m.id,vipRequested:g,policyNotes:H,proofs:[]}),ye.createReturn){const U=[];ye.category==="Premium"&&r.premiumRequiresApproval&&U.push("Premium requested"),g&&U.push("VIP traveler"),Xc(Ve,r.workStart,r.workEnd)&&U.push("After-hours");const ce=U.length>0;me.push({id:Bn("BK"),ref:Zi("EVT"),travelerType:J.type,travelerId:J.id,bookedBy:"Travel Coordinator",createdAt:Ze,scheduledAt:Ve,pickup:ye.returnPickup,dropoff:ye.returnDropoff,category:ye.category,purpose:ye.purpose,tags:[...ye.tags.split(",").map(O=>O.trim()).filter(Boolean),"Return"],costCenter:ye.costCenter,projectTag:ye.projectTag,module:"Rides & Logistics",status:ce?"Pending approval":"Confirmed",eventId:m.id,vipRequested:g,policyNotes:U,proofs:[]})}}if(A(J=>[...me,...J]),me.some(J=>J.status==="Pending approval")){const J=Array.from(new Set(me.flatMap(g=>g.policyNotes))).filter(Boolean);B({scope:"Event",scopeId:m.id,createdBy:"Travel Coordinator",reason:`Bulk event booking requires policy approval (${me.filter(g=>g.status==="Pending approval").length} pending).`,flags:J.length?J:["Bulk booking"]})}n({title:"Bulk created",message:`Created ${me.length} booking(s).`,kind:"success"}),Te(!1),D("bookings")},ge=m=>{const w=Date.now();z(oe=>oe.map(me=>{if(me.id!==m)return me;const Me=me.steps.findIndex(J=>J.status==="Pending");if(Me<0)return me;const Ve=me.steps.slice();Ve[Me]={...Ve[Me],status:"Approved",decidedAt:w,note:"Approved"};const E=Ve.every(J=>J.status==="Approved")?"Approved":"Pending";return{...me,steps:Ve,status:E}})),S.find(oe=>oe.id===m),S.map(oe=>(oe.id===m,oe)),setTimeout(()=>{z(oe=>{const me=oe.find(Me=>Me.id===m);return!me||me.status!=="Approved"||(me.scope==="Booking"&&A(Me=>Me.map(Ve=>Ve.id===me.scopeId?{...Ve,status:"Confirmed"}:Ve)),me.scope==="Event"&&A(Me=>Me.map(Ve=>Ve.eventId===me.scopeId&&Ve.status==="Pending approval"?{...Ve,status:"Confirmed"}:Ve)),me.scope==="VIP Exception"&&C(Me=>Me.map(Ve=>Ve.approvalId===me.id?{...Ve,status:"Approved"}:Ve)),n({title:"Approved",message:"Approval progressed.",kind:"success"})),oe})},0)},Le=m=>{const w=Date.now();z(me=>me.map(Me=>{if(Me.id!==m)return Me;const Ve=Me.steps.findIndex(E=>E.status==="Pending"),Ze=Me.steps.slice();return Ve>=0&&(Ze[Ve]={...Ze[Ve],status:"Rejected",decidedAt:w,note:"Rejected"}),{...Me,steps:Ze,status:"Rejected"}}));const oe=S.find(me=>me.id===m);(oe==null?void 0:oe.scope)==="Booking"&&A(me=>me.map(Me=>Me.id===oe.scopeId?{...Me,status:"Cancelled",policyNotes:[...Me.policyNotes,"Rejected"]}:Me)),n({title:"Rejected",message:"Approval rejected.",kind:"warn"})},ae=()=>{if(!ee.reason.trim()){n({title:"Missing",message:"Add a reason.",kind:"warn"});return}const w=Date.now(),oe={id:Bn("VX"),travelerType:ee.travelerType,travelerId:ee.travelerId,exceptionType:ee.exceptionType,validFrom:w,validTo:w+Mx(ee.validDays,1,365)*864e5,status:"Pending",requestedBy:"Org Admin",reason:ee.reason.trim()},me=["VIP",ee.exceptionType==="Premium rides"?"Premium":"After-hours"],Me=B({scope:"VIP Exception",scopeId:oe.id,createdBy:"Org Admin",reason:oe.reason,flags:me});oe.approvalId=Me.id,C(Ve=>[oe,...Ve]),n({title:"Requested",message:"VIP exception requested and sent for approval.",kind:"success"}),Ae(!1),D("approvals")},le=()=>{const m=$e.map(g=>{const H=Ce(g.travelerType,g.travelerId),N=g.travelerType==="Visitor"?Ue(g.travelerId):"-";return{ref:g.ref,status:g.status,traveler:H,travelerType:g.travelerType,host:N,when:fn(g.scheduledAt),pickup:g.pickup,dropoff:g.dropoff,category:g.category,purpose:g.purpose==="Other"?g.purposeOther||"Other":g.purpose,tags:g.tags.join(";"),costCenter:g.costCenter,projectTag:g.projectTag,policyNotes:g.policyNotes.join(";")}}),w=Object.keys(m[0]||{ref:""}),oe=g=>{const H=String(g??"");return/[",\n]/.test(H)?`"${H.replace(/"/g,'""')}"`:H},me=w.join(","),Me=m.map(g=>w.map(H=>oe(g[H])).join(",")).join(`
`),Ve=`${me}
${Me}`,Ze=new Blob([Ve],{type:"text/csv"}),E=URL.createObjectURL(Ze),J=document.createElement("a");J.href=E,J.download="corporate-travel-bookings.csv",J.click(),URL.revokeObjectURL(E),n({title:"Exported",message:"Bookings CSV downloaded.",kind:"success"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(qV,{toasts:a,onDismiss:m=>l(w=>w.filter(oe=>oe.id!==m))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Tu.green},children:e.jsx(Tn,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Corporate Travel and Scheduling"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Pre-book rides for visitors, events, and recurring commutes. Book on behalf, enforce purpose tags, and handle VIP exceptions with approvals."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:`Open: ${Fe.open}`,tone:Fe.open?"warn":"good"}),e.jsx(Ke,{label:`Today: ${Fe.dueToday}`,tone:Fe.dueToday?"info":"neutral"}),e.jsx(Ke,{label:`Approvals: ${De}`,tone:De?"warn":"good"}),e.jsx(Ke,{label:`VIP pending: ${Fe.vipPending}`,tone:Fe.vipPending?"warn":"good"}),e.jsx(Ke,{label:Re?`Peak hour: ${te.hour}:00 (${te.count})`:`Peak hour: ${te.hour}:00`,tone:Re?"warn":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(wt,{variant:"outline",onClick:()=>Te(!0),children:[e.jsx(Vs,{className:"h-4 w-4"})," Bulk event booking"]}),e.jsxs(wt,{variant:"primary",onClick:()=>{k(!0),Y(0)},children:[e.jsx(ft,{className:"h-4 w-4"})," New booking"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"bookings",label:"Bookings"},{id:"events",label:"Events"},{id:"recurring",label:"Recurring commutes"},{id:"vip",label:"Visitors and VIP"},{id:"insights",label:"Scheduling insights"},{id:"approvals",label:"Approvals"}].map(m=>e.jsx("button",{className:Cs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",$===m.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:$===m.id?{background:Tu.green}:void 0,onClick:()=>D(m.id),children:m.label},m.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[$==="overview"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs(Zs,{title:"Upcoming bookings",subtitle:"Pre-booked rides, event transfers, and visitor trips.",right:e.jsx(Ke,{label:`${Ye.length} upcoming`,tone:Ye.length?"info":"neutral"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"When"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Traveler"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Route"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Purpose"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[Ye.slice().sort((m,w)=>m.scheduledAt-w.scheduledAt).slice(0,6).map(m=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:fn(m.scheduledAt)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:Ce(m.travelerType,m.travelerId)}),Ee(m.travelerType,m.travelerId)?e.jsx(Ke,{label:"VIP",tone:"info"}):null,e.jsx(Ke,{label:m.travelerType,tone:"neutral"})]}),m.travelerType==="Visitor"?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Host: ",Ue(m.travelerId)]}):null]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[m.pickup,"  ",m.dropoff]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(Ke,{label:m.purpose==="Other"?m.purposeOther||"Other":m.purpose,tone:"neutral"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[m.tags.slice(0,3).join(", "),m.tags.length>3?"":""]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ke,{label:m.status,tone:Eg(m.status)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(wt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Z(m.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})})]},m.id)),Ye.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10",children:e.jsx(ai,{title:"No upcoming bookings",subtitle:"Create a booking or bulk book for an event."})})})]})]})}),Re?e.jsxs("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:["Smart scheduling: peak time detected around ",te.hour,":00. Consider preplanning 15-30 minutes earlier or switching to bulk event booking."]}):e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Smart scheduling: no peak congestion detected in upcoming bookings."})]}),e.jsxs(Zs,{title:"Policy guardrails",subtitle:"Trip purpose enforcement and tagging.",right:e.jsx(Ke,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(Hc,{enabled:r.requirePurpose,onChange:m=>i(w=>({...w,requirePurpose:m})),label:"Require trip purpose",description:"Purpose must be selected and stored."}),e.jsx(Hc,{enabled:r.requireProjectTag,onChange:m=>i(w=>({...w,requireProjectTag:m})),label:"Require project tag",description:"Used for reporting and chargeback."}),e.jsx(Hc,{enabled:r.requireCostCenter,onChange:m=>i(w=>({...w,requireCostCenter:m})),label:"Require cost center",description:"Enforced on booking creation."}),e.jsx(Hc,{enabled:r.premiumRequiresApproval,onChange:m=>i(w=>({...w,premiumRequiresApproval:m})),label:"Premium requires approval",description:"Policy exceptions are approval-gated."})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:["Default working hours: ",r.workStart," to ",r.workEnd,". After-hours bookings require approval unless a VIP exception is active."]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsx(Zs,{title:"Events",subtitle:"Upcoming corporate events with manifests.",right:e.jsx(Ke,{label:`${Be.length}`,tone:Be.length?"info":"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[Be.slice(0,4).map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[fn(m.startAt),"  ",m.location]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(Ke,{label:`${m.attendees.length} attendees`,tone:"neutral"}),m.attendees.some(w=>Ee(w.type,w.id))?e.jsx(Ke,{label:"VIP present",tone:"info"}):null]})]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{ie(w=>({...w,eventId:m.id,projectTag:m.name})),Te(!0)},children:[e.jsx(Vs,{className:"h-4 w-4"})," Bulk"]})]})},m.id)),Be.length?null:e.jsx(ai,{title:"No upcoming events",subtitle:"Create an event manifest first (future)."})]})}),e.jsxs(Zs,{title:"Approvals queue",subtitle:"Policy exceptions and VIP handling.",right:e.jsx(Ke,{label:`${De}`,tone:De?"warn":"good"}),children:[e.jsxs("div",{className:"space-y-2",children:[S.filter(m=>m.status==="Pending").slice(0,4).map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:m.scope,tone:"neutral"}),e.jsx(Ke,{label:m.status,tone:Kc(m.status)}),e.jsx(Ke,{label:`${m.steps.filter(w=>w.status==="Pending").length} step(s)`,tone:"info"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:m.reason}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[Cg(m.createdAt),"  ",m.createdBy]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[m.policyFlags.slice(0,3).map((w,oe)=>e.jsx(Ke,{label:w,tone:"neutral"},`${m.id}-f-${oe}`)),m.policyFlags.length>3?e.jsx(Ke,{label:"+more",tone:"neutral"}):null]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(wt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>ge(m.id),children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Le(m.id),children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]})]})]})},m.id)),S.filter(m=>m.status==="Pending").length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No pending approvals."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"outline",onClick:()=>D("approvals"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open approvals"]}),e.jsxs(wt,{variant:"outline",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," VIP exception"]})]})]})]})]}):null,$==="bookings"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(Zs,{title:"Search and filters",subtitle:"Coordinator view.",right:e.jsx(Ke,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 py-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:W,onChange:m=>he(m.target.value),placeholder:"ref, traveler, route, tag...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(Wl,{label:"Status",value:V,onChange:m=>xe(m),options:[{value:"All",label:"All"},...["Draft","Pending approval","Confirmed","Completed","Cancelled"].map(m=>({value:m,label:m}))]}),e.jsx(Wl,{label:"Traveler type",value:pe,onChange:m=>be(m),options:[{value:"All",label:"All"},{value:"Employee",label:"Employee"},{value:"Visitor",label:"Visitor"}]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"outline",onClick:()=>{he(""),xe("All"),be("All"),n({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(wt,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," CSV"]}),e.jsxs(wt,{variant:"primary",onClick:()=>k(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," New"]})]})]}),e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Book on behalf: choose employee or visitor, then apply purpose tags, cost center, and project tag."})]})}),e.jsx("div",{children:e.jsx(Zs,{title:"Bookings",subtitle:"Pre-booked rides and scheduled transfers.",right:e.jsx(Ke,{label:`${$e.length}`,tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Ref"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"When"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Traveler"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Route"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Category"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Purpose"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[$e.map(m=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:m.ref}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:m.id})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:fn(m.scheduledAt)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:Ce(m.travelerType,m.travelerId)}),Ee(m.travelerType,m.travelerId)?e.jsx(Ke,{label:"VIP",tone:"info"}):null,e.jsx(Ke,{label:m.travelerType,tone:"neutral"})]}),m.travelerType==="Visitor"?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Host: ",Ue(m.travelerId)]}):null]}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[m.pickup,"  ",m.dropoff]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ke,{label:m.category,tone:m.category==="Premium"?"info":"neutral"})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(Ke,{label:m.purpose==="Other"?m.purposeOther||"Other":m.purpose,tone:"neutral"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[m.costCenter,"  ",m.projectTag]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Ke,{label:m.status,tone:Eg(m.status)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(wt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Z(m.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})})]},m.id)),$e.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-4 py-10",children:e.jsx(ai,{title:"No bookings",subtitle:"Create a booking or adjust filters."})})})]})]})})})})]}):null,$==="events"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsx(Zs,{title:"Event manifests",subtitle:"Premium: many riders and bulk booking.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[h.slice().sort((m,w)=>m.startAt-w.startAt).map(m=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsx(Ke,{label:ud(m.startAt),tone:"neutral"}),e.jsx(Ke,{label:`${m.attendees.length} attendees`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[fn(m.startAt)," to ",fn(m.endAt)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Location: ",m.location]}),m.notes?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Notes: ",m.notes]}):null]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{ie(w=>({...w,eventId:m.id,projectTag:m.name})),Te(!0)},children:[e.jsx(Vs,{className:"h-4 w-4"})," Bulk"]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{D("bookings"),he(m.name),n({title:"Filtered",message:"Showing related bookings.",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Bookings"]})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Manifest"}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 gap-2 sm:grid-cols-2",children:[m.attendees.slice(0,6).map((w,oe)=>e.jsxs("div",{className:"flex items-center justify-between gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-800",children:Ce(w.type,w.id)}),e.jsxs("div",{className:"flex items-center gap-2",children:[Ee(w.type,w.id)?e.jsx(Ke,{label:"VIP",tone:"info"}):null,e.jsx(Ke,{label:w.type,tone:"neutral"})]})]},`${m.id}-a-${oe}`)),m.attendees.length>6?e.jsxs("div",{className:"text-xs text-slate-500",children:["+",m.attendees.length-6," more"]}):null]})]})]},m.id)),h.length?null:e.jsx(ai,{title:"No events",subtitle:"Add an event manifest first."})]})})}),e.jsxs("div",{className:"lg:col-span-7 space-y-4",children:[e.jsx(Zs,{title:"Peak-time preplanning",subtitle:"Premium: detect peak times and suggest buffers.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Peak hour"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Computed from upcoming bookings by hour."})]}),e.jsx(Ke,{label:`${te.hour}:00  ${te.count} booking(s)`,tone:Re?"warn":"neutral"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2 sm:grid-cols-8 md:grid-cols-12",children:_.map((m,w)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-2 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:w}),e.jsx("div",{className:Cs("mt-2 h-2 rounded-full",m?"bg-emerald-200":"bg-slate-100"),style:{width:"100%"}}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:m})]},w))}),e.jsxs("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:["Smart suggestion: if booking at ",te.hour,":00, consider scheduling 15-30 minutes earlier and pre-assigning vehicles for event manifests."]})]})}),e.jsx(Zs,{title:"VIP handling",subtitle:"Policy exceptions with approvals.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"VIP exceptions"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Allow premium rides or after-hours for specific travelers."})]}),e.jsxs(wt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," Request"]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[b.slice(0,5).map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:m.exceptionType,tone:"neutral"}),e.jsx(Ke,{label:m.status,tone:Kc(m.status)}),e.jsx(Ke,{label:`${ud(m.validFrom)}  ${ud(m.validTo)}`,tone:"info"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Ce(m.travelerType,m.travelerId)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Requested by ",m.requestedBy,"  ",m.reason]})]}),m.approvalId?e.jsx(Ke,{label:m.approvalId,tone:"neutral"}):null]})},m.id)),b.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No VIP exceptions."})]})]})})]})]}):null,$==="recurring"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs(Zs,{title:"Recurring commutes",subtitle:"Core: recurring schedules for office commute.",right:e.jsx(Ke,{label:`${y.length}`,tone:"neutral"}),children:[e.jsxs("div",{className:"space-y-2",children:[y.map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsx(Ke,{label:m.enabled?"Enabled":"Disabled",tone:m.enabled?"good":"neutral"}),e.jsx(Ke,{label:`${m.timeLocal}`,tone:"neutral"}),e.jsx(Ke,{label:m.category,tone:m.category==="Premium"?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Days: ",m.days.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Route: ",m.pickup,"  ",m.dropoff]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Employees: ",m.employees.map(w=>{var oe;return((oe=x[w])==null?void 0:oe.name)||w}).join(", ")]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{f(w=>w.map(oe=>oe.id===m.id?{...oe,enabled:!oe.enabled}:oe)),n({title:"Updated",message:"Recurring schedule updated.",kind:"success"})},children:[e.jsx(aA,{className:"h-4 w-4"})," Toggle"]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{const w=Date.now()+1728e5,[oe,me]=m.timeLocal.split(":").map(J=>Number(J)),Me=new Date(w);Me.setHours(oe||0,me||0,0,0);const Ve=Me.getTime(),Ze=m.employees.map(J=>{const g=x[J],H=[];m.category==="Premium"&&r.premiumRequiresApproval&&H.push("Premium requested"),Xc(Ve,r.workStart,r.workEnd)&&H.push("After-hours"),g!=null&&g.vip&&H.push("VIP traveler");const N=H.length>0;return{id:Bn("BK"),ref:Zi("RC"),travelerType:"Employee",travelerId:J,bookedBy:"Travel Coordinator",createdAt:Date.now(),scheduledAt:Ve,pickup:m.pickup,dropoff:m.dropoff,category:m.category,purpose:m.purpose,tags:m.tags,costCenter:(g==null?void 0:g.costCenter)||"OPS-001",projectTag:m.name,module:"Rides & Logistics",status:N?"Pending approval":"Confirmed",recurringId:m.id,vipRequested:!!(g!=null&&g.vip),policyNotes:H,proofs:[]}});A(J=>[...Ze,...J]),Ze.some(J=>J.status==="Pending approval")&&B({scope:"Event",scopeId:m.id,createdBy:"Travel Coordinator",reason:"Recurring booking instance requires policy approval",flags:Array.from(new Set(Ze.flatMap(J=>J.policyNotes)))}),n({title:"Generated",message:`Created ${Ze.length} booking(s) from recurring schedule.`,kind:"success"}),D("bookings")},children:[e.jsx(lt,{className:"h-4 w-4"})," Generate"]})]})]})},m.id)),y.length?null:e.jsx(ai,{title:"No recurring schedules",subtitle:"Create a recurring commute plan."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: smart scheduling can preplan around peak time and suggest alternate pickup windows."})]})}),e.jsxs("div",{className:"lg:col-span-7 space-y-4",children:[e.jsxs(Zs,{title:"Policy enforcement preview",subtitle:"What would require approval.",right:e.jsx(Ke,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"After-hours"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Outside ",r.workStart," to ",r.workEnd]})]}),e.jsx(Ke,{label:"Approval",tone:"warn"})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"Best practice: require Manager and Finance approval; add CFO for VIP."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Premium category request"})]}),e.jsx(Ke,{label:"Approval",tone:"warn"})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"Best practice: allow premium for VIP only through approvals or VIP exception."})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Tip: Link enforcement to Approval Workflow Builder (J) for organization-wide consistency."})]}),e.jsx(Zs,{title:"Recurring best practices",subtitle:"Operational tips for commuting programs.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) Start with a pilot group for commutes, then expand"}),e.jsx("li",{children:"2) Enforce purpose tagging and cost center"}),e.jsx("li",{children:"3) Prebook 15-30 minutes earlier during peak traffic"}),e.jsx("li",{children:"4) Maintain VIP exceptions for executives with audit trails"})]})})})]})]}):null,$==="vip"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-6 space-y-4",children:e.jsxs(Zs,{title:"Visitors",subtitle:"Core: visitor prebooking and host enforcement.",right:e.jsx(Ke,{label:`${d.length}`,tone:"neutral"}),children:[e.jsxs("div",{className:"space-y-2",children:[d.map(m=>{var w;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsx(Ke,{label:m.company,tone:"neutral"}),m.vip?e.jsx(Ke,{label:"VIP",tone:"info"}):null]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Host: ",((w=x[m.hostEmployeeId])==null?void 0:w.name)||m.hostEmployeeId]}),m.phone?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Phone: ",m.phone]}):null]}),e.jsxs(wt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>{G(oe=>({...oe,travelerType:"Visitor",travelerId:m.id,pickup:"Entebbe Airport",dropoff:"Kampala HQ",category:m.vip?"Premium":"Standard",vipRequested:m.vip,purpose:"Visitor",projectTag:"Visitor transport",tags:m.vip?"VIP,Airport":"Visitor,Airport"})),Y(1),k(!0)},children:[e.jsx(TL,{className:"h-4 w-4"})," Book"]})]})},m.id)}),d.length?null:e.jsx(ai,{title:"No visitors",subtitle:"Add visitors to enable pre-booking."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: visitor bookings should always store host employee and trip purpose."})]})}),e.jsx("div",{className:"lg:col-span-6 space-y-4",children:e.jsxs(Zs,{title:"VIP exceptions",subtitle:"Premium: policy exceptions with approvals.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," Request exception"]}),e.jsxs(wt,{variant:"outline",onClick:()=>D("approvals"),children:[e.jsx(ue,{className:"h-4 w-4"})," View approvals"]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[b.map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:m.exceptionType,tone:"neutral"}),e.jsx(Ke,{label:m.status,tone:Kc(m.status)}),e.jsx(Ke,{label:`${ud(m.validFrom)}  ${ud(m.validTo)}`,tone:"info"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Ce(m.travelerType,m.travelerId)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Requested by ",m.requestedBy,"  ",m.reason]}),m.approvalId?e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Approval: ",m.approvalId]}):null]}),e.jsx(Kn,{className:Cs("h-5 w-5",m.status==="Approved"?"text-amber-500":"text-slate-300")})]})},m.id)),b.length?null:e.jsx(ai,{title:"No VIP exceptions",subtitle:"Request an exception to allow premium or after-hours travel."})]})]})})]}):null,$==="insights"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(Zs,{title:"Program insights",subtitle:"Policy compliance and quality indicators.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(R,{title:"After-hours",value:`${I.filter(m=>Xc(m.scheduledAt,r.workStart,r.workEnd)).length}`,sub:"Bookings outside window",icon:e.jsx(pa,{className:"h-5 w-5"}),tone:"warn"}),e.jsx(R,{title:"Premium",value:`${I.filter(m=>m.category==="Premium").length}`,sub:"Premium category",icon:e.jsx(Kn,{className:"h-5 w-5"}),tone:"info"}),e.jsx(R,{title:"Purpose missing",value:`${I.filter(m=>m.purpose==="Other"&&!m.purposeOther).length}`,sub:"Should be 0",icon:e.jsx(at,{className:"h-5 w-5"}),tone:"bad"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: peak time detection can be expanded with traffic data and city events calendars."})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[e.jsx(Zs,{title:"Peak time detection",subtitle:"Premium: smart scheduling suggestions.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Peak hour"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Upcoming bookings by hour (0-23)"})]}),e.jsx(Ke,{label:`${te.hour}:00  ${te.count}`,tone:Re?"warn":"neutral"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2 sm:grid-cols-8 md:grid-cols-12",children:_.map((m,w)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-2 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:w}),e.jsx("div",{className:Cs("mt-2 h-2 rounded-full",m?"bg-emerald-200":"bg-slate-100")}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:m})]},w))}),e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Suggestion: schedule event transfers 30 minutes earlier during peak hours and use bulk booking to reduce coordination load."})]})}),e.jsx(Zs,{title:"Recommendations",subtitle:"Next best coordinator actions.",right:e.jsx(Ke,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(se,{title:"Bulk book your next event",detail:Be.length?`Upcoming event: ${Be[0].name} has ${Be[0].attendees.length} attendee(s).`:"Create an event manifest to bulk book rides.",cta:"Bulk book",onClick:()=>Te(!0)}),e.jsx(se,{title:"Resolve pending approvals",detail:`There are ${De} approval request(s) pending.`,cta:"Open approvals",onClick:()=>D("approvals")}),e.jsx(se,{title:"Create a VIP exception",detail:"For recurring executive travel, create an approved VIP exception with audit trail.",cta:"Request",onClick:()=>Ae(!0)})]})})]})]}):null,$==="approvals"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs(Zs,{title:"Approvals",subtitle:"VIP, premium, and after-hours exceptions.",right:e.jsx(Ke,{label:"Core",tone:"neutral"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Approvals are required before sending some bookings to dispatch."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," VIP exception"]}),e.jsxs(wt,{variant:"outline",onClick:()=>n({title:"Tip",message:"Map these approvals to your global Approval Workflow Builder (J).",kind:"info"}),children:[e.jsx(rt,{className:"h-4 w-4"})," Tip"]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsx(Zs,{title:"Approval requests",subtitle:"Approve or reject with audit trail.",right:e.jsx(Ke,{label:`${S.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[S.slice().sort((m,w)=>w.createdAt-m.createdAt).map(m=>{const w=m.steps.findIndex(me=>me.status==="Pending"),oe=w>=0?m.steps[w]:null;return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:m.scope,tone:"neutral"}),e.jsx(Ke,{label:m.status,tone:Kc(m.status)}),e.jsx(Ke,{label:m.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:m.reason}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",Cg(m.createdAt),"  ",m.createdBy]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:m.policyFlags.map((me,Me)=>e.jsx(Ke,{label:me,tone:"neutral"},`${m.id}-pf-${Me}`))}),oe?e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Next: ",e.jsx("span",{className:"font-semibold",children:oe.role})," (",oe.assignee,")  SLA ",oe.slaHours,"h"]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>ge(m.id),disabled:m.status!=="Pending",children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Le(m.id),disabled:m.status!=="Pending",children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]}),m.scope==="Booking"?e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Z(m.scopeId)},children:[e.jsx(ue,{className:"h-4 w-4"})," Open booking"]}):null]})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:m.steps.map(me=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:me.role}),e.jsx(Ke,{label:me.status,tone:Kc(me.status)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Assignee: ",me.assignee,"  SLA ",me.slaHours,"h"]}),me.decidedAt?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Decided ",fn(me.decidedAt),"  ",me.note||""]}):null]},me.id))})]},m.id)}),S.length?null:e.jsx(ai,{title:"No approvals",subtitle:"Policy exceptions will appear here."})]})})})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"U Corporate Travel and Scheduling v2. Core: pre-book rides for visitors, events, recurring commutes; coordinator book-on-behalf tools; purpose tagging. Premium: event manifests and bulk booking, VIP exception approvals, and peak-time scheduling insights."})})]})}),e.jsx(UV,{open:fe,title:L?`${L.ref}  ${L.category}`:"Booking",subtitle:L?`${Ce(L.travelerType,L.travelerId)}  ${fn(L.scheduledAt)}`:"",onClose:()=>K(!1),footer:L?e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"In production, this links to dispatch and driver assignment."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(wt,{variant:"outline",onClick:()=>{A(m=>m.map(w=>w.id===L.id?{...w,status:"Cancelled"}:w)),n({title:"Cancelled",message:"Booking cancelled.",kind:"warn"}),K(!1)},disabled:L.status==="Cancelled"||L.status==="Completed",children:[e.jsx(_e,{className:"h-4 w-4"})," Cancel"]}),e.jsxs(wt,{variant:"primary",onClick:()=>{A(m=>m.map(w=>w.id===L.id?{...w,status:"Completed",proofs:[{id:Bn("AT"),name:"Trip receipt.pdf",note:"Receipt",addedAt:Date.now(),addedBy:"System"},...w.proofs]}:w)),n({title:"Completed",message:"Booking marked completed.",kind:"success"})},disabled:L.status!=="Confirmed",title:L.status!=="Confirmed"?"Only confirmed bookings can complete":"",children:[e.jsx(He,{className:"h-4 w-4"})," Complete"]})]})]}):null,children:L?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ke,{label:L.status,tone:Eg(L.status)}),e.jsx(Ke,{label:L.purpose==="Other"?L.purposeOther||"Other":L.purpose,tone:"neutral"}),Ee(L.travelerType,L.travelerId)?e.jsx(Ke,{label:"VIP",tone:"info"}):null,L.category==="Premium"?e.jsx(Ke,{label:"Premium",tone:"info"}):e.jsx(Ke,{label:"Standard",tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Ce(L.travelerType,L.travelerId)}),L.travelerType==="Visitor"?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Host: ",Ue(L.travelerId)]}):null,e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Booked by ",L.bookedBy,"  Created ",Cg(L.createdAt)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Scheduled"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:fn(L.scheduledAt)}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Cost center"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:L.costCenter})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Pickup"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:L.pickup})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Drop-off"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:L.dropoff})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Tags"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.tags.length?L.tags.map((m,w)=>e.jsx(Ke,{label:m,tone:"neutral"},`${L.id}-t-${w}`)):e.jsx(Ke,{label:"None",tone:"neutral"})}),e.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Project: ",L.projectTag]})]}),L.policyNotes.length?e.jsxs("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:[e.jsx("div",{className:"font-semibold",children:"Policy notes"}),e.jsx("ul",{className:"mt-2 space-y-1",children:L.policyNotes.map((m,w)=>e.jsxs("li",{children:[" ",m]},`${L.id}-pn-${w}`))})]}):null]}),e.jsx(Zs,{title:"Proofs",subtitle:"Receipts and completion logs.",right:e.jsx(Ke,{label:`${L.proofs.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[L.proofs.map(m=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[fn(m.addedAt),"  ",m.addedBy]}),m.note?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Note: ",m.note]}):null]}),e.jsx(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:async()=>{try{await navigator.clipboard.writeText(m.name),n({title:"Copied",message:"Proof name copied.",kind:"success"})}catch{n({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},children:e.jsx(Ot,{className:"h-4 w-4"})})]})},m.id)),L.proofs.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No proofs yet."})]})})]}):null}),e.jsx(Ag,{open:M,title:"New booking",subtitle:"Coordinator booking on behalf. Purpose, tags, and policy enforcement are required.",onClose:()=>k(!1),actions:[{label:"Create",onClick:ne}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(wt,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(wt,{variant:"outline",onClick:()=>Y(m=>m>0?m-1:m),disabled:P===0,children:"Back"}),P<2?e.jsxs(wt,{variant:"primary",onClick:()=>Y(m=>m+1),children:["Next",e.jsx(ue,{className:"h-4 w-4"})]}):e.jsxs(wt,{variant:"primary",onClick:ne,children:[e.jsx(et,{className:"h-4 w-4"})," Create"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:[0,1,2].map(m=>e.jsx("button",{type:"button",className:Cs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",P===m?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:P===m?{background:Tu.green}:void 0,onClick:()=>Y(m),children:m===0?"Traveler":m===1?"Trip details":"Policy check"},m))}),P===0?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Wl,{label:"Traveler type",value:F.travelerType,onChange:m=>G(w=>{var oe,me;return{...w,travelerType:m,travelerId:m==="Employee"?((oe=o[0])==null?void 0:oe.id)||"":((me=d[0])==null?void 0:me.id)||""}}),options:[{value:"Employee",label:"Employee"},{value:"Visitor",label:"Visitor"}]}),e.jsx(Wl,{label:"Traveler",value:F.travelerId,onChange:m=>G(w=>({...w,travelerId:m})),options:(F.travelerType==="Employee"?o:d).map(m=>({value:m.id,label:m.name}))}),e.jsx(ul,{label:"Booked by",value:F.bookedBy,onChange:m=>G(w=>({...w,bookedBy:m})),placeholder:"Travel Coordinator"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"VIP"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Flag the booking as VIP handling."})]}),e.jsx("button",{type:"button",className:Cs("relative h-7 w-12 rounded-full border transition",F.vipRequested?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>G(m=>({...m,vipRequested:!m.vipRequested})),"aria-label":"Toggle VIP",children:e.jsx("span",{className:Cs("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",F.vipRequested?"left-[22px]":"left-1")})})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[Ee(F.travelerType,F.travelerId)?e.jsx(Ke,{label:"Traveler is VIP",tone:"info"}):e.jsx(Ke,{label:"Standard traveler",tone:"neutral"}),F.travelerType==="Visitor"?e.jsx(Ke,{label:`Host: ${Ue(F.travelerId)}`,tone:"neutral"}):null]})]})]}):null,P===1?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ul,{label:"Pickup",value:F.pickup,onChange:m=>G(w=>({...w,pickup:m})),placeholder:"Kampala HQ"}),e.jsx(ul,{label:"Drop-off",value:F.dropoff,onChange:m=>G(w=>({...w,dropoff:m})),placeholder:"Entebbe Airport"}),e.jsx(ul,{label:"Scheduled time",type:"datetime-local",value:F.scheduledAt,onChange:m=>G(w=>({...w,scheduledAt:m})),hint:"Local time"}),e.jsx(Wl,{label:"Ride category",value:F.category,onChange:m=>G(w=>({...w,category:m})),options:[{value:"Standard",label:"Standard"},{value:"Premium",label:"Premium"}]}),e.jsx(Wl,{label:"Purpose",value:F.purpose,onChange:m=>G(w=>({...w,purpose:m})),options:s.map(m=>({value:m,label:m}))}),e.jsx(ul,{label:"Tags",value:F.tags,onChange:m=>G(w=>({...w,tags:m})),placeholder:"Comma separated",hint:"Example: Airport,VIP,Event"}),e.jsx(ul,{label:"Cost center",value:F.costCenter,onChange:m=>G(w=>({...w,costCenter:m})),placeholder:"OPS-001"}),e.jsx(ul,{label:"Project tag",value:F.projectTag,onChange:m=>G(w=>({...w,projectTag:m})),placeholder:"Roadshow"}),e.jsx(Wl,{label:"Module",value:F.module,onChange:m=>G(w=>({...w,module:m})),options:[{value:"Rides & Logistics",label:"Rides & Logistics"},{value:"Travel & Tourism",label:"Travel & Tourism"},{value:"Other Service Module",label:"Other Service Module"}],hint:"Typically Rides & Logistics"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(bk,{label:"If purpose is Other",value:F.purposeOther,onChange:m=>G(w=>({...w,purposeOther:m})),placeholder:"Explain the purpose",rows:3,disabled:F.purpose!=="Other",hint:F.purpose!=="Other"?"Disabled":"Required when Other"})})]}):null,P===2?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Policy check"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"This preview shows why approval may be required."})]}),T.needsApproval?e.jsx(Ke,{label:"Approval required",tone:"warn"}):e.jsx(Ke,{label:"No approval",tone:"good"})]}),T.errors.length?e.jsxs("div",{className:"mt-3 rounded-2xl bg-rose-50 p-3 text-xs text-rose-800 ring-1 ring-rose-200",children:[e.jsx("div",{className:"font-semibold",children:"Missing"}),e.jsx("ul",{className:"mt-2 space-y-1",children:T.errors.map((m,w)=>e.jsxs("li",{children:[" ",m]},`err-${w}`))})]}):null,e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Scheduled"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:fn(T.scheduledAt)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["After-hours: ",T.afterHours?"Yes":"No"]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Category"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:F.category}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["VIP: ",T.tVip||F.vipRequested?"Yes":"No"]})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Flags"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[T.flags.length?T.flags.map((m,w)=>e.jsx(Ke,{label:m,tone:m.endsWith("required")?"bad":"neutral"},`flag-${w}`)):e.jsx(Ke,{label:"None",tone:"neutral"}),T.hasActiveVipException?e.jsx(Ke,{label:"VIP exception active",tone:"info"}):null]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"If approval is required, the booking will be created in Pending approval and routed to Manager then Finance, and optionally CFO for VIP or Premium."})]})}):null]})}),e.jsx(Ag,{open:ve,title:"Bulk travel plan",subtitle:"Premium: schedule many rides on behalf of employees.",onClose:()=>Te(!1),actions:[{label:"Create",onClick:X}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(wt,{variant:"outline",onClick:()=>Te(!1),children:"Cancel"}),e.jsxs(wt,{variant:"primary",onClick:X,children:[e.jsx(et,{className:"h-4 w-4"})," Create"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Wl,{label:"Event",value:ye.eventId,onChange:m=>ie(w=>({...w,eventId:m})),options:h.map(m=>({value:m.id,label:`${m.name} (${ud(m.startAt)})`}))}),e.jsx(Wl,{label:"Category",value:ye.category,onChange:m=>ie(w=>({...w,category:m})),options:[{value:"Standard",label:"Standard"},{value:"Premium",label:"Premium"}]}),e.jsx(ul,{label:"Pickup",value:ye.pickup,onChange:m=>ie(w=>({...w,pickup:m}))}),e.jsx(ul,{label:"Drop-off",value:ye.dropoff,onChange:m=>ie(w=>({...w,dropoff:m}))}),e.jsx(Sg,{label:"Minutes before event",value:ye.offsetMinsBeforeStart,onChange:m=>ie(w=>({...w,offsetMinsBeforeStart:Mx(m,0,240)})),hint:"Departure buffer"}),e.jsx(ul,{label:"Tags",value:ye.tags,onChange:m=>ie(w=>({...w,tags:m})),hint:"Comma separated"}),e.jsx(ul,{label:"Cost center",value:ye.costCenter,onChange:m=>ie(w=>({...w,costCenter:m}))}),e.jsx(ul,{label:"Project tag",value:ye.projectTag,onChange:m=>ie(w=>({...w,projectTag:m}))}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Hc,{enabled:ye.createReturn,onChange:m=>ie(w=>({...w,createReturn:m})),label:"Create return trips",description:"Generate return rides after the event ends."})}),e.jsx(ul,{label:"Return pickup",value:ye.returnPickup,onChange:m=>ie(w=>({...w,returnPickup:m})),disabled:!ye.createReturn}),e.jsx(ul,{label:"Return drop-off",value:ye.returnDropoff,onChange:m=>ie(w=>({...w,returnDropoff:m})),disabled:!ye.createReturn}),e.jsx(Sg,{label:"Minutes after event",value:ye.returnMinsAfterEnd,onChange:m=>ie(w=>({...w,returnMinsAfterEnd:Mx(m,0,240)})),disabled:!ye.createReturn}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Bulk booking uses the event manifest. If any generated booking violates policy (VIP, Premium, after-hours), an event-level approval request is created."})]})}),e.jsx(Ag,{open:Oe,title:"Request VIP exception",subtitle:"Premium: allow luxury rides or after-hours travel through approvals.",onClose:()=>Ae(!1),actions:[{label:"Submit",onClick:ae}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(wt,{variant:"outline",onClick:()=>Ae(!1),children:"Cancel"}),e.jsxs(wt,{variant:"primary",onClick:ae,children:[e.jsx(Tt,{className:"h-4 w-4"})," Submit"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Wl,{label:"Traveler type",value:ee.travelerType,onChange:m=>Ne(w=>{var oe,me;return{...w,travelerType:m,travelerId:m==="Employee"?((oe=o[0])==null?void 0:oe.id)||"":((me=d[0])==null?void 0:me.id)||""}}),options:[{value:"Employee",label:"Employee"},{value:"Visitor",label:"Visitor"}]}),e.jsx(Wl,{label:"Traveler",value:ee.travelerId,onChange:m=>Ne(w=>({...w,travelerId:m})),options:(ee.travelerType==="Employee"?o:d).map(m=>({value:m.id,label:m.name}))}),e.jsx(Wl,{label:"Exception type",value:ee.exceptionType,onChange:m=>Ne(w=>({...w,exceptionType:m})),options:[{value:"Premium rides",label:"Premium rides"},{value:"After-hours",label:"After-hours"}]}),e.jsx(Sg,{label:"Valid days",value:ee.validDays,onChange:m=>Ne(w=>({...w,validDays:Mx(m,1,365)})),hint:"1 to 365"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(bk,{label:"Reason",value:ee.reason,onChange:m=>Ne(w=>({...w,reason:m})),placeholder:"Explain the business justification",rows:4})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Executive approval chain templates (CFO/CEO) can be applied for VIP exceptions in your workflow builder."})]})})]});function R({title:m,value:w,sub:oe,icon:me,tone:Me}){const Ve=Me==="good"?"bg-emerald-50 text-emerald-700":Me==="warn"?"bg-amber-50 text-amber-800":Me==="bad"?"bg-rose-50 text-rose-700":Me==="info"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:m}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:w}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:oe})]}),e.jsx("div",{className:Cs("grid h-10 w-10 place-items-center rounded-2xl",Ve),children:me})]})})}function se({title:m,detail:w,cta:oe,onClick:me}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:m}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:w})]}),e.jsxs(wt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:me,children:[e.jsx(ue,{className:"h-4 w-4"})," ",oe]})]})})}}const mm={green:"#03CD8C",orange:"#F77F00"};function hl(...t){return t.filter(Boolean).join(" ")}function eo(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function yk(t,s,a){return Math.max(s,Math.min(a,t))}function Yc(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function ns(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function Nk(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function wk(t,s){const a=r=>{const i=String(r??"");return/[",\n]/.test(i)?`"${i.replace(/"/g,'""')}"`:i},l=s.map(r=>a(r.label)).join(","),n=t.map(r=>s.map(i=>a(r[i.key])).join(",")).join(`
`);return`${l}
${n}`}function Tx(t,s,a="text/plain"){const l=new Blob([s],{type:a}),n=URL.createObjectURL(l),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function WV(t){let s=t>>>0;return()=>(s=s*1664525+1013904223>>>0,s/4294967296)}function tt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:hl("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function $t({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:mm.green}:t==="accent"?{background:mm.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:hl(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function ps({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:hl(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:hl("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function md({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:hl(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:hl("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function HV({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:hl("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function kk({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1040px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(HV,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function KV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:hl("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function es({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function ea({title:t,value:s,sub:a,icon:l,tone:n="neutral"}){const r=n==="good"?"bg-emerald-50 text-emerald-700":n==="warn"?"bg-amber-50 text-amber-800":n==="bad"?"bg-rose-50 text-rose-700":n==="info"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:t}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a})]}),e.jsx("div",{className:hl("grid h-10 w-10 place-items-center rounded-2xl",r),children:l})]})})}function Pg({label:t,value:s,total:a,right:l}){const n=a>0?Math.round(s/a*100):0;return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:t}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[n,"% share"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:l??ns(s)})})]}),e.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,n)}%`,background:mm.green}})})]})}function XV(t){if(!t.length)return 0;const s=t.slice().sort((l,n)=>l-n),a=Math.floor(s.length/2);return s.length%2?s[a]:(s[a-1]+s[a])/2}function Ck(t,s,a){const l=new Date,n=l.getTime(),r=new Date(l.getFullYear(),0,1).getTime(),i=24*60*60*1e3;if(t==="7d")return{start:n-7*i,end:n};if(t==="30d")return{start:n-30*i,end:n};if(t==="90d")return{start:n-90*i,end:n};if(t==="YTD")return{start:r,end:n};const o=s?new Date(s).getTime():n-30*i,d=a?new Date(a).getTime()+(24*60*60*1e3-1):n;return{start:Number.isFinite(o)?o:n-30*i,end:Number.isFinite(d)?d:n}}function li(t,s){switch(s){case"Group":return t.group;case"Cost center":return t.costCenter;case"Module":return t.module;case"Marketplace":return t.marketplace||"-";case"Vendor":return t.vendor;case"Requester":return t.requesterName;case"Risk":return t.risk;default:return"-"}}function Rx(t){return t>=7&&t<=9||t>=17&&t<=20}function $A(){const t=c.useMemo(()=>[{id:"U-1001",name:"Mary N.",group:"Operations",costCenter:"OPS-001"},{id:"U-1002",name:"John S.",group:"Sales",costCenter:"SALES-TRAVEL"},{id:"U-1003",name:"Irene K.",group:"Operations",costCenter:"OPS-001"},{id:"U-1004",name:"Daisy O.",group:"Finance",costCenter:"FIN-OPS"},{id:"U-1005",name:"Procurement Desk",group:"Procurement",costCenter:"PROC-001"}],[]);c.useMemo(()=>["EVzone Rides","EVzone Charging","Kampala Office Mart","Shenzhen Store","Shenzhen Tech","ServicePro","Express CN","Hotel Partner","Airline Partner"],[]);const s=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],a=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"],[l,n]=c.useState([]),r=E=>{const J=eo("toast");n(g=>[{id:J,...E},...g].slice(0,4)),window.setTimeout(()=>n(g=>g.filter(H=>H.id!==J)),3200)},i=c.useMemo(()=>{const E=WV(1337),J=Date.now(),g=24*60*60*1e3,H=[],N=[],U=de=>{const Se=de.reduce((pt,ht)=>pt+ht.w,0);let We=E()*Se;for(const pt of de)if(We-=pt.w,We<=0)return pt.item;return de[de.length-1].item},ce=de=>de==="Ride"?"Rides & Logistics":de==="Charging"?"EVs & Charging":"E-Commerce",O=()=>U([{item:"EVmart",w:1.1},{item:"GadgetMart",w:.9},{item:"LivingMart",w:.6},{item:"ServiceMart",w:.8},{item:"MyLiveDealz",w:.9},{item:"ExpressMart",w:.5}]),je=(de,Se)=>de==="Ride"?"EVzone Rides":de==="Charging"?"EVzone Charging":Se==="MyLiveDealz"?"Shenzhen Store":Se==="GadgetMart"?"Shenzhen Tech":Se==="ExpressMart"?"Express CN":Se==="ServiceMart"?"ServicePro":"Kampala Office Mart",we=(de,Se,We=0)=>Se==="MyLiveDealz"?"High":Se==="ExpressMart"||de==="Charging"&&We>18e4?"Medium":"Low",Xe=(de,Se)=>de==="Ride"?U([{item:["Client"],w:1},{item:["Airport"],w:.6},{item:["Commute"],w:.8}]):de==="Charging"?U([{item:["Depot"],w:1},{item:["Commute"],w:.7},{item:["Emergency"],w:.2}]):Se==="MyLiveDealz"?["Deal","Promo"]:Se==="ServiceMart"?["Service","Booking"]:["Procurement"],Ie=de=>{const Se=de.ts-Math.floor((E()*90+10)*6e4),We=Math.floor(E()*240+10),pt=Se+We*6e4,ht=de.amountUGX<=2e5?"Auto-approved":E()<.88?"Approved":"Rejected",ra=de.amountUGX>1e6?24:12,St=de.amountUGX>1e6?"CFO":de.risk==="High"?"Finance Desk":"Manager";return{id:eo("APR"),requestedAt:Se,decidedAt:pt,module:de.module,marketplace:de.marketplace,requesterId:de.requesterId,requesterName:de.requesterName,approver:St,outcome:ht,amountUGX:de.amountUGX,reason:de.risk==="High"?"High risk marketplace":"Above threshold",slaHours:ra}};for(let de=0;de<90;de++){const Se=J-de*g,pt=1+Math.floor(E()*3)+Math.floor(E()*3);for(let St=0;St<pt;St++){const At=U([{item:t[0],w:1},{item:t[1],w:1},{item:t[2],w:.8},{item:t[4],w:.4}]),ys=Math.floor(E()*24),dn=Se-Math.floor(E()*4*60*60*1e3)+ys*60*60*1e3,ur=Math.round(45e3+E()*18e4),mr={id:eo("TX"),ts:dn,type:"Ride",module:ce("Ride"),vendor:je("Ride"),requesterId:At.id,requesterName:At.name,group:At.group,costCenter:At.costCenter,amountUGX:ur,currency:"UGX",risk:we("Ride",void 0,ur),approved:!0,tags:Xe("Ride")};if(ur>2e5||E()<.08){const ol=Ie(mr);N.push(ol),mr.approvalId=ol.id,mr.approved=ol.outcome!=="Rejected"}H.push(mr)}const ht=Math.floor(E()*2);for(let St=0;St<ht;St++){const At=U([{item:t[0],w:.8},{item:t[2],w:1},{item:t[1],w:.6}]),ys=U([{item:8,w:1.1},{item:18,w:1},{item:Math.floor(E()*24),w:.7}]),dn=Se+ys*60*60*1e3+Math.floor(E()*40)*6e4,ur=12+E()*55,mr=Rx(ys)?1350:1050,cn=Math.round(ur*mr),ol={id:eo("TX"),ts:dn,type:"Charging",module:ce("Charging"),vendor:je("Charging"),requesterId:At.id,requesterName:At.name,group:At.group,costCenter:At.costCenter,amountUGX:cn,currency:"UGX",risk:we("Charging",void 0,cn),approved:!0,tags:Xe("Charging")};if(cn>2e5||Rx(ys)||E()<.05){const Lo=Ie(ol);N.push(Lo),ol.approvalId=Lo.id,ol.approved=Lo.outcome!=="Rejected"}H.push(ol)}const ra=Math.floor(E()*3);for(let St=0;St<ra;St++){const At=U([{item:t[4],w:1.2},{item:t[0],w:.7},{item:t[1],w:.7}]),ys=O(),dn=Math.floor(E()*24),ur=Se+dn*60*60*1e3+Math.floor(E()*50)*6e4,mr=ys==="MyLiveDealz"?18e4+E()*32e5:7e4+E()*12e5,cn=Math.round(mr),ol=ys==="ServiceMart"?"Service":"Purchase",Ui={id:eo("TX"),ts:ur,type:ol,module:"E-Commerce",marketplace:ys,vendor:je(ol,ys),requesterId:At.id,requesterName:At.name,group:At.group,costCenter:At.costCenter,amountUGX:cn,currency:"UGX",risk:we(ol,ys,cn),approved:!0,tags:Xe(ol,ys)};if(cn>25e4||Ui.risk==="High"||E()<.08){const T0=Ie(Ui);N.push(T0),Ui.approvalId=T0.id,Ui.approved=T0.outcome!=="Rejected"}H.push(Ui)}}const v=H.slice().sort((de,Se)=>Se.ts-de.ts).slice(0,900),Q=N.slice().sort((de,Se)=>Se.requestedAt-de.requestedAt).slice(0,500);return{txs:v,approvals:Q}},[t]),[o,d]=c.useState("overview"),[u,x]=c.useState("30d"),[p,h]=c.useState(new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10)),[j,y]=c.useState(new Date().toISOString().slice(0,10)),[f,I]=c.useState("All"),[A,b]=c.useState("All"),[C,S]=c.useState("All"),[z,$]=c.useState("All"),[D,W]=c.useState("All"),[he,V]=c.useState("All"),[xe,pe]=c.useState("All"),[be,fe]=c.useState(""),K=["Group","Cost center","Module","Marketplace","Vendor","Requester","Risk"],[re,q]=c.useState("Module"),[L,M]=c.useState("None"),[k,P]=c.useState("Spend"),[Y,F]=c.useState(()=>[{id:"RPT-001",name:"Spend by module (30d)",timeRange:"30d",dimensionA:"Module",metric:"Spend",filters:{module:"All",marketplace:"All",group:"All",costCenter:"All",vendor:"All",requester:"All",risk:"All"},createdAt:Date.now()-2*24*60*60*1e3},{id:"RPT-002",name:"Spend by vendor (90d)",timeRange:"90d",dimensionA:"Vendor",metric:"Spend",filters:{module:"All",marketplace:"All",group:"All",costCenter:"All",vendor:"All",requester:"All",risk:"All"},createdAt:Date.now()-5*24*60*60*1e3}]),[G,ve]=c.useState(()=>[{id:"SCH-001",reportId:"RPT-001",enabled:!0,frequency:"Weekly",hourLocal:9,dayOfWeek:"Mon",recipients:"finance@acme.com, ap@acme.com",channels:{email:!0,whatsapp:!1,wechat:!1,sms:!1},formats:{csv:!0,pdf:!0,json:!1},lastRunAt:Date.now()-2*24*60*60*1e3,lastStatus:"Success"}]),[Te,ye]=c.useState(!1),[ie,Oe]=c.useState(()=>({id:"",name:"",timeRange:"30d",customFrom:new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10),customTo:new Date().toISOString().slice(0,10),dimensionA:"Module",dimensionB:void 0,metric:"Spend",filters:{module:"All",marketplace:"All",group:"All",costCenter:"All",vendor:"All",requester:"All",risk:"All"},createdAt:Date.now()})),[Ae,ee]=c.useState(!1),[Ne,Ce]=c.useState(()=>({id:"",reportId:"RPT-001",enabled:!0,frequency:"Weekly",hourLocal:9,dayOfWeek:"Mon",dayOfMonth:1,recipients:"finance@acme.com",channels:{email:!0,whatsapp:!0,wechat:!1,sms:!1},formats:{csv:!0,pdf:!0,json:!1}})),Ee=c.useMemo(()=>Ck(u,p,j),[u,p,j]),Ue=i.txs,Ye=i.approvals,De=c.useMemo(()=>{const E=be.trim().toLowerCase();return Ue.filter(J=>J.ts>=Ee.start&&J.ts<=Ee.end).filter(J=>f==="All"?!0:J.module===f).filter(J=>A==="All"?!0:(J.marketplace||"-")===A).filter(J=>C==="All"?!0:J.group===C).filter(J=>z==="All"?!0:J.costCenter===z).filter(J=>D==="All"?!0:J.vendor===D).filter(J=>he==="All"?!0:J.requesterName===he).filter(J=>xe==="All"?!0:J.risk===xe).filter(J=>E?`${J.id} ${J.type} ${J.module} ${J.marketplace||""} ${J.vendor} ${J.requesterName} ${J.group} ${J.costCenter} ${J.risk} ${J.tags.join(" ")}`.toLowerCase().includes(E):!0).slice().sort((J,g)=>g.ts-J.ts)},[Ue,Ee.start,Ee.end,f,A,C,z,D,he,xe,be]),Be=c.useMemo(()=>Ye.filter(E=>E.requestedAt>=Ee.start&&E.requestedAt<=Ee.end).filter(E=>f==="All"?!0:E.module===f).filter(E=>A==="All"?!0:(E.marketplace||"-")===A).filter(E=>he==="All"?!0:E.requesterName===he).slice().sort((E,J)=>J.requestedAt-E.requestedAt),[Ye,Ee.start,Ee.end,f,A,he]);c.useMemo(()=>De.reduce((E,J)=>E+(J.approved?J.amountUGX:0),0),[De]);const $e=De.length,_=c.useMemo(()=>De.filter(E=>E.approved).reduce((E,J)=>E+J.amountUGX,0),[De]),te=c.useMemo(()=>De.filter(E=>!E.approved).reduce((E,J)=>E+J.amountUGX,0),[De]);c.useMemo(()=>Be.filter(E=>E.outcome!=="Auto-approved"&&E.outcome!=="Approved"&&E.outcome!=="Rejected").length,[Be]);const Re=c.useMemo(()=>{const E=new Map;return De.forEach(J=>{const g=J.module,H=E.get(g)||{spend:0,count:0};E.set(g,{spend:H.spend+(J.approved?J.amountUGX:0),count:H.count+1})}),Array.from(E.entries()).map(([J,g])=>({key:J,...g})).sort((J,g)=>g.spend-J.spend)},[De]),Fe=c.useMemo(()=>{const E=new Map;return De.forEach(J=>{J.approved&&E.set(J.vendor,(E.get(J.vendor)||0)+J.amountUGX)}),Array.from(E.entries()).map(([J,g])=>({vendor:J,spend:g})).sort((J,g)=>g.spend-J.spend).slice(0,6)},[De]),T=c.useMemo(()=>{const E=Be.map(O=>Math.max(1,Math.round((O.decidedAt-O.requestedAt)/6e4))),J=E.length?Math.round(E.reduce((O,je)=>O+je,0)/E.length):0,g=Math.round(XV(E)),H=Be.filter(O=>(O.decidedAt-O.requestedAt)/36e5>O.slaHours).length,N=Be.filter(O=>O.outcome==="Auto-approved").length,U=Be.filter(O=>O.outcome==="Approved").length,ce=Be.filter(O=>O.outcome==="Rejected").length;return{avgMins:J,medMins:g,breaches:H,auto:N,approved:U,rejected:ce,total:Be.length}},[Be]),Z=c.useMemo(()=>{const E=new Map;return Be.forEach(J=>{const g=J.module,H=E.get(g)||{total:0,avgMins:0,ok:0,rejected:0,breach:0},N=Math.max(1,Math.round((J.decidedAt-J.requestedAt)/6e4)),U=H.total+1,ce=Math.round((H.avgMins*H.total+N)/U),O=(J.decidedAt-J.requestedAt)/36e5>J.slaHours?1:0;E.set(g,{total:U,avgMins:ce,ok:H.ok+(J.outcome==="Approved"||J.outcome==="Auto-approved"?1:0),rejected:H.rejected+(J.outcome==="Rejected"?1:0),breach:H.breach+O})}),Array.from(E.entries()).map(([J,g])=>({module:J,...g,approvalRate:g.total?Math.round(g.ok/g.total*100):100})).sort((J,g)=>g.total-J.total)},[Be]),B=c.useMemo(()=>{const E=re,J=L==="None"?null:L,g=new Map;De.forEach(U=>{const ce=li(U,E),O=g.get(ce)||{spend:0,count:0};g.set(ce,{spend:O.spend+(U.approved?U.amountUGX:0),count:O.count+1})});const H=Array.from(g.entries()).map(([U,ce])=>({key:U,...ce,avg:ce.count?Math.round(ce.spend/ce.count):0})).sort((U,ce)=>k==="Transactions"?ce.count-U.count:k==="Avg transaction"?ce.avg-U.avg:ce.spend-U.spend);let N=null;if(J){const U=new Map;De.forEach(Ie=>{if(!Ie.approved)return;const v=li(Ie,J);U.set(v,(U.get(v)||0)+Ie.amountUGX)});const ce=Array.from(U.entries()).sort((Ie,v)=>v[1]-Ie[1]).slice(0,6).map(([Ie])=>Ie),O=new Map,je=new Map;De.forEach(Ie=>{if(!Ie.approved)return;const v=li(Ie,E),Q=li(Ie,J),de=ce.includes(Q)?Q:"Other",Se=O.get(v)||{};Se[de]=(Se[de]||0)+Ie.amountUGX,O.set(v,Se),je.set(v,(je.get(v)||0)+Ie.amountUGX)});const we=[...ce,"Other"].filter((Ie,v,Q)=>Ie!=="Other"?!0:Array.from(O.values()).some(Se=>(Se.Other||0)>0)),Xe=Array.from(O.entries()).map(([Ie,v])=>({rowKey:Ie,cells:v,total:je.get(Ie)||0})).sort((Ie,v)=>v.total-Ie.total).slice(0,12);N={columns:we,rows:Xe}}return{rowsA:H,pivot:N}},[De,re,L,k]),ne=c.useMemo(()=>{const J=Ee.end,g={start:J-7*864e5,end:J},H={start:J-14*864e5,end:J-7*864e5},N=(Q,de)=>Q.ts>=de.start&&Q.ts<de.end&&Q.approved,U=Q=>{const de=new Map;return Ue.forEach(Se=>{N(Se,Q)&&de.set(Se.vendor,(de.get(Se.vendor)||0)+Se.amountUGX)}),de},ce=U(g),O=U(H),je=Array.from(ce.entries()).map(([Q,de])=>({kind:"Unusual vendor spend",vendor:Q,last7:de,prev7:O.get(Q)||0})).filter(Q=>Q.last7>=7e5&&Q.prev7>0&&Q.last7>Q.prev7*2).sort((Q,de)=>de.last7-Q.last7).slice(0,6),we=Ue.filter(Q=>Q.approved).filter(Q=>{const de=new Date(Q.ts).getHours();return de<6||de>22}).filter(Q=>Q.ts>=Ee.start&&Q.ts<=Ee.end).slice(0,10),Xe=(()=>{const Q=De.filter(We=>We.approved).reduce((We,pt)=>We+pt.amountUGX,0),de=De.filter(We=>We.approved&&We.risk==="High").reduce((We,pt)=>We+pt.amountUGX,0),Se=Q?Math.round(de/Q*100):0;return{spend:Q,high:de,pct:Se}})(),Ie=(()=>{const Q=De.filter(Se=>Se.approved&&Se.type==="Charging"),de=Q.filter(Se=>{const We=new Date(Se.ts).getHours();return Rx(We)});return{total:Q.length,peak:de.length,pct:Q.length?Math.round(de.length/Q.length*100):0}})(),v=Be.filter(Q=>Q.amountUGX<=2e5&&Q.outcome==="Approved").length;return{vendorSpikes:je,afterHours:we,highRiskShare:Xe,chargingPeak:Ie,lowAmountApprovals:v}},[Ue,De,Be,Ee.start,Ee.end]),X=c.useMemo(()=>{const E=new Map;De.filter(je=>je.approved).forEach(je=>{const we=je.module,Xe=E.get(we)||{spend:0,vendors:new Map};Xe.spend+=je.amountUGX,Xe.vendors.set(je.vendor,(Xe.vendors.get(je.vendor)||0)+je.amountUGX),E.set(we,Xe)});const J=Array.from(E.entries()).map(([je,we])=>{var Q,de;const Xe=Array.from(we.vendors.entries()).sort((Se,We)=>We[1]-Se[1]),Ie=((Q=Xe[0])==null?void 0:Q[1])||0,v=we.spend?Math.round(Ie/we.spend*100):0;return{module:je,totalSpend:we.spend,vendorCount:Xe.length,topVendor:((de=Xe[0])==null?void 0:de[0])||"-",topShare:v}}).filter(je=>je.totalSpend>=15e5&&je.vendorCount>=3&&je.topShare<=70).sort((je,we)=>we.totalSpend-je.totalSpend).slice(0,6),g=Be.filter(je=>je.outcome==="Approved"&&je.amountUGX<=2e5).length,H=Be.length,N=H?Math.round(g/H*100):0,U=De.filter(je=>je.approved&&je.type==="Charging"),ce=U.filter(je=>Rx(new Date(je.ts).getHours())),O=U.length?Math.round(ce.length/U.length*100):0;return{vendorConsolidation:J,policy:{smallApprovals:g,totalApprovals:H,smallPct:N},charging:{total:U.length,peak:ce.length,peakPct:O}}},[De,Be]),ge=c.useMemo(()=>Array.from(new Set(Ue.map(E=>E.costCenter))).sort(),[Ue]),Le=c.useMemo(()=>Array.from(new Set(Ue.map(E=>E.vendor))).sort(),[Ue]),ae=c.useMemo(()=>Array.from(new Set(Ue.map(E=>E.requesterName))).sort(),[Ue]),le=()=>{const E=De.map(g=>({ts:Yc(g.ts),id:g.id,type:g.type,module:g.module,marketplace:g.marketplace||"-",vendor:g.vendor,requester:g.requesterName,group:g.group,costCenter:g.costCenter,amountUGX:g.amountUGX,risk:g.risk,approved:g.approved?"Yes":"No",approvalId:g.approvalId||"-",tags:g.tags.join(";")})),J=wk(E,[{key:"ts",label:"Time"},{key:"id",label:"Transaction ID"},{key:"type",label:"Type"},{key:"module",label:"Module"},{key:"marketplace",label:"Marketplace"},{key:"vendor",label:"Vendor"},{key:"requester",label:"Requester"},{key:"group",label:"Group"},{key:"costCenter",label:"Cost center"},{key:"amountUGX",label:"Amount (UGX)"},{key:"risk",label:"Risk"},{key:"approved",label:"Approved"},{key:"approvalId",label:"Approval ID"},{key:"tags",label:"Tags"}]);Tx("transactions.csv",J,"text/csv"),r({title:"Exported",message:"Transactions CSV downloaded.",kind:"success"})},R=()=>{const E=B.rowsA.map(g=>({dimension:g.key,spendUGX:g.spend,transactions:g.count,avgUGX:g.avg})),J=wk(E,[{key:"dimension",label:re},{key:"spendUGX",label:"Spend (UGX)"},{key:"transactions",label:"Transactions"},{key:"avgUGX",label:"Avg (UGX)"}]);Tx("report-aggregate.csv",J,"text/csv"),r({title:"Exported",message:"Aggregate CSV downloaded.",kind:"success"})},se=()=>{const E={filters:{timeRange:u,customFrom:p,customTo:j,moduleFilter:f,marketplaceFilter:A,groupFilter:C,costCenterFilter:z,vendorFilter:D,requesterFilter:he,riskFilter:xe,q:be},totals:{approvedSpend:_,rejectedSpend:te,txCount:$e,approvalCount:Be.length},transactions:De,approvals:Be,generatedAt:new Date().toISOString()};Tx("report.json",JSON.stringify(E,null,2),"application/json"),r({title:"Exported",message:"JSON downloaded.",kind:"success"})},m=()=>{const E=`
      <html>
        <head>
          <title>CorporatePay Report</title>
          <style>
            body{font-family: ui-sans-serif, system-ui; padding:24px;}
            .muted{color:#64748b;font-size:12px}
            h2{margin:0}
            .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:16px}
            .card{border:1px solid #e2e8f0;border-radius:16px;padding:12px}
            table{width:100%; border-collapse:collapse; margin-top:16px}
            th,td{border:1px solid #e2e8f0; padding:10px; font-size:12px}
            th{background:#f8fafc; text-align:left}
          </style>
        </head>
        <body>
          <h2>CorporatePay Reporting & Analytics</h2>
          <div class="muted">Time range: ${u}${u==="Custom"?` (${p} to ${j})`:""}  Generated: ${new Date().toLocaleString()}</div>
          <div class="grid">
            <div class="card"><div class="muted">Approved spend</div><div style="font-size:20px;font-weight:700">${ns(_)}</div></div>
            <div class="card"><div class="muted">Transactions</div><div style="font-size:20px;font-weight:700">${$e}</div></div>
            <div class="card"><div class="muted">Approvals</div><div style="font-size:20px;font-weight:700">${Be.length}</div></div>
          </div>

          <h3 style="margin-top:18px">Top vendors</h3>
          <table>
            <thead><tr><th>Vendor</th><th>Spend</th></tr></thead>
            <tbody>
              ${Fe.map(g=>`<tr><td>${g.vendor}</td><td>${ns(g.spend)}</td></tr>`).join("")}
            </tbody>
          </table>

          <div class="muted" style="margin-top:18px">Tip: Use browser Print  Save as PDF.</div>
        </body>
      </html>
    `,J=window.open("","_blank");if(!J){r({title:"Popup blocked",message:"Allow popups to export PDF via Print.",kind:"warn"});return}J.document.open(),J.document.write(E),J.document.close(),J.focus(),J.print(),r({title:"Print ready",message:"Use Print to PDF to save.",kind:"info"})},w=c.useMemo(()=>{const E=Ck(ie.timeRange,ie.customFrom,ie.customTo),J=ie.filters,g=Ue.filter(we=>we.ts>=E.start&&we.ts<=E.end).filter(we=>J.module&&J.module!=="All"?we.module===J.module:!0).filter(we=>J.marketplace&&J.marketplace!=="All"?(we.marketplace||"-")===J.marketplace:!0).filter(we=>J.group&&J.group!=="All"?we.group===J.group:!0).filter(we=>J.costCenter&&J.costCenter!=="All"?we.costCenter===J.costCenter:!0).filter(we=>J.vendor&&J.vendor!=="All"?we.vendor===J.vendor:!0).filter(we=>J.requester&&J.requester!=="All"?we.requesterName===J.requester:!0).filter(we=>J.risk&&J.risk!=="All"?we.risk===J.risk:!0).filter(we=>we.approved),H=ie.dimensionA,N=ie.dimensionB,U=new Map;g.forEach(we=>{const Xe=li(we,H),Ie=U.get(Xe)||{spend:0,count:0};U.set(Xe,{spend:Ie.spend+we.amountUGX,count:Ie.count+1})});const ce=Array.from(U.entries()).map(([we,Xe])=>({key:we,spend:Xe.spend,count:Xe.count,avg:Xe.count?Math.round(Xe.spend/Xe.count):0})).sort((we,Xe)=>Xe.spend-we.spend).slice(0,12);let O=null;if(N){const we=new Map;g.forEach(Se=>{const We=li(Se,N);we.set(We,(we.get(We)||0)+Se.amountUGX)});const Xe=Array.from(we.entries()).sort((Se,We)=>We[1]-Se[1]).slice(0,5).map(([Se])=>Se),Ie=new Map,v=new Map;g.forEach(Se=>{const We=li(Se,H),pt=li(Se,N),ht=Xe.includes(pt)?pt:"Other",ra=Ie.get(We)||{};ra[ht]=(ra[ht]||0)+Se.amountUGX,Ie.set(We,ra),v.set(We,(v.get(We)||0)+Se.amountUGX)});const Q=[...Xe,"Other"].filter(Se=>Se!=="Other"?!0:Array.from(Ie.values()).some(We=>(We.Other||0)>0)),de=Array.from(Ie.entries()).map(([Se,We])=>({rowKey:Se,cells:We,total:v.get(Se)||0})).sort((Se,We)=>We.total-Se.total).slice(0,10);O={columns:Q,rows:de}}const je={spend:g.reduce((we,Xe)=>we+Xe.amountUGX,0),count:g.length};return{rows:ce,pivot:O,totalsAll:je}},[ie,Ue]),oe=()=>{if(ie.name.trim().length<3){r({title:"Name required",message:"Enter a report name.",kind:"warn"});return}const E=!ie.id,J=ie.id||eo("RPT"),g={...ie,id:J,createdAt:E?Date.now():ie.createdAt};F(H=>{const N=H.findIndex(ce=>ce.id===J),U=H.slice();return N>=0?U[N]=g:U.unshift(g),U}),r({title:"Saved",message:"Report saved.",kind:"success"}),ye(!1),d("schedules")},me=()=>{if(!Y.find(H=>H.id===Ne.reportId)){r({title:"Select report",message:"Choose a report to schedule.",kind:"warn"});return}if(Ne.recipients.trim().length<3){r({title:"Recipients required",message:"Enter recipients emails or numbers.",kind:"warn"});return}const J=Ne.id||eo("SCH"),g={...Ne,id:J,enabled:!0};ve(H=>{const N=H.findIndex(ce=>ce.id===J),U=H.slice();return N>=0?U[N]=g:U.unshift(g),U}),r({title:"Scheduled",message:"Report schedule saved.",kind:"success"}),ee(!1)},Me=E=>{ve(J=>J.map(g=>g.id===E?{...g,lastRunAt:Date.now(),lastStatus:Math.random()<.92?"Success":"Failed"}:g)),r({title:"Triggered",message:"Schedule run triggered (demo).",kind:"info"})},Ve="PDF export uses Print to PDF.";return e.jsxs("div",{className:"min-h-screen bg-slate-50 transition-colors dark:bg-slate-950",children:[e.jsx(KV,{toasts:l,onDismiss:E=>n(J=>J.filter(g=>g.id!==E))}),e.jsx("div",{className:"px-4 py-6 md:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white transition-colors dark:bg-slate-900",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 transition-colors md:px-6 dark:border-slate-800 dark:bg-slate-900",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:mm.green},children:e.jsx(Tr,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Reporting & Analytics"}),e.jsx("div",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:"Spend breakdowns, approvals, anomalies, and scheduled reports"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(tt,{label:`Approved spend: ${ns(_)}`,tone:"good"}),e.jsx(tt,{label:`Rejected: ${ns(te)}`,tone:te?"warn":"good"}),e.jsx(tt,{label:`Tx: ${$e}`,tone:"neutral"}),e.jsx(tt,{label:`Approvals: ${Be.length}`,tone:Be.length?"info":"neutral"}),e.jsx(tt,{label:Ve,tone:"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs($t,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs($t,{variant:"outline",onClick:se,children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs($t,{variant:"outline",onClick:m,title:Ve,children:[e.jsx(jt,{className:"h-4 w-4"})," Export PDF"]}),e.jsxs($t,{variant:"accent",onClick:()=>{Oe({id:"",name:"",timeRange:u,customFrom:p,customTo:j,dimensionA:"Module",dimensionB:void 0,metric:"Spend",filters:{module:"All",marketplace:"All",group:"All",costCenter:"All",vendor:"All",requester:"All",risk:"All"},createdAt:Date.now()}),ye(!0)},children:[e.jsx(kb,{className:"h-4 w-4"})," Build report"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"spend",label:"Spend explorer"},{id:"approvals",label:"Approvals"},{id:"anomalies",label:"Anomalies"},{id:"savings",label:"Savings"},{id:"builder",label:"Custom builder"},{id:"schedules",label:"Schedules"}].map(E=>e.jsx("button",{className:hl("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",o===E.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:o===E.id?{background:mm.green}:void 0,onClick:()=>d(E.id),children:E.label},E.id))}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 rounded-2xl border border-slate-200 bg-slate-50 p-4 transition-colors md:grid-cols-12 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(ps,{label:"Time range",value:u,onChange:E=>x(E),options:[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"YTD",label:"Year to date"},{value:"Custom",label:"Custom"}]})}),e.jsx("div",{className:hl("md:col-span-2",u!=="Custom"&&"opacity-60"),children:e.jsx(md,{label:"From",type:"date",value:p,onChange:h,disabled:u!=="Custom"})}),e.jsx("div",{className:hl("md:col-span-2",u!=="Custom"&&"opacity-60"),children:e.jsx(md,{label:"To",type:"date",value:j,onChange:y,disabled:u!=="Custom"})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx(ps,{label:"Module",value:f,onChange:E=>I(E),options:[{value:"All",label:"All"},...s.map(E=>({value:E,label:E}))]})}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-2.5 dark:border-slate-700 dark:bg-slate-800",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:be,onChange:E=>fe(E.target.value),placeholder:"vendor, tag...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400 dark:text-white"}),be?e.jsx("button",{className:"rounded-xl p-1 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700",onClick:()=>fe(""),"aria-label":"Clear",children:e.jsx(_e,{className:"h-4 w-4"})}):null]})]}),e.jsxs("div",{className:"md:col-span-12 grid grid-cols-1 gap-3 md:grid-cols-6",children:[e.jsx(ps,{label:"Marketplace",value:A,onChange:E=>b(E),options:[{value:"All",label:"All"},...a.map(E=>({value:E,label:E}))],hint:"E-Commerce",disabled:f!=="All"&&f!=="E-Commerce"}),e.jsx(ps,{label:"Group",value:C,onChange:E=>S(E),options:[{value:"All",label:"All"},...["Operations","Sales","Finance","Admin","Procurement"].map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Cost center",value:z,onChange:$,options:[{value:"All",label:"All"},...ge.map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Vendor",value:D,onChange:W,options:[{value:"All",label:"All"},...Le.map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Requester",value:he,onChange:V,options:[{value:"All",label:"All"},...ae.map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Risk",value:xe,onChange:E=>pe(E),options:[{value:"All",label:"All"},{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"}]})]}),e.jsxs("div",{className:"md:col-span-12 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Showing ",e.jsx("span",{className:"font-semibold text-slate-900",children:De.length})," transactions and ",e.jsx("span",{className:"font-semibold text-slate-900",children:Be.length})," approvals in this time range."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs($t,{variant:"outline",onClick:()=>{b("All"),S("All"),$("All"),W("All"),V("All"),pe("All"),fe(""),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs($t,{variant:"outline",onClick:R,children:[e.jsx(ct,{className:"h-4 w-4"})," Export aggregate"]})]})]})]})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[o==="overview"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsxs(es,{title:"KPIs",subtitle:"High-level performance and spend signals.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(ea,{title:"Approved spend",value:ns(_),sub:"Within selected range",icon:e.jsx(Tr,{className:"h-5 w-5"}),tone:"good"}),e.jsx(ea,{title:"Transactions",value:`${$e}`,sub:"All events",icon:e.jsx(im,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(ea,{title:"Approvals",value:`${T.total}`,sub:`Avg ${T.avgMins}m  Median ${T.medMins}m`,icon:e.jsx(pa,{className:"h-5 w-5"}),tone:T.breaches?"warn":"good"}),e.jsx(ea,{title:"SLA breaches",value:`${T.breaches}`,sub:"Approval SLA",icon:e.jsx(at,{className:"h-5 w-5"}),tone:T.breaches?"bad":"good"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(es,{title:"Spend by module",subtitle:"Top modules by approved spend.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[Re.slice(0,8).map(E=>e.jsx(Pg,{label:E.key,value:E.spend,total:_,right:ns(E.spend)},E.key)),Re.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No data."})]})}),e.jsxs(es,{title:"Top vendors",subtitle:"Where most money goes.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"space-y-2",children:[Fe.map(E=>e.jsx(Pg,{label:E.vendor,value:E.spend,total:_,right:ns(E.spend)},E.vendor)),Fe.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No vendor spend."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: vendor consolidation suggestions appear in Savings."})]})]})]})}),e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs(es,{title:"Quick exports",subtitle:"CSV, JSON, and Print to PDF.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs($t,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," Export transactions CSV"]}),e.jsxs($t,{variant:"outline",onClick:R,children:[e.jsx(ct,{className:"h-4 w-4"})," Export aggregate CSV"]}),e.jsxs($t,{variant:"outline",onClick:se,children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]}),e.jsxs($t,{variant:"outline",onClick:m,title:Ve,children:[e.jsx(jt,{className:"h-4 w-4"})," Export PDF"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Core exports: CSV/PDF/JSON. Premium: scheduled reports in Schedules."})]}),e.jsx(es,{title:"Premium signals",subtitle:"Anomaly and savings snapshots.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"High-risk spend"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Share of spend marked High risk."})]}),e.jsx(tt,{label:`${ne.highRiskShare.pct}%`,tone:ne.highRiskShare.pct>=20?"warn":"good"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:[ns(ne.highRiskShare.high)," / ",ns(ne.highRiskShare.spend)]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Charging peak usage"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Peak hour charging share."})]}),e.jsx(tt,{label:`${ne.chargingPeak.pct}%`,tone:ne.chargingPeak.pct>=40?"warn":"good"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Peak ",ne.chargingPeak.peak," / Total ",ne.chargingPeak.total]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Vendor consolidation"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Modules with fragmented vendors."})]}),e.jsx(tt,{label:`${X.vendorConsolidation.length}`,tone:X.vendorConsolidation.length?"info":"good"})]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Open Savings tab for recommendations."})]})]})})]})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(es,{title:"Recent activity",subtitle:"Sample of the most recent transactions.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Requester"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Risk"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Approved"})]})}),e.jsxs("tbody",{children:[De.slice(0,10).map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:Yc(E.ts)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:E.module}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:E.marketplace?E.marketplace:E.type})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.vendor}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.requesterName}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ns(E.amountUGX)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(tt,{label:E.risk,tone:E.risk==="High"?"bad":E.risk==="Medium"?"warn":"good"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(tt,{label:E.approved?"Yes":"No",tone:E.approved?"good":"warn"})})]},E.id)),De.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No transactions match the filters."})})]})]})})})})]}):null,o==="spend"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs(es,{title:"Explorer settings",subtitle:"Choose dimensions and metric.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx(ps,{label:"Primary dimension",value:re,onChange:E=>q(E),options:K.map(E=>({value:E,label:E}))}),e.jsx(ps,{label:"Secondary dimension",value:L,onChange:E=>M(E),options:[{value:"None",label:"None"},...K.filter(E=>E!==re).map(E=>({value:E,label:E}))],hint:"Premium pivot"}),e.jsx(ps,{label:"Metric",value:k,onChange:E=>P(E),options:[{value:"Spend",label:"Spend"},{value:"Transactions",label:"Transactions"},{value:"Avg transaction",label:"Avg transaction"}]}),e.jsxs($t,{variant:"outline",onClick:R,children:[e.jsx(ct,{className:"h-4 w-4"})," Export aggregate"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: add a secondary dimension to create a pivot-style table."})]}),e.jsx(es,{title:"Top results",subtitle:"Sorted by selected metric.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[B.rowsA.slice(0,10).map(E=>{const J=k==="Transactions"?E.count:k==="Avg transaction"?E.avg:E.spend,g=k==="Transactions"?B.rowsA.reduce((H,N)=>H+N.count,0):k==="Avg transaction"?Math.max(...B.rowsA.map(H=>H.avg),1):_;return e.jsx(Pg,{label:E.key,value:J,total:g,right:k==="Transactions"?`${J}`:ns(J)},E.key)}),B.rowsA.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No data."})]})})]}),e.jsx(es,{title:"Pivot table",subtitle:B.pivot?`${re} by ${L}`:"Enable a secondary dimension to show pivot.",right:e.jsx(tt,{label:B.pivot?"Premium":"Off",tone:B.pivot?"info":"neutral"}),children:B.pivot?e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:re}),B.pivot.columns.map(E=>e.jsx("th",{className:"px-4 py-3 font-semibold",children:E},E)),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"})]})}),e.jsx("tbody",{children:B.pivot.rows.map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:E.rowKey}),B.pivot.columns.map(J=>e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ns(E.cells[J]||0)},`${E.rowKey}-${J}`)),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ns(E.total)})]},E.rowKey))})]})}):e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"Select a secondary dimension to build a pivot. Example: Module by Vendor."})}),e.jsx(es,{title:"Raw transactions",subtitle:"Drilldown view.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Requester"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Approved"})]})}),e.jsxs("tbody",{children:[De.slice(0,16).map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:Yc(E.ts)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.type}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[E.module,E.marketplace?`  ${E.marketplace}`:""]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.vendor}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.requesterName}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ns(E.amountUGX)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(tt,{label:E.approved?"Yes":"No",tone:E.approved?"good":"warn"})})]},E.id)),De.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No transactions."})})]})]})})})]}):null,o==="approvals"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs(es,{title:"Approval KPIs",subtitle:"Performance reports.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ea,{title:"Avg cycle time",value:`${T.avgMins}m`,sub:"Mean",icon:e.jsx(pa,{className:"h-5 w-5"}),tone:T.avgMins>180?"warn":"good"}),e.jsx(ea,{title:"Median",value:`${T.medMins}m`,sub:"Median",icon:e.jsx(pa,{className:"h-5 w-5"}),tone:T.medMins>180?"warn":"good"}),e.jsx(ea,{title:"SLA breaches",value:`${T.breaches}`,sub:"Over SLA",icon:e.jsx(at,{className:"h-5 w-5"}),tone:T.breaches?"bad":"good"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Outcomes"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(tt,{label:`Auto: ${T.auto}`,tone:"info"}),e.jsx(tt,{label:`Approved: ${T.approved}`,tone:"good"}),e.jsx(tt,{label:`Rejected: ${T.rejected}`,tone:T.rejected?"warn":"good"})]})]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Core: approval performance reports. Premium: scheduled approvals performance reports via Schedules."})]}),e.jsx(es,{title:"Approvals by module",subtitle:"Cycle time, approval rate, SLA breaches.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Approval rate"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Avg mins"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Rejected"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Breaches"})]})}),e.jsxs("tbody",{children:[Z.map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:E.module}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.total}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(tt,{label:`${E.approvalRate}%`,tone:E.approvalRate>=90?"good":E.approvalRate>=75?"warn":"bad"})}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[E.avgMins,"m"]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.rejected}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(tt,{label:`${E.breach}`,tone:E.breach?"warn":"good"})})]},E.module)),Z.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No approvals."})})]})]})})}),e.jsx(es,{title:"Recent approvals",subtitle:"Audit-friendly list.",right:e.jsx(tt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[Be.slice(0,10).map(E=>{const J=Math.max(1,Math.round((E.decidedAt-E.requestedAt)/6e4)),g=(E.decidedAt-E.requestedAt)/36e5>E.slaHours;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(tt,{label:E.outcome,tone:E.outcome==="Rejected"?"bad":E.outcome==="Auto-approved"?"info":"good"}),e.jsx(tt,{label:E.module,tone:"neutral"}),E.marketplace?e.jsx(tt,{label:E.marketplace,tone:"neutral"}):null,e.jsx(tt,{label:E.id,tone:"neutral"}),g?e.jsx(tt,{label:"SLA breach",tone:"warn"}):e.jsx(tt,{label:"SLA ok",tone:"good"})]}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:[ns(E.amountUGX),"  ",E.requesterName]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Approver: ",E.approver,"  Cycle: ",J,"m  SLA: ",E.slaHours,"h"]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Reason: ",E.reason]})]}),e.jsxs("div",{className:"text-right text-xs text-slate-500",children:["Requested ",Nk(E.requestedAt)]})]})},E.id)}),Be.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No approvals in this range."})]})})]}):null,o==="anomalies"?e.jsxs("div",{className:"space-y-4",children:[e.jsx(es,{title:"Quick counters",subtitle:"What needs attention.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(ea,{title:"Vendor spikes",value:`${ne.vendorSpikes.length}`,sub:"Last 7d vs previous 7d",icon:e.jsx(lt,{className:"h-5 w-5"}),tone:ne.vendorSpikes.length?"warn":"good"}),e.jsx(ea,{title:"After-hours tx",value:`${ne.afterHours.length}`,sub:"In selected range",icon:e.jsx(Tn,{className:"h-5 w-5"}),tone:ne.afterHours.length?"warn":"good"}),e.jsx(ea,{title:"High-risk share",value:`${ne.highRiskShare.pct}%`,sub:"Of approved spend",icon:e.jsx(at,{className:"h-5 w-5"}),tone:ne.highRiskShare.pct>=20?"warn":"good"}),e.jsx(ea,{title:"Charging peak",value:`${ne.chargingPeak.pct}%`,sub:"Peak-hour sessions",icon:e.jsx(pa,{className:"h-5 w-5"}),tone:ne.chargingPeak.pct>=40?"warn":"good"})]})}),e.jsx(es,{title:"After-hours transactions",subtitle:"Outside policy window (6-22).",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Module"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vendor"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Requester"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsxs("tbody",{children:[ne.afterHours.map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:Yc(E.ts)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.module}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.vendor}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.requesterName}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ns(E.amountUGX)}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{V(E.requesterName),d("spend"),r({title:"Filtered",message:`Showing spend for ${E.requesterName}.`,kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Drill down"]})})]},E.id)),ne.afterHours.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No after-hours activity detected."})})]})]})})}),e.jsxs(es,{title:"Anomaly dashboards",subtitle:"Logic-based detection (initial).",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:["Anomalies are detected using safe, explainable rules. Later you can add ML/AI.",e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:"1) Vendor spike: last 7 days > 2x previous 7 days"}),e.jsx("li",{children:"2) After-hours usage outside policy window"}),e.jsx("li",{children:"3) High-risk share trends"}),e.jsx("li",{children:"4) Charging peak-hour usage"})]})]}),e.jsxs($t,{variant:"outline",className:"mt-3",onClick:()=>r({title:"Tip",message:"Use Notifications Center for real-time alert routing.",kind:"info"}),children:[e.jsx(rt,{className:"h-4 w-4"})," Alert routing tip"]})]}),e.jsx(es,{title:"Unusual vendor spend",subtitle:"Spike detection.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[ne.vendorSpikes.map(E=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(tt,{label:"Vendor spike",tone:"warn"}),e.jsx(tt,{label:E.vendor,tone:"neutral"})]}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:["Last 7d: ",ns(E.last7)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Previous 7d: ",ns(E.prev7)]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Why: spend more than 2x week-over-week"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs($t,{variant:"outline",onClick:()=>{W(E.vendor),d("spend"),r({title:"Filtered",message:`Showing spend for ${E.vendor}.`,kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Drill down"]}),e.jsxs($t,{variant:"outline",onClick:()=>r({title:"Rule",message:"Create rule from this event (demo).",kind:"info"}),children:[e.jsx(Dn,{className:"h-4 w-4"})," Create rule"]})]})]})},E.vendor)),ne.vendorSpikes.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No vendor spikes detected."})]})})]}):null,o==="savings"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs(es,{title:"Savings dashboard",subtitle:"Premium recommendations.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Savings opportunities are generated from transaction and approvals patterns."}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsx(ea,{title:"Consolidation opportunities",value:`${X.vendorConsolidation.length}`,sub:"Modules with fragmented vendors",icon:e.jsx(lt,{className:"h-5 w-5"}),tone:X.vendorConsolidation.length?"info":"good"}),e.jsx(ea,{title:"Low-value approvals",value:`${X.policy.smallApprovals}`,sub:`${X.policy.smallPct}% of approvals`,icon:e.jsx(pa,{className:"h-5 w-5"}),tone:X.policy.smallPct>=30?"warn":"good"}),e.jsx(ea,{title:"Charging peak share",value:`${X.charging.peakPct}%`,sub:`${X.charging.peak}/${X.charging.total} charging tx`,icon:e.jsx(Tn,{className:"h-5 w-5"}),tone:X.charging.peakPct>=40?"warn":"good"})]})]}),e.jsx(es,{title:"Suggested actions",subtitle:"Do the next best thing.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ze,{title:"Consolidate vendors",detail:"Reduce vendor fragmentation to improve pricing and SLA.",cta:"Open",onClick:()=>r({title:"Next",message:"Start a vendor consolidation project (demo).",kind:"info"})}),e.jsx(Ze,{title:"Improve policies",detail:"Reduce approvals for low amounts by updating thresholds.",cta:"Open",onClick:()=>r({title:"Next",message:"Open policy simulator (demo).",kind:"info"})}),e.jsx(Ze,{title:"Shift charging off-peak",detail:"Move charging sessions away from peak tariffs to reduce cost.",cta:"Open",onClick:()=>{I("EVs & Charging"),d("spend"),r({title:"Filtered",message:"Showing EV charging spend.",kind:"info"})}})]})})]}),e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsx(es,{title:"Vendor consolidation",subtitle:"Vendor consolidation, policy improvements.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"space-y-2",children:[X.vendorConsolidation.map(E=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(tt,{label:"Consolidation",tone:"info"}),e.jsx(tt,{label:E.module,tone:"neutral"}),e.jsx(tt,{label:`${E.vendorCount} vendors`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:["Total spend: ",ns(E.totalSpend)]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Top vendor: ",E.topVendor," (",E.topShare,"% share)"]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Suggestion: negotiate a preferred vendor set for this module and route non-preferred purchases for approval."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs($t,{variant:"outline",onClick:()=>{q("Vendor"),I(E.module),d("spend"),r({title:"Explorer",message:"Exploring vendor mix.",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Explore"]}),e.jsxs($t,{variant:"outline",onClick:()=>r({title:"Created",message:"Vendor consolidation task created (demo).",kind:"success"}),children:[e.jsx(lt,{className:"h-4 w-4"})," Create plan"]})]})]})},E.module)),X.vendorConsolidation.length?null:e.jsx("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center text-sm text-slate-600",children:"No consolidation opportunities found."})]})}),e.jsx(es,{title:"Policy improvements",subtitle:"Reduce approval friction.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Low-value approvals"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Approvals under UGX 200,000."})]}),e.jsx(tt,{label:`${X.policy.smallPct}%`,tone:X.policy.smallPct>=30?"warn":"good"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(ea,{title:"Small approvals",value:`${X.policy.smallApprovals}`,sub:"Approved",icon:e.jsx(He,{className:"h-5 w-5"}),tone:"info"}),e.jsx(ea,{title:"Total approvals",value:`${X.policy.totalApprovals}`,sub:"All",icon:e.jsx(pa,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(ea,{title:"Suggestion",value:X.policy.smallPct>=30?"Raise threshold":"OK",sub:"Policy",icon:e.jsx(lt,{className:"h-5 w-5"}),tone:X.policy.smallPct>=30?"warn":"good"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Recommendation: If this is consistently high, raise auto-approval threshold and add guardrails (risk, vendor allowlist) to keep safety."})]})}),e.jsx(es,{title:"Charging cost optimization",subtitle:"Off-peak scheduling.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Peak-hour charging"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Share of charging transactions during peak tariff hours."})]}),e.jsx(tt,{label:`${X.charging.peakPct}%`,tone:X.charging.peakPct>=40?"warn":"good"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Peak ",X.charging.peak," / Total ",X.charging.total]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:"Suggestion: Move non-urgent charging to off-peak windows and batch depot top-ups."})]})})]})]}):null,o==="builder"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs(es,{title:"Custom report builder",subtitle:"Premium: build and save report configurations.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs($t,{variant:"primary",onClick:()=>{Oe({id:"",name:"",timeRange:u,customFrom:p,customTo:j,dimensionA:re,dimensionB:L==="None"?void 0:L,metric:k,filters:{module:f,marketplace:A,group:C,costCenter:z,vendor:D,requester:he,risk:xe},createdAt:Date.now()}),ye(!0)},children:[e.jsx(kb,{className:"h-4 w-4"})," New report"]}),e.jsxs($t,{variant:"outline",onClick:()=>{r({title:"Tip",message:"Saved reports can be scheduled for email delivery in Schedules.",kind:"info"})},children:[e.jsx(rt,{className:"h-4 w-4"})," Tip"]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[Y.map(E=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:E.name}),e.jsx(tt,{label:E.timeRange,tone:"neutral"}),e.jsx(tt,{label:E.metric,tone:"info"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[E.id,"  Created ",Nk(E.createdAt)]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Dim: ",E.dimensionA,E.dimensionB?` by ${E.dimensionB}`:""]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Oe(JSON.parse(JSON.stringify(E))),ye(!0)},children:[e.jsx(Dn,{className:"h-4 w-4"})," Edit"]}),e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Ce(J=>({...J,reportId:E.id})),ee(!0)},children:[e.jsx(os,{className:"h-4 w-4"})," Schedule"]})]})]})},E.id)),Y.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No saved reports."})]})]})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsxs(es,{title:"Preview",subtitle:"Preview uses the draft report configuration.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(ea,{title:"Spend",value:ns(w.totalsAll.spend),sub:"Approved",icon:e.jsx(Tr,{className:"h-5 w-5"}),tone:"good"}),e.jsx(ea,{title:"Transactions",value:`${w.totalsAll.count}`,sub:"Approved",icon:e.jsx(im,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(ea,{title:"Preview rows",value:`${w.rows.length}`,sub:"Top rows",icon:e.jsx(jt,{className:"h-5 w-5"}),tone:"info"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:ie.dimensionA}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Spend"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Tx"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Avg"})]})}),e.jsxs("tbody",{children:[w.rows.map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:E.key}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ns(E.spend)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:E.count}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ns(E.avg)})]},E.key)),w.rows.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No data."})})]})]})}),w.pivot?e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Pivot preview"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[ie.dimensionA," by ",ie.dimensionB]})]}),e.jsx(tt,{label:"Premium",tone:"info"})]}),e.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:ie.dimensionA}),w.pivot.columns.map(E=>e.jsx("th",{className:"px-4 py-3 font-semibold",children:E},E)),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Total"})]})}),e.jsx("tbody",{children:w.pivot.rows.map(E=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:E.rowKey}),w.pivot.columns.map(J=>e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ns(E.cells[J]||0)},`${E.rowKey}-${J}`)),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ns(E.total)})]},E.rowKey))})]})})]}):null]})})]}):null,o==="schedules"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsx(es,{title:"Saved reports",subtitle:"Pick a report and schedule it.",right:e.jsxs($t,{variant:"primary",onClick:()=>{var E;Ce({id:"",reportId:((E=Y[0])==null?void 0:E.id)||"RPT-001",enabled:!0,frequency:"Weekly",hourLocal:9,dayOfWeek:"Mon",dayOfMonth:1,recipients:"finance@acme.com",channels:{email:!0,whatsapp:!0,wechat:!1,sms:!1},formats:{csv:!0,pdf:!0,json:!1}}),ee(!0)},disabled:!Y.length,children:[e.jsx(os,{className:"h-4 w-4"})," New schedule"]}),children:e.jsxs("div",{className:"space-y-2",children:[Y.map(E=>{const J=G.filter(g=>g.reportId===E.id).length;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:E.name}),e.jsx(tt,{label:E.metric,tone:"info"}),e.jsx(tt,{label:E.timeRange,tone:"neutral"}),e.jsx(tt,{label:`Schedules: ${J}`,tone:J?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[E.id,"  ",E.dimensionA,E.dimensionB?` by ${E.dimensionB}`:""]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Ce(g=>({...g,reportId:E.id,recipients:"finance@acme.com"})),ee(!0)},children:[e.jsx(os,{className:"h-4 w-4"})," Schedule"]}),e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{const g={report:E,exportedAt:new Date().toISOString()};Tx(`report-${E.id}.json`,JSON.stringify(g,null,2),"application/json"),r({title:"Exported",message:"Report definition JSON downloaded.",kind:"success"})},children:[e.jsx(ct,{className:"h-4 w-4"})," Definition"]})]})]})},E.id)}),Y.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No saved reports."})]})})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsxs(es,{title:"Scheduled reports",subtitle:"Email delivery and scheduling.",right:e.jsx(tt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"space-y-2",children:[G.slice().sort((E,J)=>(J.lastRunAt||0)-(E.lastRunAt||0)).map(E=>{const J=Y.find(N=>N.id===E.reportId),g=Object.entries(E.formats).filter(([,N])=>N).map(([N])=>N.toUpperCase()).join(", "),H=Object.entries(E.channels).filter(([,N])=>N).map(([N])=>N).join(", ");return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(tt,{label:E.enabled?"Enabled":"Disabled",tone:E.enabled?"good":"neutral"}),e.jsx(tt,{label:E.frequency,tone:"neutral"}),e.jsx(tt,{label:`${String(E.hourLocal).padStart(2,"0")}:00`,tone:"neutral"}),E.frequency==="Weekly"?e.jsx(tt,{label:E.dayOfWeek||"Mon",tone:"neutral"}):null,E.frequency==="Monthly"?e.jsx(tt,{label:`Day ${E.dayOfMonth||1}`,tone:"neutral"}):null,e.jsx(tt,{label:E.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:(J==null?void 0:J.name)||E.reportId}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Recipients: ",E.recipients]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Channels: ",H||"-","  Formats: ",g||"-"]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Last run: ",E.lastRunAt?`${Yc(E.lastRunAt)} (${E.lastStatus})`:"Never"]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{ve(N=>N.map(U=>U.id===E.id?{...U,enabled:!U.enabled}:U)),r({title:"Updated",message:"Schedule updated.",kind:"success"})},children:[e.jsx(Dn,{className:"h-4 w-4"})," Toggle"]}),e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Me(E.id),children:[e.jsx(lt,{className:"h-4 w-4"})," Run now"]}),e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Ce(JSON.parse(JSON.stringify(E))),ee(!0)},children:[e.jsx(ue,{className:"h-4 w-4"})," Edit"]})]})]})},E.id)}),G.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No schedules yet."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: scheduled report emails. In production, delivery logs appear in Notifications & Activity Center."})]})})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"V Reporting & Analytics v2. Core: spend breakdowns + approvals performance + CSV/PDF/JSON export. Premium: anomalies, savings dashboard, custom report builder, scheduled report emails."})})]})}),e.jsx(kk,{open:Te,title:ie.id?"Edit report":"New report",subtitle:"Choose dimensions, metric, time range, and filters.",onClose:()=>ye(!1),actions:[{label:"Save",onClick:oe}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx($t,{variant:"outline",onClick:()=>ye(!1),children:"Cancel"}),e.jsxs($t,{variant:"primary",onClick:oe,children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(md,{label:"Report name",value:ie.name,onChange:E=>Oe(J=>({...J,name:E})),placeholder:"Example: Spend by vendor"}),e.jsx(ps,{label:"Metric",value:ie.metric,onChange:E=>Oe(J=>({...J,metric:E})),options:[{value:"Spend",label:"Spend"},{value:"Transactions",label:"Transactions"},{value:"Avg transaction",label:"Avg transaction"}]}),e.jsx(ps,{label:"Time range",value:ie.timeRange,onChange:E=>Oe(J=>({...J,timeRange:E})),options:[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"YTD",label:"Year to date"},{value:"Custom",label:"Custom"}]}),e.jsx("div",{className:hl(ie.timeRange!=="Custom"&&"opacity-60"),children:e.jsx(md,{label:"From",type:"date",value:ie.customFrom||"",onChange:E=>Oe(J=>({...J,customFrom:E})),disabled:ie.timeRange!=="Custom"})}),e.jsx("div",{className:hl(ie.timeRange!=="Custom"&&"opacity-60"),children:e.jsx(md,{label:"To",type:"date",value:ie.customTo||"",onChange:E=>Oe(J=>({...J,customTo:E})),disabled:ie.timeRange!=="Custom"})}),e.jsx(ps,{label:"Primary dimension",value:ie.dimensionA,onChange:E=>Oe(J=>({...J,dimensionA:E})),options:K.map(E=>({value:E,label:E}))}),e.jsx(ps,{label:"Secondary dimension",value:ie.dimensionB||"None",onChange:E=>Oe(J=>({...J,dimensionB:E==="None"?void 0:E})),options:[{value:"None",label:"None"},...K.filter(E=>E!==ie.dimensionA).map(E=>({value:E,label:E}))],hint:"Premium pivot"}),e.jsxs("div",{className:"md:col-span-2 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Filters"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(ps,{label:"Module",value:ie.filters.module||"All",onChange:E=>Oe(J=>({...J,filters:{...J.filters,module:E}})),options:[{value:"All",label:"All"},...s.map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Marketplace",value:ie.filters.marketplace||"All",onChange:E=>Oe(J=>({...J,filters:{...J.filters,marketplace:E}})),options:[{value:"All",label:"All"},...a.map(E=>({value:E,label:E}))],disabled:ie.filters.module!=="All"&&ie.filters.module!=="E-Commerce"}),e.jsx(ps,{label:"Group",value:ie.filters.group||"All",onChange:E=>Oe(J=>({...J,filters:{...J.filters,group:E}})),options:[{value:"All",label:"All"},...["Operations","Sales","Finance","Admin","Procurement"].map(E=>({value:E,label:E}))]}),e.jsx(ps,{label:"Risk",value:ie.filters.risk||"All",onChange:E=>Oe(J=>({...J,filters:{...J.filters,risk:E}})),options:[{value:"All",label:"All"},{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"}]})]}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"More filters (vendor, requester, cost center) can be added as needed."})]})]})}),e.jsx(kk,{open:Ae,title:Ne.id?"Edit schedule":"New schedule",subtitle:"Send scheduled report emails (and other channels) with attachments.",onClose:()=>ee(!1),actions:[{label:"Save schedule",onClick:me}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx($t,{variant:"outline",onClick:()=>ee(!1),children:"Cancel"}),e.jsxs($t,{variant:"primary",onClick:me,children:[e.jsx(os,{className:"h-4 w-4"})," Save schedule"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ps,{label:"Report",value:Ne.reportId,onChange:E=>Ce(J=>({...J,reportId:E})),options:Y.map(E=>({value:E.id,label:E.name}))}),e.jsx(ps,{label:"Frequency",value:Ne.frequency,onChange:E=>Ce(J=>({...J,frequency:E})),options:[{value:"Daily",label:"Daily"},{value:"Weekly",label:"Weekly"},{value:"Monthly",label:"Monthly"}]}),e.jsx(ps,{label:"Hour",value:`${Ne.hourLocal}`,onChange:E=>Ce(J=>({...J,hourLocal:yk(Number(E),0,23)})),options:Array.from({length:24},(E,J)=>({value:`${J}`,label:`${String(J).padStart(2,"0")}:00`}))}),e.jsx(ps,{label:"Day of week",value:Ne.dayOfWeek||"Mon",onChange:E=>Ce(J=>({...J,dayOfWeek:E})),options:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(E=>({value:E,label:E})),disabled:Ne.frequency!=="Weekly"}),e.jsx(ps,{label:"Day of month",value:`${Ne.dayOfMonth||1}`,onChange:E=>Ce(J=>({...J,dayOfMonth:yk(Number(E),1,28)})),options:Array.from({length:28},(E,J)=>({value:`${J+1}`,label:`${J+1}`})),disabled:Ne.frequency!=="Monthly"}),e.jsx(md,{label:"Recipients",value:Ne.recipients,onChange:E=>Ce(J=>({...J,recipients:E})),placeholder:"emails and/or phone numbers",hint:"Comma separated"}),e.jsxs("div",{className:"md:col-span-2 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Channels"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 sm:grid-cols-4",children:[{k:"email",label:"Email"},{k:"whatsapp",label:"WhatsApp"},{k:"wechat",label:"WeChat"},{k:"sms",label:"SMS"}].map(E=>e.jsxs("label",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:Ne.channels[E.k],onChange:J=>Ce(g=>({...g,channels:{...g.channels,[E.k]:J.target.checked}})),className:"h-4 w-4 rounded border-slate-300"}),E.label]},E.k))}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"Attachments"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 gap-2 sm:grid-cols-3",children:[{k:"csv",label:"CSV"},{k:"pdf",label:"PDF"},{k:"json",label:"JSON"}].map(E=>e.jsxs("label",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-700",children:[e.jsx("input",{type:"checkbox",checked:Ne.formats[E.k],onChange:J=>Ce(g=>({...g,formats:{...g.formats,[E.k]:J.target.checked}})),className:"h-4 w-4 rounded border-slate-300"}),E.label]},E.k))}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: scheduled report emails. Delivery logs show per channel (Email/WhatsApp/WeChat/SMS)."})]})]})})]});function Ze({title:E,detail:J,cta:g,onClick:H}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:E}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:J})]}),e.jsxs($t,{variant:"outline",className:"px-3 py-2 text-xs",onClick:H,children:[e.jsx(ue,{className:"h-4 w-4"})," ",g]})]})})}}const vi={green:"#03CD8C",orange:"#F77F00"};function tl(...t){return t.filter(Boolean).join(" ")}function Dx(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function bn(t,s,a){return Math.max(s,Math.min(a,t))}function Sk(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function ni(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function qt(t,s=0){return Number(t||0).toLocaleString(void 0,{maximumFractionDigits:s,minimumFractionDigits:s})}function kl(t){const s=Number(t||0);return s>=1e3?`${qt(s/1e3,2)} tCO2e`:`${qt(s,0)} kgCO2e`}function YV(t){let s=t>>>0;return()=>(s=s*1664525+1013904223>>>0,s/4294967296)}function Mg(t,s){const a=r=>{const i=String(r??"");return/[",\n]/.test(i)?`"${i.replace(/"/g,'""')}"`:i},l=s.map(r=>a(r.label)).join(","),n=t.map(r=>s.map(i=>a(r[i.key])).join(",")).join(`
`);return`${l}
${n}`}function Ox(t,s,a="text/plain"){const l=new Blob([s],{type:a}),n=URL.createObjectURL(l),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function QV(t,s,a){const l=new Date,n=l.getTime(),r=new Date(l.getFullYear(),0,1).getTime(),i=24*60*60*1e3;if(t==="7d")return{start:n-7*i,end:n};if(t==="30d")return{start:n-30*i,end:n};if(t==="90d")return{start:n-90*i,end:n};if(t==="YTD")return{start:r,end:n};const o=s?new Date(s).getTime():n-30*i,d=a?new Date(a).getTime()+(24*60*60*1e3-1):n;return{start:Number.isFinite(o)?o:n-30*i,end:Number.isFinite(d)?d:n}}function Xt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:tl("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function ma({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:vi.green}:t==="accent"?{background:vi.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:tl(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Qc({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:tl(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:tl("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function Tg({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:tl(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:tl("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function Rg({label:t,value:s,onChange:a,hint:l,disabled:n,min:r=0,max:i=999999,step:o=.01}){return e.jsxs("div",{className:tl(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",min:r,max:i,step:o,value:Number.isFinite(s)?s:0,onChange:d=>a(Number(d.target.value||0)),disabled:n,className:tl("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function JV({actions:t}){const[s,a]=c.useState(!1),l=ds.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:tl("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function Ak({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1020px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(JV,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function ZV({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:tl("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function ba({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function Ek({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(Hd,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function Hl({title:t,value:s,sub:a,icon:l,tone:n="neutral"}){const r=n==="good"?"bg-emerald-50 text-emerald-700":n==="warn"?"bg-amber-50 text-amber-800":n==="bad"?"bg-rose-50 text-rose-700":n==="info"?"bg-blue-50 text-blue-700":"bg-slate-50 text-slate-700";return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:t}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:s}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a})]}),e.jsx("div",{className:tl("grid h-10 w-10 place-items-center rounded-2xl",r),children:l})]})})}function hr({value:t,label:s}){const a=bn(t,0,100),l=82,n=10,r=(l-n)/2,i=2*Math.PI*r,o=a/100*i;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:s}),e.jsxs("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:[Math.round(a),"%"]})]}),e.jsxs("div",{className:"relative grid place-items-center",children:[e.jsxs("svg",{width:l,height:l,className:"-rotate-90",children:[e.jsx("circle",{cx:l/2,cy:l/2,r,stroke:"#E2E8F0",strokeWidth:n,fill:"none"}),e.jsx("circle",{cx:l/2,cy:l/2,r,stroke:vi.green,strokeWidth:n,fill:"none",strokeDasharray:`${o} ${i}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute text-sm font-semibold text-slate-900",children:[Math.round(a),"%"]})]})]})})}function eB({label:t,value:s,total:a,right:l}){const n=a>0?Math.round(s/a*100):0;return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:t}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[n,"% share"]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:l??qt(s,0)})})]}),e.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,n)}%`,background:vi.green}})})]})}function Pk(t){const s=bn(t,0,100);return s>=85?{label:"A",tone:"good"}:s>=70?{label:"B",tone:"info"}:s>=55?{label:"C",tone:"warn"}:{label:"D",tone:"bad"}}function IA(){const t=ot(),s=["Operations","Sales","Finance","Admin","Procurement"],a=["OPS-001","SALES-TRAVEL","FIN-OPS","ADMIN-001","PROC-001"],[l,n]=c.useState([]),r=ee=>{const Ne=Dx("toast");n(Ce=>[{id:Ne,...ee},...Ce].slice(0,4)),window.setTimeout(()=>n(Ce=>Ce.filter(Ee=>Ee.id!==Ne)),3200)},[i,o]=c.useState(!0),[d,u]=c.useState("overview"),[x,p]=c.useState("30d"),[h,j]=c.useState(new Date(Date.now()-30*24*60*60*1e3).toISOString().slice(0,10)),[y,f]=c.useState(new Date().toISOString().slice(0,10)),[I,A]=c.useState("All"),[b,C]=c.useState("All"),[S,z]=c.useState(""),[$,D]=c.useState({gridKgCO2ePerKWh:.45,iceKgCO2ePerKm:.2,renewableSharePct:0}),[W,he]=c.useState(!1),V=["Internal ESG Template v1","Scorecard Template v1","Mobility Emissions Template v1","Other"],[xe,pe]=c.useState(!1),[be,fe]=c.useState("Internal ESG Template v1"),[K,re]=c.useState("CSV"),[q,L]=c.useState("ESG Report"),M=c.useMemo(()=>QV(x,h,y),[x,h,y]),k=c.useMemo(()=>{const ee=YV(2026),Ne=Date.now(),Ce=24*60*60*1e3,Ee=["Mary N.","John S.","Irene K.","Daisy O.","Procurement Desk","Admin Desk"],Ue=[],Ye=[],De=Re=>Re[Math.floor(ee()*Re.length)],Be=Re=>{const Fe=Re.reduce((Z,B)=>Z+B.w,0);let T=ee()*Fe;for(const Z of Re)if(T-=Z.w,T<=0)return Z.item;return Re[Re.length-1].item},$e={Operations:["OPS-001"],Sales:["SALES-TRAVEL"],Finance:["FIN-OPS"],Admin:["ADMIN-001"],Procurement:["PROC-001"]},_={Operations:.62,Sales:.44,Finance:.35,Admin:.25,Procurement:.28},te=["Kampala HQ","Entebbe Fast Hub","Jinja Road Hub","Other"];for(let Re=0;Re<90;Re++){const Fe=Ne-Re*Ce;for(const T of s){const Z=De($e[T]),B=1+Math.floor(ee()*4);for(let ne=0;ne<B;ne++){const X=Math.floor(ee()*24),ge=Fe+X*60*60*1e3+Math.floor(ee()*50)*6e4,Le=Be([{item:"Ride",w:1},{item:"Delivery",w:.35},{item:"Commute",w:.55}]),ae=ee()<_[T],le=Math.round((4+ee()*26)*10)/10,R=ae?ee()<.07?"Medium":"Low":ee()<.08?"Medium":"Low",se=Le==="Ride"?Be([{item:["Client"],w:1},{item:["Airport"],w:.4},{item:["Commute"],w:.6}]):Le==="Delivery"?["Delivery"]:["Commute"];if(Ue.push({id:Dx("MOB"),ts:ge,group:T,costCenter:Z,requester:De(Ee),mobilityType:Le,vehicleType:ae?"EV":"ICE",km:le,module:"Rides & Logistics",tags:se,risk:R}),ae&&ee()<.26){const m=Be([{item:"Kampala HQ",w:1.2},{item:"Jinja Road Hub",w:.6},{item:"Entebbe Fast Hub",w:.45},{item:"Other",w:.2}]),w=Be([{item:8,w:.9},{item:18,w:1},{item:Math.floor(ee()*24),w:.8}]),oe=Fe+w*60*60*1e3+Math.floor(ee()*45)*6e4,me=!(w>=7&&w<=9)&&!(w>=17&&w<=20),Me=Math.round((8+ee()*42)*10)/10,Ze=Math.round(Me*(me?1050:1350)),E=ee()<.9;Ye.push({id:Dx("CHG"),ts:oe,group:T,costCenter:Z,vehicleType:"EV",site:m,kWh:Me,costUGX:Ze,offPeak:me,hasReceipt:E,module:"EVs & Charging",tags:["Charging",me?"Off-peak":"Peak"]})}}if(ee()<.14){const ne=De(te),X=Be([{item:19,w:1},{item:13,w:.6},{item:Math.floor(ee()*24),w:.6}]),ge=Fe+X*60*60*1e3+Math.floor(ee()*45)*6e4,Le=!(X>=7&&X<=9)&&!(X>=17&&X<=20),ae=Math.round((10+ee()*50)*10)/10,R=Math.round(ae*(Le?1050:1350)),se=ee()<.88;Ye.push({id:Dx("CHG"),ts:ge,group:T,costCenter:Z,vehicleType:"EV",site:ne,kWh:ae,costUGX:R,offPeak:Le,hasReceipt:se,module:"EVs & Charging",tags:["Charging",Le?"Off-peak":"Peak"]})}}}return{mobility:Ue,charging:Ye}},[]),P=c.useMemo(()=>{if(!i)return[];const ee=S.trim().toLowerCase();return k.mobility.filter(Ne=>Ne.ts>=M.start&&Ne.ts<=M.end).filter(Ne=>I==="All"?!0:Ne.group===I).filter(Ne=>b==="All"?!0:Ne.costCenter===b).filter(Ne=>ee?`${Ne.requester} ${Ne.group} ${Ne.costCenter} ${Ne.mobilityType} ${Ne.vehicleType} ${Ne.tags.join(" ")}`.toLowerCase().includes(ee):!0).slice().sort((Ne,Ce)=>Ce.ts-Ne.ts)},[k.mobility,M.start,M.end,I,b,S,i]),Y=c.useMemo(()=>{if(!i)return[];const ee=S.trim().toLowerCase();return k.charging.filter(Ne=>Ne.ts>=M.start&&Ne.ts<=M.end).filter(Ne=>I==="All"?!0:Ne.group===I).filter(Ne=>b==="All"?!0:Ne.costCenter===b).filter(Ne=>ee?`${Ne.site} ${Ne.group} ${Ne.costCenter} ${Ne.tags.join(" ")}`.toLowerCase().includes(ee):!0).slice().sort((Ne,Ce)=>Ce.ts-Ne.ts)},[k.charging,M.start,M.end,I,b,S,i]),F=c.useMemo(()=>{const ee=P.filter(_=>_.vehicleType==="EV").reduce((_,te)=>_+te.km,0),Ne=P.filter(_=>_.vehicleType==="ICE").reduce((_,te)=>_+te.km,0),Ce=ee+Ne,Ee=Y.reduce((_,te)=>_+te.kWh,0),Ue=Y.reduce((_,te)=>_+te.costUGX,0),Ye=Y.length,De=Ye?Math.round(Y.filter(_=>_.offPeak).length/Ye*100):0,Be=Ye?Math.round(Y.filter(_=>_.hasReceipt).length/Ye*100):0,$e=Ce?Math.round(ee/Ce*100):0;return{kmEV:ee,kmICE:Ne,kmAll:Ce,evSharePct:$e,kWh:Ee,chargingSpend:Ue,sessions:Ye,offPeakPct:De,receiptPct:Be}},[P,Y]),G=c.useMemo(()=>{const ee=bn($.renewableSharePct,0,100)/100,Ne=Math.max(0,$.gridKgCO2ePerKWh)*(1-ee),Ce=F.kWh*Ne,Ee=F.kmICE*Math.max(0,$.iceKgCO2ePerKm),Ue=F.kmEV*Math.max(0,$.iceKgCO2ePerKm),Ye=Math.max(0,Ue-Ce),De=F.kmAll>0?(Ee+Ce)/F.kmAll:0,Be=F.kmEV>0?Ce/F.kmEV:0;return{effectiveGridFactor:Ne,evScope2Kg:Ce,iceKg:Ee,avoidedKg:Ye,intensityKgPerKm:De,evIntensityKgPerKm:Be,baselineIceForEVkm:Ue}},[F,$]),ve=c.useMemo(()=>{const ee=F.evSharePct,Ne=F.offPeakPct,Ce=F.receiptPct,Ee=bn($.renewableSharePct,0,100),Ue=G.intensityKgPerKm,Ye=bn(100-Ue*300,0,100),De=Math.round(ee*.28+Ne*.18+Ee*.18+Ce*.18+Ye*.18);return{adoptionScore:ee,offPeakScore:Ne,renewableScore:Ee,dataQualityScore:Ce,intensityScore:Ye,overall:De}},[F.evSharePct,F.offPeakPct,F.receiptPct,$.renewableSharePct,G.intensityKgPerKm]),Te=c.useMemo(()=>{const ee=new Map;for(const Ce of s)ee.set(Ce,{kmEV:0,kmICE:0,kWh:0,spend:0});P.forEach(Ce=>{const Ee=ee.get(Ce.group)||{kmEV:0,kmICE:0,kWh:0,spend:0};Ce.vehicleType==="EV"?Ee.kmEV+=Ce.km:Ee.kmICE+=Ce.km,ee.set(Ce.group,Ee)}),Y.forEach(Ce=>{const Ee=ee.get(Ce.group)||{kmEV:0,kmICE:0,kWh:0,spend:0};Ee.kWh+=Ce.kWh,Ee.spend+=Ce.costUGX,ee.set(Ce.group,Ee)});const Ne=Array.from(ee.entries()).map(([Ce,Ee])=>({group:Ce,...Ee,kmAll:Ee.kmEV+Ee.kmICE}));return Ne.sort((Ce,Ee)=>Ee.kmAll-Ce.kmAll),Ne},[P,Y]),ye=c.useMemo(()=>{const ee=new Map;return["Kampala HQ","Entebbe Fast Hub","Jinja Road Hub","Other"].forEach(Ce=>ee.set(Ce,{sessions:0,kWh:0,spend:0,offPeak:0})),Y.forEach(Ce=>{const Ee=ee.get(Ce.site)||{sessions:0,kWh:0,spend:0,offPeak:0};Ee.sessions+=1,Ee.kWh+=Ce.kWh,Ee.spend+=Ce.costUGX,Ee.offPeak+=Ce.offPeak?1:0,ee.set(Ce.site,Ee)}),Array.from(ee.entries()).map(([Ce,Ee])=>({site:Ce,...Ee,offPeakPct:Ee.sessions?Math.round(Ee.offPeak/Ee.sessions*100):0})).sort((Ce,Ee)=>Ee.kWh-Ce.kWh)},[Y]),ie=()=>{const ee={name:q.trim()||"ESG Report",generatedAt:new Date().toISOString(),timeRange:x,customFrom:x==="Custom"?h:void 0,customTo:x==="Custom"?y:void 0,filters:{group:I,costCenter:b,query:S||void 0},factors:$},Ne={meta:ee,core:{evKm:F.kmEV,iceKm:F.kmICE,totalKm:F.kmAll,evSharePct:F.evSharePct,chargingKWh:F.kWh,chargingSpendUGX:F.chargingSpend,chargingSessions:F.sessions,chargingOffPeakPct:F.offPeakPct,receiptCoveragePct:F.receiptPct},emissions:{effectiveGridKgCO2ePerKWh:G.effectiveGridFactor,evScope2KgCO2e:G.evScope2Kg,iceKgCO2e:G.iceKg,avoidedKgCO2e:G.avoidedKg,intensityKgCO2ePerKm:G.intensityKgPerKm},scorecards:{overall:ve.overall,adoption:ve.adoptionScore,offPeak:ve.offPeakScore,renewable:ve.renewableScore,dataQuality:ve.dataQualityScore,intensity:ve.intensityScore}};if(K==="JSON"){const Ue={templateId:be,...Ne,breakdowns:{byGroup:Te,chargingBySite:ye}};Ox(`${q||"esg"}.json`,JSON.stringify(Ue,null,2),"application/json"),r({title:"Exported",message:"JSON downloaded.",kind:"success"}),pe(!1);return}if(K==="CSV"){if(be==="Scorecard Template v1"){const De=[{reportName:ee.name,generatedAt:ee.generatedAt,timeRange:ee.timeRange,group:ee.filters.group,costCenter:ee.filters.costCenter,overallScore:ve.overall,adoptionScore:ve.adoptionScore,offPeakScore:ve.offPeakScore,renewableScore:ve.renewableScore,dataQualityScore:ve.dataQualityScore,intensityScore:ve.intensityScore}],Be=Mg(De,[{key:"reportName",label:"report_name"},{key:"generatedAt",label:"generated_at"},{key:"timeRange",label:"time_range"},{key:"group",label:"group"},{key:"costCenter",label:"cost_center"},{key:"overallScore",label:"overall_score"},{key:"adoptionScore",label:"adoption_score"},{key:"offPeakScore",label:"offpeak_score"},{key:"renewableScore",label:"renewable_score"},{key:"dataQualityScore",label:"data_quality_score"},{key:"intensityScore",label:"intensity_score"}]);Ox(`${q||"esg"}-scorecard.csv`,Be,"text/csv"),r({title:"Exported",message:"CSV downloaded.",kind:"success"}),pe(!1);return}if(be==="Mobility Emissions Template v1"){const De=Te.map($e=>{const _=$e.kmAll,te=_?Math.round($e.kmEV/_*100):0;return{reportName:ee.name,group:$e.group,evKm:Math.round($e.kmEV*10)/10,iceKm:Math.round($e.kmICE*10)/10,totalKm:Math.round(_*10)/10,evSharePct:te,chargingKWh:Math.round($e.kWh*10)/10,chargingSpendUGX:Math.round($e.spend),gridKgCO2ePerKWh:G.effectiveGridFactor,iceKgCO2ePerKm:$.iceKgCO2ePerKm}}),Be=Mg(De,[{key:"reportName",label:"report_name"},{key:"group",label:"group"},{key:"evKm",label:"ev_km"},{key:"iceKm",label:"ice_km"},{key:"totalKm",label:"total_km"},{key:"evSharePct",label:"ev_share_pct"},{key:"chargingKWh",label:"charging_kwh"},{key:"chargingSpendUGX",label:"charging_spend_ugx"},{key:"gridKgCO2ePerKWh",label:"grid_kgco2e_per_kwh"},{key:"iceKgCO2ePerKm",label:"ice_kgco2e_per_km"}]);Ox(`${q||"esg"}-mobility.csv`,Be,"text/csv"),r({title:"Exported",message:"CSV downloaded.",kind:"success"}),pe(!1);return}const Ue=[{reportName:ee.name,generatedAt:ee.generatedAt,timeRange:ee.timeRange,group:ee.filters.group,costCenter:ee.filters.costCenter,evKm:Math.round(F.kmEV*10)/10,iceKm:Math.round(F.kmICE*10)/10,totalKm:Math.round(F.kmAll*10)/10,evSharePct:F.evSharePct,chargingKWh:Math.round(F.kWh*10)/10,chargingSpendUGX:Math.round(F.chargingSpend),chargingSessions:F.sessions,offPeakPct:F.offPeakPct,receiptCoveragePct:F.receiptPct,evScope2KgCO2e:Math.round(G.evScope2Kg),iceKgCO2e:Math.round(G.iceKg),avoidedKgCO2e:Math.round(G.avoidedKg),overallScore:ve.overall}],Ye=Mg(Ue,[{key:"reportName",label:"report_name"},{key:"generatedAt",label:"generated_at"},{key:"timeRange",label:"time_range"},{key:"group",label:"group"},{key:"costCenter",label:"cost_center"},{key:"evKm",label:"ev_km"},{key:"iceKm",label:"ice_km"},{key:"totalKm",label:"total_km"},{key:"evSharePct",label:"ev_share_pct"},{key:"chargingKWh",label:"charging_kwh"},{key:"chargingSpendUGX",label:"charging_spend_ugx"},{key:"chargingSessions",label:"charging_sessions"},{key:"offPeakPct",label:"charging_offpeak_pct"},{key:"receiptCoveragePct",label:"receipt_coverage_pct"},{key:"evScope2KgCO2e",label:"ev_scope2_kgco2e"},{key:"iceKgCO2e",label:"ice_kgco2e"},{key:"avoidedKgCO2e",label:"avoided_kgco2e"},{key:"overallScore",label:"sustainability_score"}]);Ox(`${q||"esg"}-internal.csv`,Ye,"text/csv"),r({title:"Exported",message:"CSV downloaded.",kind:"success"}),pe(!1);return}const Ce=`
      <html>
        <head>
          <title>${ee.name}</title>
          <style>
            body{font-family: ui-sans-serif, system-ui; padding:24px;}
            .muted{color:#64748b;font-size:12px}
            h2{margin:0}
            .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:16px}
            .card{border:1px solid #e2e8f0;border-radius:16px;padding:12px}
            table{width:100%; border-collapse:collapse; margin-top:16px}
            th,td{border:1px solid #e2e8f0; padding:10px; font-size:12px}
            th{background:#f8fafc; text-align:left}
          </style>
        </head>
        <body>
          <h2>${ee.name}</h2>
          <div class="muted">Generated: ${new Date().toLocaleString()}  Time range: ${x}${x==="Custom"?` (${h} to ${y})`:""}</div>
          <div class="muted">Filters: Group ${I}  Cost center ${b}</div>

          <div class="grid">
            <div class="card"><div class="muted">EV share</div><div style="font-size:20px;font-weight:700">${F.evSharePct}%</div></div>
            <div class="card"><div class="muted">Charging kWh</div><div style="font-size:20px;font-weight:700">${Math.round(F.kWh)}</div></div>
            <div class="card"><div class="muted">Avoided emissions</div><div style="font-size:20px;font-weight:700">${kl(G.avoidedKg)}</div></div>
          </div>

          <h3 style="margin-top:18px">Core metrics</h3>
          <table>
            <thead><tr><th>Metric</th><th>Value</th></tr></thead>
            <tbody>
              <tr><td>Total km</td><td>${Math.round(F.kmAll)}</td></tr>
              <tr><td>EV km</td><td>${Math.round(F.kmEV)}</td></tr>
              <tr><td>ICE km</td><td>${Math.round(F.kmICE)}</td></tr>
              <tr><td>Charging spend</td><td>${ni(F.chargingSpend)}</td></tr>
              <tr><td>EV Scope 2 emissions</td><td>${kl(G.evScope2Kg)}</td></tr>
              <tr><td>ICE emissions</td><td>${kl(G.iceKg)}</td></tr>
              <tr><td>Sustainability score</td><td>${ve.overall}</td></tr>
            </tbody>
          </table>

          <div class="muted" style="margin-top:16px">Note: emission factors are organization-configurable. This export uses your current factor settings.</div>
          <div class="muted" style="margin-top:8px">Use browser Print and select Save as PDF.</div>
        </body>
      </html>
    `,Ee=window.open("","_blank");if(!Ee){r({title:"Popup blocked",message:"Allow popups to export PDF via Print.",kind:"warn"});return}Ee.document.open(),Ee.document.write(Ce),Ee.document.close(),Ee.focus(),Ee.print(),r({title:"Print ready",message:"Use Print to PDF to save.",kind:"info"}),pe(!1)},Oe=async()=>{const ee={templateId:be,fields:{ev_km:"number",ice_km:"number",charging_kwh:"number",charging_spend_ugx:"number",ev_scope2_kgco2e:"number",avoided_kgco2e:"number",sustainability_score:"0-100"},notes:"Align these keys to your internal ESG format templates."};try{await navigator.clipboard.writeText(JSON.stringify(ee,null,2)),r({title:"Copied",message:"Template example copied.",kind:"success"})}catch{r({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},Ae=Pk(ve.overall);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(ZV,{toasts:l,onDismiss:ee=>n(Ne=>Ne.filter(Ce=>Ce.id!==ee))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:vi.green},children:e.jsx(Hd,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sustainability and ESG Reporting"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"EV usage, charging utilization and spend, emissions estimates, and ESG scorecards with export templates."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Xt,{label:`EV share ${F.evSharePct}%`,tone:F.evSharePct>=50?"good":F.evSharePct>=30?"info":"warn"}),e.jsx(Xt,{label:`Charging ${Math.round(F.kWh)} kWh`,tone:"neutral"}),e.jsx(Xt,{label:`Charging spend ${ni(F.chargingSpend)}`,tone:"neutral"}),e.jsx(Xt,{label:`Avoided ${kl(G.avoidedKg)}`,tone:G.avoidedKg>0?"good":"neutral"}),e.jsx(Xt,{label:`Score ${ve.overall} (${Ae.label})`,tone:Ae.tone})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ma,{variant:"outline",onClick:()=>he(!0),children:[e.jsx(Dn,{className:"h-4 w-4"})," Factors"]}),e.jsxs(ma,{variant:"outline",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs(ma,{variant:"primary",onClick:()=>o(ee=>!ee),children:[e.jsx(et,{className:"h-4 w-4"})," ",i?"Tracking on":"Tracking off"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"ev-usage",label:"EV usage"},{id:"charging",label:"Charging"},{id:"emissions",label:"Emissions"},{id:"scorecards",label:"Scorecards"},{id:"templates",label:"Templates"}].map(ee=>e.jsx("button",{className:tl("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",d===ee.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:d===ee.id?{background:vi.green}:void 0,onClick:()=>u(ee.id),children:ee.label},ee.id))}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 rounded-3xl border border-slate-200 bg-white p-4 md:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-3",children:e.jsx(Qc,{label:"Time range",value:x,onChange:ee=>p(ee),options:[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"YTD",label:"Year to date"},{value:"Custom",label:"Custom"}]})}),e.jsx("div",{className:tl("md:col-span-2",x!=="Custom"&&"opacity-60"),children:e.jsx(Tg,{label:"From",type:"date",value:h,onChange:j,disabled:x!=="Custom"})}),e.jsx("div",{className:tl("md:col-span-2",x!=="Custom"&&"opacity-60"),children:e.jsx(Tg,{label:"To",type:"date",value:y,onChange:f,disabled:x!=="Custom"})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Qc,{label:"Group",value:I,onChange:ee=>A(ee),options:[{value:"All",label:"All"},...s.map(ee=>({value:ee,label:ee}))]})}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:S,onChange:ee=>z(ee.target.value),placeholder:"site, requester, tag...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"}),S?e.jsx("button",{className:"rounded-xl p-1 text-slate-500 hover:bg-slate-100",onClick:()=>z(""),"aria-label":"Clear",children:e.jsx(_e,{className:"h-4 w-4"})}):null]})]}),e.jsxs("div",{className:"md:col-span-12 grid grid-cols-1 gap-3 md:grid-cols-3",children:[e.jsx(Qc,{label:"Cost center",value:b,onChange:C,options:[{value:"All",label:"All"},...a.map(ee=>({value:ee,label:ee}))]}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:"Note: emission factors are defaults for demo. Update Factors to match your internal ESG standards."})]}),e.jsxs("div",{className:"md:col-span-12 flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"text-xs text-slate-500",children:["Showing ",e.jsx("span",{className:"font-semibold text-slate-900",children:P.length})," mobility event(s) and ",e.jsx("span",{className:"font-semibold text-slate-900",children:Y.length})," charging session(s)."]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ma,{variant:"outline",onClick:()=>{A("All"),C("All"),z(""),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(ma,{variant:"outline",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]})]})]})]})]}),e.jsx("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:i?d==="overview"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-4",children:[e.jsxs(ba,{title:"Core ESG metrics",subtitle:"Core: EV usage metrics plus charging spend and utilization.",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-4",children:[e.jsx(Hl,{title:"EV share",value:`${F.evSharePct}%`,sub:`${qt(F.kmEV,0)} km EV`,icon:e.jsx(Hd,{className:"h-5 w-5"}),tone:F.evSharePct>=50?"good":F.evSharePct>=30?"info":"warn"}),e.jsx(Hl,{title:"Charging kWh",value:`${qt(F.kWh,0)}`,sub:`${F.sessions} sessions`,icon:e.jsx(Sf,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Hl,{title:"Charging spend",value:ni(F.chargingSpend),sub:`Off-peak ${F.offPeakPct}%`,icon:e.jsx(To,{className:"h-5 w-5"}),tone:F.offPeakPct>=60?"good":"warn"}),e.jsx(Hl,{title:"Avoided emissions",value:kl(G.avoidedKg),sub:`Intensity ${qt(G.intensityKgPerKm,3)} kg/km`,icon:e.jsx(lt,{className:"h-5 w-5"}),tone:G.avoidedKg>0?"good":"neutral"})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(ba,{title:"Mobility breakdown by group",subtitle:"EV km and ICE km",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[Te.map(ee=>{const Ne=ee.kmAll,Ce=Ne?Math.round(ee.kmEV/Ne*100):0;return e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ee.group}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["EV share ",Ce,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[qt(Ne,0)," km"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["EV ",qt(ee.kmEV,0),"  ICE ",qt(ee.kmICE,0)]})]})]}),e.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,Ce)}%`,background:vi.green}})})]},ee.group)}),Te.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No group data."})]})}),e.jsx(ba,{title:"Charging utilization by site",subtitle:"kWh, spend, off-peak",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[ye.map(ee=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ee.site}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Sessions ",ee.sessions,"  Off-peak ",ee.offPeakPct,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[qt(ee.kWh,0)," kWh"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Spend ",ni(ee.spend)]})]})]}),e.jsx("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full",style:{width:`${Math.min(100,ee.offPeakPct)}%`,background:vi.green}})})]},ee.site)),ye.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No charging data."})]})})]})]}),e.jsxs(ba,{title:"Data quality",subtitle:"Premium: receipt coverage and audit readiness.",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsx(hr,{value:F.receiptPct,label:"Receipt coverage"}),e.jsx(hr,{value:F.offPeakPct,label:"Off-peak share"}),e.jsx(hr,{value:ve.overall,label:"Sustainability score"})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: integrate receipt coverage into your audit controls and dispute workflows."})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs(ba,{title:"Quick actions",subtitle:"Exports and configuration.",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(ma,{variant:"outline",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export ESG"]}),e.jsxs(ma,{variant:"outline",onClick:()=>he(!0),children:[e.jsx(Dn,{className:"h-4 w-4"})," Edit factors"]}),e.jsxs(ma,{variant:"outline",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy template keys"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Tip: schedule delivery using the Scheduling section in Reporting & Analytics (V)."})]}),e.jsx(ba,{title:"Core notes",subtitle:"What is included.",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) EV usage metrics computed from mobility events"}),e.jsx("li",{children:"2) Charging spend and utilization from EVs & Charging sessions"}),e.jsx("li",{children:"3) Emissions estimates depend on configured factors"})]})})}),e.jsx(ba,{title:"Premium notes",subtitle:"Scorecards and templates.",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium includes scorecards, anomaly signals, and exports aligned to internal ESG templates."})})]})]}):d==="ev-usage"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(ba,{title:"EV usage summary",subtitle:"Core: EV usage metrics.",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:[e.jsx(Hl,{title:"Total km",value:qt(F.kmAll,0),sub:`EV ${qt(F.kmEV,0)}  ICE ${qt(F.kmICE,0)}`,icon:e.jsx(im,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Hl,{title:"EV share",value:`${F.evSharePct}%`,sub:"EV km over total km",icon:e.jsx(Hd,{className:"h-5 w-5"}),tone:F.evSharePct>=50?"good":F.evSharePct>=30?"info":"warn"}),e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:"Best practice: enforce purpose tags and cost centers on mobility transactions so ESG reporting is auditable."})]})}),e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsx(ba,{title:"Mobility events",subtitle:"Drilldown list",right:e.jsx(Xt,{label:`${P.length}`,tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Cost center"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Type"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vehicle"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"km"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Requester"})]})}),e.jsxs("tbody",{children:[P.slice(0,18).map(ee=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:Sk(ee.ts)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.group}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.costCenter}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.mobilityType}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Xt,{label:ee.vehicleType,tone:ee.vehicleType==="EV"?"good":"neutral"})}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:qt(ee.km,1)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.requester})]},ee.id)),P.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No mobility events."})})]})]})})})})]}):d==="charging"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsxs(ba,{title:"Charging metrics",subtitle:"Core: spend and utilization.",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:[e.jsx(Hl,{title:"Sessions",value:`${F.sessions}`,sub:`Off-peak ${F.offPeakPct}%`,icon:e.jsx(Sf,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Hl,{title:"kWh",value:qt(F.kWh,0),sub:`Avg ${F.sessions?qt(F.kWh/F.sessions,1):"0"} kWh/session`,icon:e.jsx(To,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Hl,{title:"Spend",value:ni(F.chargingSpend),sub:`Receipt coverage ${F.receiptPct}%`,icon:e.jsx(jt,{className:"h-5 w-5"}),tone:F.receiptPct>=85?"good":"warn"}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Tip: Shift non-urgent charging to off-peak windows to reduce costs."})]}),e.jsx(ba,{title:"Site utilization",subtitle:"kWh by site",right:e.jsx(Xt,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[ye.map(ee=>e.jsx(eB,{label:ee.site,value:ee.kWh,total:Math.max(1,F.kWh),right:`${qt(ee.kWh,0)} kWh`},ee.site)),ye.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-sm text-slate-600",children:"No charging data."})]})})]}),e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsx(ba,{title:"Charging sessions",subtitle:"Drilldown list",right:e.jsx(Xt,{label:`${Y.length}`,tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Time"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Site"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Group"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"kWh"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Spend"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Off-peak"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Receipt"})]})}),e.jsxs("tbody",{children:[Y.slice(0,18).map(ee=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:Sk(ee.ts)}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.site}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.group}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:qt(ee.kWh,1)}),e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ni(ee.costUGX)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Xt,{label:ee.offPeak?"Yes":"No",tone:ee.offPeak?"good":"warn"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Xt,{label:ee.hasReceipt?"Yes":"No",tone:ee.hasReceipt?"good":"warn"})})]},ee.id)),Y.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-sm text-slate-600",children:"No sessions."})})]})]})})})})]}):d==="emissions"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-4 space-y-4",children:e.jsxs(ba,{title:"Emissions",subtitle:"Premium: estimates and scorecards.",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsx(Hl,{title:"EV Scope 2",value:kl(G.evScope2Kg),sub:`Grid factor ${qt(G.effectiveGridFactor,3)} kg/kWh`,icon:e.jsx(Sf,{className:"h-5 w-5"}),tone:"info"}),e.jsx(Hl,{title:"ICE emissions",value:kl(G.iceKg),sub:`ICE factor ${qt($.iceKgCO2ePerKm,3)} kg/km`,icon:e.jsx(im,{className:"h-5 w-5"}),tone:"neutral"}),e.jsx(Hl,{title:"Avoided",value:kl(G.avoidedKg),sub:"If EV km would otherwise be ICE",icon:e.jsx(lt,{className:"h-5 w-5"}),tone:G.avoidedKg>0?"good":"neutral"}),e.jsxs(ma,{variant:"outline",onClick:()=>he(!0),children:[e.jsx(Dn,{className:"h-4 w-4"})," Edit factors"]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Factors are organization-configurable. Align to your internal ESG standards."})]})}),e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsxs(ba,{title:"Emissions table",subtitle:"Key values used in exports",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Metric"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Value"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Notes"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"EV kWh"}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[qt(F.kWh,1)," kWh"]}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"From EVs & Charging sessions"})]}),e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"Effective grid factor"}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[qt(G.effectiveGridFactor,3)," kgCO2e/kWh"]}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"Grid factor adjusted for renewable share"})]}),e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"EV Scope 2 emissions"}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:kl(G.evScope2Kg)}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"kWh multiplied by effective grid factor"})]}),e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"ICE emissions"}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:kl(G.iceKg)}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"ICE km multiplied by ICE factor"})]}),e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"Avoided emissions"}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:kl(G.avoidedKg)}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"Baseline ICE for EV km minus EV Scope 2"})]}),e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:"Overall intensity"}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[qt(G.intensityKgPerKm,3)," kgCO2e/km"]}),e.jsx("td",{className:"px-4 py-3 text-slate-600",children:"(ICE + EV Scope 2) divided by total km"})]})]})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: export these values in templates aligned to your internal ESG formats."})]})})]}):d==="scorecards"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs(ba,{title:"Sustainability scorecards",subtitle:"Premium: scorecards and grades.",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(hr,{value:ve.overall,label:"Overall"}),e.jsx(hr,{value:ve.adoptionScore,label:"EV adoption"}),e.jsx(hr,{value:ve.offPeakScore,label:"Off-peak charging"}),e.jsx(hr,{value:ve.renewableScore,label:"Renewable share"}),e.jsx(hr,{value:ve.dataQualityScore,label:"Data quality"}),e.jsx(hr,{value:ve.intensityScore,label:"Emissions intensity"})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Overall grade: ",e.jsx("span",{className:"font-semibold",children:Ae.label}),". Weights are explainable and can be customized to your ESG framework."]})]})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsxs(ba,{title:"Scorecard detail",subtitle:"How the score is computed",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Dimension"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Score"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Meaning"})]})}),e.jsx("tbody",{children:[{k:"EV adoption",v:ve.adoptionScore,d:"EV km share of total mobility"},{k:"Off-peak charging",v:ve.offPeakScore,d:"Off-peak sessions share"},{k:"Renewable share",v:ve.renewableScore,d:"Renewable electricity share used to adjust Scope 2"},{k:"Data quality",v:ve.dataQualityScore,d:"Receipt coverage in charging logs"},{k:"Emissions intensity",v:ve.intensityScore,d:"Lower kgCO2e per km is better"}].map(ee=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ee.k}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Xt,{label:`${Math.round(ee.v)}`,tone:Pk(ee.v).tone})}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.d})]},ee.k))})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ma,{variant:"outline",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export scorecard"]}),e.jsxs(ma,{variant:"outline",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy template keys"]})]})]})})]}):d==="templates"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsxs(ba,{title:"ESG template library",subtitle:"Premium: exports aligned to internal format templates.",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:V.map(ee=>e.jsx("button",{type:"button",className:tl("w-full rounded-3xl border bg-white p-4 text-left hover:bg-slate-50",be===ee?"border-emerald-300 ring-4 ring-emerald-100":"border-slate-200"),onClick:()=>fe(ee),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:ee}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:ee==="Internal ESG Template v1"?"Summary for internal ESG packs":ee==="Scorecard Template v1"?"Scorecards and ratings":ee==="Mobility Emissions Template v1"?"Mobility and emissions by group":"Custom mapping slot"})]}),e.jsx(ue,{className:"h-5 w-5 text-slate-400"})]})},ee))}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ma,{variant:"primary",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export now"]}),e.jsxs(ma,{variant:"outline",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy keys"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: schedule reports using Reporting & Analytics schedules, and deliver via Email, WhatsApp, WeChat, or SMS."})]})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsx(ba,{title:"Template preview",subtitle:"Fields included",right:e.jsx(Xt,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:be}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Preview is based on current filters and factor settings."})]}),e.jsx(Xt,{label:K,tone:"neutral"})]}),e.jsx("div",{className:"mt-4 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Field"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Value"})]})}),e.jsx("tbody",{children:[{k:"ev_km",v:qt(F.kmEV,1)},{k:"ice_km",v:qt(F.kmICE,1)},{k:"charging_kwh",v:qt(F.kWh,1)},{k:"charging_spend_ugx",v:ni(F.chargingSpend)},{k:"ev_scope2_kgco2e",v:kl(G.evScope2Kg)},{k:"avoided_kgco2e",v:kl(G.avoidedKg)},{k:"sustainability_score",v:`${ve.overall} (${Ae.label})`}].map(ee=>e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 font-semibold text-slate-900",children:ee.k}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:ee.v})]},ee.k))})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ma,{variant:"outline",onClick:()=>pe(!0),children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs(ma,{variant:"outline",onClick:Oe,children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy keys"]})]})]})})})]}):e.jsx(Ek,{title:"Select a tab",subtitle:"Use the tabs to view ESG dashboards."}):e.jsx(Ek,{title:"Tracking disabled",subtitle:"Enable tracking to compute EV usage and ESG metrics."})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"W Sustainability and ESG Reporting v2. Core: EV usage metrics and EV charging spend/utilization. Premium: emissions estimates, scorecards, and template-aligned ESG exports."})})]})}),e.jsx(Ak,{open:W,title:"Emission factors",subtitle:"Set values to match your internal ESG standards. Defaults are placeholders for demo.",onClose:()=>he(!1),actions:[{label:"Save",onClick:()=>{D(ee=>({gridKgCO2ePerKWh:bn(ee.gridKgCO2ePerKWh,0,5),iceKgCO2ePerKm:bn(ee.iceKgCO2ePerKm,0,2),renewableSharePct:bn(ee.renewableSharePct,0,100)})),r({title:"Saved",message:"Factors updated.",kind:"success"}),he(!1)}}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(ma,{variant:"outline",onClick:()=>he(!1),children:"Close"}),e.jsxs(ma,{variant:"primary",onClick:()=>{D(ee=>({gridKgCO2ePerKWh:bn(ee.gridKgCO2ePerKWh,0,5),iceKgCO2ePerKm:bn(ee.iceKgCO2ePerKm,0,2),renewableSharePct:bn(ee.renewableSharePct,0,100)})),r({title:"Saved",message:"Factors updated.",kind:"success"}),he(!1)},children:[e.jsx(et,{className:"h-4 w-4"})," Save"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Rg,{label:"Grid factor",value:$.gridKgCO2ePerKWh,onChange:ee=>D(Ne=>({...Ne,gridKgCO2ePerKWh:ee})),hint:"kgCO2e per kWh",min:0,max:5,step:.001}),e.jsx(Rg,{label:"ICE baseline factor",value:$.iceKgCO2ePerKm,onChange:ee=>D(Ne=>({...Ne,iceKgCO2ePerKm:ee})),hint:"kgCO2e per km",min:0,max:2,step:.001}),e.jsx(Rg,{label:"Renewable share",value:$.renewableSharePct,onChange:ee=>D(Ne=>({...Ne,renewableSharePct:ee})),hint:"Percent",min:0,max:100,step:1}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"How it works"}),e.jsx("div",{className:"mt-2 text-xs text-slate-700",children:"Effective grid factor = grid factor multiplied by (1 - renewable share). EV Scope 2 = charging kWh multiplied by effective grid factor."}),e.jsx("div",{className:"mt-3 text-xs text-slate-600",children:"Avoided emissions = baseline ICE for EV km minus EV Scope 2."})]}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Use the same factors across your organization for consistent reporting."})]})}),e.jsx(Ak,{open:xe,title:"Export ESG report",subtitle:"Choose a template and format. Exports use current filters and factor settings.",onClose:()=>pe(!1),actions:[{label:"Export",onClick:ie}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(ma,{variant:"outline",onClick:()=>pe(!1),children:"Cancel"}),e.jsxs(ma,{variant:"primary",onClick:ie,children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(Tg,{label:"Export name",value:q,onChange:L,placeholder:"ESG Report",hint:"Used in file name"}),e.jsx(Qc,{label:"Format",value:K,onChange:ee=>re(ee),options:[{value:"CSV",label:"CSV"},{value:"JSON",label:"JSON"},{value:"PDF",label:"PDF (Print)"}]}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(Qc,{label:"Template",value:be,onChange:ee=>fe(ee),options:V.map(ee=>({value:ee,label:ee})),hint:"Aligned to internal templates"})}),e.jsxs("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Current totals: EV ",qt(F.kmEV,0)," km, ICE ",qt(F.kmICE,0)," km, Charging ",qt(F.kWh,0)," kWh, Spend ",ni(F.chargingSpend),"."]}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"PDF export uses Print to PDF. Allow popups if prompted."})]})})]})}const fh={green:"#03CD8C",orange:"#F77F00"};function mi(...t){return t.filter(Boolean).join(" ")}function tB(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function It({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:mi("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Yt({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:fh.green}:t==="accent"?{background:fh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:mi(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function sB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:mi("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function xd({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function aB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?n():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.18},className:"fixed inset-y-0 right-0 z-50 w-full max-w-[560px] flex flex-col overflow-hidden border-l border-slate-200 bg-white shadow-[0_20px_70px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 truncate text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function lB({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function LA(){const t=ot(),[s,a]=c.useState([]),l=k=>{const P=tB("toast");a(Y=>[{id:P,...k},...Y].slice(0,4)),window.setTimeout(()=>a(Y=>Y.filter(F=>F.id!==P)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer"}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(k=>k.id===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin"].includes(o.role),[o.role]),[u,x]=c.useState("Sandbox"),[p,h]=c.useState([{id:"KEY-1",name:"Server key",env:"Production",createdAt:"Last month",lastUsed:"Today",scopes:["wallet.read","wallet.write","transactions.read","approvals.read","webhooks.manage"],status:"Active",masked:"sk_live_A1"},{id:"KEY-2",name:"Sandbox key",env:"Sandbox",createdAt:"Last week",lastUsed:"Yesterday",scopes:["wallet.read","wallet.write","transactions.read","webhooks.manage"],status:"Active",masked:"sk_test_B2"}]),[j,y]=c.useState([{id:"WH-1",url:"https://example.com/webhooks/wallet",env:"Production",enabled:!0,secretMasked:"whsec_C1",events:["wallet.deposit.posted","wallet.withdrawal.failed","wallet.payout.paid","approvals.decided","invoices.issued"],lastDelivery:{status:"Success",when:"5m ago",code:200}},{id:"WH-2",url:"https://sandbox.example.com/webhooks",env:"Sandbox",enabled:!0,secretMasked:"whsec_T1",events:["wallet.deposit.created","wallet.payout.queued"],lastDelivery:{status:"Failed",when:"1h ago",code:500}}]),[f,I]=c.useState([{id:"D-1",endpointId:"WH-1",event:"wallet.payout.paid",when:"5m ago",status:"Success",code:200,attempts:1,requestId:"req_9a12",payloadPreview:'{"payout_id":"PO-3102","state":"paid"}'},{id:"D-2",endpointId:"WH-2",event:"wallet.deposit.created",when:"1h ago",status:"Failed",code:500,attempts:3,requestId:"req_8b77",payloadPreview:'{"deposit_id":"TX-9004","state":"created"}'}]),[A,b]=c.useState([{id:"JOB-200",type:"Transactions",format:"CSV",env:"Production",createdAt:"Today",status:"Ready",note:"Last 30 days"},{id:"JOB-201",type:"Approvals",format:"JSON",env:"Production",createdAt:"Yesterday",status:"Running",note:"Pending"},{id:"JOB-202",type:"Invoices",format:"CSV",env:"Sandbox",createdAt:"Last week",status:"Failed",note:"Timeout"}]),C=c.useMemo(()=>p.filter(k=>k.env===u),[p,u]),S=c.useMemo(()=>j.filter(k=>k.env===u),[j,u]),z=c.useMemo(()=>A.filter(k=>k.env===u),[A,u]),[$,D]=c.useState(!1),[W,he]=c.useState(null),V=k=>{he(k),D(!0)},xe=async k=>{try{await navigator.clipboard.writeText(k),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed",message:"Clipboard blocked"})}},pe=()=>{if(!d){l({kind:"warn",title:"Admin required"});return}const k=`KEY-${Math.floor(10+Math.random()*90)}`;h(P=>[{id:k,name:`${u} key`,env:u,createdAt:"Just now",lastUsed:"Never",scopes:["wallet.read","transactions.read","webhooks.manage"],status:"Active",masked:u==="Production"?"sk_live_NEW":"sk_test_NEW"},...P]),l({kind:"success",title:"API key created",message:`${u}  ${k}`})},be=k=>{if(!d){l({kind:"warn",title:"Admin required"});return}h(P=>P.map(Y=>Y.id===k?{...Y,status:"Revoked"}:Y)),l({kind:"info",title:"Key revoked",message:k})},fe=k=>{if(!d){l({kind:"warn",title:"Admin required"});return}y(P=>P.map(Y=>Y.id===k?{...Y,enabled:!Y.enabled}:Y)),l({kind:"success",title:"Endpoint updated"})},K=k=>{if(!d){l({kind:"warn",title:"Admin required"});return}I(P=>P.map(Y=>Y.id===k?{...Y,attempts:Y.attempts+1,status:"Success",code:200,when:"Just now"}:Y)),l({kind:"success",title:"Delivery retried",message:k})},re=(k,P)=>{if(!d&&k!=="Invoices"){l({kind:"warn",title:"Admin required"});return}const Y=`JOB-${Math.floor(300+Math.random()*900)}`;b(F=>[{id:Y,type:k,format:P,env:u,createdAt:"Just now",status:"Queued",note:"Export job"},...F]),l({kind:"success",title:"Export queued",message:`${k}  ${P}`}),window.setTimeout(()=>b(F=>F.map(G=>G.id===Y?{...G,status:"Running"}:G)),900),window.setTimeout(()=>b(F=>F.map(G=>G.id===Y?{...G,status:"Ready"}:G)),2100)},q=k=>l({kind:"info",title:"Download",message:`Would download ${k}`}),L=()=>l({kind:"info",title:"Admin Console",message:"Deep link to Integrations section"}),M=c.useMemo(()=>["wallet.deposit.created","wallet.deposit.posted","wallet.withdrawal.created","wallet.withdrawal.failed","wallet.payout.queued","wallet.payout.paid","wallet.payout.failed","wallet.transfer.created","wallet.fx.converted","wallet.dispute.opened"],[]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(sB,{toasts:s,onDismiss:k=>a(P=>P.filter(Y=>Y.id!==k))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:fh.green},children:e.jsx(IL,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Integrations & Developer Center"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"API keys, webhooks, inspector, retries, and export jobs"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(It,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(It,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(It,{label:`Env: ${u}`,tone:u==="Production"?"warn":"neutral"}),e.jsx(It,{label:`Wallet events: ${M.length}`,tone:"info"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(lB,{value:r,onChange:i,options:n.map(k=>({value:k.id,label:k.name}))})}),e.jsx(Yt,{variant:u==="Sandbox"?"primary":"outline",className:"px-3 py-2",onClick:()=>x("Sandbox"),children:"Sandbox"}),e.jsx(Yt,{variant:u==="Production"?"primary":"outline",className:"px-3 py-2",onClick:()=>x("Production"),children:"Production"}),e.jsxs(Yt,{variant:"outline",onClick:L,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]})]})]}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limited access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Only Admin/Owner can manage API keys and webhooks."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsxs("div",{className:"space-y-4 lg:col-span-8",children:[e.jsx(xd,{title:"API keys",subtitle:"Scopes and sandbox vs production",right:e.jsxs(Yt,{variant:"primary",disabled:!d,onClick:pe,children:[e.jsx(rr,{className:"h-4 w-4"})," New key"]}),children:e.jsxs("div",{className:"space-y-2",children:[C.map(k=>e.jsx("div",{className:mi("rounded-3xl border p-4",k.status==="Revoked"?"border-slate-200 bg-slate-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.name}),e.jsx(It,{label:k.env,tone:k.env==="Production"?"warn":"neutral"}),e.jsx(It,{label:k.status,tone:k.status==="Active"?"good":"neutral"}),e.jsx(It,{label:k.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:k.masked}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",k.createdAt,"  Last used ",k.lastUsed]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[k.scopes.slice(0,5).map(P=>e.jsx(It,{label:P,tone:"neutral"},P)),k.scopes.length>5?e.jsx(It,{label:`+${k.scopes.length-5} more`,tone:"neutral"}):null]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Yt,{variant:"outline",className:"px-3 py-2",onClick:()=>xe(k.masked),children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(Yt,{variant:"outline",className:"px-3 py-2",onClick:()=>l({kind:"info",title:"Rotate",message:"Rotate key"}),disabled:!d,children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(Yt,{variant:"outline",className:"px-3 py-2",onClick:()=>be(k.id),disabled:!d||k.status==="Revoked",children:"Revoke"})]})]})},k.id)),C.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No keys for this environment."})]})}),e.jsx(xd,{title:"Webhooks",subtitle:"Endpoints, wallet events, inspector and retries",right:e.jsx(It,{label:`${S.length} endpoint(s)`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[S.map(k=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.url}),e.jsx(It,{label:k.id,tone:"neutral"}),e.jsx(It,{label:k.enabled?"Enabled":"Disabled",tone:k.enabled?"good":"neutral"}),e.jsx(It,{label:k.lastDelivery.status,tone:k.lastDelivery.status==="Success"?"good":"warn"}),e.jsx(It,{label:`${k.lastDelivery.code}`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Secret: ",k.secretMasked,"  Last delivery ",k.lastDelivery.when]}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[k.events.slice(0,4).map(P=>e.jsx(It,{label:P,tone:P.startsWith("wallet.")?"info":"neutral"},P)),k.events.length>4?e.jsx(It,{label:`+${k.events.length-4} more`,tone:"neutral"}):null]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Yt,{variant:k.enabled?"primary":"outline",disabled:!d,className:"px-3 py-2",onClick:()=>fe(k.id),children:k.enabled?"ON":"OFF"}),e.jsx(Yt,{variant:"outline",className:"px-3 py-2",onClick:()=>l({kind:"info",title:"Inspector",message:"Scroll to delivery inspector"}),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},k.id)),e.jsxs("div",{className:"pt-2 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Wallet webhook events"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[M.slice(0,8).map(k=>e.jsx(It,{label:k,tone:"info"},k)),M.length>8?e.jsx(It,{label:`+${M.length-8} more`,tone:"neutral"}):null]})]})]})}),e.jsx(xd,{title:"Webhook inspector",subtitle:"Delivery logs and retries",right:e.jsx(It,{label:`${f.length} delivery(s)`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:f.filter(k=>u==="Sandbox"?k.endpointId==="WH-2":k.endpointId==="WH-1").map(k=>e.jsx("button",{type:"button",onClick:()=>V(k),className:mi("w-full rounded-3xl border p-4 text-left",k.status==="Success"?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.event}),e.jsx(It,{label:k.status,tone:k.status==="Success"?"good":"warn"}),e.jsx(It,{label:`${k.code}`,tone:"neutral"}),e.jsx(It,{label:`Attempts ${k.attempts}`,tone:k.attempts>1?"warn":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:[k.when,"  ",k.requestId]}),e.jsx("div",{className:"mt-2 text-xs text-slate-700",children:k.payloadPreview})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Yt,{variant:k.status==="Failed"?"primary":"outline",disabled:!d||k.status!=="Failed",title:d?k.status!=="Failed"?"No retry":"Retry":"Admin required",onClick:()=>K(k.id),children:[e.jsx(Rn,{className:"h-4 w-4"})," Retry"]}),e.jsx(Yt,{variant:"outline",onClick:()=>V(k),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},k.id))})}),e.jsxs(xd,{title:"Export jobs",subtitle:"CSV and JSON for transactions, approvals, invoices",right:e.jsx(It,{label:`${z.length} job(s)`,tone:"neutral"}),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Yt,{variant:"primary",disabled:!d,onClick:()=>re("Transactions","CSV"),children:[e.jsx(ue,{className:"h-4 w-4"})," Transactions CSV"]}),e.jsxs(Yt,{variant:"outline",disabled:!d,onClick:()=>re("Approvals","JSON"),children:[e.jsx(ue,{className:"h-4 w-4"})," Approvals JSON"]}),e.jsxs(Yt,{variant:"outline",onClick:()=>re("Invoices","CSV"),children:[e.jsx(ue,{className:"h-4 w-4"})," Invoices CSV"]})]}),e.jsx("div",{className:"mt-4 space-y-2",children:z.map(k=>e.jsx("div",{className:mi("rounded-3xl border p-4",k.status==="Ready"?"border-emerald-200 bg-emerald-50":k.status==="Failed"?"border-rose-200 bg-rose-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.id}),e.jsx(It,{label:k.type,tone:"neutral"}),e.jsx(It,{label:k.format,tone:"neutral"}),e.jsx(It,{label:k.status,tone:k.status==="Ready"?"good":k.status==="Failed"?"bad":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[k.createdAt,"  ",k.note]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{variant:"outline",className:"px-3 py-2",onClick:()=>l({kind:"info",title:"Open",message:k.id}),children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(Yt,{variant:k.status==="Ready"?"primary":"outline",disabled:k.status!=="Ready",title:k.status!=="Ready"?"Not ready":"Download",onClick:()=>q(k.id),children:e.jsx(ct,{className:"h-4 w-4"})})]})]})},k.id))})]})]}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:fh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Premium developer tools"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Webhooks for wallet events, delivery inspector, retries, and export jobs."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(It,{label:"API keys",tone:"neutral"}),e.jsx(It,{label:"Webhooks",tone:"neutral"}),e.jsx(It,{label:"Inspector",tone:"neutral"}),e.jsx(It,{label:"Exports",tone:"neutral"})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(Yt,{variant:"outline",onClick:L,children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]})})]})]})}),e.jsx(xd,{title:"Security",subtitle:"Best practices",right:e.jsx(It,{label:"Required",tone:"warn"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Keep secrets safe"}),e.jsxs("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:[e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Use separate keys per environment"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Rotate webhook secrets regularly"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),"Restrict scopes to least privilege"]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"Docs",message:"Open security docs"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Docs"]})})]})}),e.jsx(xd,{title:"Docs",subtitle:"Quick start",right:e.jsx(It,{label:u,tone:u==="Production"?"warn":"neutral"}),children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Quick start"}),e.jsx("div",{className:"mt-2 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:`# Example (pseudo)
POST /v1/wallet/transfer
Authorization: Bearer <API_KEY>

{ "amount": 50000, "currency": "UGX", "to": "user_123" }`})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"Open docs",message:"Deep link to API docs"}),children:[e.jsx(ue,{className:"h-4 w-4"})," API docs"]}),e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"SDK",message:"Download SDK"}),children:[e.jsx(ct,{className:"h-4 w-4"})," SDK"]})]})]})})})]})]}),e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Add wallet events to webhooks so partners can sync deposits, withdrawals, and payouts."})]})]}),e.jsxs(Yt,{variant:"primary",disabled:!d,onClick:pe,children:[e.jsx(rr,{className:"h-4 w-4"})," New key"]})]})})]})]})}),e.jsx(aB,{open:$,title:W?`Delivery ${W.id}`:"Delivery",subtitle:W?`${W.event}  ${W.status}`:"",onClose:()=>D(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Payloads are logged for debugging."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{variant:"outline",onClick:()=>D(!1),children:"Close"}),W&&W.status==="Failed"?e.jsxs(Yt,{variant:"primary",disabled:!d,onClick:()=>K(W.id),children:[e.jsx(Rn,{className:"h-4 w-4"})," Retry"]}):null]})]}),children:W?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:mi("rounded-3xl border p-4",W.status==="Success"?"border-emerald-200 bg-emerald-50":"border-amber-200 bg-amber-50"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:mi("grid h-10 w-10 place-items-center rounded-2xl bg-white",W.status==="Success"?"text-emerald-700":"text-amber-800"),children:W.status==="Success"?e.jsx(et,{className:"h-5 w-5"}):e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:W.status}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["HTTP ",W.code,"  Attempts ",W.attempts]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Request ",W.requestId,"  ",W.when]})]})]})}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Payload"}),e.jsx("div",{className:"mt-2 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-700",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:W.payloadPreview})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Yt,{variant:"outline",onClick:()=>xe(W.payloadPreview),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy payload"]}),e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"View headers",message:"Show headers"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Headers"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Actions"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[W.status==="Failed"?e.jsxs(Yt,{variant:"primary",disabled:!d,onClick:()=>K(W.id),children:[e.jsx(Rn,{className:"h-4 w-4"})," Retry"]}):null,e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"Redeliver",message:"Schedule retry"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Schedule retry"]}),e.jsxs(Yt,{variant:"outline",onClick:()=>l({kind:"info",title:"Inspect",message:"Open inspector"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Inspector"]})]})]})]}):null})]})}const gh={green:"#03CD8C",orange:"#F77F00"};function xi(...t){return t.filter(Boolean).join(" ")}function Mk(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Ut({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:xi("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Dg(t){return t==="High"?"bad":t==="Medium"?"warn":"good"}function ws({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:gh.green}:t==="accent"?{background:gh.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:xi(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function nB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:xi("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function to({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function rB({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function FA(){const t=ot(),[s,a]=c.useState([]),l=M=>{const k=Mk("toast");a(P=>[{id:k,...M},...P].slice(0,4)),window.setTimeout(()=>a(P=>P.filter(Y=>Y.id!==k)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer"}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(M=>M.id===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin"].includes(o.role),[o.role]),[u,x]=c.useState("Audit"),[p]=c.useState([{id:"A-9001",when:"Today 09:10",actor:"Admin",action:"Changed policy",target:"Approval threshold",outcome:"Success",why:"Dual-control satisfied"},{id:"A-9002",when:"Today 08:55",actor:"Finance",action:"Exported statement",target:"Invoices Jan",outcome:"Success",why:"Finance scope"},{id:"A-9003",when:"Yesterday",actor:"Viewer",action:"Attempted key rotate",target:"KEY-1",outcome:"Blocked",why:"Permission boundary"}]),[h,j]=c.useState([{id:"D-1",label:"Chrome on Windows",device:"Windows",trusted:!0,lastSeen:"Now",risk:"Low"},{id:"D-2",label:"Android phone",device:"Android",trusted:!0,lastSeen:"2h ago",risk:"Low"},{id:"D-3",label:"iPhone",device:"iPhone",trusted:!1,lastSeen:"1w ago",risk:"High"}]),[y]=c.useState([{id:"L-1",when:"Today 09:12",device:"Chrome (Windows)",location:"Kampala, UG",ip:"197.157.xxx.xxx",result:"Success",risk:"Low"},{id:"L-2",when:"Yesterday 21:40",device:"Android",location:"Kampala, UG",ip:"102.89.xxx.xxx",result:"Success",risk:"Low"},{id:"L-3",when:"Last week",device:"iPhone",location:"Nairobi, KE",ip:"196.201.xxx.xxx",result:"Success",risk:"High",reason:"New geo"},{id:"L-4",when:"Last week",device:"Safari",location:"Unknown",ip:"45.12.xxx.xxx",result:"Failed",risk:"Medium",reason:"Wrong OTP"}]),[f,I]=c.useState([{id:"R-1",dataType:"Transactions",period:"7 years",legalHold:!1,note:"Finance retention"},{id:"R-2",dataType:"Approvals",period:"7 years",legalHold:!0,note:"Legal hold active"},{id:"R-3",dataType:"Audit logs",period:"2 years",legalHold:!1,note:"Security"},{id:"R-4",dataType:"Webhooks",period:"90 days",legalHold:!1,note:"Delivery logs"}]),[A,b]=c.useState([{id:"DC-1",policy:"Beneficiary edits",enabled:!0,note:"Require 2-person approval"},{id:"DC-2",policy:"Key rotation",enabled:!0,note:"Require Owner + Admin"},{id:"DC-3",policy:"Forensics export",enabled:!0,note:"Require Admin"}]),[C,S]=c.useState([{id:"K-1",keyId:"KEY-1",when:"Last month",actor:"Owner",action:"Created",note:"Prod key"},{id:"K-2",keyId:"KEY-1",when:"Yesterday",actor:"Admin",action:"Rotated",note:"Routine rotation"},{id:"K-3",keyId:"KEY-2",when:"Last week",actor:"Admin",action:"Created",note:"Sandbox key"}]),[z,$]=c.useState([{id:"FZ-101",createdAt:"Today",scope:"Approvals Inbox  30D",status:"Ready",includes:["receipts","audit","provider reports","hashes"]},{id:"FZ-102",createdAt:"Yesterday",scope:"Payout Operations  Batch run",status:"Running",includes:["queue","references","reconciliation"]}]),[D,W]=c.useState(""),he=c.useMemo(()=>{const M=D.trim().toLowerCase();return M?p.filter(k=>`${k.id} ${k.actor} ${k.action} ${k.target} ${k.why}`.toLowerCase().includes(M)):p},[p,D]),V=c.useMemo(()=>{const M=h.filter(Y=>Y.risk==="High").length,k=h.filter(Y=>Y.risk==="Medium").length,P=Math.min(100,35+M*30+k*15);return{score:P,level:P>=70?"High":P>=45?"Medium":"Low"}},[h]),xe=M=>{j(k=>k.map(P=>P.id===M?{...P,trusted:!P.trusted}:P)),l({kind:"success",title:"Device trust updated"})},pe=M=>{j(k=>k.filter(P=>P.id!==M)),l({kind:"info",title:"Device revoked"})},be=M=>{if(!d){l({kind:"warn",title:"Admin required"});return}I(k=>k.map(P=>P.id===M?{...P,legalHold:!P.legalHold}:P)),l({kind:"success",title:"Retention updated"})},fe=M=>{if(!d){l({kind:"warn",title:"Admin required"});return}b(k=>k.map(P=>P.id===M?{...P,enabled:!P.enabled}:P)),l({kind:"success",title:"Dual-control updated"})},K=M=>{if(!d){l({kind:"warn",title:"Admin required"});return}const k={id:Mk("K"),keyId:M,when:"Just now",actor:"Admin",action:"Rotated",note:"Manual rotation"};S(P=>[k,...P]),l({kind:"success",title:"Key rotated",message:M})},re=()=>{if(!d){l({kind:"warn",title:"Admin required"});return}const M=`FZ-${Math.floor(200+Math.random()*900)}`;$(k=>[{id:M,createdAt:"Just now",scope:"Custom export",status:"Queued",includes:["audit","hashes"]},...k]),l({kind:"success",title:"Forensics export queued",message:M}),window.setTimeout(()=>$(k=>k.map(P=>P.id===M?{...P,status:"Running"}:P)),900),window.setTimeout(()=>$(k=>k.map(P=>P.id===M?{...P,status:"Ready"}:P)),2100)},q=M=>l({kind:"info",title:"Download",message:`Would download ${M}`}),L=async M=>{try{await navigator.clipboard.writeText(M),l({kind:"success",title:"Copied"})}catch{l({kind:"warn",title:"Copy failed"})}};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(nB,{toasts:s,onDismiss:M=>a(k=>k.filter(P=>P.id!==M))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:gh.green},children:e.jsx(Ra,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Security, Audit & Compliance"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Audit logs, device trust, login events, retention, dual-control, forensics, key rotation"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ut,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Ut,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Ut,{label:`Risk: ${V.level} (${V.score})`,tone:Dg(V.level)})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(rB,{value:r,onChange:i,options:n.map(M=>({value:M.id,label:M.name}))})}),e.jsxs(ws,{variant:"primary",onClick:()=>l({kind:"success",title:"Refreshed"}),children:[e.jsx(Rn,{className:"h-4 w-4"})," Refresh"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[["Audit","Audit logs"],["Devices","Device trust"],["Logins","Login events"],["Retention","Retention"],["Dual-control","Dual-control"],["Keys","Key rotation"],["Forensics","Forensics"]].map(([M,k])=>e.jsx(ws,{variant:u===M?"primary":"outline",className:"px-3 py-2",onClick:()=>x(M),children:k},M))}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limited access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Admin/Owner required for retention policies, dual-control, key rotation, and forensics exports."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[u==="Audit"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(to,{title:"Audit logs",subtitle:"Search, filter and export audit events",right:e.jsx(Ut,{label:`${he.length} event(s)`,tone:he.length?"neutral":"warn"}),children:[e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(rt,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:D,onChange:M=>W(M.target.value),placeholder:"Search actor, action, target",className:"w-[min(520px,70vw)] bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(ws,{variant:"outline",onClick:()=>t("/console/reports"),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]}),e.jsxs(ws,{variant:"outline",onClick:()=>x("Retention"),children:[e.jsx(ue,{className:"h-4 w-4"})," Legal hold"]})]})]}),e.jsx("div",{className:"mt-4 space-y-2",children:he.map(M=>e.jsx("div",{className:xi("rounded-3xl border p-4 transition-all hover:shadow-md hover:border-emerald-300 cursor-pointer",M.outcome==="Blocked"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),onClick:()=>t(`/console/settings/security/audit/${M.id}?outcome=${M.outcome}&action=${encodeURIComponent(M.action)}&target=${encodeURIComponent(M.target)}&why=${encodeURIComponent(M.why)}&actor=${encodeURIComponent(M.actor)}&when=${encodeURIComponent(M.when)}`),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.action}),e.jsx(Ut,{label:M.outcome,tone:M.outcome==="Blocked"?"warn":"good"}),e.jsx(Ut,{label:M.actor,tone:"neutral"}),e.jsx(Ut,{label:M.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:M.target}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[M.when,"  ",M.why]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{variant:"outline",className:"px-3 py-2",onClick:k=>{k==null||k.stopPropagation(),L(M.id)},children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(ws,{variant:"outline",className:"px-3 py-2",onClick:k=>{k==null||k.stopPropagation(),t(`/console/settings/security/audit/${M.id}?outcome=${M.outcome}&action=${encodeURIComponent(M.action)}&target=${encodeURIComponent(M.target)}&why=${encodeURIComponent(M.why)}&actor=${encodeURIComponent(M.actor)}&when=${encodeURIComponent(M.when)}`)},children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},M.id))})]})}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(so,{title:"Compliance posture",subtitle:"Key protections enabled",bullets:["Audit logs retained","Dual-control enabled","Forensics exports supported","Key rotation tracked"]}),e.jsx(Tk,{canAdmin:d,onForensics:re,onRotate:()=>K("KEY-1")})]})]}):null,u==="Devices"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsx(to,{title:"Device trust",subtitle:"Trust list and revoke sessions",right:e.jsx(Ut,{label:`${h.length} devices`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[h.map(M=>e.jsx("div",{className:xi("rounded-3xl border p-4 transition-all hover:shadow-md hover:border-emerald-300 cursor-pointer",M.trusted?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.label}),e.jsx(Ut,{label:M.device,tone:"neutral"}),e.jsx(Ut,{label:M.trusted?"Trusted":"Untrusted",tone:M.trusted?"good":"neutral"}),e.jsx(Ut,{label:`Risk ${M.risk}`,tone:Dg(M.risk)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-600",children:["Last seen: ",M.lastSeen]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ws,{variant:M.trusted?"outline":"primary",onClick:()=>xe(M.id),children:M.trusted?"Untrust":"Trust"}),e.jsxs(ws,{variant:"outline",onClick:()=>pe(M.id),children:[e.jsx(bs,{className:"h-4 w-4"})," Revoke"]})]})]})},M.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(ws,{variant:"outline",onClick:()=>l({kind:"info",title:"Revoke others",message:"This would revoke other sessions."}),children:[e.jsx(ue,{className:"h-4 w-4"})," Revoke others"]}),e.jsxs(ws,{variant:"outline",onClick:()=>t("/console/reports"),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]})]})]})})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx(so,{title:"Device guidance",subtitle:"Reduce takeover risk",bullets:["Trust only known devices","Revoke high-risk devices","Enable step-up for payouts","Monitor geo anomalies"]})})]}):null,u==="Logins"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsx(to,{title:"Login events",subtitle:"Risk scoring and anomalies",right:e.jsx(Ut,{label:`${y.length} events`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:y.map(M=>e.jsx("div",{className:xi("rounded-3xl border p-4 transition-all hover:shadow-md hover:border-emerald-300 cursor-pointer",M.risk==="High"?"border-rose-200 bg-rose-50":M.risk==="Medium"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),onClick:()=>t(`/console/settings/security/logins/${M.id}?result=${M.result}&risk=${M.risk}&device=${encodeURIComponent(M.device)}&location=${encodeURIComponent(M.location)}&ip=${encodeURIComponent(M.ip)}&when=${encodeURIComponent(M.when)}&reason=${encodeURIComponent(M.reason||"")}`),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.device}),e.jsx(Ut,{label:M.result,tone:M.result==="Success"?"good":"warn"}),e.jsx(Ut,{label:`Risk ${M.risk}`,tone:Dg(M.risk)}),e.jsx(Ut,{label:M.id,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:[M.location,"  IP ",M.ip]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[M.when,M.reason?`  ${M.reason}`:""]})]}),e.jsx(ws,{variant:"outline",className:"px-3 py-2",onClick:k=>{k==null||k.stopPropagation(),t(`/console/settings/security/logins/${M.id}?result=${M.result}&risk=${M.risk}&device=${encodeURIComponent(M.device)}&location=${encodeURIComponent(M.location)}&ip=${encodeURIComponent(M.ip)}&when=${encodeURIComponent(M.when)}&reason=${encodeURIComponent(M.reason||"")}`)},children:e.jsx(ue,{className:"h-4 w-4"})})]})},M.id))})})}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx(so,{title:"Response playbook",subtitle:"When risk is high",bullets:["Lock withdrawals","Revoke sessions","Rotate keys","Start incident"]}),e.jsx(Tk,{canAdmin:d,onForensics:re,onRotate:()=>K("KEY-1")})]})]}):null,u==="Retention"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(to,{title:"Retention policies",subtitle:"Retention periods and legal holds",right:e.jsx(Ut,{label:`${f.filter(M=>M.legalHold).length} hold(s)`,tone:f.some(M=>M.legalHold)?"warn":"neutral"}),children:[e.jsx("div",{className:"space-y-2",children:f.map(M=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 transition-all hover:shadow-md hover:border-emerald-300",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.dataType}),e.jsx(Ut,{label:M.period,tone:"neutral"}),e.jsx(Ut,{label:M.legalHold?"Legal hold":"No hold",tone:M.legalHold?"warn":"neutral"}),e.jsx(Ut,{label:M.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:M.note})]}),e.jsx(ws,{variant:M.legalHold?"accent":"outline",disabled:!d,title:d?"Toggle legal hold":"Admin required",onClick:()=>be(M.id),children:M.legalHold?"Release":"Hold"})]})},M.id))}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Legal holds prevent deletion of records even after retention period."})]})})]})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx(so,{title:"Retention guidance",subtitle:"Audit-ready controls",bullets:["Keep finance records 7 years","Enable legal holds for disputes","Export forensics when needed","Log deletions and changes"]})})]}):null,u==="Dual-control"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(to,{title:"Dual-control policies",subtitle:"Maker-checker for sensitive actions",right:e.jsx(Ut,{label:`${A.filter(M=>M.enabled).length}/${A.length} enabled`,tone:"info"}),children:[e.jsx("div",{className:"space-y-2",children:A.map(M=>e.jsx("div",{className:xi("rounded-3xl border p-4 transition-all hover:shadow-md hover:border-emerald-300",M.enabled?"border-emerald-200 bg-emerald-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.policy}),e.jsx(Ut,{label:M.enabled?"Enabled":"Disabled",tone:M.enabled?"good":"neutral"}),e.jsx(Ut,{label:M.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:M.note})]}),e.jsx(ws,{variant:M.enabled?"primary":"outline",disabled:!d,title:d?"Toggle":"Admin required",onClick:()=>fe(M.id),children:M.enabled?"ON":"OFF"})]})},M.id))}),e.jsx("div",{className:"mt-3",children:e.jsxs(ws,{variant:"outline",onClick:()=>t("/console/settings/approvals/workflows"),children:[e.jsx(ue,{className:"h-4 w-4"})," Workflow builder"]})})]})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx(so,{title:"Why dual-control",subtitle:"Risk reduction",bullets:["Prevents payout redirection","Protects key rotation","Improves auditability","Reduces insider risk"]})})]}):null,u==="Keys"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(to,{title:"Key rotation",subtitle:"Access logs and rotation events",right:e.jsx(Ut,{label:`${C.length} events`,tone:"neutral"}),children:[e.jsx("div",{className:"space-y-2",children:C.map(M=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 transition-all hover:shadow-md hover:border-emerald-300 cursor-pointer",onClick:()=>t(`/console/settings/security/keys/${M.keyId}`),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.keyId}),e.jsx(Ut,{label:M.action,tone:M.action==="Revoked"?"warn":M.action==="Rotated"?"info":"neutral"}),e.jsx(Ut,{label:M.actor,tone:"neutral"}),e.jsx(Ut,{label:M.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:M.note}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:M.when})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{variant:"outline",className:"px-3 py-2",onClick:k=>{k==null||k.stopPropagation(),L(M.id)},children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsxs(ws,{variant:"primary",disabled:!d,title:d?"Rotate":"Admin required",onClick:k=>{k==null||k.stopPropagation(),K(M.keyId)},children:[e.jsx(rr,{className:"h-4 w-4"})," Rotate"]})]})]})},M.id))}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Key rotation events should also appear in audit logs."})]})})]})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx(so,{title:"Rotation policy",subtitle:"Recommended",bullets:["Rotate prod keys monthly","Rotate webhook secrets quarterly","Revoke unused keys","Log all accesses"]})})]}):null,u==="Forensics"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsx(to,{title:"Forensic exports",subtitle:"Dual-control and retention-friendly",right:e.jsxs(ws,{variant:"primary",disabled:!d,onClick:re,children:[e.jsx(lt,{className:"h-4 w-4"})," New export"]}),children:e.jsx("div",{className:"space-y-2",children:z.map(M=>e.jsx("div",{className:xi("rounded-3xl border p-4 transition-all hover:shadow-md hover:border-emerald-300",M.status==="Ready"?"border-emerald-200 bg-emerald-50":M.status==="Failed"?"border-rose-200 bg-rose-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:M.id}),e.jsx(Ut,{label:M.status,tone:M.status==="Ready"?"good":M.status==="Failed"?"bad":"neutral"}),e.jsx(Ut,{label:M.scope,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:M.createdAt}),e.jsx("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:M.includes.map(k=>e.jsx(Ut,{label:k,tone:"neutral"},k))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ws,{variant:M.status==="Ready"?"primary":"outline",disabled:M.status!=="Ready",onClick:()=>q(M.id),children:e.jsx(ct,{className:"h-4 w-4"})}),e.jsx(ws,{variant:"outline",onClick:()=>t(`/console/settings/security/forensics/${M.id}?status=${M.status}&scope=${encodeURIComponent(M.scope)}&createdAt=${encodeURIComponent(M.createdAt)}&includes=${encodeURIComponent(M.includes.join(","))}`),children:e.jsx(ue,{className:"h-4 w-4"})})]})]})},M.id))})})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx(so,{title:"Forensics content",subtitle:"What to include",bullets:["Receipts + references","Provider reports","Reconciliation matches","Hashes + audit"]})})]}):null,e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Treat compliance features as product. Show policy reasons everywhere, and keep exports forensic-ready."})]})]}),e.jsxs(ws,{variant:"outline",onClick:()=>t("/console/settings/support-tools"),children:[e.jsx(ue,{className:"h-4 w-4"})," Support"]})]})})]})]})})]})}function so({title:t,subtitle:s,bullets:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:a.map(l=>e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),l]},l))})]})}function Tk({canAdmin:t,onForensics:s,onRotate:a}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",style:{background:"radial-gradient(90% 80% at 10% 0%, rgba(247,127,0,0.20), rgba(255,255,255,0)), radial-gradient(90% 80% at 90% 0%, rgba(3,205,140,0.16), rgba(255,255,255,0))"},children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl text-white",style:{background:gh.orange},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Quick actions"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"High impact admin actions"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(ws,{variant:"primary",disabled:!t,title:t?"Forensics":"Admin required",onClick:s,children:[e.jsx(ue,{className:"h-4 w-4"})," Forensics"]}),e.jsxs(ws,{variant:"outline",disabled:!t,title:t?"Rotate":"Admin required",onClick:a,children:[e.jsx(rr,{className:"h-4 w-4"})," Rotate key"]}),e.jsxs(ws,{variant:"outline",onClick:()=>{},children:[e.jsx(ue,{className:"h-4 w-4"})," Incidents"]})]})]})]})})}const Eb={green:"#03CD8C",orange:"#F77F00"};function Xd(...t){return t.filter(Boolean).join(" ")}function iB(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function Jt({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Xd("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function oB(t){return t==="Critical"?"bad":t==="Major"?"warn":"info"}function Rk(t){return t==="Resolved"?"good":t==="Escalated"?"warn":t==="Open"||t==="In progress"?"info":"neutral"}function Us({variant:t="outline",children:s,onClick:a,disabled:l,className:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Eb.green}:t==="accent"?{background:Eb.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:l,onClick:a,style:d,className:Xd(i,o[t],l&&"cursor-not-allowed opacity-60",n),children:s})}function dB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Xd("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"?"bg-emerald-50 text-emerald-700":a.kind==="warn"?"bg-amber-50 text-amber-800":a.kind==="error"?"bg-rose-50 text-rose-700":"bg-blue-50 text-blue-700"),children:a.kind==="warn"||a.kind==="error"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(et,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Og({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function cB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return c.useEffect(()=>{const i=o=>o.key==="Escape"?n():null;return t&&window.addEventListener("keydown",i),()=>window.removeEventListener("keydown",i)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{x:30,opacity:0},animate:{x:0,opacity:1},exit:{x:30,opacity:0},transition:{duration:.18},className:"fixed inset-y-0 right-0 z-50 w-full max-w-[560px] flex flex-col overflow-hidden border-l border-slate-200 bg-white shadow-[0_20px_70px_rgba(2,8,23,0.22)]",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 truncate text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 bg-slate-50 px-5 py-4",children:r}):null]})]}):null})}function uB({value:t,onChange:s,options:a}){return e.jsx("select",{value:t,onChange:l=>s(l.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 focus:outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})}function _A(){const t=ot(),[s,a]=c.useState([]),l=V=>{const xe=iB("toast");a(pe=>[{id:xe,...V},...pe].slice(0,4)),window.setTimeout(()=>a(pe=>pe.filter(be=>be.id!==xe)),3200)},n=c.useMemo(()=>[{id:"org_acme",name:"Acme Group Ltd",role:"Admin"},{id:"org_khl",name:"Kampala Holdings",role:"Viewer"}],[]),[r,i]=c.useState(n[0].id),o=c.useMemo(()=>n.find(V=>V.id===r)||n[0],[n,r]),d=c.useMemo(()=>["Owner","Admin","Finance"].includes(o.role),[o.role]),[u,x]=c.useState("Cases"),[p,h]=c.useState(""),[j,y]=c.useState("ALL"),f=c.useMemo(()=>[{id:"CASE-901",createdAt:"Today 07:10",org:"Acme Group Ltd",type:"Payout not received",status:"Open",priority:"High",sla:{target:"4h",remaining:"3h 20m",breached:!1},subject:"Bank payout failed",assignee:"EVzone Support",channel:"WhatsApp",notes:"Beneficiary name mismatch. Awaiting updated details."},{id:"CASE-902",createdAt:"Yesterday",org:"Acme Group Ltd",type:"Provider outage",status:"In progress",priority:"Medium",sla:{target:"12h",remaining:"6h",breached:!1},subject:"Card deposits delayed",assignee:"Payments Desk",channel:"In-app",notes:"PSP incident ongoing."},{id:"CASE-903",createdAt:"Last week",org:"Kampala Holdings",type:"Policy dispute",status:"Escalated",priority:"Medium",sla:{target:"24h",remaining:"Breached",breached:!0},subject:"Approval threshold dispute",assignee:"Compliance Desk",channel:"Email",notes:"Customer requested exception."}],[]),I=c.useMemo(()=>[{id:"T-1",name:"View transaction",mode:"Read-only",risk:"Low",description:"Lookup tx and receipt",requiresDualControl:!1},{id:"T-2",name:"Trigger webhook retry",mode:"Guided",risk:"Medium",description:"Retry failed delivery with confirmation",requiresDualControl:!0},{id:"T-3",name:"Place org banner",mode:"Guided",risk:"Medium",description:"Publish incident banner to org users",requiresDualControl:!0},{id:"T-4",name:"Lock withdrawals",mode:"Guided",risk:"High",description:"Emergency payout lock",requiresDualControl:!0},{id:"T-5",name:"Generate forensics ZIP",mode:"Guided",risk:"High",description:"Audit export with hashes",requiresDualControl:!0}],[]),[A,b]=c.useState([{id:"INC-12",createdAt:"Today 06:50",title:"Bank payouts delay",status:"Monitoring",impact:"Major",affected:["Bank Transfer","CorporatePay"],message:"Some bank payouts may take 30 to 60 minutes.",orgBannerEnabled:!0},{id:"INC-11",createdAt:"Last week",title:"Card deposit outage",status:"Resolved",impact:"Critical",affected:["Card"],message:"Card deposits were delayed. Issue resolved.",orgBannerEnabled:!1}]),C=c.useMemo(()=>{const V=p.trim().toLowerCase();return f.filter(xe=>j==="ALL"?!0:xe.status===j).filter(xe=>V?`${xe.id} ${xe.subject} ${xe.type} ${xe.org} ${xe.assignee}`.toLowerCase().includes(V):!0)},[f,p,j]),[S,z]=c.useState(!1),[$,D]=c.useState(null),W=V=>{D(V),z(!0)},he=V=>{if(!d){l({kind:"warn",title:"Admin required"});return}b(xe=>xe.map(pe=>pe.id===V?{...pe,orgBannerEnabled:!pe.orgBannerEnabled}:pe)),l({kind:"success",title:"Banner updated"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(dB,{toasts:s,onDismiss:V=>a(xe=>xe.filter(pe=>pe.id!==V))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Eb.green},children:e.jsx(Nb,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Support & Admin Tools"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Support cases, guided sessions, incidents, tools catalog, org-visible banners"}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Jt,{label:`Org: ${o.name}`,tone:"info"}),e.jsx(Jt,{label:`Role: ${o.role}`,tone:d?"info":"neutral"}),e.jsx(Jt,{label:`Cases: ${f.length}`,tone:"neutral"}),e.jsx(Jt,{label:`Incidents: ${A.length}`,tone:A.some(V=>V.status!=="Resolved")?"warn":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[260px]",children:e.jsx(uB,{value:r,onChange:i,options:n.map(V=>({value:V.id,label:V.name}))})}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Admin Console",message:"Deep link to support tools"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Admin Console"]}),e.jsxs(Us,{variant:"primary",onClick:()=>l({kind:"success",title:"Refreshed"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Refresh"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[["Cases","Support cases"],["Tools","Tools catalog"],["Incidents","Incidents"]].map(([V,xe])=>e.jsx(Us,{variant:u===V?"primary":"outline",className:"px-3 py-2",onClick:()=>x(V),children:xe},V))}),d?null:e.jsx("div",{className:"mt-4 rounded-3xl border border-amber-200 bg-amber-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-white text-amber-800",children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limited access"}),e.jsx("div",{className:"mt-1 text-sm text-amber-900",children:"Admin/Finance required for guided actions and incident banners."})]})]})})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[u==="Cases"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(Og,{title:"Support cases",subtitle:"SLA tracking and escalation",right:e.jsx(Jt,{label:`${C.length} shown`,tone:C.length?"neutral":"warn"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-12",children:[e.jsx("div",{className:"md:col-span-6",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:p,onChange:V=>h(V.target.value),placeholder:"Search cases",className:"w-full bg-transparent text-sm font-semibold text-slate-900 placeholder:text-slate-400 focus:outline-none"})]})}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("select",{value:j,onChange:V=>y(V.target.value),className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold focus:outline-none focus:ring-4 focus:ring-emerald-100",children:["ALL","Open","In progress","Waiting","Resolved","Escalated"].map(V=>e.jsx("option",{value:V,children:V},V))})}),e.jsxs("div",{className:"md:col-span-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Export",message:"Export cases"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Export"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"New case",message:"Create case"}),children:[e.jsx(ue,{className:"h-4 w-4"})," New"]})]})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[C.map(V=>e.jsx("button",{type:"button",onClick:()=>W(V),className:Xd("w-full rounded-3xl border p-4 text-left",V.sla.breached?"border-rose-200 bg-rose-50":"border-slate-200 bg-white hover:bg-slate-50"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:V.subject}),e.jsx(Jt,{label:V.type,tone:"neutral"}),e.jsx(Jt,{label:V.status,tone:Rk(V.status)}),e.jsx(Jt,{label:V.priority,tone:V.priority==="High"?"warn":"neutral"}),V.sla.breached?e.jsx(Jt,{label:"SLA breached",tone:"bad"}):e.jsx(Jt,{label:`SLA ${V.sla.remaining}`,tone:"neutral"}),e.jsx(Jt,{label:V.channel,tone:V.channel==="WhatsApp"||V.channel==="WeChat"?"info":"neutral"}),e.jsx(Jt,{label:V.id,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-sm text-slate-700",children:["Org: ",V.org,"  Assignee: ",V.assignee]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:[V.createdAt,"  Target ",V.sla.target]}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:V.notes})]}),e.jsx(Us,{variant:"outline",className:"px-3 py-2",onClick:()=>W(V),children:e.jsx(ue,{className:"h-4 w-4"})})]})},V.id)),C.length?null:e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 text-sm text-slate-600",children:"No cases match."})]})]})}),e.jsxs("div",{className:"space-y-4 lg:col-span-4",children:[e.jsx($x,{title:"Guided sessions",subtitle:"Help users resolve issues",bullets:["Join session with user","Explain policy reasons","Request missing docs","Trigger safe actions"]}),e.jsx($x,{title:"Escalation",subtitle:"When to escalate",bullets:["SLA breach","High risk fraud","Provider outage","Compliance lock"]})]})]}):null,u==="Tools"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsxs(Og,{title:"Tools catalog",subtitle:"Read-only vs guided actions",right:e.jsx(Jt,{label:`${I.length} tools`,tone:"neutral"}),children:[e.jsx("div",{className:"space-y-2",children:I.map(V=>e.jsx("div",{className:Xd("rounded-3xl border p-4",V.mode==="Guided"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:V.name}),e.jsx(Jt,{label:V.mode,tone:V.mode==="Guided"?"warn":"neutral"}),e.jsx(Jt,{label:`Risk ${V.risk}`,tone:V.risk==="High"?"bad":V.risk==="Medium"?"warn":"good"}),V.requiresDualControl?e.jsx(Jt,{label:"Dual-control",tone:"info"}):null,e.jsx(Jt,{label:V.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:V.description})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:V.mode==="Guided"?"primary":"outline",disabled:!d&&V.mode==="Guided",title:!d&&V.mode==="Guided"?"Admin required":"Run",onClick:()=>l({kind:"info",title:"Run tool",message:`${V.name} (${V.mode})`}),children:[e.jsx(ue,{className:"h-4 w-4"})," Run"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Docs",message:V.id}),children:[e.jsx(ue,{className:"h-4 w-4"})," Docs"]})]})]})},V.id))}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-xs text-slate-600",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsx("div",{children:"Guided tools require confirmations and create audit logs. Read-only tools are safe."})]})})]})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx($x,{title:"Safety model",subtitle:"How tools are controlled",bullets:["Read-only tools: no change","Guided tools: confirmations","Dual-control for high risk","All actions audited"]})})]}):null,u==="Incidents"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"space-y-4 lg:col-span-8",children:e.jsx(Og,{title:"Incidents",subtitle:"Incidents/outages and org-visible banners",right:e.jsx(Jt,{label:`${A.filter(V=>V.status!=="Resolved").length} active`,tone:A.some(V=>V.status!=="Resolved")?"warn":"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[A.map(V=>e.jsxs("div",{className:Xd("rounded-3xl border p-4",V.status!=="Resolved"?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:V.title}),e.jsx(Jt,{label:V.status,tone:V.status==="Resolved"?"good":"warn"}),e.jsx(Jt,{label:V.impact,tone:oB(V.impact)}),e.jsx(Jt,{label:V.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:V.message}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Affected: ",V.affected.join(", ")]}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:V.createdAt})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:V.orgBannerEnabled?"primary":"outline",disabled:!d,title:d?"Toggle banner":"Admin required",onClick:()=>he(V.id),children:[e.jsx(Ei,{className:"h-4 w-4"})," ",V.orgBannerEnabled?"Banner ON":"Banner OFF"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Comms",message:"Open incident comms"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Comms"]})]})]}),V.orgBannerEnabled?e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-white p-3 text-xs text-slate-700",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rt,{className:"mt-0.5 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:"Org-visible banner"}),e.jsx("div",{className:"mt-1",children:"Users will see an in-app banner on Wallet Home and checkout."})]})]})}):null]},V.id)),e.jsxs("div",{className:"pt-2 flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:"primary",disabled:!d,onClick:()=>l({kind:"info",title:"New incident",message:"Create incident"}),children:[e.jsx(ue,{className:"h-4 w-4"})," New incident"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Status page",message:"Open status page"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Status page"]})]})]})})}),e.jsx("div",{className:"space-y-4 lg:col-span-4",children:e.jsx($x,{title:"Incident comms",subtitle:"Recommended",bullets:["Banner on Wallet Home","Push + email updates","WhatsApp/WeChat broadcasts","Postmortem export"]})})]}):null,e.jsx("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl bg-slate-50 text-slate-700",children:e.jsx(rt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Tip"}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:"Use incident banners for PSP outages so users understand delays and avoid duplicate retries."})]})]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Policies",message:"Open policy builder"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Policies"]})]})})]})]})}),e.jsx(cB,{open:S,title:$?`${$.subject}`:"Case",subtitle:$?`${$.id}  ${$.status}`:"",onClose:()=>z(!1),footer:e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[e.jsx(rt,{className:"h-4 w-4"})," Actions are logged."]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{variant:"outline",onClick:()=>z(!1),children:"Close"}),e.jsxs(Us,{variant:"primary",disabled:!d,onClick:()=>l({kind:"info",title:"Guided session",message:"Start guided session"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Guided session"]})]})]}),children:$?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Jt,{label:$.type,tone:"neutral"}),e.jsx(Jt,{label:$.status,tone:Rk($.status)}),e.jsx(Jt,{label:$.priority,tone:$.priority==="High"?"warn":"neutral"}),$.sla.breached?e.jsx(Jt,{label:"SLA breached",tone:"bad"}):e.jsx(Jt,{label:`SLA ${$.sla.remaining}`,tone:"neutral"}),e.jsx(Jt,{label:$.channel,tone:$.channel==="WhatsApp"||$.channel==="WeChat"?"info":"neutral"})]}),e.jsxs("div",{className:"mt-3 text-sm text-slate-700",children:["Assignee: ",e.jsx("span",{className:"font-semibold text-slate-900",children:$.assignee})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created: ",$.createdAt,"  Target ",$.sla.target]}),e.jsx("div",{className:"mt-3 rounded-2xl border border-slate-200 bg-slate-50 p-3 text-sm text-slate-700",children:$.notes})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Suggested tools"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"View transaction",message:"Read-only"}),children:[e.jsx(ue,{className:"h-4 w-4"})," View transaction"]}),e.jsxs(Us,{variant:"outline",disabled:!d,onClick:()=>l({kind:"info",title:"Retry payout",message:"Guided"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Retry payout"]}),e.jsxs(Us,{variant:"outline",disabled:!d,onClick:()=>l({kind:"info",title:"Add banner",message:"Guided"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Add banner"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Comms"}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Open thread",message:$.channel}),children:[e.jsx(_y,{className:"h-4 w-4"})," Thread"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Call",message:"Start call"}),children:[e.jsx(Id,{className:"h-4 w-4"})," Call"]}),e.jsxs(Us,{variant:"outline",onClick:()=>l({kind:"info",title:"Escalate",message:"Escalate"}),children:[e.jsx(ue,{className:"h-4 w-4"})," Escalate"]})]})]})]}):null})]})}function $x({title:t,subtitle:s,bullets:a}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:a.map(l=>e.jsxs("li",{className:"flex gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full bg-slate-400"}),l]},l))})]})}const bo={green:"#03CD8C",orange:"#F77F00"};function Al(...t){return t.filter(Boolean).join(" ")}function Dk(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function mB(t,s,a){return Math.max(s,Math.min(a,t))}function $g(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function xB(t,s,a="text/plain"){const l=new Blob([s],{type:a}),n=URL.createObjectURL(l),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function ja({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Al("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Ok(t){return t==="Premium"?"info":"neutral"}function Ig(t){return t==="At risk"?"bad":t==="Needs attention"?"warn":"good"}function Cl({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:bo.green}:t==="accent"?{background:bo.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Al(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function pB({value:t}){const s=mB(t,0,100),a=78,l=10,n=(a-l)/2,r=2*Math.PI*n,i=s/100*r;return e.jsxs("div",{className:"relative grid place-items-center",children:[e.jsxs("svg",{width:a,height:a,className:"-rotate-90",children:[e.jsx("circle",{cx:a/2,cy:a/2,r:n,stroke:"#E2E8F0",strokeWidth:l,fill:"none"}),e.jsx("circle",{cx:a/2,cy:a/2,r:n,stroke:bo.green,strokeWidth:l,fill:"none",strokeDasharray:`${i} ${r}`,strokeLinecap:"round"})]}),e.jsxs("div",{className:"absolute text-sm font-semibold text-slate-900",children:[Math.round(s),"%"]})]})}function hB({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),t.length?e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},disabled:n.disabled,className:Al("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors disabled:opacity-50",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]}):null}function VA({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(hB,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function fB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Al("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function pd({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function $k({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(Dn,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function Jc({label:t,value:s,onChange:a,placeholder:l}){return e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-500",children:t}),e.jsx("input",{type:"text",value:s,onChange:n=>a(n.target.value),placeholder:l,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 transition focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})}function Lg({label:t,value:s,onChange:a,placeholder:l,rows:n=3}){return e.jsxs("div",{children:[e.jsx("label",{className:"mb-1.5 block text-xs font-semibold text-slate-500",children:t}),e.jsx("textarea",{value:s,onChange:r=>a(r.target.value),rows:n,placeholder:l,className:"w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 transition focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})}function gB({data:t,onClose:s,onSuccess:a}){const[l,n]=c.useState(""),[r,i]=c.useState(""),[o,d]=c.useState(!1);if(c.useEffect(()=>{t&&(n(""),i(""),d(!1))},[t]),!t)return null;const u=()=>{d(!0),setTimeout(()=>{d(!1),a(`Action '${t.label}' completed successfully.`),s()},1200)};let x=null;return t.kind==="invite"||t.label&&t.label.includes("Invite")?x=e.jsxs("div",{className:"space-y-4",children:[e.jsx(Jc,{label:"Email address",value:l,onChange:n,placeholder:"colleague@company.com"}),e.jsx(Jc,{label:"Role",value:r,onChange:i,placeholder:"Member, Admin..."})]}):t.kind==="simulate"||t.label.includes("Simulate")?x=e.jsx("div",{className:"space-y-4",children:e.jsx(Lg,{label:"Scenario description",value:l,onChange:n,placeholder:"Describe the policy or approval flow to test...",rows:4})}):t.kind==="exception"||t.label.includes("Exception")?x=e.jsxs("div",{className:"space-y-4",children:[e.jsx(Jc,{label:"Amount / Limit",value:l,onChange:n,placeholder:"e.g. 5000 USD"}),e.jsx(Lg,{label:"Justification",value:r,onChange:i,placeholder:"Reason for exception..."})]}):t.kind==="webhook"||t.label.includes("webhook")?x=e.jsxs("div",{className:"space-y-4",children:[e.jsx(Jc,{label:"Callback URL",value:l,onChange:n,placeholder:"https://api.yoursystem.com/cb"}),e.jsx(Jc,{label:"Secret Key (Optional)",value:r,onChange:i,placeholder:"Signing key"})]}):t.kind==="posture"||t.label&&t.label.includes("posture")?x=e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ra,{className:"mx-auto h-12 w-12 text-emerald-500 animate-pulse"}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-slate-900",children:"Running security analysis..."}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Checking MFA, IP policies, and audit logs."})]}):x=e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 text-sm text-slate-600",children:["You are about to perform: ",e.jsx("strong",{children:t.label}),"."]}),e.jsx(Lg,{label:"Notes",value:l,onChange:n,placeholder:"Optional notes for audit log..."})]}),e.jsx(VA,{open:!!t,title:t.label,onClose:s,footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Cl,{variant:"ghost",onClick:s,disabled:o,children:"Cancel"}),e.jsx(Cl,{variant:"primary",onClick:u,disabled:o,children:o?"Processing...":"Confirm"})]}),children:x})}function BA(){const t=ot(),[s,a]=c.useState([]),l=k=>{const P=Dk("toast");a(Y=>[{id:P,...k},...Y].slice(0,4)),window.setTimeout(()=>a(Y=>Y.filter(F=>F.id!==P)),3200)},n=Date.now(),r=c.useMemo(()=>{const k=P=>({...P,lastUpdatedAt:n-P.lastUpdatedDaysAgo*24*60*60*1e3});return[k({id:"org_setup",title:"Organization Profile and Program Setup",description:"Company profile, entities, billing contacts, branding, invoice groups, and support toggle.",category:"Organization",path:"/settings/org/setup",tier:"Core",roles:["Org Admin"],tags:["profile","entities","billing","invoice groups","support"],icon:Ia,lastUpdatedDaysAgo:2,health:"Healthy",quickActions:[{id:"open",label:"Open wizard",kind:"open"},{id:"copy",label:"Copy link",kind:"copy"}]}),k({id:"modules_marketplaces",title:"Modules and Marketplaces Enablement",description:"Enable service modules and marketplaces including MyLiveDealz. Includes Other slots for expansion.",category:"Organization",path:"/settings/modules",tier:"Core",roles:["Org Admin"],tags:["service modules","marketplaces","rollout"],icon:jl,lastUpdatedDaysAgo:3,health:"Healthy",quickActions:[{id:"open",label:"Manage enablement",kind:"open"},{id:"copy",label:"Copy link",kind:"copy"}]}),k({id:"users_invites",title:"Users and Invitations",description:"Invite employees, set group and cost center defaults, bulk import, and offboarding.",category:"Access",path:"/settings/users",tier:"Core",roles:["Org Admin","Finance"],tags:["users","invites","CSV import","offboarding"],icon:Vs,lastUpdatedDaysAgo:6,health:"Needs attention",quickActions:[{id:"open",label:"Open users",kind:"open"},{id:"action",label:"Invite user",kind:"action",hint:"Quick create"}]}),k({id:"groups_cost_centers",title:"Groups and Cost Centers",description:"Create Groups, cost centers, project tags, and chargeback rules.",category:"Access",path:"/settings/groups",tier:"Core",roles:["Org Admin","Finance"],tags:["groups","cost centers","project codes"],icon:lA,lastUpdatedDaysAgo:9,health:"Healthy",quickActions:[{id:"open",label:"Open groups",kind:"open"},{id:"copy",label:"Copy link",kind:"copy"}]}),k({id:"roles_permissions",title:"Roles, Permissions and Governance",description:"Custom roles, module permissions, two-admin model controls, delegation, and simulation.",category:"Access",path:"/settings/roles",tier:"Core",roles:["Org Admin"],tags:["RBAC","governance","delegation"],icon:Ra,lastUpdatedDaysAgo:12,health:"Healthy",quickActions:[{id:"open",label:"Open roles",kind:"open"},{id:"copy",label:"Copy link",kind:"copy"}]}),k({id:"policy_builder",title:"Policies",description:"Policy builder for rides, services, purchases and marketplace restrictions with inheritance.",category:"Controls",path:"/settings/policies",tier:"Core",roles:["Org Admin","Approver"],tags:["policy","inheritance","simulator"],icon:QL,lastUpdatedDaysAgo:4,health:"Needs attention",quickActions:[{id:"open",label:"Open policies",kind:"open"},{id:"action",label:"Simulate scenario",kind:"action"}]}),k({id:"approval_workflows",title:"Approval Workflow Builder",description:"Create approval flows per module and marketplace including RFQs and high value assets.",category:"Controls",path:"/settings/approvals/workflows",tier:"Core",roles:["Org Admin","Approver","Finance"],tags:["approvals","rules","SLA"],icon:et,lastUpdatedDaysAgo:7,health:"Healthy",quickActions:[{id:"open",label:"Open builder",kind:"open"},{id:"action",label:"Create template",kind:"action"}]}),k({id:"budgets",title:"Budgets, Spend Limits and Controls",description:"Org, group, user, module, and marketplace budgets with forecasting and exceptions.",category:"Finance",path:"/settings/budgets",tier:"Core",roles:["Org Admin","Finance"],tags:["budgets","caps","exceptions"],icon:al,lastUpdatedDaysAgo:1,health:"At risk",quickActions:[{id:"open",label:"Open budgets",kind:"open"},{id:"action",label:"Request exception",kind:"action"}]}),k({id:"billing_invoice_groups",title:"Billing Setup and Invoice Groups",description:"Invoice frequency, invoice groups, tax, templates, and billing simulations.",category:"Finance",path:"/settings/billing",tier:"Core",roles:["Org Admin","Finance"],tags:["billing","invoice groups","tax"],icon:jt,lastUpdatedDaysAgo:5,health:"Healthy",quickActions:[{id:"open",label:"Open billing",kind:"open"},{id:"copy",label:"Copy link",kind:"copy"}]}),k({id:"reporting",title:"Reporting and Analytics",description:"Spend reports, approval performance, exports, custom report builder, and schedules.",category:"Reporting",path:"/reports",tier:"Core",roles:["Org Admin","Finance","Approver"],tags:["reports","exports","schedules"],icon:Tr,lastUpdatedDaysAgo:2,health:"Healthy",quickActions:[{id:"open",label:"Open reports",kind:"open"},{id:"action",label:"Schedule report",kind:"action"}]}),k({id:"esg",title:"Sustainability and ESG Reporting",description:"EV usage metrics, charging utilization, emissions estimates, and ESG template exports.",category:"Reporting",path:"/reports/esg",tier:"Premium",roles:["Org Admin","Finance"],tags:["ESG","emissions","templates"],icon:Hd,lastUpdatedDaysAgo:2,health:"Healthy",quickActions:[{id:"open",label:"Open ESG",kind:"open"},{id:"action",label:"Update factors",kind:"action"}]}),k({id:"integrations",title:"Integrations and Developer Center",description:"ERP exports, secure API keys, scopes, webhooks, sandbox mode, and inspector.",category:"Integrations",path:"/settings/integrations",tier:"Core",roles:["Org Admin","Finance"],tags:["exports","API keys","webhooks"],icon:dp,lastUpdatedDaysAgo:1,health:"Healthy",quickActions:[{id:"open",label:"Open integrations",kind:"open"},{id:"action",label:"Create webhook",kind:"action"}]}),k({id:"security",title:"Security, Audit and Compliance",description:"Audit logs, MFA policies, retention, support mode gating, dual control, forensic exports.",category:"Security",path:"/settings/security",tier:"Core",roles:["Org Admin","Finance"],tags:["audit","MFA","retention","dual control"],icon:as,lastUpdatedDaysAgo:1,health:"Needs attention",quickActions:[{id:"open",label:"Open security",kind:"open"},{id:"action",label:"Run posture check",kind:"action"}]}),k({id:"support_tools",title:"Support and EVzone Admin Tools",description:"Embedded support role, auditable sessions, scoped tools, recording policy, and status messages.",category:"Support",path:"/settings/support-tools",tier:"Premium",roles:["Org Admin","EVzone Support","Finance"],tags:["support","cases","sessions","incidents"],icon:jb,lastUpdatedDaysAgo:0,health:"Healthy",quickActions:[{id:"open",label:"Open support tools",kind:"open"},{id:"action",label:"Request support",kind:"action"}]})]},[n]),i=["All","Organization","Access","Controls","Finance","Integrations","Security","Support","Reporting"],[o,d]=c.useState("All"),[u,x]=c.useState(""),[p,h]=c.useState("Org Admin"),[j,y]=c.useState(()=>["org_setup","security","integrations"]),[f,I]=c.useState("org_setup"),[A,b]=c.useState(!1),[C,S]=c.useState(null),[z,$]=c.useState(""),[D,W]=c.useState(null),he=c.useMemo(()=>r.find(k=>k.id===f)||r[0],[r,f]),V=c.useMemo(()=>he.roles.includes(p),[he.roles,p]),xe=c.useMemo(()=>{const k=u.trim().toLowerCase();return r.filter(P=>o==="All"?!0:P.category===o).filter(P=>k?`${P.title} ${P.description} ${P.category} ${P.tags.join(" ")} ${P.path} ${P.tier}`.toLowerCase().includes(k):!0).slice().sort((P,Y)=>{const F=j.includes(P.id)?1:0,G=j.includes(Y.id)?1:0;if(F!==G)return G-F;const ve=ie=>ie==="At risk"?3:ie==="Needs attention"?2:1,Te=ve(P.health),ye=ve(Y.health);return Te!==ye?ye-Te:Y.lastUpdatedAt-P.lastUpdatedAt})},[r,o,u,j]),pe=c.useMemo(()=>{const k=["org_setup","modules_marketplaces","billing_invoice_groups","security","integrations"],P=k.filter(Y=>{const F=r.find(G=>G.id===Y);return F?F.health==="Healthy":!1}).length;return Math.round(P/k.length*100)},[r]),be=c.useMemo(()=>{const k=r.length,P=r.filter(ve=>ve.health==="At risk").length,Y=r.filter(ve=>ve.health==="Needs attention").length,F=r.filter(ve=>ve.tier==="Premium").length,G=r.filter(ve=>ve.tier==="Phase 2").length;return{total:k,risk:P,attention:Y,premium:F,phase2:G}},[r]),fe=()=>{const k={generatedAt:new Date().toISOString(),viewAs:p,category:o,query:u||void 0,pinned:j,items:r.map(P=>({id:P.id,title:P.title,category:P.category,path:P.path,tier:P.tier,roles:P.roles,tags:P.tags,health:P.health,lastUpdatedAt:P.lastUpdatedAt}))};xB("admin-settings-hub.json",JSON.stringify(k,null,2),"application/json"),l({title:"Exported",message:"Settings manifest downloaded.",kind:"success"})},K=async k=>{try{await navigator.clipboard.writeText(k),l({title:"Copied",message:"Link copied.",kind:"success"})}catch{l({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},re=k=>{if(!k.roles.includes(p)){S(k.id),$(""),b(!0);return}I(k.id),k.path?t("/console"+k.path):l({title:"Navigate",message:`Open ${k.path}`,kind:"info"})},q=k=>{y(P=>P.includes(k)?P.filter(Y=>Y!==k):[k,...P].slice(0,8))},L=()=>{if(C){if(z.trim().length<8){l({title:"Reason required",message:"Explain why you need access.",kind:"warn"});return}l({title:"Requested",message:`Access request created for ${C}.`,kind:"success"}),b(!1)}},M=c.useMemo(()=>r.slice().sort((k,P)=>P.lastUpdatedAt-k.lastUpdatedAt).slice(0,6).map(k=>({id:Dk("chg"),at:k.lastUpdatedAt,title:k.title,note:k.health==="Healthy"?"Updated configuration":k.health==="Needs attention"?"Requires review":"At risk limit",path:k.path,health:k.health})),[r]);return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(fB,{toasts:s,onDismiss:k=>a(P=>P.filter(Y=>Y.id!==k))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:bo.green},children:e.jsx(Dn,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Admin Settings Hub"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"One place to manage every CorporatePay setting. Use search, filters, and role-based access."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(ja,{label:`Total ${be.total}`,tone:"neutral"}),e.jsx(ja,{label:`At risk ${be.risk}`,tone:be.risk?"warn":"good"}),e.jsx(ja,{label:`Needs attention ${be.attention}`,tone:be.attention?"warn":"good"}),e.jsx(ja,{label:`Premium ${be.premium}`,tone:be.premium?"info":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"min-w-[220px]",children:e.jsx(vB,{label:"View as",value:p,onChange:k=>h(k),options:[{value:"Org Admin",label:"Org Admin"},{value:"Finance",label:"Finance"},{value:"Approver",label:"Approver"},{value:"Employee",label:"Employee"},{value:"EVzone Support",label:"EVzone Support"}],hint:"Role gating"})}),e.jsxs(Cl,{variant:"outline",onClick:fe,children:[e.jsx(ct,{className:"h-4 w-4"})," Export manifest"]}),e.jsxs(Cl,{variant:"primary",onClick:()=>{I("support_tools"),l({title:"Support",message:"Open support tools",kind:"info"})},children:[e.jsx(jb,{className:"h-4 w-4"})," Support tools"]})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 rounded-3xl border border-slate-200 bg-white p-4 md:grid-cols-12",children:[e.jsxs("div",{className:"md:col-span-7",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search settings"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-2xl border border-slate-200 bg-white px-3 py-2.5",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:u,onChange:k=>x(k.target.value),placeholder:"policy, budgets, invoice groups, API keys...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"}),u?e.jsx("button",{className:"rounded-xl p-1 text-slate-500 hover:bg-slate-100",onClick:()=>x(""),"aria-label":"Clear",type:"button",children:e.jsx(_e,{className:"h-4 w-4"})}):null]})]}),e.jsxs("div",{className:"md:col-span-5",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Category"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:i.map(k=>e.jsx("button",{type:"button",className:Al("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",o===k?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:o===k?{background:bo.green}:void 0,onClick:()=>d(k),children:k},k))})]})]})]}),e.jsx("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-8 space-y-4",children:e.jsx(pd,{title:"Settings",subtitle:"Click a card to view details and actions. Locked items can request access.",right:e.jsx(ja,{label:`${xe.length} shown`,tone:"neutral"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[xe.map(k=>{const P=k.icon,Y=!k.roles.includes(p),F=j.includes(k.id);return e.jsxs("button",{type:"button",className:Al("relative rounded-3xl border bg-white p-4 text-left shadow-sm transition-all duration-200 cursor-pointer","hover:shadow-[0_12px_40px_rgba(0,0,0,0.12)] hover:-translate-y-1 hover:border-emerald-300",f===k.id?"border-emerald-300 ring-4 ring-emerald-100":"border-slate-200"),onClick:()=>{I(k.id),Y?l({title:"Locked",message:"Request access to open.",kind:"warn"}):re(k)},children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex min-w-0 items-start gap-3",children:[e.jsx("div",{className:Al("grid h-11 w-11 shrink-0 place-items-center rounded-2xl text-white",Y?"bg-slate-400":""),style:Y?void 0:{background:bo.green},children:e.jsx(P,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:k.title}),e.jsx(ja,{label:k.tier,tone:Ok(k.tier)}),e.jsx(ja,{label:k.health,tone:Ig(k.health)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[k.category,"  Updated ",$g(k.lastUpdatedAt)]}),e.jsx("div",{className:"mt-2 line-clamp-2 text-sm text-slate-700",children:k.description}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[k.tags.slice(0,4).map(G=>e.jsx(ja,{label:G,tone:"neutral"},`${k.id}-${G}`)),k.tags.length>4?e.jsx(ja,{label:"+more",tone:"neutral"}):null]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx("button",{type:"button",className:Al("rounded-2xl p-2",F?"bg-amber-50 text-amber-900 ring-1 ring-amber-200":"text-slate-500 hover:bg-slate-100"),onClick:G=>{G.stopPropagation(),q(k.id),l({title:F?"Unpinned":"Pinned",message:k.title,kind:"info"})},"aria-label":F?"Unpin":"Pin",children:e.jsx(Ga,{className:Al("h-4 w-4",F&&"fill-current")})}),e.jsxs(Cl,{variant:Y?"outline":"primary",className:"px-3 py-2 text-xs",onClick:G=>{G.stopPropagation(),re(k)},children:[Y?e.jsx(as,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"}),Y?"Request":"Open"]})]})]}),Y?e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Locked for role: ",e.jsx("span",{className:"font-semibold",children:p}),". Request access to proceed."]}):null]},k.id)}),xe.length?null:e.jsx($k,{title:"No matches",subtitle:"Try a different search or category."})]})})}),e.jsxs("div",{className:"lg:col-span-4 space-y-4",children:[e.jsx(pd,{title:"Selected",subtitle:"Details and quick actions",right:e.jsx(ja,{label:V?"Accessible":"Locked",tone:V?"good":"warn"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:he.title}),e.jsx(ja,{label:he.tier,tone:Ok(he.tier)}),e.jsx(ja,{label:he.health,tone:Ig(he.health)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[he.category,"  Updated ",$g(he.lastUpdatedAt)]}),e.jsx("div",{className:"mt-3 text-sm text-slate-700",children:he.description}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Path: ",e.jsx("span",{className:"font-mono",children:he.path})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:e.jsx(ja,{label:`Allowed roles: ${he.roles.join(", ")}`,tone:"neutral"})})]})}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Cl,{variant:V?"primary":"outline",onClick:()=>re(he),children:[e.jsx(ue,{className:"h-4 w-4"}),V?"Open":"Request access"]}),e.jsxs(Cl,{variant:"outline",onClick:()=>void K(he.path),children:[e.jsx(Ot,{className:"h-4 w-4"})," Copy link"]}),e.jsxs(Cl,{variant:"outline",onClick:()=>{q(he.id),l({title:j.includes(he.id)?"Unpinned":"Pinned",message:he.title,kind:"info"})},children:[e.jsx(Ga,{className:Al("h-4 w-4",j.includes(he.id)&&"fill-current")}),j.includes(he.id)?"Unpin":"Pin"]})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2",children:he.quickActions.map(k=>e.jsxs("button",{type:"button",className:"flex items-center justify-between gap-3 rounded-2xl border border-slate-200 bg-white px-3 py-3 text-left hover:bg-slate-50",onClick:()=>{if(k.kind==="copy"){K(he.path);return}if(k.kind==="open"){re(he);return}if(k.kind==="action"){if(k.id==="open"){re(he);return}W({kind:k.id,label:k.label});return}l({title:"Action",message:k.hint||k.label,kind:"info"})},children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.label}),k.hint?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:k.hint}):null]}),e.jsx(ue,{className:"h-5 w-5 text-slate-400"})]},k.id))})]})}),e.jsxs(pd,{title:"Go-live readiness",subtitle:"Quick snapshot of key configuration.",right:e.jsx(ja,{label:pe>=80?"On track":"Needs work",tone:pe>=80?"good":"warn"}),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pB,{value:pe}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-slate-900",children:[pe,"%"]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Org setup, modules, billing, security, integrations"})]})]}),e.jsxs(Cl,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{I("org_setup"),l({title:"Tip",message:"Start with Organization Setup wizard.",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Wizard"]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"This is a demo readiness score for the settings hub."})]}),e.jsx(pd,{title:"Pinned",subtitle:"Your top shortcuts",right:e.jsx(ja,{label:`${j.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[j.map(k=>r.find(P=>P.id===k)).filter(Boolean).map(k=>{const P=k,Y=P.icon,F=!P.roles.includes(p);return e.jsx("button",{type:"button",className:"w-full rounded-3xl border border-slate-200 bg-white p-4 text-left transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 hover:border-emerald-300 cursor-pointer",onClick:()=>{I(P.id),F||re(P)},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Al("grid h-10 w-10 place-items-center rounded-2xl text-white",F?"bg-slate-400":""),style:F?void 0:{background:bo.green},children:e.jsx(Y,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.title}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:P.path})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:F?e.jsx(as,{className:"h-4 w-4 text-slate-400"}):e.jsx(ue,{className:"h-5 w-5 text-slate-400"})})]})},P.id)}),j.length?null:e.jsx($k,{title:"No pinned items",subtitle:"Pin settings you use most."})]})}),e.jsx(pd,{title:"Recent changes",subtitle:"Last updates",right:e.jsx(ja,{label:"Live",tone:"info"}),children:e.jsx("div",{className:"space-y-2",children:M.map(k=>e.jsx("button",{type:"button",className:"w-full rounded-3xl border border-slate-200 bg-white p-4 text-left transition-all duration-200 hover:shadow-md hover:-translate-y-0.5 hover:border-emerald-300 cursor-pointer",onClick:()=>{const P=r.find(Y=>Y.path===k.path);P&&(I(P.id),re(P))},children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(ja,{label:k.health,tone:Ig(k.health)}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:k.title})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[$g(k.at),"  ",k.note]})]}),e.jsx(ue,{className:"h-5 w-5 text-slate-400"})]})},k.id))})}),e.jsx(pd,{title:"Help",subtitle:"Guidance and support",right:e.jsx(ja,{label:"Core",tone:"neutral"}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(Cl,{variant:"outline",onClick:()=>l({title:"Help Center",message:"Opening help center (demo).",kind:"info"}),children:[e.jsx(Pm,{className:"h-4 w-4"})," Help Center"]}),e.jsxs(Cl,{variant:"outline",onClick:()=>{I("support_tools"),l({title:"Request support",message:"Create a support case from Support Tools.",kind:"info"})},children:[e.jsx(Mm,{className:"h-4 w-4"})," Request support"]})]})})]})]})}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"Admin Settings Hub v2: single umbrella page linking to all CorporatePay settings. Includes search, category filters, pinned shortcuts, role-gated access requests, and a readiness snapshot."})})]})}),e.jsxs(VA,{open:A,title:"Request access",subtitle:"This creates a request for Org Admin to grant permissions.",onClose:()=>b(!1),actions:[{label:"Submit",onClick:L}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Cl,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(Cl,{variant:"primary",onClick:L,children:[e.jsx(et,{className:"h-4 w-4"})," Submit"]})]}),children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Role"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:p}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:"Setting"}),e.jsx("div",{className:"mt-1 text-sm text-slate-700",children:C})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("textarea",{value:z,onChange:k=>$(k.target.value),placeholder:"Explain why you need access and for how long",rows:4,className:"w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Requests should be auditable and time-bounded in production."})]})]}),e.jsx(gB,{data:D,onClose:()=>W(null),onSuccess:k=>l({title:"Success",message:k,kind:"success"})})]})}function vB({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Al(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Al("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}const Ru={green:"#03CD8C",orange:"#F77F00"};function Fs(...t){return t.filter(Boolean).join(" ")}function Un(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function ao(t,s,a){return Math.max(s,Math.min(a,t))}function Ik(t){return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"2-digit"})}function fr(t){return new Date(t).toLocaleString(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}function Fg(t){const s=Date.now()-t,a=Math.floor(s/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const l=Math.floor(a/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function Lk(t){const s=new Date(t),a=d=>String(d).padStart(2,"0"),l=s.getFullYear(),n=a(s.getMonth()+1),r=a(s.getDate()),i=a(s.getHours()),o=a(s.getMinutes());return`${l}-${n}-${r}T${i}:${o}`}function Fk(t){const s=new Date(t).getTime();return Number.isFinite(s)?s:Date.now()}function Ix(t){return new Date(t).getHours()}function Lx(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function bB(t,s="06:00",a="22:00"){const l=new Date(t),n=l.getHours()*60+l.getMinutes(),r=d=>{const[u,x]=d.split(":").map(p=>Number(p));return(u||0)*60+(x||0)},i=r(s),o=r(a);return n<i||n>o}function _g(t){return t>=7&&t<=9||t>=17&&t<=20}function Qe({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Fs("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Pt({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Ru.green}:t==="accent"?{background:Ru.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:Fs(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Zc({enabled:t,onChange:s,label:a,description:l}){return e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a}),l?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:l}):null]}),e.jsx("button",{type:"button",className:Fs("relative h-7 w-12 rounded-full border transition",t?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>s(!t),"aria-label":a,children:e.jsx("span",{className:Fs("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",t?"left-[22px]":"left-1")})})]})}function qn({label:t,value:s,onChange:a,placeholder:l,hint:n,type:r="text",disabled:i}){return e.jsxs("div",{className:Fs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("input",{type:r,value:s,onChange:o=>a(o.target.value),placeholder:l,disabled:i,className:Fs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function zn({label:t,value:s,onChange:a,hint:l,disabled:n}){return e.jsxs("div",{className:Fs(n&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),l?e.jsx("div",{className:"text-xs text-slate-500",children:l}):null]}),e.jsx("input",{type:"number",value:s,onChange:r=>a(Number(r.target.value||0)),disabled:n,className:Fs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",n?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function gn({label:t,value:s,onChange:a,options:l,hint:n,disabled:r}){return e.jsxs("div",{className:Fs(r&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("select",{value:s,onChange:i=>a(i.target.value),disabled:r,className:Fs("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4",r?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100"),children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]})}function _k({label:t,value:s,onChange:a,placeholder:l,hint:n,rows:r=4,disabled:i}){return e.jsxs("div",{className:Fs(i&&"opacity-70"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:t}),n?e.jsx("div",{className:"text-xs text-slate-500",children:n}):null]}),e.jsx("textarea",{value:s,onChange:o=>a(o.target.value),placeholder:l,rows:r,disabled:i,className:Fs("mt-2 w-full rounded-2xl border p-3 text-sm font-semibold shadow-sm outline-none focus:ring-4",i?"border-slate-200 bg-slate-50 text-slate-500":"border-slate-200 bg-white text-slate-900 focus:ring-emerald-100")})]})}function UA({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-48 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-xl",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:Fs("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function Vg({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="980px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:12,scale:.985},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:12,scale:.985},transition:{duration:.18},className:"fixed inset-x-0 top-[7vh] z-50 mx-auto w-[min(1040px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(UA,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[72vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function jB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,actions:i}){return c.useEffect(()=>{const o=d=>d.key==="Escape"&&n();return t&&window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,x:18},animate:{opacity:1,x:0},exit:{opacity:0,x:18},transition:{duration:.18},className:Fs("fixed z-50 overflow-hidden border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]","left-2 right-2 bottom-2 top-[10vh] rounded-[28px]","lg:left-auto lg:right-4 lg:top-4 lg:bottom-4 lg:w-[760px]"),role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-base font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i&&e.jsx(UA,{actions:i}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function yB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(480px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Fs("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function Ea({title:t,subtitle:s,right:a,children:l}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:t}),s?e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:s}):null]}),a]}),e.jsx("div",{className:"mt-4",children:l})]})}function eu({title:t,subtitle:s}){return e.jsxs("div",{className:"rounded-3xl border border-dashed border-slate-200 bg-white p-8 text-center",children:[e.jsx("div",{className:"mx-auto grid h-12 w-12 place-items-center rounded-2xl bg-slate-100 text-slate-700",children:e.jsx(To,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-3 text-sm font-semibold text-slate-900",children:t}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:s})]})}function Bg(t){return t==="Completed"?"good":t==="In progress"||t==="Confirmed"?"info":t==="Pending approval"?"warn":t==="Cancelled"?"bad":"neutral"}function Fx(t){return t==="Approved"?"good":t==="Rejected"?"bad":"warn"}function Vk(t){return t==="Online"?"good":t==="Limited"?"warn":"bad"}function hd(t){return`${t}-${Math.floor(100+Math.random()*900)}`}function Bk(t){const s=t.some(l=>l.includes("DC")||l.includes("VIP")||l.includes("Priority")),a=[{role:"Manager",slaHours:8},{role:"Finance",slaHours:12}];return s&&a.push({role:"CFO",slaHours:24}),a}function NB(){var se,m,w,oe,me,Me,Ve,Ze,E,J;const t=Date.now(),s=["Operations","Office commute","Delivery","Executive","Event","Visitor","Other"],a=["Type 2 (AC)","CCS2 (DC)","GB/T (DC)","CHAdeMO (DC)"],[l,n]=c.useState([]),r=g=>{const H=Un("toast");n(N=>[{id:H,...g},...N].slice(0,4)),window.setTimeout(()=>n(N=>N.filter(U=>U.id!==H)),3200)},[i,o]=c.useState(()=>({workStart:"06:00",workEnd:"22:00",requirePurpose:!0,requireProjectTag:!0,requireCostCenter:!0,dcRequiresApproval:!0,priorityRequiresApproval:!0,maxKWhPerSession:60,maxBudgetUGXPerSession:5e5,peakHourThreshold:5})),[d]=c.useState(()=>[{id:"SITE-UG-HQ",name:"Kampala HQ Charging",city:"Kampala",address:"Kampala HQ, Nsambya",operator:"EVzone",status:"Online",reliabilityPct:96,connectors:[{connector:"Type 2 (AC)",powerKW:22,count:4,priceUGXPerKWh:850},{connector:"CCS2 (DC)",powerKW:60,count:2,priceUGXPerKWh:1200}]},{id:"SITE-UG-EBB",name:"Entebbe Airport Fast Hub",city:"Entebbe",address:"Entebbe Airport Road",operator:"Partner CPO",status:"Limited",reliabilityPct:88,connectors:[{connector:"CCS2 (DC)",powerKW:120,count:2,priceUGXPerKWh:1450},{connector:"CHAdeMO (DC)",powerKW:50,count:1,priceUGXPerKWh:1400}]},{id:"SITE-UG-JJA",name:"Jinja Road Hub",city:"Wakiso",address:"Jinja Road",operator:"EVzone",status:"Online",reliabilityPct:92,connectors:[{connector:"Type 2 (AC)",powerKW:11,count:6,priceUGXPerKWh:800},{connector:"CCS2 (DC)",powerKW:60,count:1,priceUGXPerKWh:1200}]}]),[u]=c.useState(()=>[{id:"VEH-001",label:"Company EV 01",ownerType:"Company",ownerName:"Acme Fleet",group:"Operations",costCenter:"OPS-001",vip:!1,batteryKWh:62},{id:"VEH-002",label:"Company EV 02",ownerType:"Company",ownerName:"Acme Fleet",group:"Operations",costCenter:"OPS-001",vip:!1,batteryKWh:62},{id:"VEH-003",label:"Employee EV (John)",ownerType:"Employee",ownerName:"John S.",group:"Sales",costCenter:"SALES-TRAVEL",vip:!1,batteryKWh:50},{id:"VEH-004",label:"Executive EV",ownerType:"Employee",ownerName:"Irene K.",group:"Operations",costCenter:"OPS-001",vip:!0,batteryKWh:75},{id:"VEH-005",label:"Visitor EV",ownerType:"Visitor",ownerName:"Alex Chen",group:"Sales",costCenter:"SALES-TRAVEL",vip:!0,batteryKWh:70}]),x=c.useMemo(()=>Object.fromEntries(d.map(g=>[g.id,g])),[d]),p=c.useMemo(()=>Object.fromEntries(u.map(g=>[g.id,g])),[u]),[h,j]=c.useState(()=>[{id:"VX-001",vehicleId:"VEH-004",exceptionType:"DC fast",validFrom:t-3*864e5,validTo:t+30*864e5,requestedBy:"Org Admin",status:"Approved",reason:"Executive charging allowance",approvalId:"APR-EX-001"}]),[y,f]=c.useState(()=>{const H=t-108e5;return[{id:"APR-001",createdAt:H,createdBy:"Charging Coordinator",status:"Pending",scope:"Session",scopeId:"CS-001",reason:"Visitor VIP requested DC fast at Airport",flags:["VIP","DC"],steps:Bk(["VIP","DC"]).map(N=>({id:Un("AS"),role:N.role,assignee:N.role==="Manager"?"Manager":N.role==="Finance"?"Finance Desk":"CFO",status:"Pending",requestedAt:H,slaHours:N.slaHours}))}]}),[I,A]=c.useState(()=>[{id:"PLAN-001",name:"Daily depot top-up",days:["Mon","Tue","Wed","Thu","Fri"],timeLocal:"19:30",siteId:"SITE-UG-HQ",connector:"Type 2 (AC)",durationMins:120,expectedKWh:35,maxBudgetUGX:35e3,purpose:"Operations",tags:["Depot","Operations"],vehicles:["VEH-001","VEH-002"],enabled:!0}]),[b,C]=c.useState(()=>{const N=t+864e5+324e5,U=t+1*864e5+18*36e5,ce=t+2*864e5+7*36e5;return[{id:"CS-001",ref:hd("CHG"),vehicleId:"VEH-005",bookedBy:"Charging Coordinator",createdAt:t-3*36e5,scheduledAt:N,durationMins:40,siteId:"SITE-UG-EBB",connector:"CCS2 (DC)",expectedKWh:45,maxBudgetUGX:12e4,purpose:"Visitor",tags:["VIP","Airport"],costCenter:"SALES-TRAVEL",projectTag:"Roadshow",module:"EVs & Charging",status:"Pending approval",policyNotes:["VIP","DC fast"],proofs:[]},{id:"CS-002",ref:hd("CHG"),vehicleId:"VEH-001",bookedBy:"Charging Coordinator",createdAt:t-90*60*1e3,scheduledAt:U,durationMins:120,siteId:"SITE-UG-HQ",connector:"Type 2 (AC)",expectedKWh:30,maxBudgetUGX:3e4,purpose:"Operations",tags:["Depot"],costCenter:"OPS-001",projectTag:"Daily ops",module:"EVs & Charging",status:"Confirmed",policyNotes:[],proofs:[]},{id:"CS-003",ref:hd("CHG"),vehicleId:"VEH-003",bookedBy:"Charging Coordinator",createdAt:t-2*36e5,scheduledAt:ce,durationMins:60,siteId:"SITE-UG-JJA",connector:"Type 2 (AC)",expectedKWh:25,maxBudgetUGX:25e3,purpose:"Office commute",tags:["Commute"],costCenter:"SALES-TRAVEL",projectTag:"Commute program",module:"EVs & Charging",status:"Confirmed",policyNotes:[],proofs:[]}]}),[S,z]=c.useState("overview"),[$,D]=c.useState(""),[W,he]=c.useState("All"),[V,xe]=c.useState("All"),[pe,be]=c.useState("All"),[fe,K]=c.useState(!1),[re,q]=c.useState(null),L=c.useMemo(()=>re&&b.find(g=>g.id===re)||null,[re,b]),[M,k]=c.useState(!1),[P,Y]=c.useState(0),[F,G]=c.useState(()=>{var g,H;return{vehicleId:((g=u[0])==null?void 0:g.id)||"",bookedBy:"Charging Coordinator",scheduledAt:Lk(t+24*60*60*1e3),durationMins:60,siteId:((H=d[0])==null?void 0:H.id)||"",connector:"Type 2 (AC)",expectedKWh:25,maxBudgetUGX:25e3,purpose:"Operations",purposeOther:"",tags:"Operations",costCenter:"OPS-001",projectTag:"Charging",prioritySlot:!1}}),[ve,Te]=c.useState(!1),[ye,ie]=c.useState(()=>{var g;return{name:"Fleet morning top-up",siteId:((g=d[0])==null?void 0:g.id)||"",startAt:Lk(t+2*24*60*60*1e3+8*60*60*1e3),intervalMins:20,durationMins:40,connector:"Type 2 (AC)",expectedKWh:18,maxBudgetUGX:18e3,purpose:"Operations",tags:"Fleet",costCenter:"OPS-001",projectTag:"Fleet plan",vehicleIds:["VEH-001","VEH-002"],prioritySlot:!1}}),[Oe,Ae]=c.useState(!1),[ee,Ne]=c.useState(()=>({vehicleId:"VEH-004",exceptionType:"DC fast",validDays:30,reason:""})),Ce=g=>{var H;return((H=p[g])==null?void 0:H.label)||g},Ee=g=>{const H=p[g];return H?`${H.ownerName} (${H.ownerType})`:"-"},Ue=(g,H,N)=>h.some(U=>U.vehicleId===g&&U.exceptionType===H&&U.status==="Approved"&&N>=U.validFrom&&N<=U.validTo),Ye=g=>{var je;const H=[],N=bB(g.whenTs,i.workStart,i.workEnd),U=_g(Ix(g.whenTs)),ce=g.connector.includes("DC"),O=!!((je=p[g.vehicleId])!=null&&je.vip);return N&&H.push("After-hours"),U&&H.push("Peak tariff"),O&&H.push("VIP"),g.prioritySlot&&H.push("Priority slot"),ce&&H.push("DC fast"),g.expectedKWh>i.maxKWhPerSession&&H.push("Above kWh limit"),g.maxBudgetUGX>i.maxBudgetUGXPerSession&&H.push("Above budget limit"),{flags:H,after:N,peak:U,vip:O,isDC:ce}},De=c.useMemo(()=>{const g=Fk(F.scheduledAt),H=[];i.requirePurpose&&(!F.purpose||F.purpose==="Other"&&!F.purposeOther.trim())&&H.push("Purpose required"),i.requireCostCenter&&!F.costCenter.trim()&&H.push("Cost center required"),i.requireProjectTag&&!F.projectTag.trim()&&H.push("Project tag required");const N=Ye({whenTs:g,connector:F.connector,prioritySlot:F.prioritySlot,expectedKWh:F.expectedKWh,maxBudgetUGX:F.maxBudgetUGX,vehicleId:F.vehicleId});let U=!1;N.isDC&&i.dcRequiresApproval&&!Ue(F.vehicleId,"DC fast",g)&&(U=!0),F.prioritySlot&&i.priorityRequiresApproval&&!Ue(F.vehicleId,"Priority slot",g)&&(U=!0),N.after&&!Ue(F.vehicleId,"After-hours",g)&&(U=!0),(F.expectedKWh>i.maxKWhPerSession||F.maxBudgetUGX>i.maxBudgetUGXPerSession)&&(U=!0),N.vip&&(N.isDC||F.prioritySlot||N.after)&&(U=!0);const ce=H.length===0,O=N.peak?"Consider scheduling 30-60 minutes earlier or later to avoid peak tariff.":"No peak tariff warning.",je=N.flags.filter(Xe=>Xe!=="Peak tariff"),we=N.isDC&&Ue(F.vehicleId,"DC fast",g)||F.prioritySlot&&Ue(F.vehicleId,"Priority slot",g)||N.after&&Ue(F.vehicleId,"After-hours",g);return{whenTs:g,requiredErrors:H,...N,needsApproval:U,canCreate:ce,suggestion:O,approvalFlags:je,hasActiveVipException:we}},[F,i,h,p]),Be=c.useMemo(()=>{const g=$.trim().toLowerCase();return b.filter(H=>W==="All"?!0:H.status===W).filter(H=>V==="All"?!0:H.vehicleId===V).filter(H=>pe==="All"?!0:H.siteId===pe).filter(H=>{if(!g)return!0;const N=p[H.vehicleId],U=x[H.siteId];return`${H.ref} ${H.id} ${(N==null?void 0:N.label)||""} ${(N==null?void 0:N.ownerName)||""} ${(U==null?void 0:U.name)||""} ${H.connector} ${H.purpose} ${H.tags.join(" ")} ${H.costCenter} ${H.projectTag}`.toLowerCase().includes(g)}).slice().sort((H,N)=>H.scheduledAt-N.scheduledAt)},[b,$,W,V,pe,p,x]),$e=c.useMemo(()=>b.filter(g=>g.scheduledAt>t&&g.status!=="Cancelled"),[b,t]),_=c.useMemo(()=>{const g=Array.from({length:24},()=>0);for(const H of $e)g[Ix(H.scheduledAt)]+=1;return g},[$e]),te=c.useMemo(()=>{let g=0,H=-1;return _.forEach((N,U)=>{N>H&&(H=N,g=U)}),{hour:g,count:H}},[_]),Re=te.count>=i.peakHourThreshold,Fe=c.useMemo(()=>{const g={};for(const U of d)g[U.id]=U.connectors.reduce((ce,O)=>ce+O.count,0);const H={};for(const U of d)H[U.id]=Array.from({length:24},()=>0);for(const U of $e){const ce=Ix(U.scheduledAt);H[U.siteId][ce]+=1}const N=Object.keys(H).flatMap(U=>H[U].map((ce,O)=>({siteId:U,h:O,count:ce,cap:g[U]||1})).filter(ce=>ce.count>ce.cap)).sort((U,ce)=>ce.count-U.count);return{capBySite:g,booked:H,congested:N}},[$e,d]),T=c.useMemo(()=>{const g=b.filter(ce=>["Draft","Pending approval","Confirmed"].includes(ce.status)).length,H=y.filter(ce=>ce.status==="Pending").length,N=y.filter(ce=>ce.status==="Pending"&&ce.flags.some(O=>O.toLowerCase().includes("vip"))).length,U=b.filter(ce=>ce.connector.includes("DC")).length;return{open:g,pendingApprovals:H,vipPending:N,dcCount:U}},[b,y]),Z=g=>{q(g),K(!0)},B=g=>{const H=Date.now(),N={Manager:"Manager",Finance:"Finance Desk",CFO:"CFO",CEO:"CEO"},U=Bk(g.flags).map(O=>({id:Un("AS"),role:O.role,assignee:N[O.role],status:"Pending",requestedAt:H,slaHours:O.slaHours})),ce={id:Un("APR"),createdAt:H,createdBy:g.createdBy,status:"Pending",scope:g.scope,scopeId:g.scopeId,reason:g.reason,flags:g.flags,steps:U};return f(O=>[ce,...O]),ce},ne=()=>{if(!De.canCreate){r({title:"Fix required fields",message:De.requiredErrors.join("  "),kind:"warn"});return}const g=Date.now(),H=Un("CS"),N=F.tags.split(",").map(O=>O.trim()).filter(Boolean).slice(0,12),U=F.purpose==="Other"?F.purposeOther.trim():void 0,ce={id:H,ref:hd("CHG"),vehicleId:F.vehicleId,bookedBy:F.bookedBy,createdAt:g,scheduledAt:De.whenTs,durationMins:ao(F.durationMins,10,360),siteId:F.siteId,connector:F.connector,expectedKWh:Math.max(1,F.expectedKWh),maxBudgetUGX:Math.max(0,F.maxBudgetUGX),purpose:F.purpose,purposeOther:U,tags:N,costCenter:F.costCenter.trim(),projectTag:F.projectTag.trim(),module:"EVs & Charging",status:De.needsApproval?"Pending approval":"Confirmed",policyNotes:De.flags.filter(O=>!O.endsWith("required")),proofs:[]};C(O=>[ce,...O]),De.needsApproval&&B({scope:"Session",scopeId:ce.id,createdBy:ce.bookedBy,reason:"Policy exception required for EV charging session",flags:De.approvalFlags.length?De.approvalFlags:["Policy exception"]}),r({title:"Created",message:De.needsApproval?"Session created and sent for approval.":"Session confirmed.",kind:"success"}),k(!1),Y(0),z("sessions")},X=()=>{const g=Fk(ye.startAt),H=Date.now();if(!ye.vehicleIds.length){r({title:"No vehicles",message:"Select at least one vehicle.",kind:"warn"});return}const N=[];let U=!1;if(ye.vehicleIds.forEach((ce,O)=>{const je=g+O*ye.intervalMins*60*1e3,we=Ye({whenTs:je,connector:ye.connector,prioritySlot:ye.prioritySlot,expectedKWh:ye.expectedKWh,maxBudgetUGX:ye.maxBudgetUGX,vehicleId:ce}).flags,Xe=we.some(Ie=>Ie==="After-hours"||Ie==="DC fast"||Ie==="Priority slot"||Ie==="VIP");U=U||Xe,N.push({id:Un("CS"),ref:hd("FLT"),vehicleId:ce,bookedBy:"Charging Coordinator",createdAt:H,scheduledAt:je,durationMins:ao(ye.durationMins,10,360),siteId:ye.siteId,connector:ye.connector,expectedKWh:Math.max(1,ye.expectedKWh),maxBudgetUGX:Math.max(0,ye.maxBudgetUGX),purpose:ye.purpose,tags:ye.tags.split(",").map(Ie=>Ie.trim()).filter(Boolean),costCenter:ye.costCenter,projectTag:ye.projectTag,module:"EVs & Charging",status:Xe?"Pending approval":"Confirmed",policyNotes:we.filter(Ie=>Ie!=="Peak tariff"),proofs:[]})}),C(ce=>[...N,...ce]),U){const ce=Array.from(new Set(N.flatMap(O=>O.policyNotes))).filter(Boolean);B({scope:"Fleet plan",scopeId:Un("PLANRUN"),createdBy:"Charging Coordinator",reason:`Bulk fleet charging requires policy approval (${N.filter(O=>O.status==="Pending approval").length} pending).`,flags:ce.length?ce:["Bulk charging"]})}r({title:"Bulk created",message:`Created ${N.length} session(s).`,kind:"success"}),Te(!1),z("sessions")},ge=g=>{const H=Date.now();f(N=>N.map(U=>{if(U.id!==g)return U;const ce=U.steps.findIndex(we=>we.status==="Pending");if(ce<0)return U;const O=U.steps.slice();O[ce]={...O[ce],status:"Approved",decidedAt:H,note:"Approved"};const je=O.every(we=>we.status==="Approved");return{...U,steps:O,status:je?"Approved":"Pending"}})),setTimeout(()=>{f(N=>{const U=N.find(ce=>ce.id===g);return!U||U.status!=="Approved"||(U.scope==="Session"&&C(ce=>ce.map(O=>O.id===U.scopeId?{...O,status:"Confirmed"}:O)),U.scope==="VIP Exception"&&j(ce=>ce.map(O=>O.approvalId===U.id?{...O,status:"Approved"}:O)),r({title:"Approved",message:"Approval progressed.",kind:"success"})),N})},0)},Le=g=>{const H=Date.now();f(U=>U.map(ce=>{if(ce.id!==g)return ce;const O=ce.steps.findIndex(we=>we.status==="Pending"),je=ce.steps.slice();return O>=0&&(je[O]={...je[O],status:"Rejected",decidedAt:H,note:"Rejected"}),{...ce,steps:je,status:"Rejected"}}));const N=y.find(U=>U.id===g);(N==null?void 0:N.scope)==="Session"&&C(U=>U.map(ce=>ce.id===N.scopeId?{...ce,status:"Cancelled",policyNotes:[...ce.policyNotes,"Rejected"]}:ce)),r({title:"Rejected",message:"Approval rejected.",kind:"warn"})},ae=()=>{if(!ee.reason.trim()){r({title:"Missing",message:"Add a reason.",kind:"warn"});return}const H=Date.now(),N={id:Un("VX"),vehicleId:ee.vehicleId,exceptionType:ee.exceptionType,validFrom:H,validTo:H+ao(ee.validDays,1,365)*864e5,requestedBy:"Org Admin",status:"Pending",reason:ee.reason.trim()},U=["VIP",ee.exceptionType==="DC fast"?"DC":ee.exceptionType==="Priority slot"?"Priority":"After-hours"],ce=B({scope:"VIP Exception",scopeId:N.id,createdBy:N.requestedBy,reason:N.reason,flags:U});N.approvalId=ce.id,j(O=>[N,...O]),r({title:"Requested",message:"VIP exception requested and routed to approvals.",kind:"success"}),Ae(!1),z("approvals")},le=()=>{const g=Be.map(Ie=>{const v=p[Ie.vehicleId],Q=x[Ie.siteId];return{ref:Ie.ref,status:Ie.status,when:fr(Ie.scheduledAt),vehicle:(v==null?void 0:v.label)||Ie.vehicleId,owner:v?`${v.ownerName} (${v.ownerType})`:"-",site:(Q==null?void 0:Q.name)||Ie.siteId,connector:Ie.connector,expectedKWh:Ie.expectedKWh,maxBudgetUGX:Ie.maxBudgetUGX,purpose:Ie.purpose==="Other"?Ie.purposeOther||"Other":Ie.purpose,tags:Ie.tags.join(";"),costCenter:Ie.costCenter,projectTag:Ie.projectTag,policyNotes:Ie.policyNotes.join(";")}}),H=Object.keys(g[0]||{ref:""}),N=Ie=>{const v=String(Ie??"");return/[",\n]/.test(v)?`"${v.replace(/"/g,'""')}"`:v},U=H.join(","),ce=g.map(Ie=>H.map(v=>N(Ie[v])).join(",")).join(`
`),O=`${U}
${ce}`,je=new Blob([O],{type:"text/csv"}),we=URL.createObjectURL(je),Xe=document.createElement("a");Xe.href=we,Xe.download="corporate-ev-charging-sessions.csv",Xe.click(),URL.revokeObjectURL(we),r({title:"Exported",message:"Sessions CSV downloaded.",kind:"success"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx(yB,{toasts:l,onDismiss:g=>n(H=>H.filter(N=>N.id!==g))}),e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-6 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsxs("div",{className:"border-b border-slate-200 bg-white px-4 py-4 md:px-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Ru.green},children:e.jsx(To,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Corporate EV Charging Scheduling"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Pre-book charging sessions for employees, visitors, and company vehicles. Enforce purpose tagging, coordinate bulk plans, and handle VIP exceptions with approvals."}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Qe,{label:`Open: ${T.open}`,tone:T.open?"warn":"good"}),e.jsx(Qe,{label:`Approvals: ${T.pendingApprovals}`,tone:T.pendingApprovals?"warn":"good"}),e.jsx(Qe,{label:`VIP pending: ${T.vipPending}`,tone:T.vipPending?"warn":"good"}),e.jsx(Qe,{label:`DC sessions: ${T.dcCount}`,tone:T.dcCount?"info":"neutral"}),e.jsx(Qe,{label:Re?`Peak hour: ${te.hour}:00 (${te.count})`:`Peak hour: ${te.hour}:00`,tone:Re?"warn":"neutral"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," Export CSV"]}),e.jsxs(Pt,{variant:"outline",onClick:()=>Te(!0),children:[e.jsx(Vs,{className:"h-4 w-4"})," Bulk fleet plan"]}),e.jsxs(Pt,{variant:"primary",onClick:()=>{k(!0),Y(0)},children:[e.jsx(ft,{className:"h-4 w-4"})," New session"]})]})]}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:[{id:"overview",label:"Overview"},{id:"sessions",label:"Sessions"},{id:"sites",label:"Sites"},{id:"recurring",label:"Recurring"},{id:"vip",label:"VIP"},{id:"approvals",label:"Approvals"},{id:"insights",label:"Insights"}].map(g=>e.jsx("button",{className:Fs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",S===g.id?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:S===g.id?{background:Ru.green}:void 0,onClick:()=>z(g.id),children:g.label},g.id))})]}),e.jsxs("div",{className:"bg-slate-50 px-4 py-5 md:px-6",children:[S==="overview"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(Ea,{title:"Upcoming sessions",subtitle:"Next scheduled sessions across all sites.",right:e.jsx(Qe,{label:`${$e.length} upcoming`,tone:$e.length?"info":"neutral"}),children:[e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"When"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vehicle"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Site"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Connector"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Purpose"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Action"})]})}),e.jsxs("tbody",{children:[$e.slice().sort((g,H)=>g.scheduledAt-H.scheduledAt).slice(0,7).map(g=>{const H=p[g.vehicleId],N=x[g.siteId],U=_g(Ix(g.scheduledAt));return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-4 py-3 text-slate-700",children:fr(g.scheduledAt)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(H==null?void 0:H.label)||g.vehicleId}),H!=null&&H.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):null,e.jsx(Qe,{label:H?H.ownerType:"-",tone:"neutral"}),U?e.jsx(Qe,{label:"Peak",tone:"warn"}):e.jsx(Qe,{label:"Off-peak",tone:"good"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:H?`${H.ownerName}  ${H.costCenter}`:"-"})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(N==null?void 0:N.name)||g.siteId}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(Qe,{label:g.connector,tone:g.connector.includes("DC")?"info":"neutral"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[g.expectedKWh," kWh  ",g.durationMins," min"]})]}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(Qe,{label:g.purpose==="Other"?g.purposeOther||"Other":g.purpose,tone:"neutral"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[g.tags.slice(0,3).join(", "),g.tags.length>3?"":""]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Qe,{label:g.status,tone:Bg(g.status)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(Pt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Z(g.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})})]},g.id)}),$e.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10",children:e.jsx(eu,{title:"No upcoming sessions",subtitle:"Create a new charging session or run a recurring plan."})})})]})]})}),Fe.congested.length?e.jsxs("div",{className:"mt-3 rounded-2xl bg-rose-50 p-3 text-xs text-rose-800 ring-1 ring-rose-200",children:["Congestion risk: ",((se=x[Fe.congested[0].siteId])==null?void 0:se.name)||Fe.congested[0].siteId," at ",Fe.congested[0].h,":00 is over capacity (",Fe.congested[0].count,"/",Fe.congested[0].cap,")."]}):Re?e.jsxs("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:["Smart scheduling: peak hour detected around ",te.hour,":00. Consider off-peak scheduling or distributing sessions across sites."]}):e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Smart scheduling: no peak congestion detected in upcoming sessions."})]}),e.jsxs(Ea,{title:"Policy guardrails",subtitle:"Purpose enforcement, limits, and approvals.",right:e.jsx(Qe,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsx(Zc,{enabled:i.requirePurpose,onChange:g=>o(H=>({...H,requirePurpose:g})),label:"Require purpose",description:"Purpose stored for reporting and audits."}),e.jsx(Zc,{enabled:i.requireProjectTag,onChange:g=>o(H=>({...H,requireProjectTag:g})),label:"Require project tag",description:"Used for chargeback and analytics."}),e.jsx(Zc,{enabled:i.requireCostCenter,onChange:g=>o(H=>({...H,requireCostCenter:g})),label:"Require cost center",description:"Enforced on creation."}),e.jsx(Zc,{enabled:i.dcRequiresApproval,onChange:g=>o(H=>({...H,dcRequiresApproval:g})),label:"DC requires approval",description:"DC fast charging is approval-gated."}),e.jsx(Zc,{enabled:i.priorityRequiresApproval,onChange:g=>o(H=>({...H,priorityRequiresApproval:g})),label:"Priority requires approval",description:"Priority slot requests require approval."}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Limits"}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3",children:[e.jsx(zn,{label:"Max kWh per session",value:i.maxKWhPerSession,onChange:g=>o(H=>({...H,maxKWhPerSession:Math.max(1,g)})),hint:"kWh"}),e.jsx(zn,{label:"Max budget per session",value:i.maxBudgetUGXPerSession,onChange:g=>o(H=>({...H,maxBudgetUGXPerSession:Math.max(0,g)})),hint:"UGX"})]})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:["Working hours: ",i.workStart," to ",i.workEnd,". After-hours sessions require approval unless an exception is active."]})]}),e.jsx(Ea,{title:"Sites",subtitle:"Operational health and pricing.",right:e.jsx(Qe,{label:`${d.length}`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:d.map(g=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.name}),e.jsx(Qe,{label:g.status,tone:Vk(g.status)}),e.jsx(Qe,{label:`${g.reliabilityPct}%`,tone:g.reliabilityPct>=90?"good":g.reliabilityPct>=80?"warn":"bad"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[g.city,"  ",g.operator]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Connectors: ",g.connectors.reduce((H,N)=>H+N.count,0)," total"]})]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{z("sites"),be(g.id),r({title:"Filtered",message:"Showing sessions for this site.",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," View"]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[g.connectors.slice(0,3).map(H=>e.jsx(Qe,{label:`${H.connector}  ${H.powerKW}kW`,tone:H.connector.includes("DC")?"info":"neutral"},`${g.id}-${H.connector}`)),g.connectors.length>3?e.jsx(Qe,{label:"+more",tone:"neutral"}):null]})]},g.id))})}),e.jsxs(Ea,{title:"Approvals",subtitle:"Policy exceptions and VIP handling.",right:e.jsx(Qe,{label:`${y.filter(g=>g.status==="Pending").length}`,tone:y.filter(g=>g.status==="Pending").length?"warn":"good"}),children:[e.jsxs("div",{className:"space-y-2",children:[y.filter(g=>g.status==="Pending").slice(0,4).map(g=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qe,{label:g.scope,tone:"neutral"}),e.jsx(Qe,{label:g.status,tone:Fx(g.status)}),e.jsx(Qe,{label:`${g.steps.filter(H=>H.status==="Pending").length} step(s)`,tone:"info"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:g.reason}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[Fg(g.createdAt),"  ",g.createdBy]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Pt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>ge(g.id),children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Le(g.id),children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]})]})]})},g.id)),y.filter(g=>g.status==="Pending").length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No pending approvals."})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"outline",onClick:()=>z("approvals"),children:[e.jsx(ue,{className:"h-4 w-4"})," Open approvals"]}),e.jsxs(Pt,{variant:"outline",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," VIP exception"]})]})]})]}):null,S==="sessions"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(Ea,{title:"Search and filters",subtitle:"Coordinator view",right:e.jsx(Qe,{label:"Core",tone:"neutral"}),children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Search"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-2 py-2",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:$,onChange:g=>D(g.target.value),placeholder:"ref, vehicle, site, tag...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 sm:grid-cols-2",children:[e.jsx(gn,{label:"Status",value:W,onChange:g=>he(g),options:[{value:"All",label:"All"},...["Draft","Pending approval","Confirmed","In progress","Completed","Cancelled"].map(g=>({value:g,label:g}))]}),e.jsx(gn,{label:"Vehicle",value:V,onChange:xe,options:[{value:"All",label:"All"},...u.map(g=>({value:g.id,label:g.label}))]}),e.jsx(gn,{label:"Site",value:pe,onChange:be,options:[{value:"All",label:"All"},...d.map(g=>({value:g.id,label:g.name}))]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"outline",onClick:()=>{D(""),he("All"),xe("All"),be("All"),r({title:"Reset",message:"Filters reset.",kind:"info"})},children:[e.jsx(cr,{className:"h-4 w-4"})," Reset"]}),e.jsxs(Pt,{variant:"outline",onClick:le,children:[e.jsx(ct,{className:"h-4 w-4"})," CSV"]}),e.jsxs(Pt,{variant:"primary",onClick:()=>k(!0),children:[e.jsx(ft,{className:"h-4 w-4"})," New"]})]})]}),e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Best practice: store purpose tags, cost center, and project tag on every charging session."})]}),e.jsx(Ea,{title:"Sessions",subtitle:"Pre-booked corporate charging sessions.",right:e.jsx(Qe,{label:`${Be.length}`,tone:"neutral"}),children:e.jsx("div",{className:"overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Ref"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"When"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Vehicle"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Site"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"kWh and budget"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Actions"})]})}),e.jsxs("tbody",{children:[Be.map(g=>{const H=p[g.vehicleId],N=x[g.siteId];return e.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50/60",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:g.ref}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:g.id})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:fr(g.scheduledAt)}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:(H==null?void 0:H.label)||g.vehicleId}),H!=null&&H.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):null,e.jsx(Qe,{label:H?H.ownerType:"-",tone:"neutral"})]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:H?`${H.ownerName}  ${H.costCenter}`:"-"})]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:(N==null?void 0:N.name)||g.siteId}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx(Qe,{label:`${g.expectedKWh} kWh`,tone:"neutral"}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Budget ",Lx(g.maxBudgetUGX),"  ",g.connector]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Qe,{label:g.status,tone:Bg(g.status)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs(Pt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>Z(g.id),children:[e.jsx(ue,{className:"h-4 w-4"})," Open"]})})]},g.id)}),Be.length?null:e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10",children:e.jsx(eu,{title:"No sessions",subtitle:"Create a session or change filters."})})})]})]})})})]}):null,S==="sites"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Ea,{title:"Charging sites",subtitle:"Status, reliability, and connectors.",right:e.jsx(Qe,{label:"Core",tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:d.map(g=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.name}),e.jsx(Qe,{label:g.status,tone:Vk(g.status)}),e.jsx(Qe,{label:`${g.reliabilityPct}%`,tone:g.reliabilityPct>=90?"good":g.reliabilityPct>=80?"warn":"bad"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[g.city,"  ",g.operator]}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:g.address})]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{be(g.id),z("sessions"),r({title:"Filtered",message:"Showing sessions for this site.",kind:"info"})},children:[e.jsx(ue,{className:"h-4 w-4"})," Sessions"]})]}),e.jsx("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-slate-200 bg-white",children:e.jsxs("table",{className:"min-w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs text-slate-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Connector"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Power"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Count"}),e.jsx("th",{className:"px-4 py-3 font-semibold",children:"Price"})]})}),e.jsx("tbody",{children:g.connectors.map(H=>e.jsxs("tr",{className:"border-t border-slate-100",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx(Qe,{label:H.connector,tone:H.connector.includes("DC")?"info":"neutral"})}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[H.powerKW," kW"]}),e.jsx("td",{className:"px-4 py-3 text-slate-700",children:H.count}),e.jsxs("td",{className:"px-4 py-3 text-slate-700",children:[Lx(H.priceUGXPerKWh)," / kWh"]})]},`${g.id}-${H.connector}-${H.powerKW}`))})]})})]},g.id))})}),e.jsx(Ea,{title:"Site utilization",subtitle:"Premium: detect over-capacity time windows.",right:e.jsx(Qe,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Over-capacity alerts"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"If sessions scheduled exceed connector capacity per hour."}),e.jsxs("div",{className:"mt-3 space-y-2",children:[Fe.congested.slice(0,6).map(g=>{var H;return e.jsxs("div",{className:"rounded-2xl border border-rose-200 bg-rose-50 p-3 text-xs text-rose-800",children:[((H=x[g.siteId])==null?void 0:H.name)||g.siteId," at ",g.h,":00 is over capacity (",g.count,"/",g.cap,")."]},`${g.siteId}-${g.h}`)}),Fe.congested.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No over-capacity windows detected."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Premium: you can add load management rules and stagger sessions by connector power."})]})})]}):null,S==="recurring"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-6 space-y-4",children:e.jsxs(Ea,{title:"Recurring plans",subtitle:"Core: recurring charging schedules.",right:e.jsx(Qe,{label:`${I.length}`,tone:"neutral"}),children:[e.jsxs("div",{className:"space-y-2",children:[I.map(g=>{var H;return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.name}),e.jsx(Qe,{label:g.enabled?"Enabled":"Disabled",tone:g.enabled?"good":"neutral"}),e.jsx(Qe,{label:g.timeLocal,tone:"neutral"}),e.jsx(Qe,{label:g.connector.includes("DC")?"DC":"AC",tone:g.connector.includes("DC")?"info":"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Days: ",g.days.join(", ")]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Site: ",((H=x[g.siteId])==null?void 0:H.name)||g.siteId]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Vehicles: ",g.vehicles.map(N=>{var U;return((U=p[N])==null?void 0:U.label)||N}).join(", ")]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{A(N=>N.map(U=>U.id===g.id?{...U,enabled:!U.enabled}:U)),r({title:"Updated",message:"Plan updated.",kind:"success"})},children:[e.jsx(aA,{className:"h-4 w-4"})," Toggle"]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{const N=Date.now()+1728e5,[U,ce]=g.timeLocal.split(":").map(Ie=>Number(Ie)),O=new Date(N);O.setHours(U||0,ce||0,0,0);const je=O.getTime(),we=g.vehicles.map(Ie=>{var de;const v=Ye({whenTs:je,connector:g.connector,prioritySlot:!1,expectedKWh:g.expectedKWh,maxBudgetUGX:g.maxBudgetUGX,vehicleId:Ie}).flags,Q=v.some(Se=>Se==="After-hours"||Se==="DC fast"||Se==="VIP");return{id:Un("CS"),ref:hd("RC"),vehicleId:Ie,bookedBy:"Charging Coordinator",createdAt:Date.now(),scheduledAt:je,durationMins:g.durationMins,siteId:g.siteId,connector:g.connector,expectedKWh:g.expectedKWh,maxBudgetUGX:g.maxBudgetUGX,purpose:g.purpose,tags:g.tags,costCenter:((de=p[Ie])==null?void 0:de.costCenter)||"OPS-001",projectTag:g.name,module:"EVs & Charging",status:Q?"Pending approval":"Confirmed",policyNotes:v.filter(Se=>Se!=="Peak tariff"),proofs:[]}});C(Ie=>[...we,...Ie]),we.some(Ie=>Ie.status==="Pending approval")&&B({scope:"Fleet plan",scopeId:g.id,createdBy:"Charging Coordinator",reason:"Recurring plan generated sessions requiring approval",flags:Array.from(new Set(we.flatMap(Ie=>Ie.policyNotes))).filter(Boolean)}),r({title:"Generated",message:`Created ${we.length} session(s) from plan.`,kind:"success"}),z("sessions")},disabled:!g.enabled,title:g.enabled?"":"Enable plan first",children:[e.jsx(lt,{className:"h-4 w-4"})," Generate"]})]})]})},g.id)}),I.length?null:e.jsx(eu,{title:"No plans",subtitle:"Create a recurring charging plan."})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: plans can be extended with tariff calendars and site load constraints."})]})}),e.jsx("div",{className:"lg:col-span-6 space-y-4",children:e.jsxs(Ea,{title:"Best practices",subtitle:"Operational tips",right:e.jsx(Qe,{label:"Premium",tone:"info"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"1) Use off-peak windows for depot top-ups"}),e.jsx("li",{children:"2) Stagger sessions by 15-30 minutes to avoid connector contention"}),e.jsx("li",{children:"3) Enforce purpose tags and cost centers for chargeback"}),e.jsx("li",{children:"4) Maintain VIP exceptions with approvals and audit trails"})]})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Tip: Link these approvals to your global Approval Workflow Builder so Corporate Travel and EV Charging share the same governance."})]})})]}):null,S==="vip"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx(Ea,{title:"Vehicles",subtitle:"Company, employee, and visitor EVs.",right:e.jsx(Qe,{label:`${u.length}`,tone:"neutral"}),children:e.jsx("div",{className:"space-y-2",children:u.map(g=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.label}),e.jsx(Qe,{label:g.ownerType,tone:"neutral"}),g.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):null,e.jsx(Qe,{label:`${g.batteryKWh}kWh`,tone:"neutral"})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Owner: ",g.ownerName]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Cost center: ",g.costCenter,"  Group: ",g.group]})]}),e.jsxs(Pt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>{G(H=>({...H,vehicleId:g.id,category:g.vip?"Premium":"Standard",connector:g.vip?"CCS2 (DC)":"Type 2 (AC)",purpose:g.ownerType==="Visitor"?"Visitor":"Operations",tags:g.vip?"VIP":"Operations",costCenter:g.costCenter,projectTag:g.ownerType==="Visitor"?"Visitor charging":"Charging",prioritySlot:g.vip})),Y(1),k(!0)},children:[e.jsx(To,{className:"h-4 w-4"})," Schedule"]})]})},g.id))})}),e.jsxs(Ea,{title:"VIP exceptions",subtitle:"Premium: DC, priority slot, after-hours",right:e.jsx(Qe,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," Request exception"]}),e.jsxs(Pt,{variant:"outline",onClick:()=>z("approvals"),children:[e.jsx(ue,{className:"h-4 w-4"})," View approvals"]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[h.map(g=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qe,{label:g.exceptionType,tone:"neutral"}),e.jsx(Qe,{label:g.status,tone:Fx(g.status)}),e.jsx(Qe,{label:`${Ik(g.validFrom)} to ${Ik(g.validTo)}`,tone:"info"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Ce(g.vehicleId)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Requested by ",g.requestedBy,"  ",g.reason]}),g.approvalId?e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Approval: ",g.approvalId]}):null]}),e.jsx(Kn,{className:Fs("h-5 w-5",g.status==="Approved"?"text-amber-500":"text-slate-300")})]})},g.id)),h.length?null:e.jsx(eu,{title:"No VIP exceptions",subtitle:"Request an exception to allow DC, priority, or after-hours."})]})]})]}):null,S==="approvals"?e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs(Ea,{title:"Approvals",subtitle:"Policy exceptions for DC, priority, after-hours.",right:e.jsx(Qe,{label:"Core",tone:"neutral"}),children:[e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Approvals are required before a session is sent to the station booking engine."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"primary",onClick:()=>Ae(!0),children:[e.jsx(Kn,{className:"h-4 w-4"})," VIP exception"]}),e.jsxs(Pt,{variant:"outline",onClick:()=>r({title:"Tip",message:"Map these approvals to your global Approval Workflow Builder.",kind:"info"}),children:[e.jsx(rt,{className:"h-4 w-4"})," Tip"]})]})]}),e.jsx(Ea,{title:"Approval requests",subtitle:"Approve or reject with audit trail.",right:e.jsx(Qe,{label:`${y.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[y.slice().sort((g,H)=>H.createdAt-g.createdAt).map(g=>{const H=g.steps.findIndex(U=>U.status==="Pending"),N=H>=0?g.steps[H]:null;return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qe,{label:g.scope,tone:"neutral"}),e.jsx(Qe,{label:g.status,tone:Fx(g.status)}),e.jsx(Qe,{label:g.id,tone:"neutral"})]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:g.reason}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Created ",Fg(g.createdAt),"  ",g.createdBy]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:g.flags.map((U,ce)=>e.jsx(Qe,{label:U,tone:U.toLowerCase().includes("vip")?"info":"neutral"},`${g.id}-f-${ce}`))}),N?e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:["Next: ",e.jsx("span",{className:"font-semibold",children:N.role})," (",N.assignee,")  SLA ",N.slaHours,"h"]}):null]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"primary",className:"px-3 py-2 text-xs",onClick:()=>ge(g.id),disabled:g.status!=="Pending",children:[e.jsx(He,{className:"h-4 w-4"})," Approve"]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>Le(g.id),disabled:g.status!=="Pending",children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]}),g.scope==="Session"?e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>{Z(g.scopeId)},children:[e.jsx(ue,{className:"h-4 w-4"})," Open session"]}):null]})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 md:grid-cols-2",children:g.steps.map(U=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-800",children:U.role}),e.jsx(Qe,{label:U.status,tone:Fx(U.status)})]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Assignee: ",U.assignee,"  SLA ",U.slaHours,"h"]}),U.decidedAt?e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Decided ",fr(U.decidedAt),"  ",U.note||""]}):null]},U.id))})]},g.id)}),y.length?null:e.jsx(eu,{title:"No approvals",subtitle:"Policy exceptions will appear here."})]})})]}):null,S==="insights"?e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-12",children:[e.jsx("div",{className:"lg:col-span-5 space-y-4",children:e.jsx(Ea,{title:"Peak tariff detection",subtitle:"Premium: recommend off-peak scheduling.",right:e.jsx(Qe,{label:"Premium",tone:"info"}),children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Peak hour"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Upcoming sessions by hour (0-23)"})]}),e.jsx(Qe,{label:`${te.hour}:00  ${te.count}`,tone:Re?"warn":"neutral"})]}),e.jsx("div",{className:"mt-4 grid grid-cols-6 gap-2 sm:grid-cols-8 md:grid-cols-12",children:_.map((g,H)=>e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-2 text-center",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-700",children:H}),e.jsx("div",{className:Fs("mt-2 h-2 rounded-full",_g(H)?"bg-amber-200":"bg-emerald-200")}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:g})]},H))}),e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Suggestion: avoid peak tariff windows (7-9 and 17-20) for non-urgent charging. Use AC off-peak top-ups."})]})})}),e.jsx("div",{className:"lg:col-span-7 space-y-4",children:e.jsxs(Ea,{title:"Smart recommendations",subtitle:"Next best coordinator actions.",right:e.jsx(Qe,{label:"Premium",tone:"info"}),children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{title:"Bulk schedule a fleet top-up",detail:"Use bulk fleet plan to create staged sessions and reduce congestion.",cta:"Bulk plan",onClick:()=>Te(!0)}),e.jsx(R,{title:"Resolve pending approvals",detail:`There are ${y.filter(g=>g.status==="Pending").length} approval request(s) pending.`,cta:"Open approvals",onClick:()=>z("approvals")}),e.jsx(R,{title:"Create a VIP exception",detail:"For recurring executive DC fast charging, request an approved VIP exception with audit trail.",cta:"Request",onClick:()=>Ae(!0)})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"Premium: you can extend this with tariff calendars, dynamic pricing, and station reliability predictions."})]})})]}):null]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 py-6",children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 text-xs text-slate-500 md:px-6",children:"Corporate EV Charging Scheduling v2. Core: pre-book sessions, book on behalf, enforce purpose and tags. Premium: bulk fleet booking, VIP exceptions with approvals, and smart peak time insights."})})]})}),e.jsx(jB,{open:fe,title:L?`${L.ref}  ${L.connector}`:"Session",subtitle:L?`${Ce(L.vehicleId)}  ${fr(L.scheduledAt)}  ${((m=x[L.siteId])==null?void 0:m.name)||L.siteId}`:"",onClose:()=>K(!1),footer:L?e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx("div",{className:"text-xs text-slate-600",children:"In production, this links to station reservation and session telemetry."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(Pt,{variant:"outline",onClick:()=>{C(g=>g.map(H=>H.id===L.id?{...H,status:"Cancelled"}:H)),r({title:"Cancelled",message:"Session cancelled.",kind:"warn"}),K(!1)},disabled:L.status==="Cancelled"||L.status==="Completed",children:[e.jsx(_e,{className:"h-4 w-4"})," Cancel"]}),e.jsxs(Pt,{variant:"primary",onClick:()=>{var O;const g=Date.now(),H=Math.min(L.expectedKWh,Math.max(1,Math.round(L.expectedKWh*.92))),N=x[L.siteId],U=((O=N==null?void 0:N.connectors.find(je=>je.connector===L.connector))==null?void 0:O.priceUGXPerKWh)||900,ce=Math.round(H*U);C(je=>je.map(we=>we.id===L.id?{...we,status:"Completed",proofs:[{id:Un("AT"),name:"Charge receipt.pdf",note:"Receipt",addedAt:g,addedBy:"System"},...we.proofs],result:{kWhDelivered:H,costUGX:ce,endedAt:g}}:we)),r({title:"Completed",message:"Session marked completed.",kind:"success"})},disabled:L.status!=="Confirmed",title:L.status!=="Confirmed"?"Only confirmed sessions can complete":"",children:[e.jsx(He,{className:"h-4 w-4"})," Complete"]})]})]}):null,children:L?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Qe,{label:L.status,tone:Bg(L.status)}),e.jsx(Qe,{label:L.connector,tone:L.connector.includes("DC")?"info":"neutral"}),(w=p[L.vehicleId])!=null&&w.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):null]}),e.jsx("div",{className:"mt-2 text-sm font-semibold text-slate-900",children:Ce(L.vehicleId)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Owner: ",Ee(L.vehicleId)]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Booked by ",L.bookedBy,"  Created ",Fg(L.createdAt)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-slate-500",children:"Scheduled"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:fr(L.scheduledAt)}),e.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"Budget"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:Lx(L.maxBudgetUGX)})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Site"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:((oe=x[L.siteId])==null?void 0:oe.name)||L.siteId}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:((me=x[L.siteId])==null?void 0:me.address)||""})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Plan"}),e.jsxs("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:[L.expectedKWh," kWh  ",L.durationMins," min"]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["Cost center ",L.costCenter,"  Project ",L.projectTag]})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Tags"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:L.tags.length?L.tags.map((g,H)=>e.jsx(Qe,{label:g,tone:"neutral"},`${L.id}-t-${H}`)):e.jsx(Qe,{label:"None",tone:"neutral"})}),e.jsxs("div",{className:"mt-3 text-xs text-slate-600",children:["Purpose: ",L.purpose==="Other"?L.purposeOther||"Other":L.purpose]})]}),L.policyNotes.length?e.jsxs("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:[e.jsx("div",{className:"font-semibold",children:"Policy notes"}),e.jsx("ul",{className:"mt-2 space-y-1",children:L.policyNotes.map((g,H)=>e.jsxs("li",{children:[" ",g]},`${L.id}-pn-${H}`))})]}):null,L.result?e.jsxs("div",{className:"mt-3 rounded-2xl bg-emerald-50 p-3 text-xs text-emerald-900 ring-1 ring-emerald-200",children:["Completed: ",L.result.kWhDelivered," kWh  Cost ",Lx(L.result.costUGX),"  Ended ",fr(L.result.endedAt)]}):null]}),e.jsx(Ea,{title:"Proofs",subtitle:"Receipts and meter logs",right:e.jsx(Qe,{label:`${L.proofs.length}`,tone:"neutral"}),children:e.jsxs("div",{className:"space-y-2",children:[L.proofs.map(g=>e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.name}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[fr(g.addedAt),"  ",g.addedBy]}),g.note?e.jsxs("div",{className:"mt-2 text-xs text-slate-600",children:["Note: ",g.note]}):null]}),e.jsx(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:async()=>{try{await navigator.clipboard.writeText(g.name),r({title:"Copied",message:"Proof name copied.",kind:"success"})}catch{r({title:"Copy failed",message:"Copy manually.",kind:"warn"})}},children:e.jsx(Ot,{className:"h-4 w-4"})})]})},g.id)),L.proofs.length?null:e.jsx("div",{className:"rounded-2xl bg-slate-50 p-3 text-xs text-slate-600",children:"No proofs yet."})]})})]}):null}),e.jsx(Vg,{open:M,title:"New charging session",subtitle:"Book on behalf. Purpose tags and policy enforcement are required.",onClose:()=>k(!1),actions:[{label:"Create",onClick:ne}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Pt,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Pt,{variant:"outline",onClick:()=>Y(g=>g>0?g-1:g),disabled:P===0,children:"Back"}),P<2?e.jsxs(Pt,{variant:"primary",onClick:()=>Y(g=>g+1),children:["Next",e.jsx(ue,{className:"h-4 w-4"})]}):e.jsxs(Pt,{variant:"primary",onClick:ne,children:[e.jsx(et,{className:"h-4 w-4"})," Create"]})]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:[0,1,2].map(g=>e.jsx("button",{type:"button",className:Fs("rounded-full px-4 py-2 text-sm font-semibold ring-1 transition",P===g?"text-white ring-emerald-600":"bg-white text-slate-700 ring-slate-200 hover:bg-slate-50"),style:P===g?{background:Ru.green}:void 0,onClick:()=>Y(g),children:g===0?"Vehicle":g===1?"Session":"Policy check"},g))}),P===0?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(gn,{label:"Vehicle",value:F.vehicleId,onChange:g=>{const H=p[g];G(N=>({...N,vehicleId:g,costCenter:(H==null?void 0:H.costCenter)||N.costCenter,prioritySlot:!!(H!=null&&H.vip)}))},options:u.map(g=>({value:g.id,label:`${g.label} (${g.ownerType})${g.vip?"  VIP":""}`}))}),e.jsx(qn,{label:"Booked by",value:F.bookedBy,onChange:g=>G(H=>({...H,bookedBy:g})),placeholder:"Charging Coordinator"}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 md:col-span-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Vehicle context"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"VIP, battery size, and default cost center."})]}),e.jsx(EL,{className:"h-5 w-5 text-slate-400"})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[(Me=p[F.vehicleId])!=null&&Me.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):e.jsx(Qe,{label:"Standard",tone:"neutral"}),e.jsx(Qe,{label:`${((Ve=p[F.vehicleId])==null?void 0:Ve.batteryKWh)||0} kWh`,tone:"neutral"}),e.jsx(Qe,{label:((Ze=p[F.vehicleId])==null?void 0:Ze.costCenter)||"-",tone:"neutral"}),e.jsx(Qe,{label:((E=p[F.vehicleId])==null?void 0:E.ownerType)||"-",tone:"neutral"})]}),e.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Owner: ",((J=p[F.vehicleId])==null?void 0:J.ownerName)||"-"]})]})]}):null,P===1?e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(qn,{label:"Scheduled time",type:"datetime-local",value:F.scheduledAt,onChange:g=>G(H=>({...H,scheduledAt:g})),hint:"Local time"}),e.jsx(zn,{label:"Duration",value:F.durationMins,onChange:g=>G(H=>({...H,durationMins:ao(g,10,360)})),hint:"Minutes"}),e.jsx(gn,{label:"Site",value:F.siteId,onChange:g=>G(H=>({...H,siteId:g})),options:d.map(g=>({value:g.id,label:`${g.name} (${g.status})`}))}),e.jsx(gn,{label:"Connector",value:F.connector,onChange:g=>G(H=>({...H,connector:g})),options:a.map(g=>({value:g,label:g}))}),e.jsx(zn,{label:"Expected energy",value:F.expectedKWh,onChange:g=>G(H=>({...H,expectedKWh:Math.max(1,g)})),hint:"kWh"}),e.jsx(zn,{label:"Max budget",value:F.maxBudgetUGX,onChange:g=>G(H=>({...H,maxBudgetUGX:Math.max(0,g)})),hint:"UGX"}),e.jsx(gn,{label:"Purpose",value:F.purpose,onChange:g=>G(H=>({...H,purpose:g})),options:s.map(g=>({value:g,label:g}))}),e.jsx(qn,{label:"Tags",value:F.tags,onChange:g=>G(H=>({...H,tags:g})),placeholder:"Comma separated",hint:"Example: Fleet,Airport"}),e.jsx(qn,{label:"Cost center",value:F.costCenter,onChange:g=>G(H=>({...H,costCenter:g})),placeholder:"OPS-001"}),e.jsx(qn,{label:"Project tag",value:F.projectTag,onChange:g=>G(H=>({...H,projectTag:g})),placeholder:"Charging program"}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 md:col-span-2",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Priority slot"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Premium: request priority reservation, approval-gated."})]}),e.jsx("button",{type:"button",className:Fs("relative h-7 w-12 rounded-full border transition",F.prioritySlot?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>G(g=>({...g,prioritySlot:!g.prioritySlot})),"aria-label":"Toggle priority",children:e.jsx("span",{className:Fs("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",F.prioritySlot?"left-[22px]":"left-1")})})]})}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(_k,{label:"If purpose is Other",value:F.purposeOther,onChange:g=>G(H=>({...H,purposeOther:g})),placeholder:"Explain the purpose",rows:3,disabled:F.purpose!=="Other",hint:F.purpose!=="Other"?"Disabled":"Required when Other"})})]}):null,P===2?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Policy check"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"This preview shows why approval may be required."})]}),De.needsApproval?e.jsx(Qe,{label:"Approval required",tone:"warn"}):e.jsx(Qe,{label:"No approval",tone:"good"})]}),De.requiredErrors.length?e.jsxs("div",{className:"mt-3 rounded-2xl bg-rose-50 p-3 text-xs text-rose-800 ring-1 ring-rose-200",children:[e.jsx("div",{className:"font-semibold",children:"Missing"}),e.jsx("ul",{className:"mt-2 space-y-1",children:De.requiredErrors.map((g,H)=>e.jsxs("li",{children:[" ",g]},`err-${H}`))})]}):null,e.jsxs("div",{className:"mt-3 grid grid-cols-1 gap-3 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Scheduled"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:fr(De.whenTs)}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:["After-hours: ",De.after?"Yes":"No"]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Tariff"}),e.jsx("div",{className:"mt-1 text-sm font-semibold text-slate-900",children:De.peak?"Peak":"Off-peak"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:De.suggestion})]})]}),e.jsxs("div",{className:"mt-3 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700 ring-1 ring-slate-200",children:[e.jsx("div",{className:"font-semibold text-slate-900",children:"Flags"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[De.flags.length?De.flags.map((g,H)=>e.jsx(Qe,{label:g,tone:g.endsWith("required")?"bad":g==="Peak tariff"?"warn":"neutral"},`flag-${H}`)):e.jsx(Qe,{label:"None",tone:"neutral"}),De.hasActiveVipException?e.jsx(Qe,{label:"VIP exception active",tone:"info"}):null]})]}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"If approval is required, the session is created in Pending approval and routed to Manager then Finance, and optionally CFO for VIP, DC fast, or priority."})]})}):null]})}),e.jsx(Vg,{open:ve,title:"Bulk fleet charging plan",subtitle:"Premium: schedule many vehicles with staggered slots.",onClose:()=>Te(!1),actions:[{label:"Create",onClick:X}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Pt,{variant:"outline",onClick:()=>Te(!1),children:"Cancel"}),e.jsxs(Pt,{variant:"primary",onClick:X,children:[e.jsx(et,{className:"h-4 w-4"})," Create"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(qn,{label:"Plan name",value:ye.name,onChange:g=>ie(H=>({...H,name:g}))}),e.jsx(gn,{label:"Site",value:ye.siteId,onChange:g=>ie(H=>({...H,siteId:g})),options:d.map(g=>({value:g.id,label:g.name}))}),e.jsx(qn,{label:"Start time",type:"datetime-local",value:ye.startAt,onChange:g=>ie(H=>({...H,startAt:g}))}),e.jsx(zn,{label:"Interval",value:ye.intervalMins,onChange:g=>ie(H=>({...H,intervalMins:ao(g,5,120)})),hint:"Minutes"}),e.jsx(zn,{label:"Duration",value:ye.durationMins,onChange:g=>ie(H=>({...H,durationMins:ao(g,10,360)})),hint:"Minutes"}),e.jsx(gn,{label:"Connector",value:ye.connector,onChange:g=>ie(H=>({...H,connector:g})),options:a.map(g=>({value:g,label:g}))}),e.jsx(zn,{label:"Expected kWh",value:ye.expectedKWh,onChange:g=>ie(H=>({...H,expectedKWh:Math.max(1,g)})),hint:"kWh"}),e.jsx(zn,{label:"Max budget",value:ye.maxBudgetUGX,onChange:g=>ie(H=>({...H,maxBudgetUGX:Math.max(0,g)})),hint:"UGX"}),e.jsx(qn,{label:"Tags",value:ye.tags,onChange:g=>ie(H=>({...H,tags:g})),hint:"Comma separated"}),e.jsx(qn,{label:"Cost center",value:ye.costCenter,onChange:g=>ie(H=>({...H,costCenter:g}))}),e.jsx(qn,{label:"Project tag",value:ye.projectTag,onChange:g=>ie(H=>({...H,projectTag:g}))}),e.jsxs("div",{className:"md:col-span-2 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Vehicles"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Select vehicles to schedule in sequence."})]}),e.jsx(Qe,{label:`${ye.vehicleIds.length} selected`,tone:ye.vehicleIds.length?"info":"neutral"})]}),e.jsx("div",{className:"mt-3 grid grid-cols-1 gap-2 sm:grid-cols-2",children:u.map(g=>{const H=ye.vehicleIds.includes(g.id);return e.jsxs("button",{type:"button",className:Fs("rounded-2xl border px-3 py-3 text-left",H?"border-emerald-300 bg-emerald-50":"border-slate-200 bg-white hover:bg-slate-50"),onClick:()=>ie(N=>({...N,vehicleIds:H?N.vehicleIds.filter(U=>U!==g.id):[...N.vehicleIds,g.id]})),children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g.label}),g.vip?e.jsx(Qe,{label:"VIP",tone:"info"}):null]}),e.jsxs("div",{className:"mt-1 text-xs text-slate-500",children:[g.ownerName,"  ",g.costCenter]})]},g.id)})}),e.jsx("div",{className:"mt-3 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Bulk plan creates sessions and creates one fleet-plan approval if any session violates policy."})]})]})}),e.jsx(Vg,{open:Oe,title:"Request VIP charging exception",subtitle:"Premium: allow DC fast, priority slots, or after-hours through approvals.",onClose:()=>Ae(!1),actions:[{label:"Submit",onClick:ae}],footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Pt,{variant:"outline",onClick:()=>Ae(!1),children:"Cancel"}),e.jsxs(Pt,{variant:"primary",onClick:ae,children:[e.jsx(Tt,{className:"h-4 w-4"})," Submit"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsx(gn,{label:"Vehicle",value:ee.vehicleId,onChange:g=>Ne(H=>({...H,vehicleId:g})),options:u.map(g=>({value:g.id,label:`${g.label}${g.vip?"  VIP":""}`}))}),e.jsx(gn,{label:"Exception type",value:ee.exceptionType,onChange:g=>Ne(H=>({...H,exceptionType:g})),options:[{value:"DC fast",label:"DC fast"},{value:"Priority slot",label:"Priority slot"},{value:"After-hours",label:"After-hours"}]}),e.jsx(zn,{label:"Valid days",value:ee.validDays,onChange:g=>Ne(H=>({...H,validDays:ao(g,1,365)})),hint:"1 to 365"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(_k,{label:"Reason",value:ee.reason,onChange:g=>Ne(H=>({...H,reason:g})),placeholder:"Explain the business justification",rows:4})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"Best practice: CFO is added automatically for DC or priority exceptions."})]})})]});function R({title:g,detail:H,cta:N,onClick:U}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:g}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:H})]}),e.jsxs(Pt,{variant:"outline",className:"px-3 py-2 text-xs",onClick:U,children:[e.jsx(ue,{className:"h-4 w-4"})," ",N]})]})})}}const M0={dashboard:EF,notifications_activity:OF,command_center:UF,org_setup:xA,modules_enablement:a_,users:Sb,user_profile:jA,user_edit:yA,user_security:NA,user_permissions:wA,user_activity:kA,role_edit:CA,groups:fA,roles_permissions:gA,policies:vA,approval_workflows:bA,approvals_inbox:$_,budgets:AA,wallet_billing:Z_,billing_setup:TA,invoices:oV,collections:hV,reconciliation:NV,vendors:EV,rfq:OV,fulfillment:_V,travel:GV,reporting:$A,esg:IA,integrations:LA,security:FA,support_tools:_A,settings_hub:BA,ev_charging:NB};({...M0});const Do={green:"#03CD8C",orange:"#F77F00"};function is(...t){return t.filter(Boolean).join(" ")}function wB(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function kB(t){const[s,a]=c.useState(()=>typeof window>"u"?!1:window.matchMedia(t).matches);return c.useEffect(()=>{var r;if(typeof window>"u")return;const l=window.matchMedia(t),n=()=>a(l.matches);return n(),(r=l.addEventListener)==null||r.call(l,"change",n),()=>{var i;return(i=l.removeEventListener)==null?void 0:i.call(l,"change",n)}},[t]),s}function Ja({label:t,tone:s}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:is("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Ar({variant:t="outline",className:s,children:a,onClick:l,disabled:n,title:r}){const i="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",o={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},d=t==="primary"?{background:Do.green}:t==="accent"?{background:Do.orange}:void 0;return e.jsx("button",{type:"button",title:r,disabled:n,onClick:l,style:d,className:is(i,o[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function CB({channel:t}){const a={Email:{bg:"bg-slate-50",fg:"text-slate-700",icon:e.jsx(os,{className:"h-3.5 w-3.5"})},WhatsApp:{bg:"bg-emerald-50",fg:"text-emerald-700",icon:e.jsx(up,{className:"h-3.5 w-3.5"})},WeChat:{bg:"bg-green-50",fg:"text-green-700",icon:e.jsx(up,{className:"h-3.5 w-3.5"})},SMS:{bg:"bg-blue-50",fg:"text-blue-700",icon:e.jsx(up,{className:"h-3.5 w-3.5"})}}[t];return e.jsxs("span",{className:is("inline-flex items-center gap-1.5 rounded-full px-2 py-1 text-xs font-semibold",a.bg,a.fg),children:[a.icon,t]})}function _x({open:t,onClose:s,anchorRef:a,children:l,width:n=360}){var d;c.useEffect(()=>{const u=x=>{x.key==="Escape"&&s()};return t&&window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[t,s]);const r=(d=a.current)==null?void 0:d.getBoundingClientRect(),i=r?Math.max(16,window.innerWidth-r.right):16,o=r?r.bottom+10:54;return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40",onClick:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-[0_24px_70px_rgba(2,8,23,0.18)]",style:{width:n,right:i,top:o},role:"menu",children:l})]}):null})}function Uk({nav:t,active:s,onSelect:a,collapsed:l,theme:n,onToggleTheme:r}){const i=n==="dark"?"bg-slate-900":"bg-slate-50",o=n==="dark"?"border-slate-800":"border-slate-200",d=n==="dark"?"text-white":"text-slate-900",u=n==="dark"?"text-slate-400":"text-slate-500";return e.jsxs("div",{className:is("flex h-full flex-col",l?"px-1":"px-2",i),children:[e.jsxs("div",{className:is("flex items-center gap-2 border-b py-3",o,l?"justify-center px-1":"px-2"),children:[e.jsx("img",{src:S0,alt:"EVzone CorporatePay",className:"h-8 w-8 shrink-0 rounded-xl object-contain"}),!l&&e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:is("truncate text-sm font-bold",d),children:"CorporatePay"}),e.jsx("div",{className:is("truncate text-xs",u),children:"Console"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto py-2 scroll-smooth scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-transparent",children:e.jsx("div",{className:"space-y-0.5",children:t.map(x=>e.jsx(SB,{item:x,active:s,onSelect:a,collapsed:l,theme:n},x.id))})}),e.jsxs("div",{className:is("border-t py-2",o),children:[e.jsxs("button",{onClick:r,className:is("flex w-full items-center gap-2 rounded-xl px-2 py-1.5 text-left transition-colors",n==="dark"?"text-slate-300 hover:bg-slate-800":"text-slate-700 hover:bg-slate-100",l&&"justify-center"),title:n==="light"?"Switch to dark mode":"Switch to light mode",children:[n==="light"?e.jsx(qL,{className:"h-4 w-4"}):e.jsx(KL,{className:"h-4 w-4"}),!l&&e.jsx("span",{className:"text-sm font-medium",children:n==="light"?"Dark mode":"Light mode"})]}),e.jsxs("button",{onClick:()=>a("support_tools"),className:is("flex w-full items-center gap-2 rounded-xl px-2 py-1.5 text-left transition-colors",n==="dark"?"text-slate-300 hover:bg-slate-800":"text-slate-700 hover:bg-slate-100",l&&"justify-center"),children:[e.jsx(Pm,{className:"h-4 w-4"}),!l&&e.jsx("span",{className:"text-sm font-medium",children:"Help & Support"})]})]})]})}function SB({item:t,active:s,onSelect:a,collapsed:l,theme:n}){var h,j;const r=s===t.id||((h=t.children)==null?void 0:h.some(y=>y.id===s)),i=s===t.id,o=!!((j=t.children)!=null&&j.length),[d,u]=c.useState(r),x=i?"text-white":n==="dark"?"text-slate-300 hover:bg-slate-800":"text-slate-700 hover:bg-slate-100",p=i?"text-white":n==="dark"?"text-slate-400":"text-slate-500";return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>{o?u(y=>!y):a(t.id)},className:is("flex w-full items-center gap-2 rounded-xl px-2 py-1.5 text-left text-sm font-medium transition-all hover-lift",x,l&&"justify-center px-1"),style:i?{background:Do.green}:void 0,children:[e.jsx("div",{className:is("shrink-0",p),children:t.icon}),!l&&e.jsx("div",{className:"min-w-0 flex-1 truncate",children:t.label}),!l&&t.badge&&e.jsx("span",{className:is("rounded-full px-1.5 py-0.5 text-xs font-semibold",i?"bg-white/20 text-white":n==="dark"?"bg-slate-700 text-slate-300":"bg-slate-200 text-slate-600"),children:t.badge}),!l&&o&&e.jsx(Dl,{className:is("h-3 w-3 transition-transform",d?"rotate-0":"-rotate-90")})]}),!l&&o&&e.jsx(qe,{initial:!1,children:d&&e.jsx(ke.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.12},className:"ml-4 mt-0.5 space-y-0.5 border-l border-slate-200 pl-2 dark:border-slate-700",children:t.children.map(y=>e.jsxs("button",{onClick:()=>a(y.id),className:is("flex w-full items-center justify-between rounded-lg px-2 py-1 text-left text-sm transition-colors hover-lift",s===y.id?"bg-emerald-50 font-semibold text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400":n==="dark"?"text-slate-400 hover:bg-slate-800":"text-slate-600 hover:bg-slate-100"),children:[e.jsx("span",{className:"truncate",children:y.label}),y.badge&&e.jsx("span",{className:is("ml-1 rounded-full px-1.5 py-0.5 text-xs font-semibold",n==="dark"?"bg-slate-700 text-slate-300":"bg-slate-200 text-slate-600"),children:y.badge})]},y.id))})})]})}function AB({actions:t}){var o;const[s,a]=c.useState(!1),l=c.useRef(null);c.useEffect(()=>{if(s){const d=()=>a(!1);return window.addEventListener("scroll",d,!0),()=>window.removeEventListener("scroll",d,!0)}},[s]);const n=(o=l.current)==null?void 0:o.getBoundingClientRect(),r=n?n.bottom+4:0,i=n?window.innerWidth-n.right:0;return t.length?e.jsxs(e.Fragment,{children:[e.jsx("button",{ref:l,onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),e.jsx(qe,{children:s&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)}),e.jsx(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"fixed z-50 w-56 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-[0_10px_38px_-10px_rgba(22,23,24,0.35),0_10px_20px_-15px_rgba(22,23,24,0.2)]",style:{top:r,right:i},children:t.map((d,u)=>e.jsxs("button",{onClick:()=>{d.onClick(),a(!1)},disabled:d.disabled,className:is("flex w-full items-center gap-3 px-4 py-2.5 text-left text-sm font-medium transition-colors hover:bg-slate-50 disabled:opacity-50",d.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700"),children:[d.icon,d.label]},u))})]})})]}):null}function EB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r,maxW:i="920px",actions:o}){return c.useEffect(()=>{const d=u=>u.key==="Escape"&&n();return t&&window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[t,n]),e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[8vh] z-50 mx-auto w-[min(980px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",style:{maxWidth:i},role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o&&e.jsx(AB,{actions:o}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,"aria-label":"Close",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function PB({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-[min(460px,calc(100vw-2rem))] space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},transition:{duration:.18},className:"pointer-events-auto rounded-3xl border border-slate-200 bg-white/90 p-3 shadow-[0_18px_45px_rgba(2,8,23,0.18)] backdrop-blur",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:is("mt-0.5 grid h-9 w-9 place-items-center rounded-2xl",a.kind==="success"&&"bg-emerald-50 text-emerald-700",a.kind==="warn"&&"bg-amber-50 text-amber-800",a.kind==="error"&&"bg-rose-50 text-rose-700",a.kind==="info"&&"bg-blue-50 text-blue-700"),children:a.kind==="error"||a.kind==="warn"?e.jsx(at,{className:"h-5 w-5"}):e.jsx(He,{className:"h-5 w-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:a.title}),a.message?e.jsx("div",{className:"mt-0.5 text-sm text-slate-600",children:a.message}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-500 hover:bg-slate-100",onClick:()=>s(a.id),"aria-label":"Dismiss",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function qk({title:t,subtitle:s,tier:a,bullets:l,onPrimary:n,primaryLabel:r}){return e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Page"}),e.jsx("div",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:t}),e.jsx("div",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:s}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.jsx(Ja,{label:a,tone:a==="Premium"?"info":"neutral"}),e.jsx(Ja,{label:"Shell ready",tone:"good"})]})]}),n?e.jsxs(Ar,{variant:"primary",onClick:n,children:[e.jsx(ue,{className:"h-4 w-4"})," ",r||"Open"]}):null]}),l!=null&&l.length?e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-slate-50 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Included features"}),e.jsx("ul",{className:"mt-3 space-y-2 text-sm text-slate-700",children:l.map(i=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"mt-2 h-1.5 w-1.5 rounded-full",style:{background:Do.green}}),e.jsx("span",{children:i})]},i))})]}):null,e.jsx("div",{className:"mt-4 rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"This AppShell is designed so each route can be replaced with the full page component when you integrate files into your codebase."})]})}function MB({pageTitle:t,role:s,onRequest:a}){return e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl bg-rose-50 text-rose-700",children:e.jsx(as,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Access denied"}),e.jsxs("div",{className:"mt-1 text-sm text-slate-600",children:["Your role ",e.jsx("span",{className:"font-semibold",children:s})," cannot access ",e.jsx("span",{className:"font-semibold",children:t}),"."]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsxs(Ar,{variant:"primary",onClick:a,children:[e.jsx(ir,{className:"h-4 w-4"})," Request access"]}),e.jsx("div",{className:"text-xs text-slate-500",children:"Requests should be auditable and time-bounded in production."})]})]})]})})}function TB({onLogin:t,orgs:s,roles:a}){const[l,n]=c.useState(s[0]||"Organization"),[r,i]=c.useState(a[0]||"Org Admin"),[o,d]=c.useState("admin@company.com"),[u,x]=c.useState("demo"),[p,h]=c.useState(!0);return e.jsx("div",{className:"min-h-screen bg-[radial-gradient(90%_60%_at_50%_0%,rgba(3,205,140,0.18),rgba(255,255,255,0))]",children:e.jsx("div",{className:"mx-auto max-w-[980px] px-4 py-10 md:px-6",children:e.jsxs("div",{className:"overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.12)]",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white px-6 py-5",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:S0,alt:"EVzone CorporatePay",className:"h-12 w-12 rounded-2xl object-contain"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"CorporatePay"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Login and org selector"})]})]}),e.jsx(Ja,{label:"SSO-ready",tone:"info"})]})}),e.jsxs("div",{className:"bg-slate-50 px-6 py-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Sign in"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Email and password. SSO buttons can be added in phase 2."}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Email"}),e.jsx("input",{value:o,onChange:j=>d(j.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Password"}),e.jsx("input",{type:"password",value:u,onChange:j=>x(j.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("label",{className:"flex items-start gap-3 rounded-3xl border border-slate-200 bg-slate-50 p-3",children:[e.jsx("input",{type:"checkbox",checked:p,onChange:j=>h(j.target.checked),className:"mt-1 h-4 w-4 rounded border-slate-300"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Device trust notice"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Unusual logins may require step-up prompts (MFA)."})]})]}),e.jsxs(Ar,{variant:"primary",className:"w-full",onClick:()=>{!o.trim()||!u.trim()||p&&t(l,r)},disabled:!o.trim()||!u.trim()||!p,children:[e.jsx(et,{className:"h-4 w-4"})," Sign in"]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Select organization"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Shown when your user belongs to multiple orgs."}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Organization"}),e.jsx("select",{value:l,onChange:j=>n(j.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100",children:s.map(j=>e.jsx("option",{value:j,children:j},j))})]}),e.jsxs("label",{className:"block",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Role (demo)"}),e.jsx("select",{value:r,onChange:j=>i(j.target.value),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100",children:a.map(j=>e.jsx("option",{value:j,children:j},j))})]}),e.jsx("div",{className:"rounded-2xl bg-amber-50 p-3 text-xs text-amber-900 ring-1 ring-amber-200",children:"In production, role and org membership is resolved from access policy and invites."}),e.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[e.jsxs(Ar,{variant:"outline",onClick:()=>alert("Request access: creates ticket for org admin (demo)."),children:[" ",e.jsx(ir,{className:"h-4 w-4"})," Request access"]}),e.jsxs(Ar,{variant:"outline",onClick:()=>alert("MFA setup happens after login in X2 (demo)."),children:[" ",e.jsx(as,{className:"h-4 w-4"})," MFA and device trust"]})]})]})]})]}),e.jsxs("div",{className:"mt-4 rounded-3xl border border-slate-200 bg-white p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"EVzone Support sign-in entry"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Support role is embedded. Support sessions are always audited, visible, and watermarked."})]})]}),e.jsx("footer",{className:"border-t border-slate-200 bg-white/60 px-6 py-5 text-xs text-slate-500",children:"Access and onboarding screens are part of the complete system. This login page is a premium shell starter."})]})})})}function mt({children:t}){const s=kB("(min-width: 1024px)"),{pageId:a}=na(),l=ot(),[n,r]=c.useState(!0),[i,o]=c.useState(!1),[d,u]=c.useState(!1),x=a||"dashboard",[p,h]=c.useState("Active"),[j,y]=c.useState("Org Admin"),[f,I]=c.useState("Acme Group Ltd"),[A,b]=c.useState([]),C=_=>{const te=wB("toast");b(Re=>[{id:te,..._},...Re].slice(0,4)),window.setTimeout(()=>b(Re=>Re.filter(Fe=>Fe.id!==te)),3200)},[S,z]=c.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");c.useEffect(()=>{const _=window.document.documentElement;S==="dark"?_.classList.add("dark"):_.classList.remove("dark"),localStorage.setItem("theme",S)},[S]);const[$,D]=c.useState(""),[W,he]=c.useState(!1),[V,xe]=c.useState(!1),[pe,be]=c.useState(!1),[fe,K]=c.useState(!1),[re,q]=c.useState(!1),[L,M]=c.useState(!1),k=c.useRef(null),P=c.useRef(null),Y=c.useRef(null),F=c.useRef(null),[G,ve]=c.useState(!1),[Te,ye]=c.useState("");c.useEffect(()=>{s&&u(!1)},[s]),c.useEffect(()=>{be(!1),K(!1),he(!1),xe(!1)},[a]);const ie=c.useMemo(()=>({dashboard:{id:"dashboard",title:"Corporate Dashboard",subtitle:"KPIs, account health, issues, and next best admin actions.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"],keywords:["kpi","spend","approvals","budget","health"],status:"Ready",bullets:["Spend today/week/month, approvals pending, budget remaining","Account health: wallet balance, credit usage, prepaid runway","Top issues: failed payments, breaches, overdue invoices","Quick actions: add funds, approve queue, create RFQ"]},notifications_activity:{id:"notifications_activity",title:"Notifications and Activity Center",subtitle:"Unified feed for approvals, reminders, alerts, and vendor updates with channel delivery logs.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"],keywords:["alerts","reminders","activity","logs","whatsapp","wechat","sms"],status:"Ready"},command_center:{id:"command_center",title:"Global Search and Command Center",subtitle:"Search users, invoices, approvals, vendors and run quick admin actions.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"],keywords:["search","command","operator","shortcuts"],status:"Ready"},org_setup:{id:"org_setup",title:"Organization Profile and Program Setup",subtitle:"Company profile, entities, branding, billing contacts, invoice groups, support toggle and go-live readiness.",tier:"Core",roles:["Org Owner","Org Admin"],keywords:["profile","entities","billing","branding","go-live"],status:"Ready"},modules_enablement:{id:"modules_enablement",title:"Modules and Marketplaces Enablement",subtitle:"Enable service modules and marketplaces including MyLiveDealz. Includes Other slots.",tier:"Core",roles:["Org Owner","Org Admin"],keywords:["modules","marketplaces","mylivedealz","enable"],status:"Planned",bullets:["Enable/disable service modules","Enable/disable marketplaces under E-Commerce","Controlled rollout: pilot group then expand","Change impact preview"]},users:{id:"users",title:"Users and Invitations",subtitle:"Invite users, assign roles, groups and spend limits. Bulk import and offboarding.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant"],keywords:["users","invites","csv","hris"],status:"Planned",bullets:["Users list: Invited/Active/Suspended/Offboarded","Bulk import CSV, HRIS import in phase 2","Offboarding: revoke CorporatePay immediately, keep audit"]},groups:{id:"groups",title:"Groups and Cost Centers",subtitle:"Departments (groups), cost centers, project tags and chargeback rules.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["groups","cost center","tags"],status:"Planned"},roles_permissions:{id:"roles_permissions",title:"Roles, Permissions and Governance",subtitle:"RBAC, custom roles, approval delegation and two-admin model controls.",tier:"Core",roles:["Org Owner","Org Admin"],keywords:["rbac","permissions","governance"],status:"Planned"},policies:{id:"policies",title:"Policies",subtitle:"Ride, services and purchases policies with inheritance and simulator.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Approver"],keywords:["policy","rides","purchases","services"],status:"Planned"},approval_workflows:{id:"approval_workflows",title:"Approval Workflow Builder",subtitle:"Rule engine and multi-level approvals per module and marketplace including RFQs.",tier:"Core",roles:["Org Owner","Org Admin","Approver"],keywords:["workflow","approvals","sla"],status:"Planned"},approvals_inbox:{id:"approvals_inbox",title:"Approvals Inbox",subtitle:"Unified queue for rides, purchases, services, RFQs and exceptions.",tier:"Core",roles:["Org Owner","Org Admin","Approver","Accountant","Manager"],keywords:["approve","queue","sla"],status:"Planned"},budgets:{id:"budgets",title:"Budgets, Spend Limits and Controls",subtitle:"Org, group, module and marketplace budgets with forecasting and emergency exceptions.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["budget","cap","limits","exceptions"],status:"Ready"},wallet_billing:{id:"wallet_billing",title:"Corporate Wallet, Credit Line and Prepaid Funding",subtitle:"Pay-as-you-go wallet, credit with limit, and prepaid deposit with hard stop.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["wallet","credit","prepaid"],status:"Planned"},billing_setup:{id:"billing_setup",title:"Billing Setup and Invoice Groups",subtitle:"Invoice frequency, invoice groups, tax settings, and billing simulations.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["invoice groups","billing","tax"],status:"Planned"},invoices:{id:"invoices",title:"Invoices and Statements",subtitle:"Invoice list, line item explorer, disputes, exports.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["invoice","statement","dispute"],status:"Planned"},collections:{id:"collections",title:"Collections, Reminders and Enforcement",subtitle:"Automated reminders and service suspension rules.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["reminders","dunning","enforcement"],status:"Planned"},reconciliation:{id:"reconciliation",title:"Transactions and Reconciliation",subtitle:"Ledger, matching tools, exceptions queue, ERP mappings.",tier:"Core",roles:["Org Owner","Org Admin","Accountant"],keywords:["ledger","reconcile","erp"],status:"Planned"},vendors:{id:"vendors",title:"Vendor and Catalog Management",subtitle:"Allowlist/denylist vendors, risk scoring, rate cards and compliance docs.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant"],keywords:["vendors","catalog","allowlist"],status:"Planned"},rfq:{id:"rfq",title:"RFQ and Quote Requests",subtitle:"High value assets: request quote, compare quotes, convert to purchase order.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver"],keywords:["rfq","quote","assets"],status:"Planned"},fulfillment:{id:"fulfillment",title:"Orders, Service Requests and Fulfillment",subtitle:"Track purchase orders, service bookings, deliveries and schedules.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant"],keywords:["orders","fulfillment","sla"],status:"Planned"},travel:{id:"travel",title:"Corporate Travel and Scheduling",subtitle:"Pre-book rides, visitors, events, and recurring commutes.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Travel Coordinator"],keywords:["travel","schedule","events"],status:"Planned"},reporting:{id:"reporting",title:"Reporting and Analytics",subtitle:"Spend reports, approvals performance, exports and scheduled reports.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver"],keywords:["reports","analytics","exports"],status:"Ready"},esg:{id:"esg",title:"Sustainability and ESG Reporting",subtitle:"EV usage, charging utilization, emissions estimates, and ESG template exports.",tier:"Premium",roles:["Org Owner","Org Admin","Accountant"],keywords:["esg","emissions","charging"],status:"Ready"},integrations:{id:"integrations",title:"Integrations and Developer Center",subtitle:"API keys, scopes, webhooks, ERP exports, sandbox and inspector.",tier:"Core",roles:["Org Owner","Org Admin","Accountant","EVzone Support"],keywords:["api","webhooks","sandbox","erp"],status:"Ready"},security:{id:"security",title:"Security, Audit and Compliance",subtitle:"Audit logs, MFA policy, retention, support mode gating, forensic exports, compliance center.",tier:"Core",roles:["Org Owner","Org Admin","Accountant","EVzone Support"],keywords:["audit","mfa","retention","dual control"],status:"Ready"},support_tools:{id:"support_tools",title:"Support and EVzone Admin Tools",subtitle:"Embedded EVzone support role with auditable sessions, scoped tools and incidents.",tier:"Premium",roles:["Org Owner","Org Admin","Accountant","EVzone Support"],keywords:["support","cases","sessions","incidents"],status:"Ready"},ev_charging:{id:"ev_charging",title:"EV Charging",subtitle:"Charging schedules, sites, credits, and utilization controls.",tier:"Core",roles:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"],keywords:["ev","charging","station","credits","utilization"],status:"Ready"},settings_hub:{id:"settings_hub",title:"Admin Settings Hub",subtitle:"Single settings umbrella linking to all configuration pages.",tier:"Core",roles:["Org Owner","Org Admin","Accountant","Manager","Approver","EVzone Support"],keywords:["settings","hub","config"],status:"Ready"}}),[]),Oe=c.useMemo(()=>[{id:"n1",title:"Invoice due tomorrow",message:"INV-2026-0117 is due. Auto-reminders are enabled.",when:"2h ago",tone:"warning",channel:"Email"},{id:"n2",title:"7 approvals pending",message:"Purchases and RFQs waiting. SLA target: 8 hours.",when:"Now",tone:"info",channel:"WhatsApp"},{id:"n3",title:"Prepaid balance low",message:"Deposit runway estimated: 3 days. Top up to avoid service stop.",when:"30m ago",tone:"danger",channel:"SMS"},{id:"n4",title:"ERP sync healthy",message:"Last export delivered successfully. Webhook success: 99.2%.",when:"Today",tone:"success",channel:"WeChat"}],[]),Ae=c.useMemo(()=>({approvals:7,rfqs:3,users:128,alerts:Oe.length,cases:2}),[Oe.length]),ee=c.useMemo(()=>[{id:"dashboard",label:"Dashboard",icon:e.jsx(yb,{className:"h-4 w-4"})},{id:"notifications_activity",label:"Activity",icon:e.jsx(Ei,{className:"h-4 w-4"}),badge:`${Ae.alerts}`},{id:"command_center",label:"Command center",icon:e.jsx(js,{className:"h-4 w-4"})},{id:"org",label:"Organization",icon:e.jsx(Ia,{className:"h-4 w-4"}),children:[{id:"org_setup",label:"Setup wizard",icon:e.jsx("div",{})},{id:"modules_enablement",label:"Modules and marketplaces",icon:e.jsx("div",{}),badge:"MyLiveDealz"}]},{id:"people",label:"People",icon:e.jsx(Vs,{className:"h-4 w-4"}),badge:`${Ae.users}`,children:[{id:"users",label:"Users and invites",icon:e.jsx("div",{})},{id:"groups",label:"Groups and cost centers",icon:e.jsx("div",{})},{id:"roles_permissions",label:"Roles and permissions",icon:e.jsx("div",{})}]},{id:"controls",label:"Controls",icon:e.jsx(Tt,{className:"h-4 w-4"}),children:[{id:"policies",label:"Policies",icon:e.jsx("div",{})},{id:"approval_workflows",label:"Approval workflows",icon:e.jsx("div",{})},{id:"approvals_inbox",label:"Approvals inbox",icon:e.jsx("div",{}),badge:`${Ae.approvals}`}]},{id:"money",label:"Budgets and billing",icon:e.jsx(al,{className:"h-4 w-4"}),children:[{id:"budgets",label:"Budgets and spend",icon:e.jsx("div",{}),badge:"Caps"},{id:"wallet_billing",label:"Wallet and funding",icon:e.jsx("div",{})},{id:"billing_setup",label:"Billing setup",icon:e.jsx("div",{})},{id:"invoices",label:"Invoices",icon:e.jsx("div",{})},{id:"collections",label:"Collections",icon:e.jsx("div",{}),badge:"Auto"},{id:"reconciliation",label:"Reconciliation",icon:e.jsx("div",{})}]},{id:"procurement",label:"Procurement",icon:e.jsx(jt,{className:"h-4 w-4"}),badge:"RFQ",children:[{id:"vendors",label:"Vendors and catalog",icon:e.jsx("div",{})},{id:"rfq",label:"RFQs and quotes",icon:e.jsx("div",{}),badge:`${Ae.rfqs}`},{id:"fulfillment",label:"Orders and fulfillment",icon:e.jsx("div",{})},{id:"travel",label:"Travel and scheduling",icon:e.jsx("div",{})},{id:"ev_charging",label:"EV Charging",icon:e.jsx("div",{}),badge:"EV"}]},{id:"reports",label:"Reporting",icon:e.jsx($y,{className:"h-4 w-4"}),children:[{id:"reporting",label:"Analytics",icon:e.jsx("div",{})},{id:"esg",label:"Sustainability and ESG",icon:e.jsx("div",{}),badge:"Premium"}]},{id:"integrations",label:"Integrations",icon:e.jsx(nn,{className:"h-4 w-4"}),children:[{id:"integrations",label:"Developer center",icon:e.jsx("div",{})}]},{id:"security",label:"Security",icon:e.jsx(as,{className:"h-4 w-4"}),children:[{id:"security",label:"Audit and compliance",icon:e.jsx("div",{})}]},{id:"support",label:"Support",icon:e.jsx(jb,{className:"h-4 w-4"}),badge:`${Ae.cases}`,children:[{id:"support_tools",label:"Support tools",icon:e.jsx("div",{})}]},{id:"settings_hub",label:"Settings",icon:e.jsx(kn,{className:"h-4 w-4"})}],[Ae]),Ne=ie[x]||ie.dashboard,Ce=p==="Active"?"good":p==="Past due"?"warn":"bad",Ee=j==="EVzone Support",Ue=c.useMemo(()=>{const _=[{k:"Approvals inbox",id:"approvals_inbox",kind:"page"},{k:"Create RFQ",id:"rfq",kind:"page"},{k:"Issue budget",id:"budgets",kind:"page"},{k:"Top up wallet",id:"wallet_billing",kind:"page"},{k:"Security: audit and compliance",id:"security",kind:"page"},{k:"Integrations: API keys and webhooks",id:"integrations",kind:"page"},{k:"Support tools",id:"support_tools",kind:"page"},{k:"EV Charging",id:"ev_charging",kind:"page"},{k:"Settings hub",id:"settings_hub",kind:"page"}],te=$.trim().toLowerCase();return te?_.filter(Re=>Re.k.toLowerCase().includes(te)).slice(0,10):_.slice(0,8)},[$]);c.useEffect(()=>{s&&u(!1)},[s]),c.useEffect(()=>{be(!1),K(!1),he(!1),xe(!1)},[a]),c.useEffect(()=>{const _=te=>{(te.ctrlKey||te.metaKey)&&te.key.toLowerCase()==="k"&&(te.preventDefault(),M(!0),l(`${Mt.CONSOLE.ROOT}/command_center`)),te.key==="Escape"&&M(!1)};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]);const Ye=_=>{const te=ie[_];return te?te.roles.includes(j):!0},De=()=>{if(t)return t;const _=ie[x];if(!_)return e.jsx(qk,{title:"Not found",subtitle:"This route does not exist.",tier:"Core"});if(!Ye(x))return e.jsx(MB,{pageTitle:_.title,role:j,onRequest:()=>{ye(""),ve(!0)}});const te=M0[x];return te?e.jsx(te,{}):e.jsx(qk,{title:_.title,subtitle:_.subtitle,tier:_.tier,bullets:_.bullets,onPrimary:()=>C({title:"Route",message:`Open ${_.id} (demo)`,kind:"info"}),primaryLabel:"Open"})},Be=_=>{y(_),C({title:"Role switched",message:_,kind:"info"}),Ye(x)||l(`${Mt.CONSOLE.ROOT}/dashboard`)},$e=_=>{I(_),C({title:"Organization",message:_,kind:"info"})};return n?e.jsxs("div",{className:"min-h-screen bg-white transition-colors duration-300 dark:bg-slate-950",children:[e.jsx(PB,{toasts:A,onDismiss:_=>b(te=>te.filter(Re=>Re.id!==_))}),Ee?e.jsx("div",{className:"sticky top-0 z-30 border-b border-amber-200 bg-amber-50 px-4 py-2 text-xs text-amber-900",children:e.jsxs("div",{className:"mx-auto flex max-w-[95%] items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"})," Support role active. Sessions are visible and auditable. No silent actions."]}),e.jsx(Ja,{label:"Support mode",tone:"warn"})]})}):null,p==="Suspended"?e.jsx("div",{className:"border-b border-rose-200 bg-rose-50 px-4 py-2 text-xs text-rose-900",children:e.jsxs("div",{className:"mx-auto flex max-w-[95%] items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4"})," Services are currently suspended due to payment non-compliance."]}),e.jsxs(Ar,{variant:"outline",className:"px-3 py-2 text-xs",onClick:()=>l(`${Mt.CONSOLE.ROOT}/collections`),children:[e.jsx(Ei,{className:"h-4 w-4"})," Open collections"]})]})}):null,e.jsx("div",{className:"flex h-screen",children:e.jsxs("div",{className:"flex flex-1 overflow-hidden bg-white transition-colors dark:bg-slate-950",children:[e.jsx("div",{className:is("hidden h-screen sticky top-0 border-r border-slate-200 bg-slate-50 transition-colors lg:block dark:border-slate-800 dark:bg-slate-900",i?"w-[56px]":"w-[200px]"),children:e.jsx(Uk,{nav:ee,active:x,onSelect:_=>l(`${Mt.CONSOLE.ROOT}/${_}`),collapsed:i,theme:S,onToggleTheme:()=>z(_=>_==="light"?"dark":"light")})}),e.jsx(qe,{children:d?e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/30 lg:hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(ke.div,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:-20,opacity:0},transition:{duration:.18},className:"h-full w-[86vw] max-w-[360px] bg-slate-50",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"grid h-10 w-10 place-items-center rounded-2xl text-white",style:{background:Do.green},children:e.jsx(lt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"CorporatePay"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Navigation"})]})]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:()=>u(!1),"aria-label":"Close menu",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx(Uk,{nav:ee,active:x,onSelect:_=>{l(`${Mt.CONSOLE.ROOT}/${_}`),u(!1)},collapsed:!1,theme:S,onToggleTheme:()=>z(_=>_==="light"?"dark":"light")})]})}):null}),e.jsxs("div",{className:"flex h-full min-w-0 flex-1 flex-col",children:[e.jsxs("div",{className:"border-b border-emerald-700/30 transition-colors",style:{background:"linear-gradient(90deg, #03CD8C 0%, #F77F00 100%)"},children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 py-3 md:px-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded-2xl border border-white/30 bg-white/20 p-2 text-white shadow-sm backdrop-blur hover:bg-white/30 lg:hidden",onClick:()=>u(!0),"aria-label":"Open menu",children:e.jsx(wb,{className:"h-5 w-5"})}),e.jsxs("button",{className:"flex items-center gap-2 lg:hidden",onClick:()=>l(`${Mt.CONSOLE.ROOT}/dashboard`),"aria-label":"Go to Dashboard",children:[e.jsx("img",{src:S0,alt:"CorporatePay",className:"h-8 w-8 rounded-lg object-contain bg-white/10 p-0.5"}),e.jsx("span",{className:"hidden text-sm font-bold text-white sm:block text-shadow-sm",children:"CorporatePay"})]}),e.jsx("button",{className:"hidden rounded-2xl border border-white/30 bg-white/20 p-2 text-white shadow-sm backdrop-blur hover:bg-white/30 lg:inline-flex",onClick:()=>o(_=>!_),"aria-label":i?"Expand sidebar":"Collapse sidebar",children:i?e.jsx(ue,{className:"h-5 w-5"}):e.jsx(RL,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative hidden md:flex",children:[e.jsxs("button",{className:"flex items-center gap-2 rounded-2xl border border-white/30 bg-white/20 px-3 py-2 text-sm font-semibold text-white shadow-sm backdrop-blur hover:bg-white/30",onClick:()=>{q(!re),K(!1),be(!1),xe(!1),he(!1)},children:[e.jsx("span",{children:"Account"}),e.jsx(Ja,{label:p,tone:Ce}),e.jsx(Dl,{className:"h-3 w-3 opacity-70"})]}),e.jsx(qe,{children:re&&e.jsxs(ke.div,{initial:{opacity:0,y:8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.95},className:"absolute left-0 top-full z-50 mt-2 w-48 rounded-2xl border border-slate-200 bg-white p-2 shadow-xl",children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-slate-500",children:"Account status"}),e.jsxs("button",{className:"flex w-full items-center justify-between rounded-xl px-2 py-2 text-sm font-medium hover:bg-slate-50",onClick:()=>{h("Active"),q(!1)},children:[e.jsx("span",{className:"text-emerald-700",children:"Active"}),p==="Active"&&e.jsx(He,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs("button",{className:"flex w-full items-center justify-between rounded-xl px-2 py-2 text-sm font-medium hover:bg-slate-50",onClick:()=>{h("Past due"),q(!1)},children:[e.jsx("span",{className:"text-amber-700",children:"Past due"}),p==="Past due"&&e.jsx(He,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs("button",{className:"flex w-full items-center justify-between rounded-xl px-2 py-2 text-sm font-medium hover:bg-slate-50",onClick:()=>{h("Suspended"),q(!1)},children:[e.jsx("span",{className:"text-rose-700",children:"Suspended"}),p==="Suspended"&&e.jsx(He,{className:"h-4 w-4 text-emerald-600"})]})]})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex w-[min(320px,35vw)] items-center gap-2 rounded-2xl border border-white/30 bg-white/95 px-3 py-2 shadow-sm focus-within:ring-4 focus-within:ring-white/30",children:[e.jsx(js,{className:"h-4 w-4 text-slate-500"}),e.jsx("input",{value:$,onChange:_=>D(_.target.value),onFocus:()=>M(!0),placeholder:"Search users, invoices, approvals, vendors, RFQs...",className:"w-full bg-transparent text-sm font-semibold text-slate-900 outline-none placeholder:text-slate-400"})]}),e.jsx(qe,{children:L?e.jsxs(ke.div,{initial:{opacity:0,y:8,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:8,scale:.98},transition:{duration:.16},className:"absolute z-30 mt-2 w-full overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-[0_24px_70px_rgba(2,8,23,0.18)]",children:[e.jsx("div",{className:"px-4 py-3 text-xs font-semibold text-slate-600",children:"Suggestions"}),e.jsx("div",{className:"max-h-[260px] overflow-auto pb-2",children:Ue.map(_=>e.jsxs("button",{className:"flex w-full items-center justify-between gap-3 px-4 py-2 text-left hover:bg-slate-50",onClick:()=>{l(`${Mt.CONSOLE.ROOT}/${_.id}`),M(!1)},children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:_.k}),e.jsx("div",{className:"truncate text-xs text-slate-500",children:"Jump to page"})]}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-600",children:"Open"})]},_.k))}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Tip: search is role-aware and should return only what you can access."})]}):null})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{ref:Y,className:"hidden items-center gap-2 rounded-2xl border border-white/30 bg-white/20 px-3 py-2 text-sm font-semibold text-white shadow-sm backdrop-blur hover:bg-white/30 md:flex",onClick:()=>{K(_=>!_),be(!1),he(!1),xe(!1)},title:"Switch organization",children:[e.jsx(Ia,{className:"h-4 w-4"}),e.jsx("span",{className:"max-w-[200px] truncate",children:f}),e.jsx(Dl,{className:"h-4 w-4 opacity-70"})]}),e.jsxs("button",{ref:P,className:"hidden items-center gap-2 rounded-2xl border border-white/30 bg-white/20 px-3 py-2 text-sm font-semibold text-white shadow-sm backdrop-blur hover:bg-white/30 md:flex",onClick:()=>{be(_=>!_),K(!1),he(!1),xe(!1)},title:"Switch role",children:[e.jsx(et,{className:"h-4 w-4"}),e.jsx("span",{className:"max-w-[170px] truncate",children:j}),e.jsx(Dl,{className:"h-4 w-4 opacity-70"})]}),e.jsx("button",{ref:F,className:"rounded-2xl border border-white/30 bg-white p-2 text-emerald-600 shadow-lg hover:bg-white/95",onClick:()=>{xe(_=>!_),he(!1),be(!1),K(!1)},"aria-label":"Quick create",disabled:p==="Suspended",title:p==="Suspended"?"Disabled while suspended":"Quick create",children:e.jsx(ft,{className:"h-5 w-5"})}),e.jsxs("button",{ref:k,className:"relative rounded-2xl border border-white/30 bg-white/20 p-2 text-white shadow-sm backdrop-blur hover:bg-white/30",onClick:()=>{he(_=>!_),xe(!1),be(!1),K(!1)},"aria-label":"Notifications",children:[e.jsx(Ei,{className:"h-5 w-5"}),e.jsx("span",{className:"absolute -right-1 -top-1 grid h-5 w-5 place-items-center rounded-full text-xs font-semibold text-white",style:{background:Do.orange},children:Oe.length})]}),e.jsx("button",{className:"hidden rounded-2xl border border-white/30 bg-white/20 p-2 text-white shadow-sm backdrop-blur hover:bg-white/30 md:inline-flex","aria-label":"Settings",onClick:()=>l(`${Mt.CONSOLE.ROOT}/settings_hub`),children:e.jsx(kn,{className:"h-5 w-5"})}),e.jsx("button",{className:"hidden rounded-2xl border border-white/30 bg-white/20 p-2 text-white shadow-sm backdrop-blur hover:bg-white/30 md:inline-flex","aria-label":"Sign out",onClick:()=>{r(!1),C({title:"Signed out",message:"",kind:"info"})},children:e.jsx(Nr,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 px-4 pb-3 md:hidden",children:[e.jsx(Ja,{label:`Account: ${p}`,tone:Ce}),e.jsxs("div",{className:"text-xs font-semibold text-white",children:["Role: ",j]})]})]}),e.jsxs(_x,{open:W,onClose:()=>he(!1),anchorRef:k,width:420,children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-4 py-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Notifications"}),e.jsx("button",{className:"rounded-2xl px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-100",onClick:()=>{he(!1),l(`${Mt.CONSOLE.ROOT}/notifications_activity`)},children:"View all"})]}),e.jsx("div",{className:"max-h-[420px] overflow-auto p-2",children:Oe.map(_=>e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate text-sm font-semibold text-slate-900",children:_.title}),e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:_.message}),e.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[e.jsx(Ja,{label:_.when,tone:"neutral"}),_.channel?e.jsx(CB,{channel:_.channel}):null,_.tone==="success"?e.jsx(Ja,{label:"OK",tone:"good"}):_.tone==="warning"?e.jsx(Ja,{label:"Attention",tone:"warn"}):_.tone==="danger"?e.jsx(Ja,{label:"Action",tone:"bad"}):e.jsx(Ja,{label:"Info",tone:"info"})]})]}),e.jsx("button",{className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-xs font-semibold text-slate-700 hover:bg-slate-50",onClick:()=>{he(!1),l(`${Mt.CONSOLE.ROOT}/notifications_activity`)},children:"Open"})]})},_.id))}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Reminders support Email, WhatsApp, WeChat, and SMS. Delivery logs are saved for audit."})]}),e.jsxs(_x,{open:pe,onClose:()=>be(!1),anchorRef:P,width:320,children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Switch role"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Role-aware views change navigation and permissions."})]}),e.jsx("div",{className:"p-2",children:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"].map(_=>e.jsxs("button",{className:is("flex w-full items-center justify-between rounded-2xl px-3 py-2 text-left text-sm hover:bg-slate-50",_===j&&"bg-emerald-50"),onClick:()=>{Be(_),be(!1)},children:[e.jsx("span",{className:is("font-semibold",_===j?"text-emerald-800":"text-slate-800"),children:_}),_===j?e.jsx(et,{className:"h-4 w-4 text-emerald-700"}):null]},_))}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"Support role is audited and can be disabled by organization policy."})]}),e.jsxs(_x,{open:fe,onClose:()=>K(!1),anchorRef:Y,width:340,children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Organizations"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Switch admin view across organizations you manage."})]}),e.jsx("div",{className:"p-2",children:["Acme Group Ltd","EVzone Demo Org","Kampala Holdings"].map(_=>e.jsxs("button",{className:is("flex w-full items-center justify-between rounded-2xl px-3 py-2 text-left text-sm hover:bg-slate-50",_===f&&"bg-emerald-50"),onClick:()=>{$e(_),K(!1)},children:[e.jsx("span",{className:is("font-semibold",_===f?"text-emerald-800":"text-slate-800"),children:_}),_===f?e.jsx(et,{className:"h-4 w-4 text-emerald-700"}):null]},_))})]}),e.jsxs(_x,{open:V,onClose:()=>xe(!1),anchorRef:F,width:360,children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-3",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Quick create"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Fast actions that open the correct workflows."})]}),e.jsx("div",{className:"p-2",children:[{label:"Invite user",icon:e.jsx(Vs,{className:"h-4 w-4"}),id:"users"},{label:"Create policy",icon:e.jsx(Tt,{className:"h-4 w-4"}),id:"policies"},{label:"Create RFQ",icon:e.jsx(jt,{className:"h-4 w-4"}),id:"rfq"},{label:"Issue budget",icon:e.jsx(eh,{className:"h-4 w-4"}),id:"budgets"},{label:"Create webhook",icon:e.jsx(nn,{className:"h-4 w-4"}),id:"integrations"},{label:"Open support case",icon:e.jsx(ir,{className:"h-4 w-4"}),id:"support_tools"}].map(_=>e.jsxs("button",{className:"flex w-full items-center justify-between rounded-2xl px-3 py-2 text-left text-sm hover:bg-slate-50",onClick:()=>{l(`${Mt.CONSOLE.ROOT}/${_.id}`),xe(!1)},children:[e.jsxs("span",{className:"flex items-center gap-2 font-semibold text-slate-800",children:[e.jsx("span",{className:"text-slate-600",children:_.icon}),_.label]}),e.jsx("span",{className:"rounded-full bg-slate-100 px-2 py-1 text-xs font-semibold text-slate-600",children:"Open"})]},_.label))}),e.jsx("div",{className:"border-t border-slate-200 px-4 py-3 text-xs text-slate-500",children:"All actions are permission checked and logged for audit."})]}),e.jsx("div",{className:"min-h-0 flex-1 overflow-auto bg-slate-50",children:e.jsxs("div",{className:"px-4 py-5 md:px-5",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-start lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Current view"}),e.jsx("h1",{className:"mt-1 text-2xl font-semibold tracking-tight text-slate-900",children:Ne.title}),e.jsx("p",{className:"mt-2 max-w-2xl text-sm text-slate-600",children:Ne.subtitle})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Ja,{label:Ne.tier,tone:Ne.tier==="Premium"?"info":(Ne.tier==="Phase 2","neutral")}),Ne.status?e.jsx(Ja,{label:Ne.status,tone:Ne.status==="Ready"?"good":"warn"}):null,Ee?e.jsx(Ja,{label:"Support role",tone:"warn"}):e.jsx(Ja,{label:"Org role",tone:"neutral"}),e.jsxs(Ar,{variant:"outline",onClick:()=>l(`${Mt.CONSOLE.ROOT}/settings_hub`),children:[e.jsx(kn,{className:"h-4 w-4"})," Settings"]})]})]})}),De()]})}),e.jsx("div",{className:"border-t border-slate-200 bg-white lg:hidden",children:e.jsxs("div",{className:"grid grid-cols-5 gap-2 px-3 py-2",children:[e.jsx(tu,{active:x==="dashboard",label:"Home",icon:e.jsx(yb,{className:"h-5 w-5"}),onClick:()=>l(`${Mt.CONSOLE.ROOT}/dashboard`)}),e.jsx(tu,{active:x==="approvals_inbox",label:"Approvals",icon:e.jsx(bb,{className:"h-5 w-5"}),badge:`${Ae.approvals}`,onClick:()=>l(`${Mt.CONSOLE.ROOT}/approvals_inbox`)}),e.jsx(tu,{active:x==="budgets",label:"Spend",icon:e.jsx(eh,{className:"h-5 w-5"}),onClick:()=>l(`${Mt.CONSOLE.ROOT}/budgets`)}),e.jsx(tu,{active:x==="wallet_billing",label:"Wallet",icon:e.jsx(al,{className:"h-5 w-5"}),onClick:()=>l(`${Mt.CONSOLE.ROOT}/wallet_billing`)}),e.jsx(tu,{active:!1,label:"More",icon:e.jsx(wb,{className:"h-5 w-5"}),onClick:()=>u(!0)})]})})]})]})}),e.jsxs(EB,{open:G,title:"Request access",subtitle:"This creates a request for Org Admin to grant permissions.",onClose:()=>ve(!1),footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-between",children:[e.jsx(Ar,{variant:"outline",onClick:()=>ve(!1),children:"Cancel"}),e.jsxs(Ar,{variant:"primary",onClick:()=>{if(Te.trim().length<8){C({title:"Reason required",message:"Explain why you need access.",kind:"warn"});return}C({title:"Requested",message:"Access request created.",kind:"success"}),ve(!1)},children:[e.jsx(ir,{className:"h-4 w-4"})," Submit"]})]}),children:[e.jsx("textarea",{value:Te,onChange:_=>ye(_.target.value),placeholder:"Explain why you need access and for how long",rows:4,className:"w-full rounded-2xl border border-slate-200 bg-white p-3 text-sm font-semibold text-slate-900 shadow-sm outline-none focus:ring-4 focus:ring-emerald-100"}),e.jsx("div",{className:"mt-2 text-xs text-slate-600",children:"Requests should be auditable and time-bounded in production."})]}),e.jsx(RB,{onAway:()=>{M(!1)}})]}):e.jsx(TB,{onLogin:(_,te)=>{I(_),y(te),r(!0),l(`${Mt.CONSOLE.ROOT}/dashboard`),C({title:"Signed in",message:`${_} - ${te}`,kind:"success"})},orgs:["Acme Group Ltd","EVzone Demo Org","Kampala Holdings"],roles:["Org Owner","Org Admin","Manager","Accountant","Approver","Travel Coordinator","Employee","EVzone Support"]})}function RB({onAway:t}){return c.useEffect(()=>{const s=a=>{const l=a.target;l&&(l.closest("[role='menu']")||l.closest("input")||t())};return window.addEventListener("mousedown",s),()=>window.removeEventListener("mousedown",s)},[t]),null}function tu({label:t,icon:s,badge:a,active:l,onClick:n}){return e.jsxs("button",{onClick:n,className:is("relative flex flex-col items-center justify-center gap-1 rounded-2xl px-2 py-2 text-xs font-semibold",l?"text-white":"text-slate-700 hover:bg-slate-100"),style:l?{background:Do.green}:void 0,children:[e.jsx("div",{className:is("relative",l?"text-white":"text-slate-700"),children:s}),e.jsx("div",{className:"leading-none",children:t}),a?e.jsx("span",{className:"absolute right-2 top-1 rounded-full bg-rose-500 px-1.5 py-0.5 text-[10px] font-semibold text-white",children:a}):null]})}function DB(t){return Object.prototype.hasOwnProperty.call(M0,t)}function OB(){const{id:t}=na(),s=t||"";if(!s||!DB(s))return e.jsx("div",{className:"min-h-screen bg-slate-50 px-4 py-10",children:e.jsxs("div",{className:"mx-auto max-w-3xl rounded-3xl border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Page not found"}),e.jsxs("div",{className:"mt-2 text-sm text-slate-600",children:["Unknown page id: ",e.jsx("span",{className:"font-mono",children:s||"(missing)"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(Xm,{to:"/",className:"rounded-2xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",children:"Go to landing"}),e.jsx(Xm,{to:"/console",className:"rounded-2xl bg-emerald-600 px-4 py-2 text-sm font-semibold text-white hover:bg-emerald-700",children:"Open console"})]}),e.jsxs("div",{className:"mt-6 text-xs text-slate-500",children:["Tip: valid ids include ",e.jsx("span",{className:"font-mono",children:"dashboard"}),", ",e.jsx("span",{className:"font-mono",children:"notifications_activity"}),","," ",e.jsx("span",{className:"font-mono",children:"rfq"}),", etc."]})]})});const a=M0[s];return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx("div",{className:"border-b border-slate-200 bg-white",children:e.jsxs("div",{className:"mx-auto flex max-w-[1200px] items-center justify-between px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500",children:"Standalone preview"}),e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:s})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Xm,{to:"/console",className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",children:"Console"}),e.jsx(Xm,{to:"/",className:"rounded-2xl border border-slate-200 bg-white px-3 py-2 text-sm font-semibold text-slate-800 hover:bg-slate-50",children:"Landing"})]})]})}),e.jsx("div",{className:"mx-auto max-w-[1200px] px-4 py-6",children:e.jsx(a,{})})]})}function xt({children:t}){const{isAuthenticated:s}=dA(),a=_i();return s?e.jsx(e.Fragment,{children:t}):e.jsx(bC,{to:Mt.AUTH.LOGIN,state:{from:a},replace:!0})}function Vx(...t){return t.filter(Boolean).join(" ")}function $B(){const t=ot(),[s,a]=c.useState(""),[l,n]=c.useState("w_1"),i=[{id:"w_1",name:"Acme Group Ltd - UGX",balance:"UGX 6,800,000",currency:"UGX",type:"Main",status:"Active"},{id:"w_2",name:"Acme Group Ltd - USD",balance:"USD 12,450.00",currency:"USD",type:"USD Ops",status:"Active"},{id:"w_3",name:"Acme Kenya Ops",balance:"KES 450,000",currency:"KES",type:"Subsidiary",status:"Active"}].filter(o=>o.name.toLowerCase().includes(s.toLowerCase()));return e.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-100 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Switch Wallet"}),e.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Select an active wallet context for your session."})]}),e.jsx("div",{className:"h-10 w-10 bg-slate-100 rounded-full flex items-center justify-center text-slate-500",children:e.jsx(al,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"p-4 bg-slate-50 border-b border-slate-100",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search wallets...",className:"w-full pl-10 pr-4 py-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-slate-200 text-sm",value:s,onChange:o=>a(o.target.value)})]})}),e.jsxs("div",{className:"max-h-[400px] overflow-y-auto p-2",children:[i.map(o=>e.jsxs("button",{onClick:()=>n(o.id),className:Vx("w-full text-left p-4 rounded-xl flex items-center justify-between group transition-all",l===o.id?"bg-slate-900 text-white shadow-md":"hover:bg-slate-50 text-slate-600"),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:Vx("h-10 w-10 rounded-full flex items-center justify-center font-bold text-xs",l===o.id?"bg-white/10 text-white":"bg-slate-100 text-slate-500 group-hover:bg-white group-hover:shadow-sm"),children:o.currency}),e.jsxs("div",{children:[e.jsx("div",{className:Vx("font-semibold",l===o.id?"text-white":"text-slate-900"),children:o.name}),e.jsxs("div",{className:Vx("text-xs mt-0.5",l===o.id?"text-slate-300":"text-slate-500"),children:[o.type,"  ",o.balance]})]})]}),l===o.id&&e.jsx("div",{className:"h-6 w-6 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(He,{className:"h-3 w-3 text-white"})})]},o.id)),e.jsxs("button",{className:"w-full mt-2 p-4 rounded-xl border-2 border-dashed border-slate-200 flex items-center justify-center gap-2 text-slate-500 hover:border-slate-300 hover:text-slate-700 transition-colors",children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{className:"font-semibold text-sm",children:"Add new wallet"})]})]}),e.jsxs("div",{className:"p-6 bg-white border-t border-slate-100 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t(-1),className:"text-slate-500 hover:text-slate-700 font-semibold text-sm px-4 py-2",children:"Cancel"}),e.jsxs("button",{onClick:()=>t("/console/dashboard"),className:"bg-slate-900 hover:bg-slate-800 text-white px-6 py-2.5 rounded-xl font-semibold text-sm flex items-center gap-2 transition-colors shadow-lg shadow-slate-900/10",children:["Switch Wallet ",e.jsx(Iy,{className:"h-4 w-4"})]})]})]})})}function zk(...t){return t.filter(Boolean).join(" ")}function IB(){var d;const t=ot(),[s,a]=c.useState("Finance"),[l,n]=c.useState(""),[r,i]=c.useState(!1),o=[{id:"Finance",label:"Finance Controller",desc:"Full access to billing, budgets, invoices, and reports.",icon:e.jsx(or,{className:"h-5 w-5"})},{id:"Admin",label:"Organization Admin",desc:"Manage users, settings, and integrations.",icon:e.jsx(Tt,{className:"h-5 w-5"})},{id:"Approver",label:"Approver",desc:"Approve or reject requests within budget limits.",icon:e.jsx(He,{className:"h-5 w-5"})}];return r?e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white max-w-md w-full rounded-3xl p-8 border border-slate-200 text-center shadow-lg",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(WL,{className:"h-8 w-8"})}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Request Sent!"}),e.jsxs("p",{className:"text-slate-600 mb-8",children:["Your request for ",e.jsx("strong",{children:(d=o.find(u=>u.id===s))==null?void 0:d.label})," access has been sent to the organization administrators. You will be notified via email once reviewed."]}),e.jsx("button",{onClick:()=>t("/console/dashboard"),className:"w-full bg-slate-900 text-white rounded-xl py-3 font-semibold hover:bg-slate-800 transition-colors",children:"Back to Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-slate-50 p-6 md:p-12 flex items-center justify-center",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-100 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900",children:"Request Access Upgrade"}),e.jsx("p",{className:"text-slate-500 mt-1 text-sm",children:"Request additional permissions for your account."})]}),e.jsx("div",{className:"h-10 w-10 bg-amber-50 rounded-full flex items-center justify-center text-amber-600",children:e.jsx(as,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"p-8",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4",children:"Select Role"}),e.jsx("div",{className:"grid grid-cols-1 gap-3 mb-8",children:o.map(u=>e.jsxs("button",{onClick:()=>a(u.id),className:zk("flex items-start gap-4 p-4 rounded-2xl border text-left transition-all",s===u.id?"border-slate-900 bg-slate-50 ring-1 ring-slate-900":"border-slate-200 hover:border-slate-300 bg-white"),children:[e.jsx("div",{className:zk("p-2 rounded-lg",s===u.id?"bg-white shadow-sm text-slate-900":"bg-slate-100 text-slate-500"),children:u.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:u.label}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:u.desc})]}),s===u.id&&e.jsx("div",{className:"ml-auto text-slate-900",children:e.jsx(He,{className:"h-5 w-5"})})]},u.id))}),e.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4",children:"Justification"}),e.jsxs("div",{className:"relative",children:[e.jsx(Mm,{className:"absolute top-3 left-3 h-5 w-5 text-slate-400"}),e.jsx("textarea",{className:"w-full pl-10 p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-2 focus:ring-slate-900 min-h-[120px] text-sm",placeholder:"Why do you need this access? Please explain briefly...",value:l,onChange:u=>n(u.target.value)})]})]}),e.jsxs("div",{className:"p-6 bg-slate-50 border-t border-slate-100 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>t(-1),className:"text-slate-500 hover:text-slate-700 font-semibold text-sm px-4 py-2",children:"Cancel"}),e.jsxs("button",{onClick:()=>i(!0),disabled:!l.trim(),className:"bg-slate-900 hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed text-white px-6 py-2.5 rounded-xl font-semibold text-sm flex items-center gap-2 transition-colors shadow-lg shadow-slate-900/10",children:["Submit Request ",e.jsx(Iy,{className:"h-4 w-4"})]})]})]})})}const Pb={green:"#03CD8C",orange:"#F77F00"};function Ky(...t){return t.filter(Boolean).join(" ")}function LB({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Ky("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Ug({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},o=t==="primary"?{background:Pb.green}:t==="accent"?{background:Pb.orange}:void 0;return e.jsx("button",{type:"button",disabled:n,onClick:l,style:o,className:Ky(r,i[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function FB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(600px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function _B({actions:t}){const[s,a]=c.useState(!1),l=c.useRef(null);return c.useEffect(()=>{const n=r=>{l.current&&!l.current.contains(r.target)&&a(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]),e.jsxs("div",{className:"relative",ref:l,children:[e.jsx("button",{onClick:()=>a(!s),className:"rounded-full p-2 text-slate-500 hover:bg-slate-100 hover:text-slate-700",children:e.jsx(fa,{className:"h-5 w-5"})}),s&&e.jsx("div",{className:"absolute right-0 top-full mt-1 z-50 w-48 rounded-xl border border-slate-200 bg-white p-1 shadow-xl",children:t.map((n,r)=>e.jsxs("button",{onClick:()=>{n.onClick(),a(!1)},className:Ky("flex w-full items-center gap-2 rounded-lg px-3 py-2 text-sm font-medium transition-colors",n.variant==="danger"?"text-rose-600 hover:bg-rose-50":"text-slate-700 hover:bg-slate-50"),children:[n.icon,n.label]},r))})]})}function VB(){const t=ot(),[s,a]=c.useState([{id:1,name:"Kampala Holdings Ltd",country:"Uganda",city:"Kampala",type:"Main",status:"Active",currency:"UGX"},{id:2,name:"KHL Kenya Ops",country:"Kenya",city:"Nairobi",type:"Subsidiary",status:"Active",currency:"KES"}]),[l,n]=c.useState(!1),[r,i]=c.useState(null),[o,d]=c.useState({name:"",country:"Uganda",city:"",currency:"UGX"}),u=()=>{a(r?x=>x.map(p=>p.id===r?{...p,...o}:p):[...s,{id:Date.now(),...o,type:"Subsidiary",status:"Active"}]),n(!1),i(null),d({name:"",country:"Uganda",city:"",currency:"UGX"})};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Pb.green},children:e.jsx(nn,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-slate-900",children:"Entity Management"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Manage legal entities and operating countries"})]})]}),e.jsxs(Ug,{variant:"primary",onClick:()=>{i(null),d({name:"",country:"Uganda",city:"",currency:"UGX"}),n(!0)},children:[e.jsx(ft,{className:"h-4 w-4 mr-1"})," Add Entity"]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(x=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 hover:shadow-md transition-shadow group",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-xl bg-slate-50 border border-slate-100 flex items-center justify-center text-slate-400",children:e.jsx(Ia,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:x.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[x.type,"  ",x.currency]})]})]}),e.jsx(_B,{actions:[{label:"Edit",icon:e.jsx(kn,{className:"h-3.5 w-3.5"}),onClick:()=>{d({name:x.name,country:x.country,city:x.city,currency:x.currency}),i(x.id),n(!0)}},{label:x.status==="Active"?"Deactivate":"Activate",icon:e.jsx(bs,{className:"h-3.5 w-3.5"}),variant:"danger",onClick:()=>{a(p=>p.map(h=>h.id===x.id?{...h,status:h.status==="Active"?"Inactive":"Active"}:h))}}]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-50 flex items-center justify-between text-xs text-slate-600",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nn,{className:"h-3.5 w-3.5 text-slate-400"})," ",x.country]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Po,{className:"h-3.5 w-3.5 text-slate-400"})," ",x.city]})]}),e.jsx(LB,{label:x.status,tone:"good"})]})]},x.id))})})]})}),e.jsx(FB,{open:l,title:r?"Edit Entity":"Add New Entity",subtitle:r?"Update entity details.":"Register a new operating entity.",onClose:()=>n(!1),footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Ug,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),e.jsx(Ug,{variant:"primary",onClick:u,children:r?"Update Entity":"Save Entity"})]}),children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1.5 block",children:"Legal Name"}),e.jsx("input",{value:o.name,onChange:x=>d({...o,name:x.target.value}),className:"w-full border border-slate-200 rounded-2xl px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"e.g. Acme Tanzania Ltd"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1.5 block",children:"Country"}),e.jsxs("select",{value:o.country,onChange:x=>d({...o,country:x.target.value}),className:"w-full border border-slate-200 rounded-2xl px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100 bg-white",children:[e.jsx("option",{children:"Uganda"}),e.jsx("option",{children:"Kenya"}),e.jsx("option",{children:"Tanzania"}),e.jsx("option",{children:"Rwanda"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1.5 block",children:"City"}),e.jsx("input",{value:o.city,onChange:x=>d({...o,city:x.target.value}),className:"w-full border border-slate-200 rounded-2xl px-3 py-2.5 text-sm font-semibold outline-none focus:ring-4 focus:ring-emerald-100",placeholder:"e.g. Dar es Salaam"})]})]})})]})}const Mb={green:"#03CD8C",orange:"#F77F00"};function Xy(...t){return t.filter(Boolean).join(" ")}function Gk({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:Xy("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function Wk({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},o=t==="primary"?{background:Mb.green}:t==="accent"?{background:Mb.orange}:void 0;return e.jsx("button",{type:"button",disabled:n,onClick:l,style:o,className:Xy(r,i[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function BB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(600px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function UB({onDrop:t}){const s=ds.useRef(null),a=l=>{l.target.files&&l.target.files[0]&&t(l.target.files[0])};return e.jsxs("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded-3xl border border-dashed border-slate-200 bg-slate-50 py-10 text-center transition hover:bg-slate-100",onClick:()=>{var l;return(l=s.current)==null?void 0:l.click()},children:[e.jsx("input",{type:"file",ref:s,className:"hidden",onChange:a}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl bg-white text-emerald-600 shadow-sm",children:e.jsx(Mo,{className:"h-6 w-6"})}),e.jsx("div",{className:"mt-4 text-sm font-semibold text-slate-900",children:"Click to upload or drag and drop"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"PDF, PNG, JPG up to 10MB"})]})}function qB(){const t=ot(),[s,a]=c.useState([{id:1,name:"Certificate of Incorporation",status:"Verified",date:"2024-01-15",required:!0,notes:"Verified against registry."},{id:2,name:"Tax Registration Certificate",status:"Verified",date:"2024-01-15",required:!0,notes:"TIN verified."},{id:3,name:"Directors ID Proof (2)",status:"Pending",date:"2024-03-10",required:!0,notes:"Under manual review."},{id:4,name:"Utility Bill (Proof of Address)",status:"Missing",date:"-",required:!0,notes:"Please upload."}]),[l,n]=c.useState(!1),[r,i]=c.useState(null),o=d=>d==="Verified"?"good":d==="Pending"?"info":"warn";return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsx("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:Mb.green},children:e.jsx(Ra,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-slate-900",children:"KYB & Compliance"}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Verification Status:"}),e.jsx(Gk,{label:"In Review",tone:"info"})]})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[s.some(d=>d.status==="Missing")&&e.jsxs("div",{className:"rounded-3xl border border-amber-200 bg-amber-50 p-5 flex items-start gap-4",children:[e.jsx("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-2xl bg-white text-amber-700",children:e.jsx(at,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Action Required"}),e.jsx("p",{className:"text-xs text-amber-900 mt-1",children:"Please upload the missing documents to complete your KYB verification. Delays may impact your transaction limits."})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white overflow-hidden",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[e.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:"Required Documents"}),e.jsxs("div",{className:"text-xs font-semibold text-slate-500",children:[s.filter(d=>d.status!=="Missing").length," of ",s.length," Uploaded"]})]}),e.jsx("div",{className:"divide-y divide-slate-100",children:s.map(d=>e.jsxs("div",{className:"p-4 flex flex-col md:flex-row md:items-center justify-between gap-4 hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:Xy("h-10 w-10 rounded-xl flex items-center justify-center border shrink-0",d.status==="Verified"?"bg-emerald-50 border-emerald-200 text-emerald-600":d.status==="Pending"?"bg-blue-50 border-blue-200 text-blue-600":"bg-slate-50 border-slate-200 text-slate-400"),children:e.jsx(jt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-slate-900 text-sm flex items-center gap-2",children:[d.name,d.required&&e.jsx("span",{className:"text-[10px] bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded uppercase font-bold tracking-wider",children:"Required"})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-0.5",children:[d.notes,"  Last updated: ",d.date]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Gk,{label:d.status,tone:o(d.status)}),d.status==="Missing"&&e.jsxs(Wk,{variant:"primary",onClick:()=>{i(d.id),n(!0)},className:"ml-2 py-1.5 px-3 text-xs",children:[e.jsx(Mo,{className:"h-3.5 w-3.5"})," Upload"]})]})]},d.id))})]})]})})]})}),e.jsx(BB,{open:l,title:"Upload Document",subtitle:"Securely upload verification documents.",onClose:()=>n(!1),footer:e.jsx("div",{className:"flex justify-end gap-3",children:e.jsx(Wk,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"})}),children:e.jsx(UB,{onDrop:d=>{a(u=>u.map(x=>x.id===r?{...x,status:"Pending",date:new Date().toISOString().split("T")[0],notes:`Uploaded ${d.name}`}:x)),n(!1)}})})]})}const zB={green:"#03CD8C"};function vd(...t){return t.filter(Boolean).join(" ")}function GB({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:vd("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function WB(){const t=ot(),[s,a]=c.useState("Modules"),[l,n]=c.useState([{id:"rides",name:"Rides & Logistics",desc:"Manage employee travel and goods delivery.",icon:e.jsx(iA,{className:"h-6 w-6"}),enabled:!0},{id:"ev",name:"EVs & Charging",desc:"Fleet charging management and reporting.",icon:e.jsx(To,{className:"h-6 w-6"}),enabled:!0,beta:!0},{id:"shop",name:"E-Commerce",desc:"Corporate procurement and marketplace access.",icon:e.jsx(Uy,{className:"h-6 w-6"}),enabled:!0},{id:"workspace",name:"Virtual Workspace",desc:"Remote work tools and virtual office assets.",icon:e.jsx(ZS,{className:"h-6 w-6"}),enabled:!1}]),r=i=>{n(o=>o.map(d=>d.id===i?{...d,enabled:!d.enabled}:d))};return e.jsx("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsx("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:zB.green},children:e.jsx(jl,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-slate-900",children:"Module Enablement"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Control active services for your organization"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex gap-2 mb-6 p-1 bg-slate-100 rounded-xl w-fit",children:["Modules","Marketplaces","Integrations"].map(i=>e.jsx("button",{onClick:()=>a(i),className:vd("px-4 py-2 text-sm font-semibold rounded-lg transition-all",s===i?"bg-white text-slate-900 shadow-sm":"text-slate-500 hover:text-slate-700"),children:i},i))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(i=>e.jsxs("div",{className:vd("rounded-3xl border p-6 transition-all group relative overflow-hidden",i.enabled?"bg-white border-slate-200 shadow-sm":"bg-slate-50 border-slate-200 opacity-90"),children:[i.enabled&&e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-50 rounded-bl-[100px] -mr-8 -mt-8 opacity-50 pointer-events-none"}),e.jsxs("div",{className:"flex items-start justify-between mb-4 relative z-10",children:[e.jsx("div",{className:vd("h-12 w-12 rounded-2xl flex items-center justify-center text-white shadow-sm transition-colors",i.enabled?"bg-slate-900":"bg-slate-400"),children:i.icon}),e.jsx("button",{onClick:()=>r(i.id),className:vd("relative inline-flex h-7 w-12 items-center rounded-full transition-colors focus:outline-none",i.enabled?"bg-emerald-500":"bg-slate-300"),children:e.jsx("span",{className:vd("inline-block h-5 w-5 transform rounded-full bg-white transition-transform shadow-sm ml-1",i.enabled?"translate-x-5":"translate-x-0")})})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-base font-bold text-slate-900",children:i.name}),i.beta&&e.jsx("span",{className:"text-[10px] font-bold bg-blue-100 text-blue-700 px-1.5 py-0.5 rounded uppercase",children:"Beta"})]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1 min-h-[40px]",children:i.desc})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100 flex items-center justify-between relative z-10",children:[e.jsx(GB,{label:i.enabled?"Active":"Disabled",tone:i.enabled?"good":"neutral"}),i.enabled&&e.jsxs("button",{onClick:()=>t(`/console/settings/modules/${i.id}`),className:"text-sm font-semibold text-emerald-600 hover:text-emerald-700 flex items-center gap-1 transition-colors hover:gap-2",children:["Configure ",e.jsx(ue,{className:"h-4 w-4"})]})]})]},i.id))})]})]})})})}const vh={green:"#03CD8C",orange:"#F77F00"};function qA(...t){return t.filter(Boolean).join(" ")}function HB({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100"},o=t==="primary"?{background:vh.green}:t==="accent"?{background:vh.orange}:void 0;return e.jsx("button",{type:"button",disabled:n,onClick:l,style:o,className:qA(r,i[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function Bx({checked:t,onChange:s,label:a}){return e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:a}),e.jsx("button",{onClick:()=>s(!t),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none",style:{backgroundColor:t?vh.green:"#e2e8f0"},children:e.jsx("span",{className:qA("inline-block h-4 w-4 transform rounded-full bg-white transition-transform shadow-sm ml-1",t?"translate-x-5":"translate-x-0")})})]})}function KB(){const t=ot(),{moduleId:s}=na(),l={rides:{name:"Rides & Logistics",icon:e.jsx(iA,{className:"h-6 w-6"}),desc:"Vendor preferences, ride policies, and delivery zones."},ev:{name:"EVs & Charging",icon:e.jsx(To,{className:"h-6 w-6"}),desc:"Fleet charging limits, provider roaming, and sustainability reporting."},shop:{name:"E-Commerce",icon:e.jsx(Uy,{className:"h-6 w-6"}),desc:"Marketplace restrictions, approval workflows, and preferred categories."},workspace:{name:"Virtual Workspace",icon:e.jsx(ZS,{className:"h-6 w-6"}),desc:"Software subscription limits and asset provisioning."}}[s||""]||{name:"Module Configuration",icon:e.jsx(HL,{className:"h-6 w-6"}),desc:"General settings"},[n,r]=c.useState({autoApproval:!0,requireReceipts:!0,allowOverseas:!1,dailyLimit:"500,000",notifications:!0});return e.jsx("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:e.jsx("div",{className:"mx-auto max-w-3xl px-4 py-8 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-xl",children:[e.jsxs("div",{className:"border-b border-slate-200 px-6 py-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white shadow-md",style:{background:vh.green},children:l.icon}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-lg font-bold text-slate-900",children:[l.name," Settings"]}),e.jsx("p",{className:"text-sm text-slate-500",children:l.desc})]})]}),e.jsxs(HB,{variant:"primary",onClick:()=>t(-1),children:[e.jsx(Vr,{className:"h-4 w-4 mr-2"})," Save Changes"]})]}),e.jsxs("div",{className:"p-8 space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Tt,{className:"h-4 w-4"})," General Policies"]}),e.jsxs("div",{className:"bg-slate-50 rounded-3xl p-6 border border-slate-200 space-y-2",children:[e.jsx(Bx,{label:"Auto-approve requests under limit",checked:n.autoApproval,onChange:i=>r({...n,autoApproval:i})}),e.jsx("div",{className:"h-px bg-slate-200"}),e.jsx(Bx,{label:"Require receipts for all transactions",checked:n.requireReceipts,onChange:i=>r({...n,requireReceipts:i})}),e.jsx("div",{className:"h-px bg-slate-200"}),e.jsx(Bx,{label:"Allow international vendors",checked:n.allowOverseas,onChange:i=>r({...n,allowOverseas:i})})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(k0,{className:"h-4 w-4"})," Spending Controls"]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 p-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1.5 block",children:"Daily Transaction Limit (UGX)"}),e.jsx("input",{value:n.dailyLimit,onChange:i=>r({...n,dailyLimit:i.target.value}),className:"w-full border border-slate-200 rounded-2xl px-4 py-3 text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 mb-1.5 block",children:"Monthly Rolling Limit"}),e.jsx("div",{className:"w-full border border-slate-200 bg-slate-50 rounded-2xl px-4 py-3 text-sm font-semibold text-slate-400 cursor-not-allowed",children:"Unlimited (Global Cap Applies)"})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Ei,{className:"h-4 w-4"})," Notifications"]}),e.jsxs("div",{className:"bg-white rounded-3xl p-6 border border-slate-200 shadow-sm flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Real-time Alerts"}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Notify admins on large transactions or policy violations immediately."})]}),e.jsx(Bx,{label:"",checked:n.notifications,onChange:i=>r({...n,notifications:i})})]})]}),e.jsxs("section",{className:"opacity-70",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider mb-4 flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4"})," Group Access"]}),e.jsxs("div",{className:"border border-dashed border-slate-300 rounded-3xl p-6 text-center",children:[e.jsx("p",{className:"text-sm text-slate-500",children:"Access control settings are managed in the Roles & Permissions page."}),e.jsx("button",{className:"text-emerald-600 text-xs font-bold mt-2 hover:underline",children:"Manage Roles"})]})]})]})]})})})}const bh={green:"#03CD8C",orange:"#F77F00"};function jh(...t){return t.filter(Boolean).join(" ")}function Ux({variant:t="outline",className:s,children:a,onClick:l,disabled:n}){const r="inline-flex items-center justify-center gap-2 rounded-2xl px-4 py-2.5 text-sm font-semibold transition focus:outline-none focus:ring-4",i={primary:"text-white shadow-[0_12px_24px_rgba(3,205,140,0.22)] hover:opacity-95 focus:ring-emerald-200",accent:"text-white shadow-[0_12px_24px_rgba(247,127,0,0.22)] hover:opacity-95 focus:ring-orange-200",outline:"border border-slate-200 bg-white text-slate-800 shadow-sm hover:bg-slate-50 focus:ring-slate-200",ghost:"bg-transparent text-slate-700 hover:bg-slate-100 focus:ring-slate-200",danger:"border border-rose-200 bg-rose-50 text-rose-700 hover:bg-rose-100 focus:ring-rose-100",white:"bg-white text-slate-900 hover:bg-slate-50 shadow-lg border border-transparent"},o=t==="primary"?{background:bh.green}:t==="accent"?{background:bh.orange}:void 0;return e.jsx("button",{type:"button",disabled:n,onClick:l,style:o,className:jh(r,i[t],n&&"cursor-not-allowed opacity-60",s),children:a})}function XB({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto w-[min(600px,calc(100vw-2rem))] overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-200 px-5 py-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:s}),a?e.jsx("div",{className:"mt-1 text-sm text-slate-600",children:a}):null]}),e.jsx("button",{className:"rounded-2xl p-2 text-slate-600 hover:bg-slate-100",onClick:n,children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-5",children:l}),r?e.jsx("div",{className:"border-t border-slate-200 px-5 py-4",children:r}):null]})]}):null})}function su({label:t,status:s}){return e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-white p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:jh("grid h-6 w-6 place-items-center rounded-full",s==="Pass"?"bg-emerald-100 text-emerald-600":"bg-slate-100 text-slate-400"),children:s==="Pass"?e.jsx(He,{className:"h-3.5 w-3.5"}):e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-current"})}),e.jsx("span",{className:jh("text-sm font-medium",s==="Pass"?"text-slate-900":"text-slate-500"),children:t})]}),s==="Pass"&&e.jsx("span",{className:"text-xs font-semibold text-emerald-600",children:"Passed"}),s==="Pending"&&e.jsx("span",{className:"text-xs text-slate-400",children:"Waiting..."})]})}function YB(){const t=ot(),s=[{name:"Organization Setup",path:"/console/settings/org/setup",items:[{label:"Complete Company Profile",status:"Done"},{label:"Add at least one Invoice Group",status:"Done"},{label:"Verify Billing Contact Email",status:"Done"}]},{name:"Compliance",path:"/console/settings/org/kyb",items:[{label:"Submit KYB Documents",status:"Done"},{label:"KYB Verification Approval",status:"Done"}]},{name:"Financials",path:"/console/settings/billing",items:[{label:"Set Organization Budget Cap",status:"In Progress"},{label:"Add Funds to Wallet (Prepaid)",status:"Pending"}]},{name:"Team Access",path:"/console/settings/roles",items:[{label:"Invite Finance Administrator",status:"Pending"},{label:"Set up Employee Groups",status:"Pending"}]}],a=s.reduce((j,y)=>j+y.items.length,0),l=s.reduce((j,y)=>j+y.items.filter(f=>f.status==="Done").length,0),n=Math.round(l/a*100),[r,i]=c.useState(!1),[o,d]=c.useState(0),[u,x]=c.useState("Idle"),p=()=>{i(!0),x("Running"),d(0);let j=0;const y=setInterval(()=>{j+=Math.floor(Math.random()*15)+5,j>=100&&(j=100,clearInterval(y),x("Complete")),d(j)},400)},h=()=>{i(!1),t("/console/dashboard")};return e.jsxs("div",{className:"min-h-screen",style:{background:"radial-gradient(90% 60% at 50% 0%, rgba(3,205,140,0.18), rgba(255,255,255,0))"},children:[e.jsx("div",{className:"mx-auto max-w-[95%] px-4 py-5 md:px-6",children:e.jsxs("div",{className:"rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.10)]",children:[e.jsxs("div",{className:"border-b border-slate-200 px-4 py-4 md:px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"p-2 -ml-2 hover:bg-slate-100 rounded-full text-slate-500",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-2xl text-white",style:{background:bh.green},children:e.jsx(Ra,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-slate-900",children:"Go-Live Readiness"}),e.jsx("div",{className:"mt-1 text-xs text-slate-500",children:"Track your progress towards launching"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsxs("div",{className:"text-sm font-bold text-slate-900",children:[n,"% Ready"]}),e.jsxs("div",{className:"text-xs text-slate-500",children:[a-l," tasks remaining"]})]}),e.jsx("div",{className:"h-10 w-10 relative",children:e.jsxs("svg",{className:"h-full w-full -rotate-90",children:[e.jsx("circle",{cx:"20",cy:"20",r:"16",fill:"none",stroke:"#e2e8f0",strokeWidth:"4"}),e.jsx("circle",{cx:"20",cy:"20",r:"16",fill:"none",stroke:bh.green,strokeWidth:"4",strokeDasharray:`${n} 100`,pathLength:"100",strokeLinecap:"round"})]})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-3xl bg-slate-900 p-8 text-white shadow-xl mb-8",children:[e.jsx("div",{className:"absolute right-0 top-0 opacity-20 pointer-events-none",children:e.jsx(Eu,{className:"h-64 w-64 -mr-12 -mt-12 text-emerald-400"})}),e.jsxs("div",{className:"relative z-10 max-w-lg",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Almost there!"}),e.jsx("p",{className:"text-slate-300 mb-6",children:"Complete the remaining steps to fully activate your CorporatePay account and unlock all features including unlimited transaction volume."}),e.jsxs(Ux,{variant:"primary",onClick:p,children:[e.jsx(lt,{className:"h-4 w-4 mr-2"})," Run Final System Check"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map((j,y)=>e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white p-5 hover:shadow-sm transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-900 uppercase tracking-wider",children:j.name}),j.items.every(f=>f.status==="Done")?e.jsxs("div",{className:"flex items-center gap-1 text-xs font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded-full",children:[e.jsx(nr,{className:"h-3 w-3"})," Done"]}):e.jsxs("button",{className:"text-xs font-semibold text-emerald-600 hover:underline flex items-center gap-1",onClick:()=>t(j.path),children:["Resolve ",e.jsx(ue,{className:"h-3 w-3"})]})]}),e.jsx("div",{className:"space-y-3",children:j.items.map((f,I)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-slate-50 border border-slate-100",children:[f.status==="Done"?e.jsx(nr,{className:"h-5 w-5 text-emerald-500 fill-emerald-50 shrink-0"}):f.status==="In Progress"?e.jsx(DL,{className:"h-5 w-5 text-amber-500 shrink-0"}):e.jsx(OL,{className:"h-5 w-5 text-slate-300 shrink-0"}),e.jsx("span",{className:jh("text-xs font-medium",f.status==="Done"?"text-slate-500":"text-slate-900"),children:f.label})]},I))})]},y))})]})]})}),e.jsx(XB,{open:r,onClose:()=>i(!1),title:"Final Go-live System Check",subtitle:"Verifying all systems are operational.",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(Ux,{variant:"ghost",onClick:()=>i(!1),children:"Cancel"}),u==="Complete"?e.jsxs(Ux,{variant:"primary",onClick:h,className:"bg-emerald-600 text-white hover:bg-emerald-700 shadow-emerald-200",children:[e.jsx(Eu,{className:"h-4 w-4 mr-2"})," Launch Now"]}):e.jsx(Ux,{variant:"outline",disabled:!0,children:o<100?`Scanning... ${o}%`:"Finalizing..."})]}),children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2 flex justify-between text-sm font-semibold",children:[e.jsx("span",{children:"Overall Readiness"}),e.jsxs("span",{children:[o,"%"]})]}),e.jsx("div",{className:"h-3 w-full overflow-hidden rounded-full bg-slate-100",children:e.jsx("div",{className:"h-full rounded-full bg-emerald-500 transition-all duration-300",style:{width:`${o}%`}})}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx(su,{label:"Profile Completeness",status:o>10?"Pass":"Pending"}),e.jsx(su,{label:"Regulatory Compliance (KYB)",status:o>30?"Pass":"Pending"}),e.jsx(su,{label:"Banking & Settlement",status:o>60?"Pass":"Pending"}),e.jsx(su,{label:"Team & Access Control",status:o>80?"Pass":"Pending"}),e.jsx(su,{label:"System Integrity",status:o===100?"Pass":"Pending"})]})]})})]})}function QB(t="id"){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function mu(...t){return t.filter(Boolean).join(" ")}const JB=["Operations","Sales","Finance","Admin","Procurement"],ZB=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"],eU=["MyLiveDealz","ServiceMart","EVmart","GadgetMart","LivingMart","StyleMart","EduMart","HealthMart","PropertyMart","GeneratMart","ExpressMart","FaithMart","Other Marketplace"];function Hk({variant:t="primary",onClick:s,children:a,className:l}){return e.jsx("button",{type:"button",onClick:s,className:mu("inline-flex h-9 items-center gap-2 rounded-xl px-4 text-xs font-bold transition-all active:scale-95 disabled:pointer-events-none disabled:opacity-50",t==="primary"?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20 hover:bg-emerald-600 hover:shadow-emerald-500/30":"border border-slate-200 bg-white text-slate-700 hover:bg-slate-50 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300 dark:hover:bg-slate-800 dark:hover:text-white",l),children:a})}function tU({open:t,title:s,subtitle:a,children:l,onClose:n,footer:r}){return e.jsx(qe,{children:t?e.jsxs(e.Fragment,{children:[e.jsx(ke.div,{className:"fixed inset-0 z-40 bg-black/35",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n}),e.jsxs(ke.div,{initial:{opacity:0,y:10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.98},transition:{duration:.18},className:"fixed inset-x-0 top-[10vh] z-50 mx-auto flex w-full max-w-3xl flex-col overflow-hidden rounded-[28px] border border-slate-200 bg-white shadow-[0_30px_90px_rgba(2,8,23,0.22)] dark:border-slate-800 dark:bg-slate-900 dark:shadow-none",role:"dialog","aria-modal":"true",children:[e.jsxs("div",{className:"flex shrink-0 items-start justify-between gap-3 border-b border-slate-200 px-5 py-4 dark:border-slate-800",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:s}),a&&e.jsx("div",{className:"mt-1 text-sm text-slate-500 dark:text-slate-400",children:a})]}),e.jsx("button",{onClick:n,className:"grid h-8 w-8 place-items-center rounded-full text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5 scrollbar-thin dark:scrollbar-thumb-slate-700",children:l}),r&&e.jsx("div",{className:"shrink-0 border-t border-slate-200 bg-slate-50 px-5 py-3 dark:border-slate-800 dark:bg-slate-950/50",children:r})]})]}):null})}function sU({open:t,onClose:s,onSuccess:a}){const[l,n]=c.useState({group:"Operations",module:"All",marketplace:"All",period:"Monthly",amount:5e6,hardCap:!0}),r=()=>{pl.add({id:QB(Math.random().toString(36)),group:l.group,module:l.module,marketplace:l.marketplace,amount:Number(l.amount),period:l.period,hardCap:l.hardCap,timestamp:new Date().toISOString()}),a&&a(),s()};return e.jsx(tU,{open:t,title:"Issue budget",subtitle:"Allocate budget to a group (and optionally module/marketplace).",onClose:s,footer:e.jsxs("div",{className:"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",children:[e.jsx(Hk,{variant:"outline",onClick:s,children:"Cancel"}),e.jsxs(Hk,{variant:"primary",onClick:r,children:[e.jsx(Kd,{className:"h-4 w-4"})," Issue"]})]}),children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Group"}),e.jsx("select",{value:l.group,onChange:i=>n(o=>({...o,group:i.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:JB.map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Period"}),e.jsx("select",{value:l.period,onChange:i=>n(o=>({...o,period:i.target.value})),className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:"Weekly,Monthly,Quarterly,Annual".split(",").map(i=>e.jsx("option",{value:i,children:i},i))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Service Module (optional)"}),e.jsxs("select",{value:l.module,onChange:i=>{const o=i.target.value;n(d=>({...d,module:o,marketplace:o==="E-Commerce"?d.marketplace:"All"}))},className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none",children:[e.jsx("option",{value:"All",children:"All"}),ZB.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{className:mu("",l.module==="E-Commerce"?"":"opacity-60"),children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Marketplace (optional)"}),e.jsxs("select",{value:l.marketplace,disabled:l.module!=="E-Commerce"&&l.module!=="All",onChange:i=>n(o=>({...o,marketplace:i.target.value})),className:mu("mt-2 w-full rounded-2xl border px-3 py-2.5 text-sm font-semibold outline-none",l.module==="E-Commerce"||l.module==="All"?"border-slate-200 bg-white text-slate-900":"border-slate-200 bg-slate-50 text-slate-500"),children:[e.jsx("option",{value:"All",children:"All"}),eU.map(i=>e.jsx("option",{value:i,children:i},i))]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-slate-600",children:"Amount (UGX)"}),e.jsx("input",{type:"number",min:0,onKeyDown:i=>(i.key==="-"||i.key==="e")&&i.preventDefault(),value:l.amount,onChange:i=>{const o=Number(i.target.value||0);o>=0&&n(d=>({...d,amount:o}))},className:"mt-2 w-full rounded-2xl border border-slate-200 bg-white px-3 py-2.5 text-sm font-semibold text-slate-900 outline-none"})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Hard cap"}),e.jsx("div",{className:"mt-1 text-xs text-slate-600",children:"Block spend when budget exceeded"})]}),e.jsx("button",{type:"button",className:mu("relative h-7 w-12 rounded-full border transition",l.hardCap?"border-emerald-300 bg-emerald-200":"border-slate-200 bg-white"),onClick:()=>n(i=>({...i,hardCap:!i.hardCap})),"aria-label":"Toggle hard cap",children:e.jsx("span",{className:mu("absolute top-0.5 h-6 w-6 rounded-full bg-white shadow-sm transition",l.hardCap?"left-[22px]":"left-1")})})]})}),e.jsx("div",{className:"md:col-span-2 rounded-2xl bg-slate-50 p-3 text-xs text-slate-700",children:"Premium: high budget increases can require multi-level approvals."})]})})}function aU(...t){return t.filter(Boolean).join(" ")}function lU(t){return`UGX ${Math.round(Number(t||0)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}const nU=["Operations","Sales","Finance","Admin","Procurement"],rU=["E-Commerce","EVs & Charging","Rides & Logistics","School & E-Learning","Medical & Health Care","Travel & Tourism","Green Investments","FaithHub","Virtual Workspace","Finance & Payments","Other Service Module"];function iU(){const t=ot(),[s,a]=c.useState(()=>pl.getAll()),[l,n]=c.useState(!1),[r,i]=c.useState(!1),[o,d]=c.useState("All"),[u,x]=c.useState("All"),[p,h]=c.useState("All"),[j,y]=c.useState(""),[f,I]=c.useState("");c.useEffect(()=>{const S=()=>a(pl.getAll());return window.addEventListener("budget-storage-update",S),()=>window.removeEventListener("budget-storage-update",S)},[]);const A=c.useMemo(()=>{let S=s;u!=="All"&&(S=S.filter($=>$.group===u)),p!=="All"&&(S=S.filter($=>$.module===p));const z=new Date;return S=S.filter($=>{const D=new Date($.timestamp);if(o==="All")return!0;if(o==="Today")return D.toDateString()===z.toDateString();if(o==="Week"){const W=new Date(z);return W.setDate(z.getDate()-7),D>=W}return o==="Month"?D.getMonth()===z.getMonth()&&D.getFullYear()===z.getFullYear():o==="Year"?D.getFullYear()===z.getFullYear():o==="Custom"&&j&&f?D>=new Date(j)&&D<=new Date(f):!0}),S},[s,u,p,o,j,f]),b=()=>{confirm("Are you sure you want to delete ALL budgets?")&&pl.clearAll()},C=()=>{o!=="All"&&confirm(`Delete all budgets from filter "${o}"?`)&&pl.clearByPredicate(S=>{const z=new Date(S.timestamp),$=new Date;if(o==="Today")return z.toDateString()===$.toDateString();if(o==="Week"){const D=new Date($);return D.setDate($.getDate()-7),z>=D}return o==="Month"?z.getMonth()===$.getMonth()&&z.getFullYear()===$.getFullYear():o==="Year"?z.getFullYear()===$.getFullYear():o==="Custom"&&j&&f?z>=new Date(j)&&z<=new Date(f):!1})};return e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950 pb-20",children:[e.jsx("div",{className:"sticky top-0 z-10 border-b border-slate-200 bg-white/80 px-4 py-4 backdrop-blur-xl dark:border-slate-800 dark:bg-slate-900/80 md:px-6",children:e.jsxs("div",{className:"mx-auto flex max-w-7xl items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"flex h-10 w-10 items-center justify-center rounded-xl border border-slate-200 bg-white text-slate-500 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-400",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Issued Budgets"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Manage and audit budget allocations"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex h-10 items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 text-sm font-semibold text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[e.jsx(ct,{className:"h-4 w-4"})," Export"]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex h-10 items-center gap-2 rounded-xl bg-emerald-600 px-4 text-sm font-semibold text-white hover:bg-emerald-700",children:[e.jsx(ft,{className:"h-4 w-4"})," Issue New"]})]})]})}),e.jsx(sU,{open:r,onClose:()=>i(!1),onSuccess:()=>{}}),e.jsx("div",{className:"mx-auto mt-8 max-w-7xl px-4 md:px-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-800 dark:bg-slate-900",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsx("div",{className:"flex overflow-x-auto rounded-xl bg-slate-100 p-1 dark:bg-slate-950",children:["All","Today","Week","Month","Year","Custom"].map(S=>e.jsx("button",{onClick:()=>d(S),className:aU("rounded-lg px-4 py-1.5 text-xs font-semibold transition-all whitespace-nowrap",o===S?"bg-white text-slate-900 shadow-sm dark:bg-slate-800 dark:text-white":"text-slate-500 hover:text-slate-900 dark:text-slate-400 dark:hover:text-white"),children:S==="All"?"All time":S},S))}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[o==="Custom"&&e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs dark:border-slate-800 dark:bg-slate-900",children:[e.jsx("input",{type:"date",value:j,onChange:S=>y(S.target.value),className:"bg-transparent outline-none dark:text-white"}),e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx("input",{type:"date",value:f,onChange:S=>I(S.target.value),className:"bg-transparent outline-none dark:text-white"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u,onChange:S=>x(S.target.value),className:"h-9 appearance-none rounded-xl border border-slate-200 bg-white pl-3 pr-8 text-xs font-semibold text-slate-700 outline-none hover:border-slate-300 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[e.jsx("option",{value:"All",children:"All Groups"}),nU.map(S=>e.jsx("option",{value:S,children:S},S))]}),e.jsx(Dl,{className:"pointer-events-none absolute right-2.5 top-2.5 h-4 w-4 text-slate-500"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:p,onChange:S=>h(S.target.value),className:"h-9 appearance-none rounded-xl border border-slate-200 bg-white pl-3 pr-8 text-xs font-semibold text-slate-700 outline-none hover:border-slate-300 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-300",children:[e.jsx("option",{value:"All",children:"All Modules"}),rU.map(S=>e.jsx("option",{value:S,children:S},S))]}),e.jsx(Dl,{className:"pointer-events-none absolute right-2.5 top-2.5 h-4 w-4 text-slate-500"})]}),e.jsx("div",{className:"h-6 w-px bg-slate-200 dark:bg-slate-800"}),o!=="All"&&e.jsxs("button",{onClick:C,className:"flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-3 py-1.5 text-xs font-semibold text-rose-700 hover:bg-rose-100 dark:border-rose-900/30 dark:bg-rose-900/20 dark:text-rose-400",children:[e.jsx(bs,{className:"h-3 w-3"})," Clear ",o]}),e.jsxs("button",{onClick:b,disabled:s.length===0,className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-500 hover:bg-slate-50 hover:text-slate-900 disabled:opacity-50 dark:border-slate-800 dark:bg-slate-900 dark:text-slate-400",children:[e.jsx(bs,{className:"h-3 w-3"})," Clear All"]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900",children:A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[e.jsx("div",{className:"grid h-16 w-16 place-items-center rounded-full bg-slate-50 text-slate-300 dark:bg-slate-800 dark:text-slate-600",children:e.jsx(Kd,{className:"h-8 w-8"})}),e.jsx("h3",{className:"mt-4 text-lg font-bold text-slate-900 dark:text-white",children:"No budgets found"}),e.jsx("p",{className:"max-w-xs text-sm text-slate-500",children:"There are no budgets matching your current filters."}),e.jsx("button",{onClick:()=>{d("All"),x("All"),h("All")},className:"mt-6 text-sm font-semibold text-emerald-600 hover:text-emerald-700",children:"Reset filters"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold text-slate-500 dark:bg-slate-950 dark:text-slate-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:"Group"}),e.jsx("th",{className:"px-6 py-4",children:"Module"}),e.jsx("th",{className:"px-6 py-4",children:"Marketplace"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Amount"}),e.jsx("th",{className:"px-6 py-4",children:"Period"}),e.jsx("th",{className:"px-6 py-4 text-center",children:"Hard Cap"}),e.jsx("th",{className:"px-6 py-4 text-right",children:"Issued At"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:A.map(S=>e.jsxs("tr",{className:"group hover:bg-slate-50/80 dark:hover:bg-slate-800/50",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-slate-900 dark:text-white",children:S.group}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:e.jsx("span",{className:"inline-flex items-center gap-1.5 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1 text-xs font-medium dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300",children:S.module==="All"?"All Modules":S.module})}),e.jsx("td",{className:"px-6 py-4 text-slate-500 dark:text-slate-400",children:S.marketplace}),e.jsx("td",{className:"px-6 py-4 text-right font-bold text-emerald-600 dark:text-emerald-400",children:lU(S.amount)}),e.jsx("td",{className:"px-6 py-4 text-slate-600 dark:text-slate-300",children:S.period}),e.jsx("td",{className:"px-6 py-4 text-center",children:S.hardCap?e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-emerald-600",children:[e.jsx(He,{className:"h-3 w-3"})," Enabled"]}):e.jsx("span",{className:"text-xs text-slate-400",children:"Disabled"})}),e.jsx("td",{className:"px-6 py-4 text-right text-slate-500",children:new Date(S.timestamp).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})})]},S.id))})]})})}),e.jsxs("div",{className:"text-center text-xs text-slate-400",children:["Showing ",A.length," of ",s.length," total records"]})]})})]})}function oU(){return Math.random().toString(36).substr(2,9)}function fd(...t){return t.filter(Boolean).join(" ")}function qg({open:t,onClose:s,title:a,children:l,footer:n}){return t?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative z-10 w-full max-w-md overflow-hidden rounded-3xl bg-white shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:[e.jsxs("div",{className:"border-b border-slate-100 px-6 py-4 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:a}),e.jsx("button",{onClick:s,className:"rounded-full p-1 hover:bg-slate-100 text-slate-400",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"p-6",children:l}),n&&e.jsx("div",{className:"bg-slate-50 px-6 py-4 border-t border-slate-100",children:n})]})]}):null}function dU(){const t=ot(),{groupId:s}=na(),{groups:a,members:l,addMember:n,updateMember:r,removeMember:i,updateGroup:o,removeGroup:d}=A0(),u=a.find(Y=>Y.id===s),x=l.filter(Y=>Y.groupId===s),[p,h]=c.useState(""),[j,y]=c.useState("All"),[f,I]=c.useState(!1),[A,b]=c.useState(""),[C,S]=c.useState(""),[z,$]=c.useState("Member"),[D,W]=c.useState(null),[he,V]=c.useState(!1),[xe,pe]=c.useState(""),[be,fe]=c.useState(""),K=x.filter(Y=>{const F=Y.name.toLowerCase().includes(p.toLowerCase())||Y.email.toLowerCase().includes(p.toLowerCase()),G=j==="All"||Y.role===j;return F&&G}),re=()=>{!A||!C||(n({id:oU(),groupId:s||"",name:A,email:C,role:z,status:"Invited",joinedAt:new Date().toISOString()}),b(""),S(""),I(!1))},q=()=>{D&&(r(D.id,{role:D.role,status:D.status}),W(null))},L=()=>{u&&(o(u.id,{name:xe,description:be}),V(!1))},M=()=>{if(!u)return;const Y=u.status==="Active"?"Inactive":"Active";confirm(`Are you sure you want to ${Y==="Inactive"?"deactivate":"activate"} this group?`)&&(o(u.id,{status:Y}),V(!1))},k=()=>{u&&confirm("DANGER: Are you sure you want to DELETE this group? This cannot be undone.")&&(d(u.id),t("/console/settings/groups"))},P=()=>{u&&(pe(u.name),fe(u.description),V(!0))};return u?e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-900",children:[e.jsx("div",{className:"mx-auto max-w-6xl mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"h-10 w-10 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-500 hover:bg-slate-100 transition shadow-sm",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900 opacity-90",children:u.name}),u.status==="Inactive"&&e.jsx("span",{className:"bg-rose-100 text-rose-700 text-xs px-2 py-0.5 rounded font-bold uppercase",children:"Inactive"})]}),e.jsx("p",{className:"text-slate-500 font-medium",children:u.description})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:P,className:"h-10 w-10 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-500 hover:bg-slate-100 hover:text-slate-900 transition shadow-sm",title:"Group Settings",children:e.jsx(kn,{className:"h-5 w-5"})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 px-4 py-2 text-sm font-semibold shadow-sm text-slate-600",children:[x.length," Members"]}),e.jsxs("button",{onClick:()=>I(!0),disabled:u.status==="Inactive",className:"flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 text-sm font-bold text-white hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ft,{className:"h-4 w-4"})," Add Member"]})]})]})}),e.jsxs("div",{className:"mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(js,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx("input",{value:p,onChange:Y=>h(Y.target.value),placeholder:"Search members...",className:"h-10 w-full rounded-xl border border-slate-200 bg-white pl-10 pr-4 text-sm font-semibold outline-none focus:ring-2 focus:ring-emerald-500 shadow-sm"})]}),e.jsx("div",{className:"flex rounded-xl bg-white p-1 border border-slate-200 shadow-sm",children:["All","Manager","Member"].map(Y=>e.jsx("button",{onClick:()=>y(Y),className:fd("px-4 py-1.5 rounded-lg text-xs font-bold transition-all",j===Y?"bg-slate-100 text-slate-900":"text-slate-500 hover:text-slate-700"),children:Y},Y))})]}),e.jsx("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-xl shadow-slate-200/50 overflow-hidden min-h-[300px]",children:K.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-20",children:[e.jsx("div",{className:"h-16 w-16 bg-slate-50 rounded-full flex items-center justify-center mb-4 text-slate-300",children:e.jsx(or,{className:"h-8 w-8"})}),e.jsx("div",{className:"text-slate-500 font-semibold",children:"No members found"})]}):e.jsx("div",{className:"divide-y divide-slate-50",children:K.map(Y=>e.jsxs("div",{className:"p-4 sm:p-5 flex flex-col sm:flex-row sm:items-center gap-4 hover:bg-slate-50/50 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-indigo-50 to-slate-50 flex items-center justify-center text-indigo-600 font-bold text-lg border-2 border-white shadow-sm ring-1 ring-slate-100",children:Y.name.charAt(0)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-slate-900 flex items-center gap-2",children:[Y.name,Y.status==="Invited"&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-amber-50 text-amber-700 text-[10px] uppercase tracking-wider font-bold border border-amber-100",children:"Invited"}),Y.status==="Disabled"&&e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-rose-50 text-rose-700 text-[10px] uppercase tracking-wider font-bold border border-rose-100",children:"Disabled"})]}),e.jsxs("div",{className:"text-sm text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[e.jsx(os,{className:"h-3 w-3"})," ",Y.email]})]})]}),e.jsxs("div",{className:"flex items-center gap-6 sm:justify-end w-full sm:w-auto mt-2 sm:mt-0 pl-16 sm:pl-0",children:[e.jsxs("div",{className:fd("px-3 py-1 rounded-lg text-xs font-bold border flex items-center gap-1.5",Y.role==="Manager"?"bg-purple-50 text-purple-700 border-purple-100":"bg-slate-50 text-slate-600 border-slate-200"),children:[e.jsx(Tt,{className:"h-3 w-3"})," ",Y.role]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>W(Y),className:"p-2 rounded-lg text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition",title:"Edit Role/Status",children:e.jsx(sA,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{confirm("Remove member?")&&i(Y.id)},className:"p-2 rounded-lg text-slate-400 hover:text-rose-600 hover:bg-rose-50 transition",title:"Remove Member",children:e.jsx(bs,{className:"h-4 w-4"})})]})]})]},Y.id))})})]}),e.jsx(qg,{open:f,onClose:()=>I(!1),title:"Add New Member",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100 rounded-xl transition",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:!A||!C,className:"px-4 py-2 font-semibold text-white bg-slate-900 hover:bg-slate-800 rounded-xl transition disabled:opacity-50",children:"Send Invitation"})]}),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Full Name"}),e.jsx("input",{value:A,onChange:Y=>b(Y.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-semibold bg-slate-50 focus:bg-white transition",placeholder:"e.g. Sarah Connor"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Email Address"}),e.jsx("input",{value:C,onChange:Y=>S(Y.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-semibold bg-slate-50 focus:bg-white transition",placeholder:"e.g. sarah@acme.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Role"}),e.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-xl border border-slate-200",children:["Member","Manager"].map(Y=>e.jsx("button",{onClick:()=>$(Y),className:fd("flex-1 py-2 rounded-lg text-sm font-bold transition shadow-sm",z===Y?"bg-white text-slate-900 border border-slate-200":"text-slate-500 hover:text-slate-700 bg-transparent shadow-none"),children:Y},Y))})]})]})}),e.jsx(qg,{open:!!D,onClose:()=>W(null),title:"Edit Member",footer:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>W(null),className:"px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100 rounded-xl transition",children:"Cancel"}),e.jsx("button",{onClick:q,className:"px-4 py-2 font-semibold text-white bg-slate-900 hover:bg-slate-800 rounded-xl transition",children:"Save Changes"})]}),children:D&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center font-bold text-slate-600 text-lg",children:D.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900",children:D.name}),e.jsx("div",{className:"text-sm text-slate-500",children:D.email})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase",children:"Role"}),e.jsxs("select",{value:D.role,onChange:Y=>W({...D,role:Y.target.value}),className:"w-full px-3 py-2.5 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-semibold bg-white cursor-pointer hover:border-slate-300",children:[e.jsx("option",{value:"Member",children:"Member"}),e.jsx("option",{value:"Manager",children:"Manager"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase",children:"Status"}),e.jsxs("select",{value:D.status,onChange:Y=>W({...D,status:Y.target.value}),className:"w-full px-3 py-2.5 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-semibold bg-white cursor-pointer hover:border-slate-300",children:[e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Invited",children:"Invited"}),e.jsx("option",{value:"Disabled",children:"Disabled"})]})]})]})]})}),e.jsx(qg,{open:he,onClose:()=>V(!1),title:"Group Settings",footer:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("button",{onClick:k,className:"px-4 py-2 font-bold text-rose-600 hover:bg-rose-50 rounded-xl transition flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"})," Delete Group"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>V(!1),className:"px-4 py-2 font-semibold text-slate-600 hover:bg-slate-100 rounded-xl transition",children:"Cancel"}),e.jsx("button",{onClick:L,className:"px-4 py-2 font-semibold text-white bg-slate-900 hover:bg-slate-800 rounded-xl transition",children:"Save"})]})]}),children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Group Name"}),e.jsx("input",{value:xe,onChange:Y=>pe(Y.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-semibold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase tracking-wider",children:"Description"}),e.jsx("textarea",{value:be,onChange:Y=>fe(Y.target.value),rows:2,className:"w-full px-4 py-3 rounded-xl border border-slate-200 outline-none focus:ring-2 focus:ring-emerald-500 font-medium text-slate-600 resize-none"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl border border-slate-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900 text-sm",children:"Enforce Tagging"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Require cost center tags on spend"})]}),e.jsx("button",{onClick:()=>{u&&o(u.id,{taggingEnforced:!u.taggingEnforced})},className:fd("relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2",u.taggingEnforced?"bg-emerald-600":"bg-slate-200"),children:e.jsx("span",{className:fd("inline-block h-4 w-4 transform rounded-full bg-white transition-transform",u.taggingEnforced?"translate-x-6":"translate-x-1")})})]})]}),e.jsx("div",{className:"border-t border-slate-100 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900",children:"Group Status"}),e.jsx("div",{className:"text-xs text-slate-500 mt-0.5",children:"Inactive groups cannot spend"})]}),e.jsx("button",{onClick:M,className:fd("px-4 py-2 rounded-xl text-sm font-bold transition border",u.status==="Active"?"bg-white text-rose-600 border-rose-200 hover:bg-rose-50":"bg-emerald-600 text-white border-emerald-600 hover:bg-emerald-700"),children:u.status==="Active"?"Deactivate":"Activate"})]})})]})})]}):e.jsx("div",{className:"p-10 text-center",children:"Group not found"})}function Kk(t){return`UGX ${t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}`}function cU(){const t=ot(),{costCenterId:s}=na(),{costCenters:a,updateCostCenter:l}=A0(),[n,r]=c.useState(null),[i,o]=c.useState(!0),[d,u]=c.useState(""),[x,p]=c.useState(""),[h,j]=c.useState(0),[y,f]=c.useState(!1),[I,A]=c.useState("");c.useEffect(()=>{const C=a.find(S=>S.id===s);C&&(r(C),u(C.name),p(C.code),j(C.spendLimitUGX||0),f(C.tagsRequired),A(C.description||"")),o(!1)},[s,a]);const b=()=>{n&&(l(n.id,{name:d,code:x,spendLimitUGX:h,tagsRequired:y,description:I}),alert("Changes saved successfully"),t(-1))};return i?e.jsx("div",{className:"p-10 text-center",children:"Loading..."}):n?e.jsxs("div",{className:"min-h-screen bg-slate-50 p-4 md:p-8 font-sans text-slate-900 pb-20",children:[e.jsxs("div",{className:"mx-auto max-w-5xl mb-8 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>t(-1),className:"h-10 w-10 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-500 hover:bg-slate-100 transition shadow-sm",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight text-slate-900",children:"Edit Cost Center"}),e.jsx("span",{className:"bg-slate-200 text-slate-600 px-2 py-0.5 rounded text-xs font-mono font-bold",children:n.code})]}),e.jsx("p",{className:"text-slate-500 font-medium",children:"Configure spending rules and limits"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"px-4 py-2 font-semibold text-slate-600 hover:bg-slate-200 rounded-xl transition",children:"Cancel"}),e.jsxs("button",{onClick:b,className:"flex items-center gap-2 px-5 py-2 font-bold text-white bg-slate-900 hover:bg-slate-800 rounded-xl shadow-lg shadow-slate-900/20 transition-all hover:scale-[1.02]",children:[e.jsx(He,{className:"h-4 w-4"})," Save Changes"]})]})]}),e.jsxs("div",{className:"mx-auto max-w-5xl grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm p-6 md:p-8",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center gap-2",children:[e.jsx(Ia,{className:"h-5 w-5 text-emerald-600"})," General Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Cost Center Name"}),e.jsx("input",{value:d,onChange:C=>u(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-semibold outline-none focus:ring-2 focus:ring-emerald-500 transition"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Accounting Code"}),e.jsx("input",{value:x,onChange:C=>p(C.target.value),className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-mono font-semibold outline-none focus:ring-2 focus:ring-emerald-500 transition"})]}),e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Description"}),e.jsx("textarea",{value:I,onChange:C=>A(C.target.value),rows:3,className:"w-full px-4 py-3 rounded-xl border border-slate-200 font-medium text-slate-600 outline-none focus:ring-2 focus:ring-emerald-500 transition resize-none"})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm p-6 md:p-8",children:[e.jsxs("h2",{className:"text-lg font-bold text-slate-900 mb-6 flex items-center gap-2",children:[e.jsx(Tt,{className:"h-5 w-5 text-indigo-600"})," Controls & Limits"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider",children:"Monthly Spend Limit"}),e.jsxs("div",{className:"mt-2 relative",children:[e.jsx(LL,{className:"absolute left-4 top-3.5 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"number",value:h,onChange:C=>j(Number(C.target.value)),className:"w-full pl-12 pr-4 py-3 rounded-xl border border-slate-200 font-bold text-lg text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500 transition"})]}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(rt,{className:"h-3 w-3"})," Transactions exceeding this amount will require executive approval."]})]}),e.jsxs("div",{className:"bg-slate-50 rounded-2xl p-4 border border-slate-200 flex items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-white border border-slate-200 flex items-center justify-center text-slate-600 shrink-0",children:e.jsx(dm,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-900",children:"Enforce Tagging"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Require employees to select project tags for this cost center."})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only peer",checked:y,onChange:C=>f(C.target.checked)}),e.jsx("div",{className:"w-11 h-6 bg-slate-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm p-6",children:[e.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4",children:"Current Month Usage"}),e.jsxs("div",{className:"flex items-end gap-2 mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-900",children:"32%"}),e.jsx("span",{className:"text-sm font-medium text-slate-500 mb-1",children:"used"})]}),e.jsx("div",{className:"h-3 w-full bg-slate-100 rounded-full overflow-hidden mb-2",children:e.jsx("div",{className:"h-full bg-emerald-500 w-[32%]"})}),e.jsxs("div",{className:"flex justify-between text-xs font-semibold text-slate-500",children:[e.jsx("span",{children:Kk(h*.32)}),e.jsx("span",{children:Kk(h)})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm p-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-4 flex items-center gap-2",children:[e.jsx(JS,{className:"h-4 w-4"})," Recent Activity"]}),e.jsxs("div",{className:"space-y-4",children:[[1,2,3].map(C=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-slate-300"}),e.jsx("span",{className:"text-slate-600",children:"Uber Trip"})]}),e.jsx("span",{className:"font-semibold text-slate-900",children:"- UGX 25,000"})]},C)),e.jsx("div",{className:"pt-2 border-t border-slate-100 text-center",children:e.jsx("button",{className:"text-xs font-bold text-indigo-600 hover:text-indigo-700",children:"View All Transactions"})})]})]}),e.jsx("div",{className:"rounded-3xl border border-amber-200 bg-amber-50 p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(at,{className:"h-5 w-5 text-amber-600 shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-amber-900 text-sm",children:"Audit Note"}),e.jsx("p",{className:"text-xs text-amber-800 mt-1 leading-relaxed",children:"Changes to spend limits are logged and may notify the Finance team. Please ensure this change is authorized."})]})]})})]})]})]}):e.jsx("div",{className:"p-10 text-center",children:"Cost Center not found"})}function uU(){const t=ot(),{findMapping:s,costCenters:a}=A0(),[l,n]=c.useState("E-Commerce"),[r,i]=c.useState(""),[o,d]=c.useState(1e5),[u,x]=c.useState(null),p=()=>{const h=s(l,r);let j,y="";h?(j=a.find(f=>f.id===h.targetCostCenterId),y=`Matched rule: "${h.rule}"`):y="No mapping rule found.",x({cc:j,reason:y})};return e.jsx("div",{className:"min-h-screen bg-slate-50 p-6 flex flex-col items-center pt-12",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx("button",{onClick:()=>t(-1),className:"h-10 w-10 flex items-center justify-center rounded-xl bg-white border border-slate-200 text-slate-500 hover:bg-slate-100 transition shadow-sm",children:e.jsx(Ct,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Transaction Simulation"}),e.jsx("p",{className:"text-slate-500",children:"Test how transactions are mapped to cost centers"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-white shadow-sm p-6 space-y-6",children:[e.jsxs("h2",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.jsx(sh,{className:"h-5 w-5 text-emerald-500"})," Transaction Details"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase",children:"Service Module"}),e.jsxs("div",{className:"relative",children:[e.jsx(Uy,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsxs("select",{value:l,onChange:h=>n(h.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 bg-white font-semibold outline-none focus:ring-2 focus:ring-emerald-500 appearance-none",children:[e.jsx("option",{children:"E-Commerce"}),e.jsx("option",{children:"Rides & Logistics"}),e.jsx("option",{children:"CorporatePay"}),e.jsx("option",{children:"Shoppable Adz"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase",children:"Vendor / Merchant"}),e.jsxs("div",{className:"relative",children:[e.jsx(C0,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx("input",{value:r,onChange:h=>i(h.target.value),placeholder:"e.g. Uber, Amazon, EV Charging",className:"w-full pl-10 pr-4 py-2.5 rounded-xl border border-slate-200 font-semibold outline-none focus:ring-2 focus:ring-emerald-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1.5 uppercase",children:"Amount (UGX)"}),e.jsx("input",{type:"number",value:o,onChange:h=>d(Number(h.target.value)),className:"w-full px-4 py-2.5 rounded-xl border border-slate-200 font-semibold outline-none focus:ring-2 focus:ring-emerald-500"})]}),e.jsx("button",{onClick:p,className:"w-full py-3 rounded-xl bg-slate-900 text-white font-bold hover:bg-slate-800 transition shadow-lg shadow-slate-900/10",children:"Simulate Transaction"})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 bg-slate-50 p-6 flex flex-col",children:[e.jsxs("h2",{className:"font-bold text-slate-900 flex items-center gap-2 mb-6",children:[e.jsx(nr,{className:"h-5 w-5 text-blue-500"})," Mapping Result"]}),u?e.jsxs("div",{className:"flex-1 flex flex-col justify-center animate-in fade-in slide-in-from-bottom-4",children:[u.cc?e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-emerald-100 shadow-sm text-center space-y-2",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 mb-2",children:e.jsx(Ia,{className:"h-6 w-6"})}),e.jsx("div",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider",children:"Assigned Cost Center"}),e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:u.cc.name}),e.jsx("div",{className:"text-sm font-mono text-slate-500 bg-slate-100 inline-block px-2 py-1 rounded",children:u.cc.code}),e.jsx("div",{className:"pt-4 mt-4 border-t border-slate-100 text-xs text-slate-500",children:u.reason}),e.jsx("div",{className:"pt-2 text-xs",children:u.cc.spendLimitUGX&&o>u.cc.spendLimitUGX?e.jsxs("div",{className:"text-rose-600 font-bold flex items-center justify-center gap-1",children:[e.jsx(at,{className:"h-3 w-3"})," Exceeds Limit (",u.cc.spendLimitUGX,")"]}):e.jsxs("div",{className:"text-emerald-600 font-bold flex items-center justify-center gap-1",children:[e.jsx(nr,{className:"h-3 w-3"})," Within Budget"]})})]}):e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-amber-200 shadow-sm text-center",children:[e.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mb-3",children:e.jsx(at,{className:"h-6 w-6"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"No Match Found"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Transaction would require manual cost center selection."})]}),e.jsxs("button",{onClick:()=>x(null),className:"mt-8 mx-auto flex items-center gap-2 text-sm font-semibold text-slate-500 hover:text-slate-900",children:[e.jsx(om,{className:"h-3 w-3"})," Reset"]})]}):e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-slate-400 text-sm",children:[e.jsx("div",{className:"p-4 rounded-full bg-slate-100 mb-3",children:e.jsx(sh,{className:"h-6 w-6 text-slate-300"})}),e.jsx("p",{children:"Enter details and click Simulate to see results."})]})]})]})]})})}function mU(){const t=ot(),{id:s}=na(),[a]=Tj(),l=a.get("outcome")||"Success",n=a.get("action")||"Unknown Action",r=a.get("target")||"Unknown Target",i=a.get("why")||"No reason provided",o=a.get("actor")||"Unknown",d=a.get("when")||"Unknown time",u=l==="Blocked";return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Audit Log"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold hover:bg-slate-50",children:[e.jsx(By,{className:"h-4 w-4"})," Share"]}),e.jsxs("button",{className:"flex items-center gap-2 rounded-xl bg-slate-900 px-4 py-2 text-sm font-semibold text-white hover:bg-slate-800",children:[e.jsx(ct,{className:"h-4 w-4"})," Export JSON"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs("div",{className:`rounded-[32px] border p-8 shadow-sm ${u?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`grid h-14 w-14 place-items-center rounded-2xl ${u?"bg-amber-100 text-amber-600":"bg-blue-50 text-blue-600"}`,children:u?e.jsx(at,{className:"h-7 w-7"}):e.jsx(jt,{className:"h-7 w-7"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Audit Log Event"}),e.jsxs("p",{className:"mt-1 font-mono text-sm text-slate-500",children:["ID: ",s||"A-XXXX"]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500",children:"Event Properties"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-2xl bg-white/80 p-4 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"Action"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:n})]}),e.jsxs("div",{className:"rounded-2xl bg-white/80 p-4 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"Outcome"}),e.jsxs("div",{className:`mt-1 flex items-center gap-2 font-medium ${u?"text-amber-700":"text-emerald-700"}`,children:[u?e.jsx(Ly,{className:"h-4 w-4"}):e.jsx(He,{className:"h-4 w-4"}),l]})]}),e.jsxs("div",{className:"rounded-2xl bg-white/80 p-4 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"Resource Target"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:r})]}),e.jsxs("div",{className:"rounded-2xl bg-white/80 p-4 border border-slate-100",children:[e.jsx("span",{className:"text-xs font-semibold text-slate-500",children:"Reason"}),e.jsx("div",{className:"mt-1 font-medium text-slate-900",children:i})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-slate-500",children:"Raw Data"}),e.jsx("div",{className:"mt-4 rounded-2xl bg-slate-900 p-4 font-mono text-xs text-slate-300 overflow-x-auto",children:`{
  "id": "${s}",
  "timestamp": "2024-03-20T10:23:45Z",
  "actor": "${o}",
  "action": "${n}",
  "target": "${r}",
  "outcome": "${l}",
  "reason": "${i}",
  "metadata": {
    "ip": "192.168.1.1",
    "ua": "Mozilla/5.0..."
  }
}`})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Actor Details"}),e.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[e.jsx("div",{className:"grid h-12 w-12 place-items-center rounded-full bg-slate-100",children:e.jsx(or,{className:"h-6 w-6 text-slate-500"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:o}),e.jsxs("div",{className:"text-sm text-slate-500",children:[o.toLowerCase(),"@acme.com"]})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Role"}),e.jsx("span",{className:"font-medium text-slate-900",children:o})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"IP Address"}),e.jsx("span",{className:"font-mono text-slate-900",children:"197.10.20.2"})]})]})]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-6 shadow-sm",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Timeline"}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:`relative pl-6 before:absolute before:left-0 before:top-2 before:h-2 before:w-2 before:rounded-full ${u?"before:bg-amber-400":"before:bg-emerald-400"}`,children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:u?"Action Blocked":"Action Completed"}),e.jsx("div",{className:"text-xs text-slate-500",children:d})]}),e.jsxs("div",{className:"relative pl-6 before:absolute before:left-0 before:top-2 before:h-2 before:w-2 before:rounded-full before:bg-slate-300",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Request Initiated"}),e.jsx("div",{className:"text-xs text-slate-500",children:d})]})]})]})]})]})]})})}function xU(){const t=ot(),{id:s}=na();return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Devices"]})}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-start md:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"grid h-16 w-16 place-items-center rounded-3xl bg-slate-100 text-slate-600",children:e.jsx(Tm,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Chrome on MacBook Pro"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsxs("span",{className:"inline-flex items-center rounded-full bg-slate-100 px-2.5 py-0.5 text-xs font-semibold text-slate-700",children:["ID: ",s]}),e.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-50 px-2.5 py-0.5 text-xs font-semibold text-emerald-700",children:"Trusted"})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("button",{className:"flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100",children:[e.jsx(AL,{className:"h-4 w-4"})," Revoke Trust"]})})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-900",children:[e.jsx(Tt,{className:"h-5 w-5 text-slate-500"}),e.jsx("h3",{className:"font-semibold",children:"Security Score"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-3xl font-bold text-slate-900",children:"Low Risk"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"No anomalies detected"})]})]}),e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-900",children:[e.jsx(nn,{className:"h-5 w-5 text-slate-500"}),e.jsx("h3",{className:"font-semibold",children:"Location"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Kampala, Uganda"}),e.jsx("p",{className:"text-sm text-slate-500",children:"IP: 197.23.12.44"})]})]}),e.jsxs("div",{className:"rounded-3xl bg-slate-50 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-900",children:[e.jsx(_r,{className:"h-5 w-5 text-slate-500"}),e.jsx("h3",{className:"font-semibold",children:"Activity"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg font-semibold text-slate-900",children:"Active Now"}),e.jsx("p",{className:"text-sm text-slate-500",children:"First seen: 20 days ago"})]})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Device Fingerprint"}),e.jsx("div",{className:"mt-4 rounded-xl border border-slate-200 bg-slate-50 p-4",children:e.jsx("code",{className:"text-sm text-slate-600",children:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"})})]})]})]})})}function pU(){const t=ot(),{id:s}=na(),[a]=Tj(),l=a.get("result")||"Success",n=a.get("risk")||"Low",r=a.get("device")||"Unknown Device",i=a.get("location")||"Unknown Location",o=a.get("ip")||"0.0.0.0",d=a.get("when")||"Unknown time",u=a.get("reason")||"",x=l==="Failed",p=n==="High",h=n==="Medium",j=p?85:h?45:5;return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Logins"]}),e.jsxs("div",{className:`rounded-[32px] border p-8 shadow-sm ${p?"border-rose-200 bg-rose-50":h?"border-amber-200 bg-amber-50":"border-slate-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:`grid h-20 w-20 place-items-center rounded-full ${p?"bg-rose-100":h?"bg-amber-100":"bg-slate-100"}`,children:e.jsx(UL,{className:`h-10 w-10 ${p?"text-rose-600":h?"text-amber-600":"text-slate-600"}`})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Login Attempt"}),e.jsxs("p",{className:"text-slate-500",children:["Event ID: ",s]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:d})]}),e.jsx("div",{className:"ml-auto",children:e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm font-semibold ${x?"bg-amber-100 text-amber-700":"bg-emerald-50 text-emerald-700"}`,children:[x?e.jsx(Ly,{className:"h-4 w-4"}):e.jsx(XS,{className:"h-4 w-4"}),l]})})]}),e.jsx("div",{className:"mt-8 border-t border-slate-100 pt-8",children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-500",children:[e.jsx(Po,{className:"h-4 w-4"})," Location"]}),e.jsx("div",{className:"mt-2 text-lg font-medium text-slate-900",children:i}),e.jsxs("div",{className:"text-sm text-slate-500",children:["IP: ",o]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"flex items-center gap-2 text-sm font-semibold text-slate-500",children:[e.jsx(Tm,{className:"h-4 w-4"})," Device"]}),e.jsx("div",{className:"mt-2 text-lg font-medium text-slate-900",children:r})]}),u&&e.jsxs("div",{className:"rounded-xl bg-amber-50 border border-amber-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-700 font-semibold text-sm",children:[e.jsx(at,{className:"h-4 w-4"})," Reason"]}),e.jsx("div",{className:"mt-1 text-sm text-amber-800",children:u})]})]}),e.jsxs("div",{className:`rounded-3xl p-6 ${p?"bg-rose-100":h?"bg-amber-100":"bg-slate-50"}`,children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-slate-900",children:[e.jsx(Ld,{className:`h-5 w-5 ${p?"text-rose-500":h?"text-amber-500":"text-slate-500"}`})," Risk Analysis"]}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2 text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Geo Velocity"}),e.jsx("span",{className:`font-medium ${p?"text-rose-600":h?"text-amber-600":"text-emerald-600"}`,children:p?"Anomaly Detected":h?"Suspicious":"Normal"})]}),e.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-2 text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Device Reputation"}),e.jsx("span",{className:`font-medium ${p?"text-rose-600":h?"text-amber-600":"text-emerald-600"}`,children:p?"Untrusted":h?"Unknown":"Trusted"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-600",children:"Overall Risk Score"}),e.jsxs("span",{className:`font-bold ${p?"text-rose-700":h?"text-amber-700":"text-slate-900"}`,children:[j,"/100 (",n,")"]})]})]})]})]})})]})]})})}function hU(){const t=ot(),{keyId:s}=na();return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Keys"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"grid h-16 w-16 place-items-center rounded-2xl bg-amber-50 text-amber-600",children:e.jsx(yr,{className:"h-8 w-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"API Key Rotation"}),e.jsxs("p",{className:"text-slate-500",children:["Key ID: ",s]})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-3xl border border-slate-100 p-6",children:[e.jsx("h2",{className:"mb-4 font-semibold text-slate-900",children:"Event Details"}),e.jsxs("ul",{className:"space-y-4",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(om,{className:"mt-0.5 h-5 w-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Action Type"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Manual Rotation"})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(_r,{className:"mt-0.5 h-5 w-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Timestamp"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Today, 10:45 AM"})]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(or,{className:"mt-0.5 h-5 w-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Initiated By"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Admin User"})]})]})]})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-100 p-6",children:[e.jsx("h2",{className:"mb-4 font-semibold text-slate-900",children:"Security Context"}),e.jsx("ul",{className:"space-y-4",children:e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Ra,{className:"mt-0.5 h-5 w-5 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:"Dual Control"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Verified (2 Approvers)"})]})]})}),e.jsx("div",{className:"mt-6 rounded-xl bg-slate-50 p-4 text-xs text-slate-500",children:"The previous key version will remain active for 24 hours to allow for graceful rollover."})]})]})]})]})})}function fU(){const t=ot(),{id:s}=na(),[a]=Tj(),l=a.get("status")||"Queued",n=a.get("scope")||"Unknown Scope",r=a.get("createdAt")||"Unknown time",i=a.get("includes")||"",o=i?i.split(","):["audit","hashes"],d=l==="Ready",u=l==="Failed",x=l==="Running";return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Forensics"]}),e.jsxs("div",{className:`rounded-[32px] border p-8 shadow-sm ${d?"border-emerald-200 bg-emerald-50":u?"border-rose-200 bg-rose-50":"border-slate-200 bg-white"}`,children:[e.jsxs("div",{className:"flex flex-col gap-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:`grid h-20 w-20 place-items-center rounded-3xl ${d?"bg-emerald-100 text-emerald-600":u?"bg-rose-100 text-rose-600":"bg-indigo-50 text-indigo-600"}`,children:e.jsx(VL,{className:"h-10 w-10"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Forensics Export"}),e.jsxs("p",{className:"text-slate-500",children:["Job ID: ",s]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:["Scope: ",n]})]})]}),d?e.jsxs("button",{className:"flex items-center gap-2 rounded-2xl bg-emerald-600 px-6 py-3 font-semibold text-white shadow-lg shadow-emerald-200 hover:bg-emerald-700",children:[e.jsx(y1,{className:"h-5 w-5"})," Download Archive"]}):e.jsxs("button",{disabled:!0,className:"flex items-center gap-2 rounded-2xl bg-slate-300 px-6 py-3 font-semibold text-slate-500 cursor-not-allowed",children:[e.jsx(y1,{className:"h-5 w-5"})," Not Available"]})]}),e.jsxs("div",{className:"mt-10 grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"rounded-3xl border border-slate-200 p-6 bg-white/80",children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Contents"}),e.jsx("div",{className:"mt-4 space-y-3",children:o.map((p,h)=>e.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-slate-50 p-3",children:[e.jsx(jt,{className:"h-5 w-5 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-700 capitalize",children:p})]},h))})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`rounded-3xl p-6 ${d?"bg-emerald-100":u?"bg-rose-100":"bg-slate-50"}`,children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:"Status"}),e.jsxs("div",{className:`mt-4 flex items-center gap-2 ${d?"text-emerald-600":u?"text-rose-600":x?"text-blue-600":"text-slate-600"}`,children:[d?e.jsx(XS,{className:"h-5 w-5"}):u?e.jsx(Ly,{className:"h-5 w-5"}):x?e.jsx(eA,{className:"h-5 w-5 animate-spin"}):e.jsx(_r,{className:"h-5 w-5"}),e.jsx("span",{className:"font-medium",children:d?"Ready for Download":u?"Export Failed":x?"Processing...":"Queued"})]}),e.jsxs("div",{className:"mt-2 text-sm text-slate-500",children:["Created: ",r]}),d&&e.jsx("div",{className:"mt-1 text-sm text-slate-500",children:"Size: 42.5 MB"}),u&&e.jsx("div",{className:"mt-1 text-sm text-rose-600",children:"Please try again or contact support."})]}),e.jsxs("div",{className:"rounded-3xl border border-slate-200 p-6 bg-white",children:[e.jsxs("h3",{className:"flex items-center gap-2 font-semibold text-slate-900",children:[e.jsx(lt,{className:"h-4 w-4 text-amber-500"})," Legal Hold"]}),e.jsx("p",{className:"mt-2 text-sm text-slate-600",children:"This export is immutable and logged in the audit trail."})]})]})]})]})]})})}const Xk={green:"#03CD8C"};function gU(){const t=ot(),{policyId:s}=na(),a=s==="new",[l,n]=c.useState(a?"New Policy":"CorporatePay high value requires approval"),[r,i]=c.useState("Draft"),[o,d]=c.useState("Require approval"),[u,x]=c.useState("CorporatePay"),[p,h]=c.useState("500000"),[j,y]=c.useState("Above approval threshold"),[f,I]=c.useState(!1),[A,b]=c.useState(!1),C=()=>{b(!0),setTimeout(()=>t(-1),1500)};return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-4xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Policies"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"grid h-14 w-14 place-items-center rounded-2xl text-white",style:{background:Xk.green},children:e.jsx(Ra,{className:"h-7 w-7"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:a?"Create Policy":"Edit Policy"}),e.jsxs("p",{className:"text-slate-500",children:["ID: ",s]})]})]}),!a&&e.jsxs("button",{className:"flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100",children:[e.jsx(bs,{className:"h-4 w-4"})," Delete"]})]}),A&&e.jsxs("div",{className:"mt-6 rounded-2xl bg-emerald-50 border border-emerald-200 p-4 flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-emerald-700 font-medium",children:"Policy saved successfully!"})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Policy Name"}),e.jsx("input",{value:l,onChange:S=>n(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Module"}),e.jsxs("select",{value:u,onChange:S=>x(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"CorporatePay"}),e.jsx("option",{children:"E-Commerce"}),e.jsx("option",{children:"Services"}),e.jsx("option",{children:"EV Charging"}),e.jsx("option",{children:"Rides & Logistics"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Amount Threshold (UGX)"}),e.jsx("input",{value:p,onChange:S=>h(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Action"}),e.jsxs("select",{value:o,onChange:S=>d(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"Allow"}),e.jsx("option",{children:"Require approval"}),e.jsx("option",{children:"Require attestation"}),e.jsx("option",{children:"Block"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Status"}),e.jsxs("select",{value:r,onChange:S=>i(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Reason"}),e.jsx("input",{value:j,onChange:S=>y(S.target.value),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100"})]})]})]}),e.jsx("div",{className:"mt-6 rounded-2xl border border-slate-200 bg-slate-50 p-4",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:S=>I(S.target.checked),className:"h-5 w-5 rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Require attachment for this policy"})]})}),e.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),"Draft policies must be activated to take effect"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"rounded-2xl border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Cancel"}),e.jsxs("button",{onClick:C,className:"flex items-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white shadow-lg",style:{background:Xk.green},children:[e.jsx(Vr,{className:"h-4 w-4"})," Save Policy"]})]})]})]})]})})}const Yk={green:"#03CD8C",orange:"#F77F00"};function vU(){const t=ot(),[s,a]=c.useState(!1),[l,n]=c.useState([{id:"SC-1",name:"High value CorporatePay",description:"Transaction above 500k UGX",module:"CorporatePay",expectedDecision:"Require approval",result:"Pass",lastRun:"2 hours ago"},{id:"SC-2",name:"Missing cost center",description:"No cost center assigned",module:"CorporatePay",expectedDecision:"Block",result:"Pass",lastRun:"2 hours ago"},{id:"SC-3",name:"Large refund with attachment",description:"Refund over 150k UGX",module:"E-Commerce",expectedDecision:"Require attestation",result:"Warning",lastRun:"1 day ago"},{id:"SC-4",name:"Blocked vendor attempt",description:"Vendor contains 'banned'",module:"Marketplace",expectedDecision:"Block",result:"Pending",lastRun:"Never"},{id:"SC-5",name:"Normal low value transaction",description:"Transaction under threshold",module:"Services",expectedDecision:"Allow",result:"Pass",lastRun:"2 hours ago"}]),r=()=>{a(!0),setTimeout(()=>{n(x=>x.map(p=>({...p,result:Math.random()>.2?"Pass":Math.random()>.5?"Warning":"Fail",lastRun:"Just now"}))),a(!1)},2e3)},i=x=>{switch(x){case"Pass":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"Fail":return"bg-rose-50 text-rose-700 border-rose-200";case"Warning":return"bg-amber-50 text-amber-700 border-amber-200";default:return"bg-slate-50 text-slate-700 border-slate-200"}},o=x=>{switch(x){case"Pass":return e.jsx(He,{className:"h-4 w-4"});case"Fail":return e.jsx(at,{className:"h-4 w-4"});case"Warning":return e.jsx(at,{className:"h-4 w-4"});default:return e.jsx(_r,{className:"h-4 w-4"})}},d=l.filter(x=>x.result==="Pass").length,u=l.filter(x=>x.result==="Fail").length;return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Policies"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"grid h-14 w-14 place-items-center rounded-2xl text-white",style:{background:Yk.orange},children:e.jsx(jt,{className:"h-7 w-7"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Policy Scenarios"}),e.jsx("p",{className:"text-slate-500",children:"Test your policies with predefined scenarios"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{className:"flex items-center gap-2 rounded-xl border border-slate-200 bg-white px-4 py-2 text-sm font-semibold hover:bg-slate-50",children:[e.jsx(ft,{className:"h-4 w-4"})," Add Scenario"]}),e.jsxs("button",{onClick:r,disabled:s,className:"flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold text-white shadow-lg disabled:opacity-50",style:{background:Yk.green},children:[e.jsx(sh,{className:"h-4 w-4"})," ",s?"Running...":"Run All"]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl bg-emerald-50 border border-emerald-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:d}),e.jsx("div",{className:"text-sm text-emerald-600",children:"Passing"})]}),e.jsxs("div",{className:"rounded-2xl bg-rose-50 border border-rose-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-rose-700",children:u}),e.jsx("div",{className:"text-sm text-rose-600",children:"Failing"})]}),e.jsxs("div",{className:"rounded-2xl bg-slate-50 border border-slate-200 p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:l.length}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total"})]})]}),e.jsx("div",{className:"mt-8 space-y-3",children:l.map(x=>e.jsx("div",{className:`rounded-2xl border p-4 transition-all hover:shadow-md ${i(x.result)}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold",children:x.name}),e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-white/50",children:x.module})]}),e.jsx("div",{className:"mt-1 text-sm opacity-80",children:x.description}),e.jsxs("div",{className:"mt-2 text-xs opacity-60",children:["Expected: ",x.expectedDecision,"  Last run: ",x.lastRun]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[o(x.result),e.jsx("span",{className:"font-semibold",children:x.result})]})]})},x.id))})]})]})})}const zg={green:"#03CD8C",orange:"#F77F00"};function bU({toasts:t,onDismiss:s}){return e.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-50 w-80 space-y-2",children:e.jsx(qe,{initial:!1,children:t.map(a=>e.jsx(ke.div,{initial:{opacity:0,y:-10,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.98},className:"pointer-events-auto rounded-2xl border border-slate-200 bg-white p-4 shadow-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`mt-0.5 grid h-6 w-6 place-items-center rounded-full ${a.kind==="success"?"bg-emerald-100 text-emerald-600":"bg-blue-100 text-blue-600"}`,children:a.kind==="success"?e.jsx(He,{className:"h-4 w-4"}):e.jsx(By,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1 text-sm font-semibold text-slate-900",children:a.title}),e.jsx("button",{onClick:()=>s(a.id),className:"text-slate-400 hover:text-slate-600",children:e.jsx(_e,{className:"h-4 w-4"})})]})},a.id))})})}function jU(){const t=ot(),{id:s}=na(),[a,l]=c.useState([]),[n,r]=c.useState(!1),[i,o]=c.useState(!1),d=(p,h="info")=>{const j=Math.random().toString(36);l(y=>[...y,{id:j,title:p,kind:h}]),setTimeout(()=>l(y=>y.filter(f=>f.id!==j)),3e3)},u=()=>{r(!0),setTimeout(()=>{r(!1),d("Receipt downloaded successfully","success")},2e3)},x=p=>{o(!1),d(`Shared via ${p}`,"success")};return e.jsxs("div",{className:"min-h-screen bg-slate-50",children:[e.jsx(bU,{toasts:a,onDismiss:p=>l(h=>h.filter(j=>j.id!==p))}),e.jsxs("div",{className:"mx-auto max-w-2xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"p-8 text-center",style:{background:`linear-gradient(135deg, ${zg.green}, ${zg.orange})`},children:[e.jsx("div",{className:"mx-auto grid h-16 w-16 place-items-center rounded-full bg-white/20 backdrop-blur",children:e.jsx(zL,{className:"h-8 w-8 text-white"})}),e.jsx("h1",{className:"mt-4 text-2xl font-bold text-white",children:"Transaction Receipt"}),e.jsxs("p",{className:"text-white/80",children:["REF-",(s==null?void 0:s.toUpperCase())||"XXXX"]})]}),e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-4",children:[e.jsx("span",{className:"text-slate-500",children:"Status"}),e.jsxs("span",{className:"flex items-center gap-2 text-emerald-600 font-semibold",children:[e.jsx(He,{className:"h-4 w-4"})," Approved"]})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Amount"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:"UGX 540,000"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Vendor"}),e.jsx("span",{className:"font-semibold text-slate-900",children:"Acme Supplies Ltd"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Category"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Office Supplies"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Cost Center"}),e.jsx("span",{className:"font-medium text-slate-700",children:"CC-PROC"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Date"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Jan 28, 2026"})]})]}),e.jsxs("div",{className:"mt-6 rounded-2xl bg-emerald-50 border border-emerald-200 p-4",children:[e.jsx("div",{className:"text-sm font-semibold text-emerald-800",children:"Policy Decision"}),e.jsx("div",{className:"mt-1 text-sm text-emerald-700",children:"Approved via approval workflow"}),e.jsx("div",{className:"mt-2 text-xs text-emerald-600",children:"Matched: CorporatePay high value requires approval"})]}),e.jsxs("div",{className:"mt-6 rounded-2xl bg-slate-50 border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wider",children:"Payment Method"}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx(k0,{className:"h-5 w-5 text-slate-400"}),e.jsx("span",{className:"font-medium text-slate-700",children:"Corporate Wallet  4532"})]})]}),e.jsxs("div",{className:"mt-8 flex gap-3 relative",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("button",{onClick:()=>o(!i),className:"w-full flex items-center justify-center gap-2 rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:[e.jsx(By,{className:"h-4 w-4"})," Share"]}),e.jsx(qe,{children:i&&e.jsxs(ke.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full left-0 mb-2 w-full rounded-2xl border border-slate-200 bg-white shadow-xl overflow-hidden z-10",children:[e.jsxs("button",{onClick:()=>x("WeChat"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 text-left text-sm font-medium text-slate-700 border-b border-slate-100",children:[e.jsx(_y,{className:"h-4 w-4 text-green-600"})," WeChat"]}),e.jsxs("button",{onClick:()=>x("WhatsApp"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 text-left text-sm font-medium text-slate-700 border-b border-slate-100",children:[e.jsx(Id,{className:"h-4 w-4 text-emerald-500"})," WhatsApp"]}),e.jsxs("button",{onClick:()=>x("Email"),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-slate-50 text-left text-sm font-medium text-slate-700",children:[e.jsx(os,{className:"h-4 w-4 text-blue-500"})," Email"]})]})})]}),e.jsx("button",{onClick:u,disabled:n,className:"flex-1 flex items-center justify-center gap-2 rounded-2xl px-4 py-3 text-sm font-semibold text-white transition-all active:scale-95 disabled:opacity-70 disabled:active:scale-100",style:{background:zg.green},children:n?e.jsxs(e.Fragment,{children:[e.jsx(eA,{className:"h-4 w-4 animate-spin"})," Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4"})," Download PDF"]})})]})]})]})]})]})}const Gg={green:"#03CD8C"};function Wg(){return Math.random().toString(36).substr(2,9)}function yU(){const t=ot(),{id:s}=na(),a=s==="new",[l,n]=c.useState(null),[r,i]=c.useState(!0),[o,d]=c.useState(!1),[u,x]=c.useState(null),[p,h]=c.useState(null);c.useEffect(()=>{if(a)n({id:`F-${Wg()}`,name:"New Workflow",status:"Draft",appliesTo:"Purchases",thresholdCurrency:"UGX",thresholdAmount:1e5,stages:[{id:`S-${Wg()}`,name:"Manager Approval",type:"Manager",requiredApprovers:1,delegatesAllowed:!0,escalationAfter:"24h",notifyChannels:["In-app","Email"],note:"First level approval"}],lastEdited:"Just now"});else{const S=Rr.getById(s);n(S||{id:s,name:"Workflow not found",status:"Draft",appliesTo:"Purchases",thresholdCurrency:"UGX",thresholdAmount:0,stages:[],lastEdited:"Now"})}i(!1)},[s,a]);const j=()=>{l&&(Rr.save(l),d(!0),setTimeout(()=>t(-1),1e3))},y=()=>{l&&confirm("Are you sure you want to delete this workflow?")&&(Rr.delete(l.id),t(-1))},f=()=>{if(!l)return;const S={id:`S-${Wg()}`,name:"New Stage",type:"Custom",requiredApprovers:1,delegatesAllowed:!1,escalationAfter:"48h",notifyChannels:["In-app"],note:"Description here"};n({...l,stages:[...l.stages,S]}),x(S.id),h(S)},I=S=>{l&&confirm("Delete this stage?")&&(n({...l,stages:l.stages.filter(z=>z.id!==S)}),u===S&&(x(null),h(null)))},A=S=>{x(S.id),h({...S})},b=()=>{!l||!p||(n({...l,stages:l.stages.map(S=>S.id===p.id?p:S)}),x(null),h(null))},C=S=>{p&&h({...p,notifyChannels:p.notifyChannels.includes(S)?p.notifyChannels.filter(z=>z!==S):[...p.notifyChannels,S]})};return r||!l?e.jsx("div",{className:"p-8",children:"Loading..."}):e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Workflows"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"grid h-14 w-14 place-items-center rounded-2xl text-white",style:{background:Gg.green},children:e.jsx(jl,{className:"h-7 w-7"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:a?"Create Workflow":"Edit Workflow"}),e.jsxs("p",{className:"text-slate-500",children:["ID: ",l.id]})]})]}),!a&&e.jsxs("button",{onClick:y,className:"flex items-center gap-2 rounded-xl border border-rose-200 bg-rose-50 px-4 py-2 text-sm font-semibold text-rose-700 hover:bg-rose-100",children:[e.jsx(bs,{className:"h-4 w-4"})," Delete"]})]}),o&&e.jsxs("div",{className:"mt-6 rounded-2xl bg-emerald-50 border border-emerald-200 p-4 flex items-center gap-3",children:[e.jsx(He,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-emerald-700 font-medium",children:"Workflow saved successfully!"})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Workflow Name"}),e.jsx("input",{value:l.name,onChange:S=>n({...l,name:S.target.value}),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Applies To"}),e.jsxs("select",{value:l.appliesTo,onChange:S=>n({...l,appliesTo:S.target.value}),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"Purchases"}),e.jsx("option",{children:"Payouts"}),e.jsx("option",{children:"Refunds"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Status"}),e.jsxs("select",{value:l.status,onChange:S=>n({...l,status:S.target.value}),className:"w-full rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"Draft"}),e.jsx("option",{children:"Active"}),e.jsx("option",{children:"Archived"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Auto-Approve Under"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:l.thresholdCurrency,onChange:S=>n({...l,thresholdCurrency:S.target.value}),className:"w-24 rounded-2xl border border-slate-200 px-3 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",children:[e.jsx("option",{children:"UGX"}),e.jsx("option",{children:"USD"}),e.jsx("option",{children:"KES"})]}),e.jsx("input",{value:l.thresholdAmount,onChange:S=>n({...l,thresholdAmount:Number(S.target.value)||0}),className:"flex-1 rounded-2xl border border-slate-200 px-4 py-3 text-sm font-medium focus:outline-none focus:ring-4 focus:ring-emerald-100",type:"number"})]})]})]})]}),e.jsxs("div",{className:"mt-10 border-t border-slate-100 pt-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Approval Stages"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Define the sequential approval chain"})]}),e.jsxs("button",{onClick:f,className:"flex items-center gap-2 rounded-xl border-2 border-dashed border-slate-300 px-4 py-2 text-sm font-semibold text-slate-600 hover:border-emerald-300 hover:bg-emerald-50 hover:text-emerald-700",children:[e.jsx(ft,{className:"h-4 w-4"})," Add Stage"]})]}),e.jsxs("div",{className:"space-y-4",children:[l.stages.map((S,z)=>e.jsx("div",{className:`relative rounded-2xl border transition-all ${u===S.id?"border-emerald-500 ring-4 ring-emerald-50 bg-white":"border-slate-200 bg-slate-50"}`,children:u===S.id&&p?e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"font-bold text-slate-900",children:["Edit Stage ",z+1]}),e.jsx("button",{onClick:()=>x(null),className:"text-slate-400 hover:text-slate-600",children:e.jsx(_e,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Stage Name"}),e.jsx("input",{value:p.name,onChange:$=>h({...p,name:$.target.value}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Approver Role"}),e.jsxs("select",{value:p.type,onChange:$=>h({...p,type:$.target.value}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm",children:[e.jsx("option",{value:"Manager",children:"Manager"}),e.jsx("option",{value:"Finance",children:"Finance"}),e.jsx("option",{value:"Risk",children:"Risk"}),e.jsx("option",{value:"Custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Required Approvers"}),e.jsx("input",{type:"number",value:p.requiredApprovers,onChange:$=>h({...p,requiredApprovers:Number($.target.value)||1}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Escalation After"}),e.jsx("input",{value:p.escalationAfter,onChange:$=>h({...p,escalationAfter:$.target.value}),className:"mt-1 w-full rounded-xl border border-slate-200 bg-white px-3 py-2 text-sm"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase block mb-2",children:"Notification Channels"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["In-app","Email","WhatsApp","WeChat","SMS"].map($=>e.jsx("button",{onClick:()=>C($),className:`px-3 py-1.5 rounded-lg text-xs font-medium border transition-colors ${p.notifyChannels.includes($)?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:$},$))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[e.jsx("button",{onClick:()=>I(S.id),className:"px-4 py-2 text-sm font-semibold text-rose-600 hover:bg-rose-50 rounded-xl mr-auto",children:"Delete Stage"}),e.jsx("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:bg-slate-100 rounded-xl",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-6 py-2 text-sm font-semibold text-white rounded-xl shadow-lg",style:{background:Gg.green},children:"Save Changes"})]})]}):e.jsxs("div",{className:"p-4 flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"grid h-8 w-8 place-items-center rounded-full bg-white border border-slate-200 text-sm font-bold text-slate-500",children:z+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:S.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[e.jsx("span",{children:S.type}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-300"}),e.jsxs("span",{children:[S.requiredApprovers," approver",S.requiredApprovers>1?"s":""]}),e.jsx("span",{className:"h-1 w-1 rounded-full bg-slate-300"}),e.jsxs("span",{children:[S.notifyChannels.length," channels"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>A(S),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg",children:e.jsx(sA,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>I(S.id),className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 rounded-lg",children:e.jsx(bs,{className:"h-4 w-4"})})]})]})},S.id)),!l.stages.length&&e.jsxs("div",{className:"text-center py-10 rounded-2xl border-2 border-dashed border-slate-200 text-slate-400",children:[e.jsx("p",{children:"No stages defined yet."}),e.jsx("button",{onClick:f,className:"mt-2 text-sm font-semibold text-emerald-600 hover:underline",children:"Add the first stage"})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[e.jsx(rt,{className:"h-4 w-4"}),"Changes saved to local storage"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"rounded-2xl border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Back"}),e.jsxs("button",{onClick:j,className:"flex items-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white shadow-lg",style:{background:Gg.green},children:[e.jsx(Vr,{className:"h-4 w-4"})," Save Workflow"]})]})]})]})]})})}const NU={green:"#03CD8C"};function wU(){const t=ot(),[s,a]=c.useState(!1),[l,n]=c.useState([{id:"1",name:"Request Submission",status:"Approved",approvers:["John Doe"],timestamp:"Just now"},{id:"2",name:"Manager Approval",status:"Pending",approvers:["Sarah Manager"]},{id:"3",name:"Finance Review",status:"Pending",approvers:["Finance Team"]}]),r=()=>{a(!0),n([{id:"1",name:"Request Submission",status:"Approved",approvers:["John Doe"],timestamp:"Just now"},{id:"2",name:"Manager Approval",status:"in_progress",approvers:["Sarah Manager"]},{id:"3",name:"Finance Review",status:"Pending",approvers:["Finance Team"]}]),setTimeout(()=>{n(i=>i.map(o=>o.id==="2"?{...o,status:"Approved",timestamp:"2 mins later",comments:"Approved via WhatsApp"}:o)),n(i=>i.map(o=>o.id==="3"?{...o,status:"in_progress"}:o))},2e3),setTimeout(()=>{n(i=>i.map(o=>o.id==="3"?{...o,status:"Approved",timestamp:"5 mins later",comments:"Budget verified"}:o)),a(!1)},4500)};return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Workflow Simulator"}),e.jsx("p",{className:"text-slate-500",children:"Preview how approvals flow in real-time"})]}),e.jsxs("button",{onClick:r,disabled:s,className:"flex items-center gap-2 rounded-xl px-6 py-3 text-sm font-semibold text-white shadow-lg disabled:opacity-50 transition-all hover:scale-105",style:{background:s?"#64748b":NU.green},children:[s?e.jsx(om,{className:"h-4 w-4 animate-spin"}):e.jsx(sh,{className:"h-4 w-4"}),s?"Simulating...":"Start Simulation"]})]}),e.jsx("div",{className:"relative pl-8 border-l-2 border-slate-100 space-y-8",children:l.map((i,o)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`absolute -left-[41px] flex h-8 w-8 items-center justify-center rounded-full border-4 border-white ${i.status==="Approved"?"bg-emerald-500 text-white":i.status==="in_progress"?"bg-amber-500 text-white animate-pulse":"bg-slate-200 text-slate-400"}`,children:i.status==="Approved"?e.jsx(nr,{className:"h-4 w-4"}):i.status==="in_progress"?e.jsx(_r,{className:"h-4 w-4"}):e.jsx("span",{className:"text-xs font-bold",children:o+1})}),e.jsxs("div",{className:`rounded-2xl border p-5 transition-all ${i.status==="in_progress"?"border-amber-200 bg-amber-50 shadow-md transform scale-105":"border-slate-200 bg-white"}`,children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900",children:i.name}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-sm text-slate-500",children:[e.jsx(or,{className:"h-3 w-3"}),i.approvers.join(", ")]})]}),i.timestamp&&e.jsx("span",{className:"text-xs font-medium text-slate-400 bg-slate-100 px-2 py-1 rounded-lg",children:i.timestamp})]}),i.comments&&e.jsxs("div",{className:"mt-4 flex gap-3 text-sm bg-white/50 p-3 rounded-xl border border-slate-200/50",children:[e.jsx(Mm,{className:"h-4 w-4 text-slate-400 mt-0.5"}),e.jsxs("span",{className:"text-slate-600 italic",children:['"',i.comments,'"']})]}),i.status==="in_progress"&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-amber-700 font-medium",children:[e.jsx(_r,{className:"h-3 w-3"})," Waiting for approval..."]})]})]},i.id))})]})]})})}const Qk={green:"#03CD8C",orange:"#F77F00"};function kU(...t){return t.filter(Boolean).join(" ")}function CU({label:t,tone:s="neutral"}){const a={good:"bg-emerald-50 text-emerald-700 ring-emerald-200",warn:"bg-amber-50 text-amber-800 ring-amber-200",bad:"bg-rose-50 text-rose-700 ring-rose-200",info:"bg-blue-50 text-blue-700 ring-blue-200",neutral:"bg-slate-50 text-slate-700 ring-slate-200"};return e.jsx("span",{className:kU("inline-flex items-center rounded-full px-2.5 py-1 text-xs font-semibold ring-1",a[s]),children:t})}function SU(t){return t==="Approved"?"good":t==="Rejected"?"bad":t==="Escalated"?"warn":"info"}function AU(){const t=ot(),{id:s}=na(),[a,l]=c.useState(null),[n,r]=c.useState(""),[i,o]=c.useState(!1);c.useEffect(()=>{if(s){const x=Sr.getById(s);l(x||null)}},[s]);const d=x=>{if(!a)return;const p=x==="Approve"?"Approved":"Rejected";Sr.updateStatus(a.id,p,n||void 0),o(!0),setTimeout(()=>t(-1),1500)};if(!a)return e.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-slate-500",children:"Approval not found."}),e.jsx("button",{onClick:()=>t(-1),className:"mt-4 text-emerald-600 underline",children:"Go back"})]})});const u=a.status==="Pending"||a.status==="Escalated";return e.jsx("div",{className:"min-h-screen bg-slate-50",children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-8",children:[e.jsxs("button",{onClick:()=>t(-1),className:"mb-6 flex items-center gap-2 rounded-2xl bg-white px-4 py-2 text-sm font-semibold text-slate-600 shadow-sm hover:bg-slate-50",children:[e.jsx(Ct,{className:"h-4 w-4"})," Back to Inbox"]}),e.jsxs("div",{className:"rounded-[32px] border border-slate-200 bg-white p-8 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-900",children:[a.requestType," Approval"]}),e.jsx("p",{className:"text-slate-500",children:a.id})]}),e.jsx(CU,{label:a.status,tone:SU(a.status)})]}),i&&e.jsxs("div",{className:"mb-6 rounded-2xl bg-emerald-50 border border-emerald-200 p-4 flex items-center gap-3",children:[e.jsx(nr,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"text-emerald-700 font-medium",children:"Action saved successfully!"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:"Amount"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.currency," ",a.amount.toLocaleString()]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:"SLA Status"}),a.sla.breached?e.jsxs("div",{className:"flex items-center gap-2 text-rose-600 font-semibold text-lg",children:[e.jsx(at,{className:"h-5 w-5"})," Breached"]}):e.jsxs("div",{className:"flex items-center gap-2 text-slate-700 text-lg",children:[e.jsx(pa,{className:"h-5 w-5"})," Due in ",a.sla.dueIn]})]})]}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 mb-6",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:"Details"}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Organization"}),e.jsx("span",{className:"font-semibold",children:a.orgName})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Module"}),e.jsx("span",{className:"font-semibold",children:a.module})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Requester"}),e.jsx("span",{className:"font-semibold",children:a.requester})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Created"}),e.jsx("span",{className:"font-semibold",children:a.createdAt})]}),a.workflow&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-500",children:"Workflow"}),e.jsx("span",{className:"font-semibold",children:a.workflow})]})]})]}),e.jsx("div",{className:"rounded-2xl border border-slate-200 bg-slate-50 p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rt,{className:"h-5 w-5 text-slate-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:"Policy Reason"}),e.jsx("div",{className:"text-sm text-slate-700 mt-1",children:a.policyWhy})]})]})}),e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 mb-6",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-3",children:"Audit Trail"}),e.jsx("div",{className:"space-y-2",children:a.auditTrail.map((x,p)=>e.jsxs("div",{className:"flex justify-between text-sm border-b border-slate-100 pb-2 last:border-0",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900",children:x.action}),e.jsxs("span",{className:"text-slate-500 ml-2",children:["by ",x.who]})]}),e.jsx("span",{className:"text-slate-400",children:x.when})]},p))})]}),u&&e.jsxs("div",{className:"rounded-2xl border border-slate-200 p-4 mb-6",children:[e.jsx("div",{className:"text-xs text-slate-500 uppercase font-semibold mb-2",children:"Add Comment"}),e.jsx("textarea",{value:n,onChange:x=>r(x.target.value),rows:3,placeholder:"Optional comment for audit trail...",className:"w-full rounded-xl border border-slate-200 px-3 py-2 text-sm focus:outline-none focus:ring-4 focus:ring-emerald-100"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"flex-1 rounded-2xl border border-slate-200 bg-white px-6 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-50",children:"Back"}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>d("Reject"),className:"flex-1 flex items-center justify-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white",style:{background:Qk.orange},children:[e.jsx(_e,{className:"h-4 w-4"})," Reject"]}),e.jsxs("button",{onClick:()=>d("Approve"),className:"flex-1 flex items-center justify-center gap-2 rounded-2xl px-6 py-3 text-sm font-semibold text-white shadow-lg",style:{background:Qk.green},children:[e.jsx(nr,{className:"h-4 w-4"})," Approve"]})]})]})]})]})})}const EU=[{path:Mt.CONSOLE.ROOT,element:e.jsx(xt,{children:ds.createElement(mt)})},{path:`${Mt.CONSOLE.ROOT}/:pageId`,element:e.jsx(xt,{children:ds.createElement(mt)})},{path:`${Mt.CONSOLE.ROOT}/:pageId/:subPageId`,element:e.jsx(xt,{children:ds.createElement(mt)})},{path:"/console/wallet-switch",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx($B,{})})})},{path:"/console/access-request",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(IB,{})})})},{path:"/console/settings/org/entities",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(VB,{})})})},{path:"/console/settings/org/kyb",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(qB,{})})})},{path:"/console/settings/modules",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(WB,{})})})},{path:"/console/settings/modules/:moduleId",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(KB,{})})})},{path:"/console/settings/org/go-live",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(YB,{})})})},{path:"/console/admin",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(BA,{})})})},{path:"/console/settings/simulate",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(uU,{})})})},{path:"/console/settings/org/setup",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(xA,{})})})},{path:"/console/settings/users",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(Sb,{})})})},{path:"/console/users",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(Sb,{})})})},{path:"/console/users/:userId",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(jA,{})})})},{path:"/console/users/:userId/edit",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(yA,{})})})},{path:"/console/users/:userId/security",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(NA,{})})})},{path:"/console/users/:userId/permissions",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(wA,{})})})},{path:"/console/users/:userId/activity",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(kA,{})})})},{path:"/console/settings/groups",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(fA,{})})})},{path:"/console/settings/groups/:groupId/members",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(dU,{})})})},{path:"/console/settings/groups/cost-centers/:costCenterId/edit",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(cU,{})})})},{path:"/console/settings/roles",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(gA,{})})})},{path:"/console/settings/roles/:roleName/edit",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(CA,{})})})},{path:"/console/settings/policies",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(vA,{})})})},{path:"/console/settings/policies/:policyId/edit",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(gU,{})})})},{path:"/console/settings/policies/scenarios",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(vU,{})})})},{path:"/console/receipt/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(jU,{})})})},{path:"/console/settings/approvals/workflows",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(bA,{})})})},{path:"/console/settings/approvals/workflows/:id/edit",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(yU,{})})})},{path:"/console/settings/approvals/workflows/preview",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(wU,{})})})},{path:"/console/approvals/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(AU,{})})})},{path:"/console/settings/budgets",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(AA,{})})})},{path:"/console/settings/budgets-issued",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(iU,{})})})},{path:"/console/settings/billing",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(TA,{})})})},{path:"/console/reports",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx($A,{})})})},{path:"/console/reports/esg",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(IA,{})})})},{path:"/console/settings/integrations",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(LA,{})})})},{path:"/console/settings/security",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(FA,{})})})},{path:"/console/settings/security/audit/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(mU,{})})})},{path:"/console/settings/security/devices/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(xU,{})})})},{path:"/console/settings/security/logins/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(pU,{})})})},{path:"/console/settings/security/keys/:keyId",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(hU,{})})})},{path:"/console/settings/security/forensics/:id",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(fU,{})})})},{path:"/console/settings/support-tools",element:e.jsx(xt,{children:e.jsx(mt,{children:e.jsx(_A,{})})})}],PU=[{path:Mt.PAGES_PREVIEW,element:ds.createElement(OB)}];function MU(){return e.jsx(lF,{children:e.jsxs(cM,{children:[aF.map(t=>e.jsx(gd,{path:t.path,element:t.element},t.path)),EU.map(t=>e.jsx(gd,{path:t.path,element:t.element},t.path)),NF.map(t=>e.jsx(gd,{path:t.path,element:t.element},t.path)),PU.map(t=>e.jsx(gd,{path:t.path,element:t.element},t.path)),e.jsx(gd,{path:"*",element:e.jsx(bC,{to:Mt.HOME,replace:!0})})]})})}class TU extends ds.Component{constructor(){super(...arguments);Yy(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,l){console.error("ErrorBoundary caught:",a,l)}render(){var a;return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-slate-50 px-4 py-10",children:e.jsx("div",{className:"mx-auto max-w-3xl",children:e.jsxs(SO,{severity:"error",variant:"outlined",children:[e.jsx(FO,{children:"Something went wrong"}),e.jsx("div",{className:"mt-2 text-sm",children:((a=this.state.error)==null?void 0:a.message)||"An unexpected error occurred."}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(n2,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:"Reload"}),e.jsx(n2,{variant:"outlined",onClick:()=>this.setState({hasError:!1,error:void 0}),children:"Dismiss"})]})]})})}):this.props.children}}const Hg={green:"#03CD8C",orange:"#F77F00",slate:"#0F172A"},RU=nD(x3({palette:{primary:{main:Hg.green},secondary:{main:Hg.orange},background:{default:"#F8FAFC",paper:"#FFFFFF"},text:{primary:Hg.slate}},shape:{borderRadius:16},typography:{fontFamily:["ui-sans-serif","system-ui","-apple-system","Segoe UI","Roboto","Helvetica","Arial","Apple Color Emoji","Segoe UI Emoji"].join(","),button:{textTransform:"none",fontWeight:700}},components:{MuiButton:{styleOverrides:{root:{borderRadius:18}}},MuiPaper:{styleOverrides:{root:{borderRadius:22}}}}}));Kg.createRoot(document.getElementById("root")).render(e.jsx(ds.StrictMode,{children:e.jsx(TU,{children:e.jsx(VC,{injectFirst:!0,children:e.jsxs(PD,{theme:RU,children:[e.jsx(QO,{}),e.jsx(vM,{children:e.jsx(MU,{})})]})})})}));
